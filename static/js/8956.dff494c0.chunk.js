"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[8956],{8956:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var r=i(6326),a=i(19276),s=(i(76460),i(81806),i(47249),i(50076),i(87990)),n=i(56286),d=i(57383),o=i(91196);let l=class extends((0,d.q)((0,n.e)(o.A))){constructor(){super(...arguments),this.unsupportedItemTypes=["Scene Service"],this.layerViews=new a.A}attach(){this.addAttachHandles([this.layerViews.on("after-changes",()=>this._updateStageChildren()),this.enableLayerUpdates()])}detach(){this.container.removeAllChildren()}update(e){this.updateLayers()}viewChange(){}moveEnd(){this.requestUpdate()}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach((e,t)=>this.container.addChildAt(e.container,t))}};l=(0,r.Cg)([(0,s.$)("esri.views.2d.layers.CatalogDynamicGroupLayerView2D")],l);const u=l},57383:(e,t,i)=>{i.d(t,{q:()=>p});var r=i(6326),a=i(19276),s=i(54901),n=i(76460),d=i(50346),o=i(34154),l=i(46053),u=(i(81806),i(47249),i(87990));const c=Symbol(),p=e=>{const t=e;let i=class extends t{constructor(){super(...arguments),this.layerViews=new a.A,this._debouncedUpdate=(0,d.sg)(async()=>{const{layer:e,parent:t}=this,i=null===t||void 0===t?void 0:t.footprintLayerView;let r=[];const a=this._createQuery();if(a&&i){const{features:t}=await i.queryFeatures(a);this.suspended||(r=t.map(t=>e.acquireLayer(t)))}this.removeHandles(c),this.addHandles(r,c)})}get creatingLayerViews(){var e,t;return null!==(e=null===(t=this.view)||void 0===t?void 0:t.layerViewManager.isCreatingLayerViewsForLayer(this.layer))&&void 0!==e&&e}isUpdating(){return this.creatingLayerViews||this.layer.updating||this.layerViews.some(e=>e.updating)}enableLayerUpdates(){return(0,s.vE)([this._updatingHandles.addWhen(()=>{var e;return!1===(null===(e=this.parent)||void 0===e||null===(e=e.footprintLayerView)||void 0===e?void 0:e.dataUpdating)},()=>this.updateLayers()),this._updatingHandles.add(()=>{var e,t,i;return[this.layer.maximumVisibleSublayers,null===(e=this.layer.parent)||void 0===e?void 0:e.orderBy,null===(t=this.parent)||void 0===t||null===(t=t.footprintLayerView)||void 0===t?void 0:t.filter,null===(i=this.parent)||void 0===i||null===(i=i.footprintLayerView)||void 0===i?void 0:i.timeExtent,this.suspended]},()=>this.updateLayers()),(0,s.hA)(()=>this.removeHandles(c))])}updateLayers(){this.suspended?this.removeHandles(c):this._updatingHandles.addPromise((0,d.QZ)(this._debouncedUpdate()).catch(e=>{n.A.getLogger(this).error(e)}))}_createQuery(){var e,t;const i=null===(e=this.parent)||void 0===e?void 0:e.footprintLayerView,r=null===(t=this.layer)||void 0===t?void 0:t.parent;if(!i||!r||r.destroyed)return null;const{layer:{maximumVisibleSublayers:a},view:{scale:s}}=this;if(!a)return null;const{itemTypeField:n,itemSourceField:d,itemNameField:l,minScaleField:u,maxScaleField:c,objectIdField:p,orderBy:h}=r,y=(0,o.mA)("".concat(u," IS NULL OR ").concat(s," <= ").concat(u," OR ").concat(u," = 0"),"".concat(c," IS NULL OR ").concat(s," >= ").concat(c)),v=null===h||void 0===h?void 0:h.find(e=>e.field&&!e.valueExpression),m=i.createQuery();if(m.returnGeometry=!1,m.num=a,m.outFields=[p,d,l],m.where=(0,o.mA)(m.where,y),null!=this.unsupportedItemTypes){const e="".concat(n," NOT IN (").concat(this.unsupportedItemTypes.map(e=>"'".concat(e,"'")),")");m.where=(0,o.mA)(m.where,e)}return null!==v&&void 0!==v&&v.field&&(m.orderByFields=["".concat(v.field," ").concat("descending"===v.order?"DESC":"ASC")],m.outFields.push(v.field)),m}};return(0,r.Cg)([(0,l.MZ)({readOnly:!0})],i.prototype,"creatingLayerViews",null),(0,r.Cg)([(0,l.MZ)()],i.prototype,"layer",void 0),(0,r.Cg)([(0,l.MZ)()],i.prototype,"layerViews",void 0),(0,r.Cg)([(0,l.MZ)({readOnly:!0})],i.prototype,"unsupportedItemTypes",void 0),(0,r.Cg)([(0,l.MZ)()],i.prototype,"parent",void 0),(0,r.Cg)([(0,l.MZ)({readOnly:!0})],i.prototype,"isUpdating",null),i=(0,r.Cg)([(0,u.$)("esri.views.layers.CatalogDynamicGroupLayerView")],i),i}}}]);
//# sourceMappingURL=8956.dff494c0.chunk.js.map