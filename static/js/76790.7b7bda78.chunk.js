"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[76790],{14303:(e,t,i)=>{i.d(t,{A:()=>g});var o,r=i(6326),n=i(42553),s=i(53084),l=i(62754),a=i(46053),u=(i(81806),i(76460),i(87990)),d=i(17707),c=i(37546),h=i(65215),p=i(56611);let g=o=class extends n.o{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,t,i,o){var r;if(null!==(r=o.layer)&&void 0!==r&&r.spatialReference&&!o.layer.spatialReference.equals(this.geometry.spatialReference)){if(!(0,p.canProjectWithoutEngine)(e.spatialReference,o.layer.spatialReference))return void((null===o||void 0===o?void 0:o.messages)&&o.messages.push(new l.A("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:o.layer.spatialReference,context:o})));const r=new h.A;(0,p.projectPolygon)(e,r,o.layer.spatialReference),t[i]=r.toJSON(o)}else t[i]=e.toJSON(o)}clone(){return new o({geometry:(0,s.o8)(this.geometry),type:this.type})}};(0,r.Cg)([(0,a.MZ)({type:h.A}),(0,c.P)()],g.prototype,"geometry",void 0),(0,r.Cg)([(0,d.K)(["web-scene","portal-item"],"geometry")],g.prototype,"writeGeometry",null),(0,r.Cg)([(0,a.MZ)({type:["clip","mask","replace"],nonNullable:!0}),(0,c.P)()],g.prototype,"type",void 0),g=o=(0,r.Cg)([(0,u.$)("esri.layers.support.SceneModification")],g)},23456:(e,t,i)=>{i.d(t,{_8:()=>y,dJ:()=>m,uB:()=>v});var o=i(89379),r=i(15941),n=i(20664),s=i(9392),l=i(34111),a=i(76797),u=i(91605),d=i(13312),c=i(45308);function h(e,t){if(!Array.isArray(e)||e.length<t)return!1;for(const i of e)if("number"!=typeof i)return!1;return!0}const p=7645211,g={xmin:-180,ymin:-90,zmin:-450,xmax:180,ymax:90,zmax:8850},f=new Map([[5773,new u.A({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM96_Geoid"})],[3855,new u.A({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM2008_Geoid"})],[115700,new u.A({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"WGS_1984"})],[115701,new u.A({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"ETRS_1989"})],[6360,new u.A({heightModel:"gravity-related-height",heightUnit:"us-feet",vertCRS:"NAVD88_height_(ftUS)"})],[7837,new u.A({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"DHHN2016_(height) "})]]);function m(e){if(!e)return null;const t=e.vcsWkid||e.latestVcsWkid;return t?f.get(t):null}function y(e){var t,i,o,r,n;return!(!(null!==(t=e.extensions)&&void 0!==t&&null!==(t=t.ESRI_crs)&&void 0!==t&&t.wkid||null!==(i=e.extensions)&&void 0!==i&&null!==(i=i.ESRI_crs)&&void 0!==i&&i.latestWkid||null!==(o=e.extensions)&&void 0!==o&&null!==(o=o.ESRI_crs)&&void 0!==o&&o.wkt)||(null===(r=e.root)||void 0===r||null===(r=r.extensions)||void 0===r||null===(r=r.ESRI_crs)||void 0===r||null===(r=r.boundingVolume)||void 0===r||!r.box)&&(null===(n=e.root)||void 0===n||null===(n=n.extensions)||void 0===n||null===(n=n.ESRI_crs)||void 0===n||null===(n=n.boundingVolume)||void 0===n||!n.sphere))}function v(e){var t,i,u,f,m,y,v,A,_,S;let w=arguments.length>1&&void 0!==arguments[1]&&arguments[1],x=new d.A({wkid:4326,vcsWkid:115700}),R=null===(t=e.root)||void 0===t?void 0:t.boundingVolume,b=!1,M=null===e||void 0===e||null===(i=e.root)||void 0===i?void 0:i.transform;if(w&&(null!==(u=e.extensions)&&void 0!==u&&null!==(u=u.ESRI_crs)&&void 0!==u&&u.wkid||null!==(f=e.extensions)&&void 0!==f&&null!==(f=f.ESRI_crs)&&void 0!==f&&f.latestWkid||null!==(m=e.extensions)&&void 0!==m&&null!==(m=m.ESRI_crs)&&void 0!==m&&m.wkt)&&(null!==(y=e.root)&&void 0!==y&&null!==(y=y.extensions)&&void 0!==y&&null!==(y=y.ESRI_crs)&&void 0!==y&&null!==(y=y.boundingVolume)&&void 0!==y&&y.box||null!==(v=e.root)&&void 0!==v&&null!==(v=v.extensions)&&void 0!==v&&null!==(v=v.ESRI_crs)&&void 0!==v&&null!==(v=v.boundingVolume)&&void 0!==v&&v.sphere))x=new d.A(null===(A=e.extensions)||void 0===A?void 0:A.ESRI_crs),R=null===(_=e.root)||void 0===_||null===(_=_.extensions)||void 0===_||null===(_=_.ESRI_crs)||void 0===_?void 0:_.boundingVolume,M=null===(S=e.root)||void 0===S?void 0:S.transform,b=!0;else if(!R)return new a.A(-180,-90,180,90,x);if(R.box){var T;const e=null===(T=R)||void 0===T?void 0:T.box;if(e[3]>p&&e[7]>p&&e[11]>p)return new a.A((0,o.A)((0,o.A)({},g),{},{spatialReference:x}))}const E=(0,s.vt)();if(!b&&R.region&&h(R.region,6)){const e=R.region,t=(0,r.KJ)(e[0]),i=(0,r.KJ)(e[1]),o=e[4],n=(0,r.KJ)(e[2]),s=(0,r.KJ)(e[3]),l=e[5];return new a.A({xmin:t,ymin:i,zmin:o,xmax:n,ymax:s,zmax:l,spatialReference:x})}if(R.sphere&&h(R.sphere,4)){const e=R.sphere,t=(0,s.fA)(e[0],e[1],e[2]),i=e[3]/Math.sqrt(3),o=(0,s.vt)();(0,n.e)(o,t,(0,s.fA)(i,i,i));const r=(0,s.vt)();if((0,n.g)(r,t,(0,s.fA)(i,i,i)),M&&h(M,16)){const e=M;(0,n.t)(E,o,e),(0,n.d)(o,E),(0,n.t)(E,r,e),(0,n.d)(r,E)}b||((0,c.projectBuffer)(o,l.Ro,0,o,d.A.WGS84,0),(0,c.projectBuffer)(r,l.Ro,0,r,d.A.WGS84,0));const u=(0,s.vt)(),p=(0,s.vt)();return(0,n.A)(u,o,r),(0,n.z)(p,o,r),new a.A({xmin:u[0],ymin:u[1],zmin:u[2],xmax:p[0],ymax:p[1],zmax:p[2],spatialReference:x})}if(R.box&&h(R.box,12)){const e=R.box,t=(0,s.fA)(e[0],e[1],e[2]),i=(0,s.fA)(e[3],e[4],e[5]),o=(0,s.fA)(e[6],e[7],e[8]),r=(0,s.fA)(e[9],e[10],e[11]),u=[];for(let n=0;n<8;++n)u.push((0,s.vt)());if((0,n.g)(u[0],t,i),(0,n.g)(u[0],u[0],o),(0,n.g)(u[0],u[0],r),(0,n.a)(u[1],t,i),(0,n.g)(u[1],u[1],o),(0,n.g)(u[1],u[1],r),(0,n.g)(u[2],t,i),(0,n.a)(u[2],u[2],o),(0,n.g)(u[2],u[2],r),(0,n.a)(u[3],t,i),(0,n.a)(u[3],u[3],o),(0,n.g)(u[3],u[3],r),(0,n.g)(u[4],t,i),(0,n.g)(u[4],u[4],o),(0,n.a)(u[4],u[4],r),(0,n.a)(u[5],t,i),(0,n.g)(u[5],u[5],o),(0,n.a)(u[5],u[5],r),(0,n.g)(u[6],t,i),(0,n.a)(u[6],u[6],o),(0,n.a)(u[6],u[6],r),(0,n.a)(u[7],t,i),(0,n.a)(u[7],u[7],o),(0,n.a)(u[7],u[7],r),M&&h(M,16)){const e=M;for(let t=0;t<8;++t)(0,n.t)(u[t],u[t],e)}const p=(0,s.fA)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),g=(0,s.fA)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let s=0;s<8;++s)b||(0,c.projectBuffer)(u[s],l.Ro,0,u[s],d.A.WGS84,0),(0,n.A)(g,g,u[s]),(0,n.z)(p,p,u[s]);return new a.A({xmin:g[0],ymin:g[1],zmin:g[2],xmax:p[0],ymax:p[1],zmax:p[2],spatialReference:x})}return new a.A(-180,-90,180,90,x)}},49050:(e,t,i)=>{i.d(t,{A:()=>p});var o,r=i(89379),n=i(6326),s=i(3825),l=i(19276),a=i(42553),u=i(90534),d=i(46053),c=(i(81806),i(76460),i(47249),i(87990)),h=i(14303);let p=o=class extends((0,a.T)(l.A.ofType(h.A))){constructor(e){super(e),this.url=null}clone(){return new o({url:this.url,items:this.items.map(e=>e.clone())})}toJSON(e){return this.toArray().map(t=>t.toJSON(e)).filter(e=>!!e.geometry)}static fromJSON(e,t){const i=new o;for(const o of e)i.add(h.A.fromJSON(o,t));return i}static async fromUrl(e,t,i){const n={url:(0,u.An)(e),origin:"service"},l=await(0,s.A)(e,{responseType:"json",signal:null===i||void 0===i?void 0:i.signal}),a=t.toJSON(),d=[];for(const o of l.data)d.push(h.A.fromJSON((0,r.A)((0,r.A)({},o),{},{geometry:(0,r.A)({spatialReference:a},o.geometry)}),n));return new o({url:e,items:d})}};(0,n.Cg)([(0,d.MZ)({type:String})],p.prototype,"url",void 0),p=o=(0,n.Cg)([(0,c.$)("esri.layers.support.SceneModifications")],p)},76790:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var o=i(6326),r=i(3825),n=i(50076),s=i(76460),l=i(77717),a=i(50346),u=i(68134),d=i(46053),c=(i(81806),i(47249),i(28379)),h=i(87990),p=i(37546),g=i(76797),f=i(13312),m=i(25515),y=i(12406),v=i(19502),A=i(31362),_=i(11270),S=i(94729),w=i(5682),x=i(95363),R=i(49050),b=i(23456),M=i(44568),T=i(12482),E=i(79453),k=i(50917);let C=class extends((0,v.b)((0,_.q)((0,S.A)((0,w.j)((0,l.P)((0,A.d)((0,y.p)(m.A)))))))){readModifications(e,t,i){this._modificationsSource={url:(0,E.f)(e,i),context:i}}initialize(){this.addHandles((0,u.on)(()=>this.modifications,"after-changes",()=>this.modifications=this.modifications,u.OH))}constructor(e){super(e),this.operationalLayerType="IntegratedMesh3DTilesLayer",this.modifications=null,this._modificationsSource=null,this.spatialReference=new f.A({wkid:4326,vcsWkid:115700}),this.fullExtent=new g.A(-180,-90,180,90,this.spatialReference),this.url=null,this.type="integrated-mesh-3dtiles",this.path=null,this.minScale=0,this.maxScale=0,this._rootTilesetJSON=null,this._rootTileset=null,this._key=null,this._session=null,this._rootRequestPromise=null}set elevationInfo(e){null!=e&&"absolute-height"!==e.mode||this._set("elevationInfo",e),this._validateElevationInfo(e)}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}get rootTilesetJSON(){return this._rootTilesetJSON}get rootTileset(){return this._rootTileset}get key(){return this._key}get session(){return this._session}_findSessionParameter(e){const t=[e];for(;(null===t||void 0===t?void 0:t.length)>0;){const e=t.pop();if(!e)return;for(const[o,r]of Object.entries(e)){if("uri"===o)try{const e=new URL("https://tmp"+r).searchParams.get("session");if(e)return e}catch(i){}"object"==typeof r&&null!==r&&t.push(r)}}return null}async requestRootAndSession(e){const t=(e,t)=>new n.A("3dtiles-init:"+e,t);return this._rootRequestPromise||(this._rootRequestPromise=new Promise((i,o)=>{this.url||o(t("url-missing","Layer url missing")),this._key=this.customParameters?this.customParameters.key:null,new Promise((e,i)=>{if(this.replacesTerrain&&!this._key){var o,n;const s=(null===(o=this.portalItem)||void 0===o?void 0:o.portal)||(null===(n=this.parent)||void 0===n||null===(n=n.portalItem)||void 0===n?void 0:n.portal)||M.A.getDefault();s.signIn().then(()=>{s.g3dTilesEnabled?(0,r.A)(s.restUrl+"/portals/self/modules/g3dtiles",{responseType:"json",query:{f:"json"}}).then(t=>{this._key=t.data.keyString,e()},()=>i(t("g3dtiles-key-error","Error fetching Google 3D Tiles key from portal"))):i(t("g3dTilesEnabled-false","Google 3D Tiles are not enabled on Portal "+s.url))},()=>i(t("sign-in-failed","Error signing in to Portal")))}else e()}).then(()=>{(0,r.A)(this.url,{query:this._key?{key:this._key,token:this.apiKey}:{token:this.apiKey},responseType:"array-buffer",signal:e}).then(e=>{try{this._rootTilesetJSON=JSON.parse((new TextDecoder).decode(e.data))}catch(r){return void o(t("root-parse-failed","Error parsing root tile, details: "+r))}this._rootTilesetJSON?(this._session=this._findSessionParameter(this._rootTilesetJSON),this._rootTileset=e.data,this.fullExtent=(0,b.uB)(this._rootTilesetJSON),i(),this._rootRequestPromise=null):o(t("root-is-null","Root tile is null."))},e=>{(0,a.QP)(e),o(t("root-load-failed","Error loading root tile")),this._rootRequestPromise=null,s.A.getLogger("IntegratedMesh3DTilesLayer").error("Layer loading failed",e)})},e=>o(e))})),this._rootRequestPromise}async _doLoad(e){const t=null!=e?e.signal:null;if(this._isUsedAsGroundLayer)throw new n.A("3dtiles-init:not-supported-in-groundlayers","Layer is not supported in basemap.");try{await this.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:e=>{var t;if(null!==(t=e.typeKeywords)&&void 0!==t&&t.includes("IntegratedMesh"))return!0;throw new n.A("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service containing IntegratedMesh"})}},e)}catch(i){(0,a.QP)(i)}if(null!=this._modificationsSource){const t=await R.A.fromUrl(this._modificationsSource.url,this.spatialReference,e);this.setAtOrigin("modifications",t,this._modificationsSource.context.origin),this._modificationsSource=null}await this.requestRootAndSession(t)}beforeSave(){if(null!=this._modificationsSource)return this.load().then(()=>{},()=>{})}get hasAttributionData(){return!1}async fetchAttributionData(){return{}}_validateElevationInfo(e){const t="Integrated mesh 3d tiles layers";(0,T.XF)(s.A.getLogger(this),(0,T.B)(t,"absolute-height",e)),(0,T.XF)(s.A.getLogger(this),(0,T.tW)(t,e))}get replacesTerrain(){return!1}get _isUsedAsGroundLayer(){return(0,k.S)(this.parent)}get hasGoogleUrl(){var e;return!(null===(e=this.url)||void 0===e||!e.match(/.+\.googleapis.com/))}};(0,o.Cg)([(0,d.MZ)({type:["IntegratedMesh3DTilesLayer"]})],C.prototype,"operationalLayerType",void 0),(0,o.Cg)([(0,d.MZ)({type:R.A,clonable:e=>e.clone()}),(0,p.P)({origins:["web-scene","portal-item"],type:"resource",prefix:"modifications"})],C.prototype,"modifications",void 0),(0,o.Cg)([(0,c.w)(["web-scene","portal-item"],"modifications")],C.prototype,"readModifications",null),(0,o.Cg)([(0,d.MZ)({type:f.A})],C.prototype,"spatialReference",void 0),(0,o.Cg)([(0,d.MZ)({type:g.A})],C.prototype,"fullExtent",void 0),(0,o.Cg)([(0,d.MZ)(x.Yj)],C.prototype,"elevationInfo",null),(0,o.Cg)([(0,d.MZ)({type:["show","hide"]})],C.prototype,"listMode",void 0),(0,o.Cg)([(0,d.MZ)(x.OZ)],C.prototype,"url",void 0),(0,o.Cg)([(0,d.MZ)({readOnly:!0})],C.prototype,"type",void 0),(0,o.Cg)([(0,d.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],C.prototype,"path",void 0),(0,o.Cg)([(0,d.MZ)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],C.prototype,"minScale",void 0),(0,o.Cg)([(0,d.MZ)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],C.prototype,"maxScale",void 0),(0,o.Cg)([(0,d.MZ)()],C.prototype,"replacesTerrain",null),(0,o.Cg)([(0,d.MZ)()],C.prototype,"_isUsedAsGroundLayer",null),(0,o.Cg)([(0,d.MZ)()],C.prototype,"hasGoogleUrl",null),C=(0,o.Cg)([(0,h.$)("esri.layers.IntegratedMesh3DTilesLayer")],C);const I=C}}]);
//# sourceMappingURL=76790.7b7bda78.chunk.js.map