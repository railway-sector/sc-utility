"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[35454],{33328:(e,t,s)=>{s.d(t,{F:()=>a});var n=s(81806),i=s(70373),r=s(2413);const o={minX:0,minY:0,maxX:0,maxY:0};function u(e,t,s){(function(e){o.minX=e[0],o.minY=e[1],o.maxX=e[2],o.maxY=e[3]})(t),e.search(o,s)}class a{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i.wq(9,(0,n.A)("esri-csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const e=new Array(this._idByBounds.size);let t=0;this._idByBounds.forEach((s,n)=>{e[t++]=n}),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(e=>this._idByBounds.has(e))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const e=(0,r.Ie)();for(const t of this._boundsById.values())t&&(e[0]=Math.min(t[0],e[0]),e[1]=Math.min(t[1],e[1]),e[2]=Math.max(t[2],e[2]),e[3]=Math.max(t[3],e[3]));return e}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){const t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){this._loadIndex(),u(this._index,e,e=>t(this._idByBounds.get(e)))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){const t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},33376:(e,t,s)=>{s.d(t,{T:()=>i});var n=s(20176);const i={getObjectId:e=>e.objectId,getAttributes:e=>e.attributes,getAttribute:(e,t)=>e.attributes[t],cloneWithGeometry:(e,t)=>new n.Om(t,e.attributes,null,e.objectId),getGeometry:e=>e.geometry,getCentroid:(e,t)=>e.ensureCentroid(t)}},33754:(e,t,s)=>{s.d(t,{H:()=>i,L:()=>n});const n=1;function i(e,t){let s=0;for(const i of t){var n;const t=null===(n=i.attributes)||void 0===n?void 0:n[e];"number"==typeof t&&isFinite(t)&&(s=Math.max(s,t))}return s}},35454:(e,t,s)=>{s.r(t),s.d(t,{default:()=>B});var n=s(89379),i=s(50076),r=s(19902),o=s(80963),u=s(98618),a=s(33754),d=s(72547),l=s(24586),c=s(12034),h=s(40296),p=s(40098),y=s(1900),f=s(6127),m=s(53430),g=s(36693);const I=o.KK,_={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:o.KK},b={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsQueryAttachmentOrderByFields:!1,supportsQueryAttachmentWithTypeWildcard:!1,supportsQueryBins:!0,supportsQueryPivot:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!0,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0,supportsQueryWithCacheHint:!0},queryBinsCapabilities:p.PC};function v(e){return(0,r.fT)(e)?null!=e.z:!!e.hasZ}function F(e){return(0,r.fT)(e)?null!=e.m:!!e.hasM}class B{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){var e;null!==(e=this._queryEngine)&&void 0!==e&&e.destroy(),this._queryEngine=this._createDefaultAttributes=null}async load(e){var t;const s=[],{features:r}=e,o=this._inferLayerProperties(r,e.fields),u=e.fields||[],p=null!=e.hasM?e.hasM:!!o.hasM,v=null!=e.hasZ?e.hasZ:!!o.hasZ,F=!e.spatialReference&&!o.spatialReference,B=F?I:e.spatialReference||o.spatialReference,x=F?_:null,T=e.geometryType||o.geometryType,E=!T;let A=e.objectIdField||o.objectIdField,M=e.timeInfo;const C=new y.A(u);if(!E&&(F&&s.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!T))throw new i.A("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!A)throw new i.A("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");if(o.objectIdField&&A!==o.objectIdField&&(s.push({name:"feature-layer:duplicated-oid-field",message:'Provided objectIdField "'.concat(A,'" doesn\'t match the field name "').concat(o.objectIdField,'", found in the provided fields')}),A=o.objectIdField),A&&!o.objectIdField){const e=C.get(A);e?(A=e.name,e.type="esriFieldTypeOID",e.editable=!1,e.nullable=!1):u.unshift({alias:A,name:A,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const n of u){if(null==n.name&&(n.name=n.alias),null==n.alias&&(n.alias=n.name),!n.name)throw new i.A("feature-layer:invalid-field-name","field name is missing",{field:n});if(n.name===A&&(n.type="esriFieldTypeOID"),!f.m.jsonValues.includes(n.type))throw new i.A("feature-layer:invalid-field-type",'invalid type for field "'.concat(n.name,'"'),{field:n});null==n.length&&(n.length=(0,m._b)(n))}const R={};for(const n of u)if("esriFieldTypeOID"!==n.type&&"esriFieldTypeGlobalID"!==n.type){const e=(0,m.lD)(n);void 0!==e&&(R[n.name]=e)}if(M){if(M.startTimeField){const e=C.get(M.startTimeField);e?(M.startTimeField=e.name,e.type="esriFieldTypeDate"):M.startTimeField=null}if(M.endTimeField){const e=C.get(M.endTimeField);e?(M.endTimeField=e.name,e.type="esriFieldTypeDate"):M.endTimeField=null}if(M.trackIdField){const e=C.get(M.trackIdField);e?M.trackIdField=e.name:(M.trackIdField=null,s.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:M}}))}M.startTimeField||M.endTimeField||(s.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:M}}),M=null)}const S=C.dateFields.length?{timeZoneIANA:null!==(t=e.dateFieldsTimeZone)&&void 0!==t?t:g.n$}:null;this._createDefaultAttributes=(0,h.Vx)(R,A);const j={warnings:s,featureErrors:[],layerDefinition:(0,n.A)((0,n.A)({},b),{},{drawingInfo:(0,h.F0)(T),templates:(0,h.e2)(R),extent:x,geometryType:T,objectIdField:A,fields:u,hasZ:v,hasM:p,timeInfo:M,dateFieldsTimeReference:S}),assignedObjectIds:{}},w={type:"object-id",fieldName:A};if(this._queryEngine=new c.do({fieldsIndex:y.A.fromLayerJSON({fields:u,timeInfo:M,dateFieldsTimeReference:S}),geometryType:T,hasM:p,hasZ:v,featureIdInfo:w,spatialReference:B,featureStore:new d.A({geometryType:T,hasM:p,hasZ:v}),timeInfo:M}),null===r||void 0===r||!r.length)return this._nextObjectId=a.L,j;const q=(0,a.H)(A,r);return this._nextObjectId=q+1,await(0,l.Nk)(r,B),this._loadInitialFeatures(j,r)}async applyEdits(e){const{spatialReference:t,geometryType:s}=this._queryEngine;return await Promise.all([(0,p.$1)(t,s),(0,l.Nk)(e.adds,t),(0,l.Nk)(e.updates,t)]),this._applyEdits(e)}queryFeatures(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeQuery(e,t.signal)}queryFeatureCount(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeQueryForCount(e,t.signal)}queryObjectIds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeQueryForIds(e,t.signal)}queryExtent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeQueryForExtent(e,t.signal)}querySnapping(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeQueryForSnapping(e,t.signal)}queryAttributeBins(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._queryEngine.executeAttributeBinsQuery(e,t.signal)}_inferLayerProperties(e,t){let s,n,i=null,o=null,u=null;for(const a of e){const e=a.geometry;if(null!=e&&(i||(i=(0,r.$B)(e)),o||(o=e.spatialReference),null==s&&(s=v(e)),null==n&&(n=F(e)),i&&o&&null!=s&&null!=n))break}if(t&&t.length){let e=null;t.some(t=>{const s="esriFieldTypeOID"===t.type,n=!t.type&&t.name&&"objectid"===t.name.toLowerCase();return e=t,s||n})&&(u=e.name)}return{geometryType:i,spatialReference:o,objectIdField:u,hasM:n,hasZ:s}}async _loadInitialFeatures(e,t){const{geometryType:s,hasM:n,hasZ:i,objectIdField:o,spatialReference:a,featureStore:d,fieldsIndex:c}=this._queryEngine,h=[],y={type:"object-id",fieldName:o};for(const u of t){if(null!=u.uid&&(e.assignedObjectIds[u.uid]=-1),u.geometry&&s!==(0,r.$B)(u.geometry)){e.featureErrors.push((0,p.Yx)("Incorrect geometry type."));continue}const t=this._createDefaultAttributes(),n=(0,p.MB)(c,t,u.attributes,!0);n?e.featureErrors.push(n):(this._assignObjectId(t,u.attributes,!0),u.attributes=t,null!=u.uid&&(e.assignedObjectIds[u.uid]=u.attributes[o]),null!=u.geometry&&(u.geometry=(0,l.Cv)(u.geometry,u.geometry.spatialReference,a)),h.push(u))}d.addMany((0,u.Di)([],h,s,i,n,y));const{fullExtent:f,timeExtent:m}=await this._queryEngine.fetchRecomputedExtents();if(e.layerDefinition.extent=f,m){const{start:t,end:s}=m;e.layerDefinition.timeInfo.timeExtent=[t,s]}return e}async _applyEdits(e){const{adds:t,updates:s,deletes:n}=e,i={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(null!==t&&void 0!==t&&t.length&&this._applyAddEdits(i,t),null!==s&&void 0!==s&&s.length&&this._applyUpdateEdits(i,s),null!==n&&void 0!==n&&n.length){for(const e of n)i.deleteResults.push((0,p.bP)(e));this._queryEngine.featureStore.removeManyById(n)}const{fullExtent:r,timeExtent:o}=await this._queryEngine.fetchRecomputedExtents();return{extent:r,timeExtent:o,featureEditResults:i}}_applyAddEdits(e,t){const{addResults:s}=e,{geometryType:n,hasM:i,hasZ:o,objectIdField:a,spatialReference:d,featureStore:c,featureIdInfo:h,fieldsIndex:y}=this._queryEngine,f=[];for(const u of t){if(u.geometry&&n!==(0,r.$B)(u.geometry)){s.push((0,p.Yx)("Incorrect geometry type."));continue}const t=this._createDefaultAttributes(),i=(0,p.MB)(y,t,u.attributes);if(i)s.push(i);else{if(this._assignObjectId(t,u.attributes),u.attributes=t,null!=u.uid){const t=u.attributes[a];e.uidToObjectId[u.uid]=t}if(null!=u.geometry){var m;const e=null!==(m=u.geometry.spatialReference)&&void 0!==m?m:d;u.geometry=(0,l.Cv)((0,p.CR)(u.geometry,e),e,d)}f.push(u),s.push((0,p.bP)(u.attributes[a]))}}c.addMany((0,u.Di)([],f,n,o,i,h))}_applyUpdateEdits(e,t){let{updateResults:s}=e;const{geometryType:n,hasM:i,hasZ:o,objectIdField:a,spatialReference:d,featureStore:c,fieldsIndex:h,featureIdInfo:y}=this._queryEngine;for(const m of t){const{attributes:e,geometry:t}=m,g=null===e||void 0===e?void 0:e[a];if(null==g){s.push((0,p.Yx)("Identifier field ".concat(a," missing")));continue}if(!c.has(g)){s.push((0,p.Yx)("Feature with object id ".concat(g," missing")));continue}const I=(0,u.oN)(c.getFeature(g),n,o,i);if(null!=t){var f;if(n!==(0,r.$B)(t)){s.push((0,p.Yx)("Incorrect geometry type."));continue}const e=null!==(f=t.spatialReference)&&void 0!==f?f:d;I.geometry=(0,l.Cv)((0,p.CR)(t,e),e,d)}if(e){const t=(0,p.MB)(h,I.attributes,e);if(t){s.push(t);continue}}c.add((0,u.E2)(I,n,o,i,y)),s.push((0,p.bP)(g))}}_assignObjectId(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=this._queryEngine.objectIdField;s&&t&&isFinite(t[n])?e[n]=t[n]:e[n]=this._nextObjectId++}}},40098:(e,t,s)=>{s.d(t,{$1:()=>m,CR:()=>f,MB:()=>h,PC:()=>g,Yx:()=>a,bP:()=>l});var n=s(51344),i=s(80963),r=s(53430);class o{constructor(e){this.description=e,this.code=null}}class u{constructor(e){this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error=new o(e)}}function a(e){return new u(e)}class d{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function l(e){return new d(e)}const c=new Set;function h(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];c.clear();for(const o in s){const i=e.get(o);if(!i)continue;const u=p(i,s[o]);if(c.add(i.name),i&&(n||i.editable)){const e=(0,r.CJ)(i,u);if(e)return a((0,r.uo)(e,i,u));t[i.name]=u}}for(const r of null!==(i=e.requiredFields)&&void 0!==i?i:[]){var i;if(!c.has(r.name))return a('missing required field "'.concat(r.name,'"'))}return null}function p(e,t){let s=t;return(0,r.WA)(e)&&"string"==typeof t?s=parseFloat(t):(0,r.yM)(e)&&null!=t&&"string"!=typeof t?s=String(t):(0,r.vE)(e)&&"string"==typeof t&&(s=(0,n._U)(t)),(0,r.WX)(s)}let y;function f(e,t){if(!e||!(0,i.fn)(t))return e;if("rings"in e||"paths"in e){if(null==y)throw new TypeError("geometry engine not loaded");return y.simplify(t,e)}return e}async function m(e,t){!(0,i.fn)(e)||"esriGeometryPolygon"!==t&&"esriGeometryPolyline"!==t||await async function(){return null==y&&(y=await Promise.all([s.e(52612),s.e(1669)]).then(s.bind(s,1669))),y}()}const g={supportsAutoIntervalBin:!0,supportsFixedIntervalBin:!0,supportsFixedBoundariesBin:!0,supportsDateBin:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsNormalization:!0,supportedStatisticTypes:["COUNT","SUM","AVG","VAR","STDDEV","MIN","MAX","PERCENTILE_CONT","PERCENTILE_DISC","CentroidAggregate","EnvelopeAggregate","ConvexHullAggregate"],supportedNormalizationTypes:["field","log","naturalLog","percentOfTotal","squareRoot"]}},40296:(e,t,s)=>{s.d(t,{F0:()=>a,Vx:()=>c,e2:()=>p,f:()=>y});var n=s(89379),i=s(81806),r=s(53084),o=s(8298),u=s(44460);function a(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?u.Cb:"esriGeometryPolyline"===e?u.yM:u.WR}}}const d=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let l=1;function c(e,t){if((0,i.A)("esri-csp-restrictions"))return()=>(0,n.A)({[t]:null},e);try{let s="this".concat(h(t)," = null;");for(const t in e)s+="this".concat(h(t)," = ").concat(JSON.stringify(e[t]),";");const n=new Function("\n      return class AttributesClass$".concat(l++," {\n        constructor() {\n          ").concat(s,";\n        }\n      }\n    "))();return()=>new n}catch(s){return()=>(0,n.A)({[t]:null},e)}}function h(e){return d.test(e)?".".concat(e):'["'.concat(e,'"]')}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,r.o8)(e)}}]}function y(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryPivot:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:o.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:o.P,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},51344:(e,t,s)=>{function n(e){return null!=u(e)||null!=o(e)}function i(e){return a.test(e)}function r(e){var t;return null!==(t=u(e))&&void 0!==t?t:o(e)}function o(e){const t=new Date(e);return function(e,t){if(Number.isNaN(e.getTime()))return!1;let s=!0;if(l&&/\d+\W*$/.test(t)){const e=t.match(/[a-zA-Z]{2,}/);if(e){let t=!1,n=0;for(;!t&&n<=e.length;)t=!d.test(e[n]),n++;s=!t}}return s}(t,e)?Number.isNaN(t.getTime())?null:t.getTime()-6e4*t.getTimezoneOffset():null}function u(e){var t,s,n,i;const r=a.exec(e);if(null===r||void 0===r||!r.groups)return null;const o=r.groups,u=+o.year,d=+o.month-1,l=+o.day,c=+(null!==(t=o.hours)&&void 0!==t?t:"0"),h=+(null!==(s=o.minutes)&&void 0!==s?s:"0"),p=+(null!==(n=o.seconds)&&void 0!==n?n:"0");if(c>23)return null;if(h>59)return null;if(p>59)return null;const y=null!==(i=o.ms)&&void 0!==i?i:"0",f=y?+y.padEnd(3,"0").slice(0,3):0;let m;if(o.isUTC||!o.offsetSign)m=Date.UTC(u,d,l,c,h,p,f);else{const e=+o.offsetHours,t=+o.offsetMinutes;m=6e4*("+"===o.offsetSign?-1:1)*(60*e+t)+Date.UTC(u,d,l,c,h,p,f)}return Number.isNaN(m)?null:m}s.d(t,{Br:()=>i,Cq:()=>n,_U:()=>r});const a=(0,s(36140).A)(/^(?:(-?\d{4,})-(\d{2})-(\d{2}))(?:T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?)?(?:(Z)|(?:(\+|-)(\d{2}):(\d{2})))?$/,{year:1,month:2,day:3,hours:4,minutes:5,seconds:6,ms:7,isUTC:8,offsetSign:9,offsetHours:10,offsetMinutes:11});const d=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,l=!Number.isNaN(new Date("technology 10").getTime())},72547:(e,t,s)=>{s.d(t,{A:()=>y});var n=s(18690),i=s(50076),r=s(54099),o=s(76460),u=s(42294),a=s(2413),d=s(98618),l=s(33328),c=s(55167),h=s(33376);const p=(0,u.vt)();class y{constructor(e){this.geometryInfo=e,this._boundsStore=new l.F,this._featuresById=new Map,this._usedMemory=0,this.events=new r.bk,this.featureAdapter=h.T}get usedMemory(){return this._usedMemory}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach(t=>{null!=t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(e){if(null==this.fullBounds)return null;const[t,s,n,i]=this.fullBounds;return{xmin:t,ymin:s,xmax:n,ymax:i,spatialReference:(0,c.ag)(e)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}upsertMany(e){const t=e.map(e=>this._upsert(e));return this._emitChanged(),t.filter(n.Ru)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged(),this._usedMemory=0}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t((0,u.Jt)(p,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach(t=>e(t))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,e=>{t(this._featuresById.get(e))})}_emitChanged(){this.events.emit("changed",void 0)}_add(e){var t,s,n,r,u;if(!e)return;const l=e.objectId;if(null==l)return void o.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new i.A("featurestore:invalid-feature","feature id is missing",{feature:e}));const c=this._featuresById.get(l);let h;if(c?(e.displayId=c.displayId,h=this._boundsStore.get(l),this._boundsStore.delete(l),this._usedMemory-=null!==(t=null===(s=this.estimateFeatureUsedMemory)||void 0===s?void 0:s.call(this,c))&&void 0!==t?t:0):null!=this.onFeatureAdd&&this.onFeatureAdd(e),null===(n=e.geometry)||void 0===n||null===(n=n.coords)||void 0===n||!n.length)return this._boundsStore.set(l,null),void this._featuresById.set(l,e);h=(0,d.jQ)(null!=h?h:(0,a.vt)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=h&&this._boundsStore.set(l,h),this._featuresById.set(l,e),this._usedMemory+=null!==(r=null===(u=this.estimateFeatureUsedMemory)||void 0===u?void 0:u.call(this,e))&&void 0!==r?r:0}_upsert(e){var t,s,n,r,u;const l=null===e||void 0===e?void 0:e.objectId;if(null==l)return o.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new i.A("featurestore:invalid-feature","feature id is missing",{feature:e})),null;const c=this._featuresById.get(l);if(!c)return this._add(e),e;this._usedMemory-=null!==(t=null===(s=this.estimateFeatureUsedMemory)||void 0===s?void 0:s.call(this,c))&&void 0!==t?t:0;const{geometry:h,attributes:p}=e;for(const i in p)c.attributes[i]=p[i];return h&&(c.geometry=h,this._boundsStore.set(l,null!==(n=(0,d.jQ)((0,a.vt)(),h,this.geometryInfo.hasZ,this.geometryInfo.hasM))&&void 0!==n?n:null)),this._usedMemory+=null!==(r=null===(u=this.estimateFeatureUsedMemory)||void 0===u?void 0:u.call(this,c))&&void 0!==r?r:0,c}_remove(e){var t,s;null!=this.onFeatureRemove&&this.onFeatureRemove(e);const n=e.objectId;return this._boundsStore.delete(n),this._featuresById.delete(n),this._usedMemory-=null!==(t=null===(s=this.estimateFeatureUsedMemory)||void 0===s?void 0:s.call(this,e))&&void 0!==t?t:0,e}}}}]);
//# sourceMappingURL=35454.3442a9a3.chunk.js.map