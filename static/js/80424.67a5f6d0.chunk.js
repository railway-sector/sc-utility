"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[80424],{58043:(e,t,i)=>{i.d(t,{default:()=>ze});var s=i(89379),l=i(6326),a=i(63241),n=i(76460),r=i(68134),o=i(46053),c=i(21403),d=(i(81806),i(47249),i(87990)),p=i(25329),y=i(74061);i(11265);const h="esri-legend--card",v="esri-legend",m={activated:"".concat(h,"__carousel-indicator--activated"),base:h,stacked:"".concat(v,"--stacked"),carouselTitle:"".concat(h,"__carousel-title"),indicator:"".concat(h,"__carousel-indicator"),intervalSeparator:"".concat(h,"__interval-separator"),imageryLayerStretchedImage:"".concat(h,"__imagery-layer-image--stretched"),imageLabel:"".concat(h,"__image-label"),layerCaption:"".concat(h,"__layer-caption"),labelElement:"".concat(h,"__label-element"),layerRow:"".concat(h,"__layer-row"),labelCell:"".concat(h,"__label-cell"),message:"".concat(h,"__message"),rampLabel:"".concat(h,"__ramp-label"),section:"".concat(h,"__section"),relationshipSection:"".concat(h,"__relationship-section"),serviceCaptionText:"".concat(h,"__service-caption-text"),serviceContent:"".concat(h,"__service-content"),service:"".concat(h,"__service"),groupLayer:"".concat(h,"__group-layer"),groupLayerChild:"".concat(h,"__group-layer-child"),symbol:"".concat(h,"__symbol"),sizeRampRow:"".concat(h,"__size-ramp-row"),symbolRow:"".concat(h,"__symbol-row"),symbolCell:"".concat(h,"__symbol-cell"),carousel:"".concat(h,"__carousel"),carouselItem:"".concat(h,"__carousel-item"),indicatorContainer:"".concat(h,"__carousel-indicator-container"),intervalSeparatorsContainer:"".concat(h,"__interval-separators-container"),relationshipLabelContainer:"".concat(h,"__relationship-label-container"),labelContainer:"".concat(h,"__label-container"),serviceCaptionContainer:"".concat(h,"__service-caption-container"),symbolContainer:"".concat(h,"__symbol-container"),colorRampContainer:"".concat(h,"__color-ramp-container"),sizeRampContainer:"".concat(h,"__size-ramp-container"),sizeRampPreview:"".concat(h,"__size-ramp-preview"),pieChartRampPreview:"".concat(h,"__pie-chart-ramp-preview"),rampContainer:"".concat(v,"__ramps"),sizeRampHorizontal:"".concat(v,"__size-ramp--horizontal"),rampLabelsContainer:"".concat(v,"__ramp-labels"),layerInfo:"".concat(v,"__layer-cell ").concat(v,"__layer-cell--info"),univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"};var g=i(69539),u=i(66984),f=i(88685),b=i(39348),w=i(50265);function L(e){e.appendChild(this)}function _(e,t,i){if(!t)return;if("number"==typeof t)return t;if("string"==typeof t)return(0,f._e)(t);if("value"in t||"unit"in t)return(0,b.V)(e.dotValue,t);if("colorName"in t&&"bandName"in t)return e[t.colorName]+": "+(e[t.bandName]||t.bandName);if("showCount"in t)return t.showCount?e.clusterCountTitle:void 0;let s=null;return i?s=t.ratioPercentTotal?"showRatioPercentTotal":t.ratioPercent?"showRatioPercent":t.ratio?"showRatio":t.normField?"showNormField":t.field?"showField":null:C(t,i)&&(s=t.normField?"showNormField":t.normByPct?"showNormPct":t.field?"showField":null),s?(0,b.V)("showField"===s?"{field}":e[s],{field:t.field,normField:t.normField}):void 0}function C(e,t){return!t}function E(e,t){return!!(t&&"Stretched"===t&&"version"in e&&"number"==typeof e.version&&e.version>=10.3&&"esri.layers.ImageryLayer"===e.declaredClass)}function K(e,t,i){switch(t){case"heatmap-ramp":return i[e.label]||e.label;case"stretch-ramp":return function(e,t){var i,s;return e.label?t[e.label]+": "+("string"==typeof e.value?e.value:(0,w.ZV)(null!==(i=e.value)&&void 0!==i?i:0,{style:"decimal",notation:null!==(s=e.value)&&void 0!==s&&s.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}(e,i);default:return e.label}}function k(e,t){if(!e.title||"string"==typeof e.title)return e.title;const i="color-ramp"===e.type||"opacity-ramp"===e.type,s=e.title,l=_(t,s,i);return C(0,i)&&s.title?"".concat(s.title," (").concat(l,")"):l}function R(e){return!(!e||"object"!=typeof e)}function M(e,t){const i=_(e,t,!1),s=i?e.previewTemplateAriaLabel:e.previewAriaLabel;return(0,b.V)(s,{label:i})}var x=i(15187),z=i(54761);let I=class extends p.A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return(0,z.K)("div",{class:this.classes(m.layerRow,m.colorRampContainer)},this._renderRampLabel(e[0]),(0,z.K)("div",{class:m.symbolContainer},this._renderPreview(e),this._renderMiddleStopRampLabel(e)),this._renderRampLabel(e.at(-1)))}_renderPreview(e){var t;const{opacity:i}=this,s="heatmap-ramp"===this.legendElement.type,l=e.length-1,a=25,n=l>2&&!s?25*l:100,r=n+20,o=10,c=[[{shape:{type:"path",path:"M0 ".concat(a/2," L").concat(o," 0 L").concat(o," ").concat(a," Z")},fill:e[0].color,stroke:{width:0}},{shape:{type:"rect",x:o,y:0,width:n,height:a},fill:{type:"linear",x1:o,y1:0,x2:n+o,y2:0,colors:e.map((e,t)=>({color:e.color,offset:s&&"ratio"in e?e.ratio:t/l}))},stroke:{width:0}},{shape:{type:"path",path:"M".concat(n+o," 0 L").concat(r," ").concat(a/2," L").concat(n+o," ").concat(a," Z")},fill:e[e.length-1].color,stroke:{width:0}}]],d=(0,u.d8)(c,r,a),p={filter:null!==(t=this.cssEffectFilter)&&void 0!==t?t:void 0,opacity:null==i?void 0:"".concat(i)};return(0,z.K)("div",{styles:p},d)}_renderMiddleStopRampLabel(e){const t=e.length%2!=0?e[e.length/2|0]:null;return t?(0,z.K)("div",{class:m.intervalSeparatorsContainer},(0,z.K)("div",{class:m.intervalSeparator},"|"),this._renderRampLabel(t)):null}_renderRampLabel(e){return(0,z.K)("div",{class:m.rampLabel},K(e,this.legendElement.type,this.messages))}};(0,l.Cg)([(0,o.MZ)()],I.prototype,"cssEffectFilter",void 0),(0,l.Cg)([(0,o.MZ)()],I.prototype,"legendElement",void 0),(0,l.Cg)([(0,o.MZ)()],I.prototype,"messages",void 0),(0,l.Cg)([(0,o.MZ)()],I.prototype,"opacity",void 0),I=(0,l.Cg)([(0,d.$)("esri.widgets.Legend.styles.card.ColorRamp")],I);var A=i(53986),F=i(76931);const Z="#ddd",S=window.devicePixelRatio,T="esri-spike-ramp",V={spikeRampContainer:"".concat(T,"__container"),spikeRampPreviewContainer:"".concat(T,"__preview-container"),spikeRampPreview:"".concat(T,"__preview"),spikeRampSymbolPreview:"".concat(T,"__symbol-preview"),spikeRampLines:"".concat(T,"__lines"),spikeRampLabelsContainer:"".concat(T,"__labels-container"),spikeRampLabel:"".concat(T,"__label")};function P(e){return 5!==e.infos.length?null:(0,z.K)("div",{class:V.spikeRampContainer},(0,z.K)("div",{class:V.spikeRampPreviewContainer},function(e){const[t,i,s]=B(e).map(e=>{let{preview:t}=e;if(!t)return null;const i=t.cloneNode(!0);return i.classList.add(V.spikeRampSymbolPreview),i});return t&&i&&s?(0,z.K)("div",{class:V.spikeRampPreview},(0,z.K)("div",{afterCreate:L,bind:s}),(0,z.K)("div",{afterCreate:L,bind:i}),(0,z.K)("div",{afterCreate:L,bind:t})):null}(e),function(e){const[{width:t,height:i},{width:s},{width:l,height:a}]=B(e).map(e=>{let{size:t}=e;return R(t)?{width:(0,F.Lz)(t.width),height:(0,F.Lz)(t.height)}:{width:0,height:0}}),n=10,r=8,o=t+s+l+3*n,c=i,d=document.createElement("canvas");d.width=(o+n)*S,d.height=c*S,d.style.width=d.width/S+"px",d.style.height=d.height/S+"px";const p=d.getContext("2d");p.beginPath();const y=o-(t/2+n),h=0,v=o+r,m=0;p.moveTo(y*S,h*S),p.lineTo(v*S,m*S);const g=(o-r)/2,u=(i-a)/2,f=o+r,b=(i-a)/2;p.moveTo(g*S,u*S),p.lineTo(f*S,b*S);const w=l/2,_=c-a,C=o+r,E=c-a;return p.moveTo(w*S,_*S),p.lineTo(C*S,E*S),p.strokeStyle=Z,p.lineWidth=.5*S,p.stroke(),(0,z.K)("div",{afterCreate:L,bind:d,class:V.spikeRampLines})}(e)),function(e){const[{label:t,height:i},{label:s},{label:l,height:a}]=B(e).map(e=>{let{label:t,size:i}=e;return{label:t,height:R(i)?(0,F.Lz)(i.height):0}}),n=i-a,r={position:"absolute",top:"0"},o={position:"absolute",top:n/2+"px"},c={position:"absolute",top:"".concat(n,"px")};return(0,z.K)("div",{class:V.spikeRampLabelsContainer},(0,z.K)("div",{class:V.spikeRampLabel,styles:r},t),(0,z.K)("div",{class:V.spikeRampLabel,styles:o},s),(0,z.K)("div",{class:V.spikeRampLabel,styles:c},l))}(e))}function B(e){return e.infos.filter((e,t)=>t%2==0)}const D=["label"],N=["label"],$=window.devicePixelRatio;let O=class extends p.A{constructor(e,t){super(e,t),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){if("spike"===this.legendElement.theme)return(0,z.K)("div",{styles:{display:"flex",flex:"1",justifyContent:"center"}},P(this.legendElement));const{legendElement:e,hasIndicators:t,opacity:i}=this,s=e.infos,l=s.at(0),a=s.at(-1);if(!l||!a)return null;const{label:n}=l,r=(0,A.A)(l,D),{label:o}=a,c=(0,A.A)(a,N);let d=r.preview,p=c.preview;const y={"flex-direction":t?"column":"row-reverse"};if(!d||!p)return null;d=d.cloneNode(!0),d.style.display="flex",p=p.cloneNode(!0),p.style.display="flex";const h={opacity:"".concat(null!==i&&void 0!==i?i:"")};return(0,z.K)("div",{class:this.classes(m.layerRow,{[m.sizeRampRow]:t})},(0,z.K)("div",{class:m.rampLabel},t?n:o),(0,z.K)("div",{class:m.sizeRampContainer,styles:y},(0,z.K)("div",{afterCreate:L,bind:d,class:m.sizeRampPreview,styles:h}),this._renderSizeRampLines(e),(0,z.K)("div",{afterCreate:L,bind:p,class:m.sizeRampPreview,styles:h})),(0,z.K)("div",{class:m.rampLabel},t?o:n))}_renderSizeRampLines(e){const t=e.infos,i=t.at(0),s=t.at(-1);if(!i||!s)return null;const l=i.symbol,a=this.hasIndicators,n=i.size&&"number"==typeof i.size?i.size:0,r=s.size&&"number"==typeof s.size?s.size:0,o=i.outlineSize||0,c=s.outlineSize||0,d=(0,F.Lz)(n+o)*$,p=(0,F.Lz)(r+c)*$,y=a?d:d+50*$,h=a?d/2+50*$:d,v=function(e){if(e){if(e.type.includes("3d")){var t,i;if(null===(t=e.symbolLayers)||void 0===t||!t.length)return;const s=e.symbolLayers.at(-1),l=null===s||void 0===s||null===(i=s.resource)||void 0===i?void 0:i.primitive;return"triangle"===l||"cone"===l||"tetrahedron"===l}return"triangle"===e.style}}(l),m=function(e){if(!e)return;if(e.type.includes("3d")){var t,i;if(null===(t=e.symbolLayers)||void 0===t||!t.length)return;const s=null===(i=e.symbolLayers.at(-1).resource)||void 0===i?void 0:i.primitive;return"circle"===s||"cross"===s||"kite"===s||"sphere"===s||"cube"===s||"diamond"===s}const s=e.style;return"circle"===s||"diamond"===s||"cross"===s}(l),g=document.createElement("canvas");g.width=y,g.height=h,g.style.width=g.width/$+"px",g.style.height=g.height/$+"px";const u=g.getContext("2d");if(a){u.beginPath();const e=0,t=0,i=y/2-p/2,s=h;u.moveTo(e,t),u.lineTo(i,s);const l=y,a=0,n=y/2+p/2,r=h;u.moveTo(l,a),u.lineTo(n,r)}else{u.beginPath();const e=0,t=h/2-p/2,i=y,s=0;u.moveTo(e,t),u.lineTo(i,s);const l=0,a=h/2+p/2,n=y,r=h;u.moveTo(l,a),u.lineTo(n,r)}return u.strokeStyle="#ddd",u.stroke(),(0,z.K)("div",{afterCreate:L,bind:g,styles:a?{display:"flex",marginTop:"-".concat(v?0:m?d/2:0,"px"),marginBottom:"-".concat(v?p:m?p/2:0,"px")}:{display:"flex",marginRight:"-".concat(v?0:m?d/2:0,"px"),marginLeft:"-".concat(v?0:m?p/2:0,"px")}})}};(0,l.Cg)([(0,o.MZ)()],O.prototype,"hasIndicators",void 0),(0,l.Cg)([(0,o.MZ)()],O.prototype,"legendElement",void 0),(0,l.Cg)([(0,o.MZ)()],O.prototype,"messages",void 0),(0,l.Cg)([(0,o.MZ)()],O.prototype,"opacity",void 0),O=(0,l.Cg)([(0,d.$)("esri.widgets.Legend.styles.card.SizeRamp")],O);i(27347);var H=i(48396),q=i(85632),j=i(8503);const G=(0,H.F)(),U="esri-univariate-above-and-below-ramp__symbol",W="esri-legend__color-ramp";function J(){const e="stroke:rgb(200, 200, 200);stroke-width:1";return"vertical"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vertical")?(0,z.K)("svg",{height:"4",width:"10"},(0,z.K)("line",{style:e,x1:"0",x2:"10",y1:"2",y2:"2"})):(0,z.K)("svg",{height:"10",width:"10"},(0,z.K)("line",{style:e,x1:"5",x2:"5",y1:"0",y2:"10"}))}function Q(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"vertical";const i=document.createElement("div");return i.style.height="".concat(20,"px"),i.className=U,null!=e&&(i.style.opacity=e.toString()),G.append(i,J.bind(null,t)),i}function X(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical",s=arguments.length>3?arguments[3]:void 0;e.infos.forEach((e,l)=>{if(s&&2===l)e.preview=Q(t,i);else{const t=((0,q.Et)(e.size)?(0,F.Lz)(e.size):0)+("horizontal"===i?20:10),s=e.preview,l="div"===(null===s||void 0===s?void 0:s.tagName.toLowerCase()),a=l?s:document.createElement("div");a.className=U,"horizontal"===i?a.style.width="".concat(t,"px"):a.style.height="".concat(t,"px"),!l&&s&&a.appendChild(s),e.preview=a}})}function Y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"classic";const i=e.infos,s=i.at(0),l=i.at(-1),a=(0,q.Et)(s.size)?(0,F.Lz)(s.size):0,n=(0,q.Et)(l.size)?(0,F.Lz)(l.size):0;return"classic"===t?(a+10)/2:(a-n)/2}function ee(e,t){if(!e)return null;const i=e.infos.map(e=>e.color),s=(0,j.J0)("full"===t.type?i:"above"===t.type?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,cssEffectFilter:t.cssEffectFilter,ariaLabel:t.ariaLabel});return s.className=W,null!=t.opacity&&(s.style.opacity=t.opacity.toString()),s}function te(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vertical",l=0;const a=e.infos,n=Math.floor(a.length/2),r="full"===t||"above"===t?0:n,o="full"===t||"below"===t?a.length-1:n;for(let c=r;c<=o;c++)if(i&&c===n)l+="horizontal"===s?10:20;else{const e=a[c].size;l+=((0,q.Et)(e)?(0,F.Lz)(e):0)+("horizontal"===s?20:10)}return Math.round(l)}function ie(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vertical";const l=te(e,t,i,s),a=e.infos,n=Math.floor(a.length/2),r="full"===t||"above"===t?0:n,o="full"===t||"below"===t?a.length-1:n,c=(0,q.Et)(a[r].size)?a[r].size:0,d=(0,q.Et)(a[o].size)?a[o].size:0,p="full"===t?c+d:"above"===t?c:d,y=i?"vertical"===s?20:10:0,h="vertical"===s?10*("full"===t?2:1):20*("full"===t?2:1);return Math.round(l-((0,F.Lz)(p)/2+y/2+h/2))}function se(e,t){var i,l;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical";const n=e.infos;let r=n.find(e=>{let{type:t}=e;return"size-ramp"===t}),o=n.find(e=>{let{type:t}=e;return"color-ramp"===t});return r&&(r=(0,s.A)({},r),r.infos=[...r.infos],X(r,t,a,!0)),o&&(o=(0,s.A)({},o),o.infos=[...o.infos]),"horizontal"===a&&(null!==(i=r)&&void 0!==i&&i.infos.reverse(),null!==(l=o)&&void 0!==l&&l.infos.reverse()),{sizeRampElement:r,colorRampElement:o}}function le(e){var t,i;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"vertical";const a=e.infos;let n=a.find(e=>{let{type:t}=e;return"size-ramp"===t}),r=a.find(e=>{let{type:t}=e;return"color-ramp"===t});return n&&(n=(0,s.A)({},n),n.infos=[...n.infos],X(n,null,l,!1)),r&&(r=(0,s.A)({},r),r.infos=[...r.infos]),"horizontal"===l&&(null!==(t=n)&&void 0!==t&&t.infos.reverse(),null!==(i=r)&&void 0!==i&&i.infos.reverse()),{sizeRampElement:n,colorRampElement:r}}const ae={marginLeft:"3px"},ne={display:"table-cell",verticalAlign:"middle"},re={display:"flex",alignItems:"flex-start"};let oe=class extends p.A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){var e;const{legendElement:t,opacity:i,cssEffectFilter:s,key:l}=this,{sizeRampElement:a,colorRampElement:n}=se(t,i,"horizontal");if(!a)return null;const r=te(a,"full",!0,"horizontal"),o=ie(a,"above",!0,"horizontal"),c=ie(a,"below",!0,"horizontal"),d=null===(e=this.messages)||void 0===e?void 0:e.previewColorRampAriaLabel,p=ee(n,{width:o,height:12,rampAlignment:"horizontal",opacity:i,type:"above",cssEffectFilter:s,ariaLabel:d}),y=ee(n,{width:c,height:12,rampAlignment:"horizontal",opacity:i,type:"below",cssEffectFilter:s,ariaLabel:d}),h=Y(a,"card"),v=a.infos.map(e=>e.label),g=v.length-1,u=v.map((e,t)=>0===t||t===g?(0,z.K)("div",{key:t},e):null),f={marginTop:"3px",display:"flex"};(0,x.V8)(this.container)?f.marginRight="".concat(h,"px"):f.marginLeft="".concat(h,"px");const b={width:"".concat(r,"px"),display:"flex",flexDirection:"row",justifyContent:"space-between"};return(0,z.K)("div",{class:m.layerRow,key:"".concat(l,"-container"),styles:{display:"flex",flexDirection:"column"}},(0,z.K)("div",{class:this.classes(m.symbolContainer,m.sizeRampHorizontal),styles:{display:"flex",flexDirection:"row"}},a.infos.map((e,t)=>(0,z.K)("div",{afterCreate:L,bind:e.preview,class:m.symbol,key:t}))),p?(0,z.K)("div",{class:m.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:f},(0,z.K)("div",{afterCreate:L,bind:p}),(0,z.K)("div",{afterCreate:L,bind:y})):null,(0,z.K)("div",{class:m.layerInfo},(0,z.K)("div",{class:m.rampLabelsContainer,styles:b},u)))}};(0,l.Cg)([(0,o.MZ)()],oe.prototype,"cssEffectFilter",void 0),(0,l.Cg)([(0,o.MZ)()],oe.prototype,"legendElement",void 0),(0,l.Cg)([(0,o.MZ)()],oe.prototype,"messages",void 0),(0,l.Cg)([(0,o.MZ)()],oe.prototype,"opacity",void 0),oe=(0,l.Cg)([(0,d.$)("esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp")],oe);let ce=class extends p.A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){var e;const{legendElement:t,opacity:i,cssEffectFilter:s,key:l}=this,{sizeRampElement:a,colorRampElement:n}=le(t,"horizontal");if(!a)return null;const r=te(a,"full",!1,"horizontal"),o=ee(n,{width:ie(a,"full",!1,"horizontal"),height:12,rampAlignment:"horizontal",opacity:i,type:"full",cssEffectFilter:s,ariaLabel:null===(e=this.messages)||void 0===e?void 0:e.previewColorRampAriaLabel}),c=Y(a,"card"),d=a.infos.length-1,p=a.infos.map((e,t)=>0===t||t===d?(0,z.K)("div",{key:t},e.label):null),y={marginTop:"3px",display:"flex"};(0,x.V8)(this.container)?y.marginRight="".concat(c,"px"):y.marginLeft="".concat(c,"px");const h={width:"".concat(r,"px"),display:"flex",flexDirection:"row",justifyContent:"space-between"};return(0,z.K)("div",{class:m.layerRow,key:"".concat(l,"-container"),styles:{display:"flex",flexDirection:"column"}},(0,z.K)("div",{class:this.classes(m.symbolContainer,m.sizeRampHorizontal),styles:{display:"flex",flexDirection:"row"}},a.infos.map((e,t)=>(0,z.K)("div",{afterCreate:L,bind:e.preview,class:m.symbol,key:t}))),(0,z.K)("div",{class:m.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:y},(0,z.K)("div",{afterCreate:L,bind:o})),(0,z.K)("div",{class:m.layerInfo},(0,z.K)("div",{class:m.rampLabelsContainer,styles:h},p)))}};(0,l.Cg)([(0,o.MZ)()],ce.prototype,"cssEffectFilter",void 0),(0,l.Cg)([(0,o.MZ)()],ce.prototype,"legendElement",void 0),(0,l.Cg)([(0,o.MZ)()],ce.prototype,"messages",void 0),(0,l.Cg)([(0,o.MZ)()],ce.prototype,"opacity",void 0),ce=(0,l.Cg)([(0,d.$)("esri.widgets.Legend.styles.card.UnivariateColorSizeRamp")],ce);var de,pe=i(61934),ye=i(87540);let he=de=class extends p.A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),t=k(this.legendElement,this.messages),i=this.hasIndicators&&!this.isChild?(0,z.K)("div",null,(0,z.K)(ye.D,{class:m.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),(0,z.K)(ye.D,{class:m.layerCaption,level:(0,ye.S)(this.headingLevel)},t)):t?(0,z.K)(ye.D,{class:m.layerCaption,level:this.headingLevel},t):null;return(0,z.K)("section",{"aria-labelledby":this.key,class:m.section,id:"".concat(this.key,"-panel"),key:this.key,role:"tabpanel",tabIndex:0},i,e)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return(0,z.K)(O,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return(0,z.K)(I,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return(0,pe.p)(this.legendElement,this.id,{opacity:this.layer.opacity,cssEffectFilter:this.cssEffectFilter,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":{var e;const{preview:t}=this.legendElement;if(!t)return null;const i=(0,b.V)(this.messages.previewPieChartAriaLabel,{label:null});return i&&null!==(e=t.querySelector("svg"))&&void 0!==e&&e.setAttribute("aria-label",i),(0,z.K)("div",{afterCreate:L,bind:t,class:m.pieChartRampPreview,key:"".concat(this.key,"-preview")})}case"univariate-above-and-below-ramp":return(0,z.K)(oe,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return(0,z.K)(ce,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){var t;const i=e.infos.map(t=>this._renderElementInfo(t,e.legendType)).filter(Boolean);if(!i.length)return null;const s=this.activeLayerInfo.legendElements.some(e=>{let{type:t}=e;return"relationship-ramp"===t}),l=null===(t=i[0])||void 0===t||null===(t=t.properties)||void 0===t||null===(t=t.classes)||void 0===t?void 0:t[m.symbolRow],a={[m.labelContainer]:!l&&!s,[m.relationshipLabelContainer]:s};return(0,z.K)("div",{class:this.classes(a)},i)}_renderElementInfo(e,t){const{layer:i}=this,s="label"in e?e.label:null,l="".concat(this.key,"-").concat(s);if("type"in e&&e.type)return(0,z.K)(de,{activeLayerInfo:this.activeLayerInfo,cssEffectFilter:this.cssEffectFilter,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:l,layer:i,legendElement:e,messages:this.messages});if(!("preview"in e&&e.preview||"src"in e&&e.src))return null;const a=E(i,t),n=_(this.messages,s,!1)||"";if("src"in e&&e.src)return(0,z.K)("div",{class:m.layerRow,key:"".concat(l,"-row")},this._renderImage(e,i,a),(0,z.K)("div",{class:m.imageLabel},n));if("symbol"in e&&e.preview){var r;if(null===(r=e.symbol)||void 0===r||!r.type.includes("simple-fill")){if(!e.label)return(0,z.K)("div",{afterCreate:L,bind:e.preview,key:"".concat(l,"-row")});const t={[m.symbolCell]:this.hasIndicators},{preview:i}=e,s="previewAriaLabel"in e?e.previewAriaLabel:null,a="label"in e?_(this.messages,e.label,!1):null,r=i.querySelector("svg"),o=M(this.messages,s||a);return o&&r&&r.setAttribute("aria-label",o),(0,z.K)("div",{class:this.classes(m.layerRow,{[m.symbolRow]:this.hasIndicators}),key:"".concat(l,"-row")},(0,z.K)("div",{afterCreate:L,bind:i,class:this.classes(t)}),(0,z.K)("div",{class:this.classes(m.imageLabel,{[m.labelCell]:this.hasIndicators})},n))}return(0,z.K)("div",{class:m.layerRow,key:"".concat(l,"-row")},(0,z.K)("div",{class:m.labelElement,styles:this._getBackgroundStyles(e)},n))}return null}_getBackgroundStyles(e){var t,i,s,l;const a=e.symbol,n=a.color,r=!(null===n||void 0===n||!n.a),o="outline"in a?a.outline:null,c=!(null===o||void 0===o||null===(t=o.color)||void 0===t||!t.a),d=new g.A(r&&n?[n.r,n.g,n.b,n.a*this.layer.opacity]:[255,255,255,0]),p=c&&o.color?new g.A([o.color.r,o.color.g,o.color.b,o.color.a*this.layer.opacity]):new g.A([255,255,255,0]),y=null===(i=null===(s=e.symbol.color)||void 0===s?void 0:s.isBright)||void 0===i||i,h=y?"black":"white",v=y?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";return{background:r?d.toCss(!0):"none",color:h,textShadow:"-1px -1px 0 ".concat(v,",\n                  1px -1px 0 ").concat(v,",\n                  -1px 1px 0 ").concat(v,",\n                  1px 1px 0 ").concat(v),border:c?"1px solid ".concat(p.toCss(!0)):"none",filter:null!==(l=this.cssEffectFilter)&&void 0!==l?l:void 0}}_renderImage(e,t,i){const{previewAriaLabel:s,src:l,opacity:a}=e,n=_(this.messages,e.label,!1),r={[m.imageryLayerStretchedImage]:i,[m.symbol]:!i},o={opacity:"".concat(null!==a&&void 0!==a?a:t.opacity)},c=M(this.messages,s||n);return(0,z.K)("img",{alt:c,"aria-label":c,border:0,class:this.classes(r),height:e.height,src:l,styles:o,width:e.width})}};(0,l.Cg)([(0,o.MZ)()],he.prototype,"activeLayerInfo",void 0),(0,l.Cg)([(0,o.MZ)()],he.prototype,"cssEffectFilter",void 0),(0,l.Cg)([(0,o.MZ)()],he.prototype,"hasIndicators",void 0),(0,l.Cg)([(0,o.MZ)()],he.prototype,"headingLevel",void 0),(0,l.Cg)([(0,o.MZ)()],he.prototype,"isChild",void 0),(0,l.Cg)([(0,o.MZ)()],he.prototype,"layer",void 0),(0,l.Cg)([(0,o.MZ)()],he.prototype,"legendElement",void 0),(0,l.Cg)([(0,o.MZ)()],he.prototype,"messages",void 0),he=de=(0,l.Cg)([(0,d.$)("esri.widgets.Legend.styles.card.LegendElement")],he);var ve=i(94126),me=i(63582);let ge=class extends p.A{constructor(e,t){super(e,t),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}loadDependencies(){return(0,ve.W)({carousel:()=>Promise.resolve().then(i.bind(i,17545)),"carousel-item":()=>Promise.resolve().then(i.bind(i,65595))})}render(){this._hasIndicators="auto"===this.layout&&this.view&&this.view.container.clientWidth<=768||"stack"===this.layout;const e=this._hasIndicators?this._renderCarousel():this._renderLayers(),t={[m.stacked]:this._hasIndicators};return(0,z.K)("div",{class:this.classes(m.base,t)},e||(0,z.K)("div",{class:m.message},this.messages.noLegend))}_renderCarousel(){const e=[],t=this.activeLayerInfos;if(t)for(const i of t)this._renderSections(i,e);return null!==e&&void 0!==e&&e.length?(0,z.K)("calcite-carousel",{class:m.carousel,label:this.messages.carousel},e.map((t,i)=>(0,z.K)("calcite-carousel-item",{class:m.carouselItem,key:i,label:(0,b.V)(this.messagesCommon.pagination.pageText,{index:i+1,total:e.length})},t))):null}_renderLayers(){var e;const t=this.activeLayerInfos,i=null===t||void 0===t||null===(e=t.toArray())||void 0===e?void 0:e.map(e=>this._renderLegendForLayer(e)).filter(Boolean);return null!==i&&void 0!==i&&i.length?i:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const t=e.children.toArray().map(this._renderLegendForLayer,this);return(0,z.K)("section",{class:this.classes(m.service,m.groupLayer),key:e.layer.uid},(0,z.K)("div",{class:m.serviceCaptionContainer},e.title),t)}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){var t;const i=null===(t=e.legendElements)||void 0===t?void 0:t.filter(Boolean);if(null===i||void 0===i||!i.length)return null;const s=i.map(t=>(0,z.K)(he,{activeLayerInfo:e,cssEffectFilter:e.cssEffectFilter,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:"".concat(e.layer.uid,"-").concat(t.type),layer:e.layer,legendElement:t,messages:this.messages})),l={[m.groupLayerChild]:!!e.parent};return(0,z.K)("section",{class:this.classes(m.service,l),key:e.layer.uid},(0,z.K)("div",{class:m.serviceCaptionContainer},(0,z.K)("div",{class:m.serviceCaptionText},e.title)),(0,z.K)("div",{class:m.serviceContent},s))}_renderSections(e,t){if(!e.ready)return;if(e.children.length)for(const s of e.children)this._renderSections(s,t);const i=e.legendElements;if(null!==i&&void 0!==i&&i.length)for(const s of i){const i=(0,z.K)(he,{activeLayerInfo:e,cssEffectFilter:e.cssEffectFilter,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:"".concat(e.layer.uid,"-").concat(s.type),layer:e.layer,legendElement:s,messages:this.messages});i&&t.push(i)}}};(0,l.Cg)([(0,o.MZ)()],ge.prototype,"activeLayerInfos",void 0),(0,l.Cg)([(0,o.MZ)()],ge.prototype,"headingLevel",void 0),(0,l.Cg)([(0,o.MZ)()],ge.prototype,"layout",void 0),(0,l.Cg)([(0,o.MZ)(),(0,me.G)("esri/widgets/Legend/t9n/Legend")],ge.prototype,"messages",void 0),(0,l.Cg)([(0,o.MZ)(),(0,me.G)("esri/t9n/common")],ge.prototype,"messagesCommon",void 0),(0,l.Cg)([(0,o.MZ)({readOnly:!0})],ge.prototype,"type",void 0),(0,l.Cg)([(0,o.MZ)()],ge.prototype,"view",void 0),ge=(0,l.Cg)([(0,d.$)("esri.widgets.Legend.styles.card.CardView")],ge);const ue="esri-legend",fe={service:"".concat(ue,"__service"),label:"".concat(ue,"__service-label"),layer:"".concat(ue,"__layer"),groupLayer:"".concat(ue,"__group-layer"),groupLayerChild:"".concat(ue,"__group-layer-child"),layerTable:"".concat(ue,"__layer-table"),layerTableSizeRamp:"".concat(ue,"__layer-table--size-ramp"),layerChildTable:"".concat(ue,"__layer-child-table"),layerCaption:"".concat(ue,"__layer-caption"),layerBody:"".concat(ue,"__layer-body"),layerRow:"".concat(ue,"__layer-row"),layerCell:"".concat(ue,"__layer-cell"),layerInfo:"".concat(ue,"__layer-cell ").concat(ue,"__layer-cell--info"),imageryLayerStretchedImage:"".concat(ue,"__imagery-layer-image--stretched"),imageryLayerCellStretched:"".concat(ue,"__imagery-layer-cell--stretched"),imageryLayerInfoStretched:"".concat(ue,"__imagery-layer-info--stretched"),symbolContainer:"".concat(ue,"__layer-cell ").concat(ue,"__layer-cell--symbols"),symbol:"".concat(ue,"__symbol"),rampContainer:"".concat(ue,"__ramps"),sizeRamp:"".concat(ue,"__size-ramp"),colorRamp:"".concat(ue,"__color-ramp"),opacityRamp:"".concat(ue,"__opacity-ramp"),borderlessRamp:"".concat(ue,"__borderless-ramp"),rampTick:"".concat(ue,"__ramp-tick"),rampFirstTick:"".concat(ue,"__ramp-tick-first"),rampLastTick:"".concat(ue,"__ramp-tick-last"),rampLabelsContainer:"".concat(ue,"__ramp-labels"),rampLabel:"".concat(ue,"__ramp-label"),message:"".concat(ue,"__message"),univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"};let be=class extends p.A{constructor(e,t){super(e,t),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const t="opacity-ramp"===this.legendElement.type?fe.opacityRamp:"";return e.className="".concat(fe.colorRamp," ").concat(t),null!=this.opacity&&(e.style.opacity=this.opacity.toString()),e}render(){var e;const{legendElement:t,_preview:i}=this;if(!i)return null;const s={width:"".concat(24,"px")},l={height:i.style.height},a=(0,b.V)(this.messages.previewColorRampAriaLabel,{label:null});return a&&null!==(e=i.querySelector("svg"))&&void 0!==e&&e.setAttribute("aria-label",a),(0,z.K)("div",{class:fe.layerRow,key:"".concat(this.key,"-row")},(0,z.K)("div",{class:fe.symbolContainer,styles:s},(0,z.K)("div",{afterCreate:L,bind:i,class:fe.rampContainer})),(0,z.K)("div",{class:fe.layerInfo},(0,z.K)("div",{class:fe.rampLabelsContainer,styles:l},t.infos.map((e,i)=>this._renderRampLabel(e,i,t.type)))))}_renderRampLabel(e,t,i){var s;return(0,z.K)("div",{class:e.label?fe.rampLabel:void 0,key:"".concat(this.key,"-stop-").concat(null!==(s=e.label)&&void 0!==s?s:t,"-label")},K(e,i,this.messages))}};(0,l.Cg)([(0,o.MZ)()],be.prototype,"_preview",null),(0,l.Cg)([(0,o.MZ)()],be.prototype,"legendElement",void 0),(0,l.Cg)([(0,o.MZ)()],be.prototype,"messages",void 0),(0,l.Cg)([(0,o.MZ)()],be.prototype,"opacity",void 0),be=(0,l.Cg)([(0,d.$)("esri.widgets.Legend.styles.classic.ColorRamp")],be);let we=class extends p.A{constructor(e,t){super(e,t),this.legendElement=null}render(){const e=this.legendElement.infos.map(e=>this._renderRow(e)).filter(Boolean);return e.length?"spike"===this.legendElement.theme?P(this.legendElement):(0,z.K)("div",{class:fe.layerBody},e):null}_renderRow(e){return e.preview?(0,z.K)("div",{class:fe.layerRow,key:"".concat(this.key,"-").concat(e.label,"-row")},(0,z.K)("div",{class:this.classes(fe.symbolContainer,fe.sizeRamp)},(0,z.K)("div",{afterCreate:L,bind:e.preview,class:fe.symbol})),(0,z.K)("div",{class:fe.layerInfo},_(this.messages,e.label,!1)||"")):null}};(0,l.Cg)([(0,o.MZ)()],we.prototype,"legendElement",void 0),(0,l.Cg)([(0,o.MZ)()],we.prototype,"messages",void 0),we=(0,l.Cg)([(0,d.$)("esri.widgets.Legend.styles.classic.SizeRamp")],we);let Le=class extends p.A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,cssEffectFilter:i,key:s}=this,{sizeRampElement:l,colorRampElement:a}=se(e,t);if(!l)return null;const n=this.messages.previewColorRampAriaLabel,r=ie(l,"above",!0),o=ie(l,"below",!0),c=ee(a,{width:12,height:r,rampAlignment:"vertical",opacity:t,type:"above",cssEffectFilter:i,ariaLabel:n}),d=ee(a,{width:12,height:o,rampAlignment:"vertical",opacity:t,type:"below",cssEffectFilter:i,ariaLabel:n}),p=Y(l),y=l.infos.map(e=>e.label),h=y.map((e,t)=>{const i=2===t;return 0===t?(0,z.K)("div",{class:e?c?fe.univariateAboveAndBelowLabel:fe.rampLabel:void 0,key:"".concat(s,"-color-ramp-above-label-").concat(null!==e&&void 0!==e?e:t)},e):i?(0,z.K)("div",null):null}),v=y.length-1,m=Math.floor(y.length/2),g=y.map((e,t)=>t===m||t===v?(0,z.K)("div",{class:e?c?fe.univariateAboveAndBelowLabel:fe.rampLabel:void 0,key:"".concat(s,"-color-ramp-below-label-").concat(null!==e&&void 0!==e?e:t)},e):null),u={display:"table-cell",verticalAlign:"middle"},f={marginTop:"".concat(p,"px")},b={height:"".concat(r,"px")},w={height:"".concat(o,"px")};return(0,z.K)("div",{key:"".concat(s,"-container"),styles:re},(0,z.K)("div",{class:fe.layerBody},l.infos.map((e,t)=>(0,z.K)("div",{class:this.classes(fe.layerRow,fe.sizeRamp),key:"".concat(s,"-row-").concat(t)},(0,z.K)("div",{afterCreate:L,bind:e.preview,class:fe.symbol,styles:u}),c||t%2!=0?null:(0,z.K)("div",{class:fe.layerInfo},y[t])))),c?(0,z.K)("div",{styles:f},(0,z.K)("div",{styles:ae},(0,z.K)("div",{styles:ne},(0,z.K)("div",{afterCreate:L,bind:c,class:fe.rampContainer})),(0,z.K)("div",{styles:ne},(0,z.K)("div",{class:fe.rampLabelsContainer,styles:b},h))),(0,z.K)("div",{styles:ae},(0,z.K)("div",{styles:ne},(0,z.K)("div",{afterCreate:L,bind:d,class:fe.rampContainer})),(0,z.K)("div",{styles:ne},(0,z.K)("div",{class:fe.rampLabelsContainer,styles:w},g)))):null)}};(0,l.Cg)([(0,o.MZ)()],Le.prototype,"cssEffectFilter",void 0),(0,l.Cg)([(0,o.MZ)()],Le.prototype,"legendElement",void 0),(0,l.Cg)([(0,o.MZ)()],Le.prototype,"messages",void 0),(0,l.Cg)([(0,o.MZ)()],Le.prototype,"opacity",void 0),Le=(0,l.Cg)([(0,d.$)("esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp")],Le);let _e=class extends p.A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){var e;const{legendElement:t,opacity:i,cssEffectFilter:s,key:l}=this,{sizeRampElement:a,colorRampElement:n}=le(t);if(!a)return null;const r=Y(a),o=ie(a,"full",!1),c=ee(n,{width:12,height:o,rampAlignment:"vertical",opacity:i,type:"full",cssEffectFilter:s,ariaLabel:null===(e=this.messages)||void 0===e?void 0:e.previewColorRampAriaLabel}),d=a.infos.length-1,p=a.infos.map((e,t)=>{var i;return 0===t||t===d?(0,z.K)("div",{class:e.label?n?fe.univariateAboveAndBelowLabel:fe.rampLabel:void 0,key:"".concat(l,"-color-ramp-label-").concat(null!==(i=e.label)&&void 0!==i?i:t)},e.label):null}),y={display:"table-cell",verticalAlign:"middle"},h={marginTop:"".concat(r,"px")},v={height:"".concat(o,"px")};return(0,z.K)("div",{key:"".concat(l,"-container"),styles:re},(0,z.K)("div",{class:fe.layerBody},a.infos.map((e,t)=>(0,z.K)("div",{class:this.classes(fe.layerRow,fe.sizeRamp),key:"".concat(l,"-row-").concat(t)},(0,z.K)("div",{afterCreate:L,bind:e.preview,class:fe.symbol,styles:y})))),(0,z.K)("div",{styles:h},(0,z.K)("div",{styles:ae},(0,z.K)("div",{styles:ne},(0,z.K)("div",{afterCreate:L,bind:c,class:fe.rampContainer})),(0,z.K)("div",{styles:ne},(0,z.K)("div",{class:fe.rampLabelsContainer,styles:v},p)))))}};var Ce;(0,l.Cg)([(0,o.MZ)()],_e.prototype,"cssEffectFilter",void 0),(0,l.Cg)([(0,o.MZ)()],_e.prototype,"legendElement",void 0),(0,l.Cg)([(0,o.MZ)()],_e.prototype,"messages",void 0),(0,l.Cg)([(0,o.MZ)()],_e.prototype,"opacity",void 0),_e=(0,l.Cg)([(0,d.$)("esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp")],_e);let Ee=Ce=class extends p.A{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),t=k(this.legendElement,this.messages),i=this.isChild?fe.layerChildTable:fe.layerTable,s=t?(0,z.K)("div",{class:fe.layerCaption},t):null,l={[fe.layerTableSizeRamp]:"size-ramp"===this.legendElement.type||!this.isChild};return(0,z.K)("section",{class:this.classes(i,l),key:"".concat(this.key,"-table")},s,e)}_renderLegendElement(){switch(this.legendElement.type){case"symbol-table":return this._renderSymbolTable(this.legendElement);case"size-ramp":return(0,z.K)(we,{key:this.key,legendElement:this.legendElement,messages:this.messages});case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":return(0,z.K)(be,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"relationship-ramp":return(0,pe.p)(this.legendElement,this.id,{opacity:this.layer.opacity,cssEffectFilter:this.cssEffectFilter,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case"pie-chart-ramp":{var e;const{preview:t}=this.legendElement;if(!t)return null;const i=(0,b.V)(this.messages.previewPieChartAriaLabel,{label:null});return i&&null!==(e=t.querySelector("svg"))&&void 0!==e&&e.setAttribute("aria-label",i),(0,z.K)("div",{afterCreate:L,bind:t,key:"".concat(this.key,"-preview")})}case"univariate-above-and-below-ramp":return(0,z.K)(Le,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case"univariate-color-size-ramp":return(0,z.K)(_e,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const t=e.infos.map(t=>this._renderElementInfo(t,e.legendType)).filter(Boolean);return t.length?(0,z.K)("div",{class:fe.layerBody},t):null}_renderElementInfo(e,t){const{layer:i}=this,s="label"in e?e.label:null,l="".concat(this.key,"-").concat(s);if("type"in e&&e.type)return(0,z.K)(Ce,{cssEffectFilter:this.cssEffectFilter,isChild:!0,key:l,layer:i,legendElement:e,messages:this.messages});if(!("preview"in e&&e.preview||"src"in e&&e.src))return null;const a=E(i,t),n={[fe.imageryLayerInfoStretched]:a},r={[fe.imageryLayerInfoStretched]:a};return(0,z.K)("div",{class:fe.layerRow,key:"".concat(l,"-row")},(0,z.K)("div",{class:this.classes(fe.symbolContainer,r)},this._renderPreview(e,a)),(0,z.K)("div",{class:this.classes(fe.layerInfo,n)},_(this.messages,s,!1)||""))}_renderPreview(e,t){const{layer:i}=this;if("preview"in e&&e.preview){const{preview:t}=e,i="previewAriaLabel"in e?e.previewAriaLabel:null,s="label"in e?_(this.messages,e.label,!1):null,l=t.querySelector("svg"),a=M(this.messages,i||s);return a&&l&&l.setAttribute("aria-label",a),(0,z.K)("div",{afterCreate:L,bind:t,class:fe.symbol})}return"src"in e&&e.src?this._renderImage(e,i,t):null}_renderImage(e,t,i){const{previewAriaLabel:s,src:l,opacity:a}=e,n=_(this.messages,e.label,!1),r={[fe.imageryLayerStretchedImage]:i,[fe.symbol]:!i},o={opacity:"".concat(null!==a&&void 0!==a?a:t.opacity)},c=M(this.messages,s||n);return(0,z.K)("img",{alt:c,"aria-label":c,border:0,class:this.classes(r),height:e.height,src:l,styles:o,width:e.width})}};(0,l.Cg)([(0,o.MZ)()],Ee.prototype,"cssEffectFilter",void 0),(0,l.Cg)([(0,o.MZ)()],Ee.prototype,"isChild",void 0),(0,l.Cg)([(0,o.MZ)()],Ee.prototype,"layer",void 0),(0,l.Cg)([(0,o.MZ)()],Ee.prototype,"legendElement",void 0),(0,l.Cg)([(0,o.MZ)()],Ee.prototype,"messages",void 0),Ee=Ce=(0,l.Cg)([(0,d.$)("esri.widgets.Legend.styles.classic.LegendElement")],Ee);var Ke=i(98108);const ke="".concat(ue,"__");let Re=class extends p.A{constructor(e,t){super(e,t),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,t=null===e||void 0===e?void 0:e.toArray().map(e=>this._renderLegendForLayer(e)).filter(Boolean);return null!==t&&void 0!==t&&t.length?(0,z.K)("section",null,t):(0,z.K)("div",{class:fe.message,key:"no-legend"},this.messages.noLegend)}_renderLegendForLayer(e,t){if(!e.ready)return null;const i="".concat(e.layer.uid,"-version-").concat(e.version),s="".concat(ke).concat(t?"".concat(t,"-"):"").concat(i),l=e.title?(0,ye.D)({level:this.headingLevel,class:this.classes(Ke.D.heading,fe.label)},e.title):null;if(e.children.length){const t=e.children.toArray().map(e=>this._renderLegendForLayer(e,i));return(0,z.K)("section",{class:this.classes(fe.service,fe.groupLayer),key:s},l,t)}return this._renderLegendElementsForLayer(e,l,s)}_renderLegendElementsForLayer(e,t,i){var s;const l=null===(s=e.legendElements)||void 0===s?void 0:s.filter(Boolean);if(null===l||void 0===l||!l.length)return null;const a=l.map(t=>(0,z.K)(Ee,{cssEffectFilter:e.cssEffectFilter,isChild:!1,key:"".concat(i,"-").concat(t.type),layer:e.layer,legendElement:t,messages:this.messages})),n={[fe.groupLayerChild]:!!e.parent};return(0,z.K)("section",{class:this.classes(fe.service,n),key:i},t,(0,z.K)("div",{class:fe.layer},a))}};(0,l.Cg)([(0,o.MZ)()],Re.prototype,"activeLayerInfos",void 0),(0,l.Cg)([(0,o.MZ)()],Re.prototype,"headingLevel",void 0),(0,l.Cg)([(0,o.MZ)(),(0,me.G)("esri/widgets/Legend/t9n/Legend")],Re.prototype,"messages",void 0),(0,l.Cg)([(0,o.MZ)({readOnly:!0})],Re.prototype,"type",void 0),Re=(0,l.Cg)([(0,d.$)("esri.widgets.Legend.styles.classic.ClassicView")],Re);const Me="esri-legend";let xe=class extends p.A{constructor(e,t){super(e,t),this.headingLevel=3,this.messages=null,this.viewModel=new y.A,this.style=new Re,(0,a.ED)(n.A.getLogger(this),"Legend","arcgis-legend",{version:"4.34"})}initialize(){this.addHandles([(0,r.on)(()=>this.view,"resize",()=>this.scheduleRender()),(0,r.on)(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),(0,r.wB)(()=>this.headingLevel,e=>{const{style:t}=this;t&&(t.headingLevel=e)}),(0,r.wB)(()=>this.style,(e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,"card"===e.type&&(e.view=this.view),e.headingLevel=this.headingLevel)},r.Vh)])}destroy(){var e;null===(e=this.style)||void 0===e||e.destroy()}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return"legend"}set icon(e){this._overrideIfSome("icon",e)}get label(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""}set label(e){this._overrideIfSome("label",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}set style(e){const t=this._get("style");e!==t&&null!==t&&void 0!==t&&t.destroy(),this._set("style",e)}castStyle(e){if(e instanceof ge||e instanceof Re)return e;if("string"==typeof e)return"card"===e?new ge:new Re;if(e&&"string"==typeof e.type){const t=(0,s.A)({},e);return delete t.type,"card"===e.type?new ge(t):new Re(t)}return new Re}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return(0,z.K)("div",{class:this.classes(Me,Ke.D.widget,this.style instanceof Re?Ke.D.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach(e=>{this.removeHandles("version_".concat(e.layer.uid)),this._renderOnActiveLayerInfoChange(e)}),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const t=(0,r.wB)(()=>e.version,()=>this.scheduleRender());this.addHandles(t,"version_".concat(e.layer.uid));const i=(0,r.on)(()=>e.children,"change",()=>e.children.forEach(e=>this._renderOnActiveLayerInfoChange(e)),r.Vh);this.addHandles(i,"version_".concat(e.layer.uid)),e.children.forEach(e=>this._renderOnActiveLayerInfoChange(e))}};(0,l.Cg)([(0,o.MZ)()],xe.prototype,"activeLayerInfos",null),(0,l.Cg)([(0,o.MZ)()],xe.prototype,"basemapLegendVisible",null),(0,l.Cg)([(0,o.MZ)()],xe.prototype,"groundLegendVisible",null),(0,l.Cg)([(0,o.MZ)()],xe.prototype,"headingLevel",void 0),(0,l.Cg)([(0,o.MZ)()],xe.prototype,"hideLayersNotInCurrentView",null),(0,l.Cg)([(0,o.MZ)()],xe.prototype,"keepCacheOnDestroy",null),(0,l.Cg)([(0,o.MZ)()],xe.prototype,"respectLayerDefinitionExpression",null),(0,l.Cg)([(0,o.MZ)()],xe.prototype,"respectLayerVisibility",null),(0,l.Cg)([(0,o.MZ)()],xe.prototype,"icon",null),(0,l.Cg)([(0,o.MZ)()],xe.prototype,"label",null),(0,l.Cg)([(0,o.MZ)()],xe.prototype,"layerInfos",null),(0,l.Cg)([(0,o.MZ)(),(0,me.G)("esri/widgets/Legend/t9n/Legend")],xe.prototype,"messages",void 0),(0,l.Cg)([(0,o.MZ)()],xe.prototype,"style",null),(0,l.Cg)([(0,c.w)("style")],xe.prototype,"castStyle",null),(0,l.Cg)([(0,o.MZ)()],xe.prototype,"view",null),(0,l.Cg)([(0,o.MZ)()],xe.prototype,"viewModel",void 0),xe=(0,l.Cg)([(0,d.$)("esri.widgets.Legend")],xe);const ze=xe},87540:(e,t,i)=>{i.d(t,{D:()=>d,S:()=>y});var s=i(89379),l=i(53986),a=i(15941),n=i(98108),r=i(15187),o=i(54761);const c=["level","class"];function d(e,t){let{level:i,class:a}=e,d=(0,l.A)(e,c);const y=p(i);return(0,o.K)("h".concat(y),(0,s.A)((0,s.A)({},d),{},{"aria-level":String(y),class:(0,r.Ly)(n.D.heading,a),role:"heading"}),t)}function p(e){return(0,a.qE)(Math.ceil(e),1,6)}function y(e){return p(e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1))}}}]);
//# sourceMappingURL=80424.67a5f6d0.chunk.js.map