{"version":3,"file":"static/js/29529.a285e1db.chunk.js","mappings":"6SAIovB,MAAMA,EAAEC,EAAAA,EAAEC,OAAOC,EAAAA,GAAG,IAAIC,EAAE,cAAcC,EAAAA,EAAEC,WAAAA,CAAYC,GAAGC,MAAMD,GAAGE,KAAKC,KAAK,WAAWD,KAAKE,QAAQ,IAAI,CAACC,UAAAA,GAAaH,KAAKI,YAAWC,EAAAA,EAAAA,IAAG,IAAIL,KAAKM,iBAAmBR,IAAI,MAAMA,EAAES,UAAUP,KAAKE,QAAQJ,EAAEU,SAAUC,EAAAA,IAAG,CAAC,aAAIC,GAAY,OAAOV,KAAKW,KAAK,cAAc,IAAIpB,CAAC,CAAC,aAAImB,CAAUZ,GAAGE,KAAKY,KAAK,aAAYC,EAAAA,EAAAA,GAAEf,EAAEE,KAAKU,UAAUnB,GAAG,CAAC,oBAAIuB,GAAmB,IAAI,MAAMhB,KAAKE,KAAKU,UAAU,GAAG,MAAMZ,EAAEiB,SAAS,OAAOjB,EAAEiB,SAASD,iBAAiB,OAAO,IAAI,CAAC,UAAIN,GAAS,OAAOR,KAAKE,OAAO,CAAC,SAAIc,GAAQ,OAAOhB,KAAKU,UAAUO,MAAOnB,GAAGA,EAAEkB,MAAO,CAAC,uBAAME,GAAoB,MAAMpB,EAAEE,KAAKM,iBAAiB,MAAMR,EAAES,eAAeT,EAAES,OAAO,CAACD,cAAAA,GAAiB,MAAMQ,iBAAiBhB,GAAGE,KAAK,GAAG,MAAMF,EAAE,MAAM,CAACS,QAAQ,KAAKC,OAAO,MAAM,MAAMZ,EAAEI,KAAKU,UAAUS,OAAQrB,GAAG,MAAMA,EAAEiB,UAAWrB,EAAEE,EAAEwB,IAAKtB,GAAGA,EAAEiB,UAAWM,UAAUC,GAAEC,EAAAA,EAAAA,mBAAE7B,EAAEI,GAAG,OAAG,MAAMwB,EAAEf,QAAc,CAACA,QAAQe,EAAEf,QAAQC,OAAO,MAAY,CAACD,QAAQ,KAAKC,OAAOc,EAAEE,WAAWJ,IAAK,CAACtB,EAAEJ,KAAK,MAAM4B,EAAE1B,EAAE6B,GAAG/B,GAAG,OAAO,MAAMI,GAAG,MAAMwB,EAAEtB,KAAK0B,uBAAuB1B,KAAKU,UAAUe,GAAG/B,GAAGI,GAAG,OAAQqB,OAAQrB,GAAG,MAAMA,GAAI6B,OAAQ,CAAC7B,EAAEF,IAA81B,SAAWE,EAAEF,GAAG,OAAO,MAAME,EAAEF,EAAE,MAAMA,EAAEE,EAAEA,EAAE8B,MAAMhC,EAAE,CAA/4BiC,CAAE/B,EAAEF,GAAI,MAAM,CAAC8B,sBAAAA,CAAuB5B,EAAEF,GAAG,MAAMkC,YAAYpC,EAAEqC,QAAQT,EAAEU,KAAKxC,EAAEyC,sBAAsBpB,EAAEqB,oBAAoBC,GAAGrC,GAAGgB,iBAAiBT,GAAGT,EAAEa,EAAEI,EAAE,EAAEuB,EAAED,EAAE,EAAEE,EAAE3C,EAAEW,EAAEiC,cAAcf,EAAE,CAACgB,EAAAA,GAAEC,UAAUlB,EAAEb,GAAGa,EAAEiB,EAAAA,GAAEC,UAAUlB,EAAEb,IAAIlB,EAAEkD,EAAAA,EAAEC,UAAU9C,GAAGD,EAAEG,IAAI,MAAMF,EAAE2B,EAAEH,IAAKxB,GAAG2C,EAAAA,GAAEC,UAAU5C,EAAEE,IAAK,GAAGF,EAAE,GAAGA,EAAE,IAAI,MAAMiB,EAAE,OAAOwB,EAAE,MAAM3C,EAAEE,EAAEwB,IAAKtB,GAAG6C,KAAKC,IAAI9C,EAAE,IAAI,IAAIA,EAAEA,IAAK6B,OAAQ,CAAC7B,EAAEF,IAAIE,EAAEF,EAAEA,EAAEE,GAAI,OAAOJ,EAAE,GAAG,EAAE2C,EAAEM,KAAKE,KAAIC,EAAAA,EAAAA,IAAEpD,KAAKH,EAAEwD,MAAMpD,EAAE,IAAIJ,EAAEyD,MAAMrD,GAAG,IAAIJ,EAAE0D,MAAMtD,EAAE,GAAGJ,EAAE2D,MAAMvD,EAAE,KAAK,MAAMkC,EAAEjC,EAAEuD,EAAE,GAAG,MAAMtB,EAAE,CAAC,IAAI/B,EAAE+B,EAAEjC,EAAEiC,EAAE,MAAMP,EAAE9B,EAAE,GAAGqB,GAAEuC,EAAAA,EAAAA,IAAE9B,EAAEc,GAAG,GAAG,IAAID,GAAEiB,EAAAA,EAAAA,IAAE9B,EAAEc,GAAG,GAAG,IAAIG,EAAG,OAADlC,QAAC,IAADA,GAAAA,EAAGgD,aAAa3D,EAAE2C,EAAEvC,GAAGyC,EAAEe,EAAEzC,GAAGjB,GAAG2C,EAAEe,EAAEnB,GAAG,MAAMW,EAAES,EAAEnB,GAAGG,EAAEE,EAAEa,EAAEhC,GAAGwB,GAAG,EAAES,EAAE9C,IAAIjB,EAAE,KAAKM,GAAG2C,GAAGjD,EAAE,KAAKI,GAAG6C,GAAGlD,EAAEiE,KAAKb,KAAKc,IAAI3D,EAAE+B,GAAGtC,EAAEmE,KAAKf,KAAKgB,IAAI/D,EAAEiC,EAAE,CAAC,OAAOtC,CAAC,CAACqE,MAAAA,CAAO9D,GAAG,OAAOE,OAAOF,GAAGC,MAAM6D,OAAO9D,KAAIwB,EAAAA,EAAAA,IAAEtB,KAAKU,UAAUW,UAAUvB,EAAEY,UAAUW,UAAW,CAACvB,EAAEF,IAAIE,EAAE8D,OAAOhE,GAAI,CAACiE,KAAAA,GAAQ7D,KAAKU,UAAUoD,WAAW,GAAyD,SAASP,EAAEzD,GAAG,OAAO6C,KAAKE,KAAIC,EAAAA,EAAAA,IAAEhD,GAAG,CAAC,SAASwD,EAAExD,GAAG,OAAO6C,KAAKoB,KAAIjB,EAAAA,EAAAA,IAAEhD,GAAG,EAACA,EAAAA,EAAAA,GAAE,EAACsC,EAAAA,EAAAA,IAAE,CAACnC,KAAK,CAAC,eAAeN,EAAEqE,UAAU,YAAO,IAAQlE,EAAAA,EAAAA,GAAE,EAACsC,EAAAA,EAAAA,IAAE,CAAC6B,KAAK9B,EAAAA,EAAElC,KAAKV,EAAE2E,aAAY,KAAMvE,EAAEqE,UAAU,YAAY,OAAMlE,EAAAA,EAAAA,GAAE,EAACsC,EAAAA,EAAAA,IAAE,CAAC+B,UAAS,KAAMxE,EAAEqE,UAAU,mBAAmB,OAAMlE,EAAAA,EAAAA,GAAE,EAACsC,EAAAA,EAAAA,OAAKzC,EAAEqE,UAAU,eAAU,IAAQlE,EAAAA,EAAAA,GAAE,EAACsC,EAAAA,EAAAA,OAAKzC,EAAEqE,UAAU,SAAS,OAAMlE,EAAAA,EAAAA,GAAE,EAACsC,EAAAA,EAAAA,IAAE,CAAC+B,UAAS,KAAMxE,EAAEqE,UAAU,QAAQ,MAAMrE,GAAEG,EAAAA,EAAAA,GAAE,EAACuC,EAAAA,EAAAA,GAAE,mCAAmC1C,G,2DCAl5E,IAAIA,EAAE,eAAc8C,EAAAA,EAAAA,IAAEN,EAAAA,EAAAA,GAAE1B,EAAAA,KAAKZ,WAAAA,CAAYC,GAAGC,MAAMD,GAAGE,KAAKC,KAAK,WAAWD,KAAKoE,qBAAqB,gBAAgBpE,KAAKqE,OAAO,IAAI/C,EAAEtB,KAAKsE,QAAQ,CAAC,CAACnE,UAAAA,GAAaH,KAAKI,YAAWS,EAAAA,EAAAA,IAAG,IAAIb,KAAKqE,OAAS,CAACvE,EAAEJ,KAAK,MAAMA,GAAGA,EAAE6E,SAASvE,OAAON,EAAE6E,OAAO,MAAM,MAAMzE,IAAIA,EAAEyE,OAAOvE,OAAQ8C,EAAAA,IAAG,CAAC,UAAM0B,GAAO,OAAOxE,KAAKyE,oBAAoBzE,KAAKqE,OAAOnD,qBAAqBlB,IAAI,CAAC,oBAAIc,GAAmB,OAAOd,KAAKqE,OAAOvD,gBAAgB,CAAC,cAAI4D,GAAa,OAAO1E,KAAKqE,OAAO7D,MAAM,CAACmE,eAAAA,CAAgB7E,GAAGE,KAAKqE,SAASvE,IAAIE,KAAKqE,OAAO,IAAI/C,EAAE,CAAC,YAAIsD,GAAW,OAAO5E,KAAKqE,MAAM,CAAC,YAAIO,CAAS9E,GAAGE,KAAKqE,OAAOvE,CAAC,CAAC,aAAIY,GAAY,OAAOV,KAAKqE,OAAO3D,SAAS,CAAC,aAAIA,CAAUZ,GAAGE,KAAKqE,OAAO3D,UAAUZ,CAAC,CAAC+E,cAAAA,CAAe/E,EAAEJ,EAAE4B,EAAE1B,GAAGF,EAAEgB,UAAUZ,EAAEqB,OAAQrB,GAAGA,EAAEkB,OAAQ8D,OAAOlF,EAAE,IAAGE,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,IAAE,CAAC2B,KAAK,CAACC,MAAK,GAAIb,UAAS,KAAMxE,EAAEqE,UAAU,YAAO,IAAQlE,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,IAAE,CAACnD,KAAK,CAAC,oBAAoBN,EAAEqE,UAAU,4BAAuB,IAAQlE,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,IAAE,CAACnD,KAAKqB,EAAE4C,aAAY,KAAMvE,EAAEqE,UAAU,cAAS,IAAQlE,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,IAAE,CAACe,UAAS,KAAMxE,EAAEqE,UAAU,mBAAmB,OAAMlE,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,IAAE,CAACe,UAAS,KAAMxE,EAAEqE,UAAU,aAAa,OAAMlE,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,IAAE,CAACe,UAAS,EAAGY,KAAK,CAACC,MAAK,EAAGC,OAAM,EAAGC,QAAQ,CAACC,QAAQ,CAACH,MAAK,EAAGC,OAAM,GAAI,cAAc,CAACD,MAAK,EAAGC,OAAM,GAAI,eAAe,CAACD,MAAK,EAAGC,OAAM,QAAStF,EAAEqE,UAAU,eAAU,IAAQlE,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,IAAE,CAACnD,KAAK,CAAC,OAAO,WAAWN,EAAEqE,UAAU,gBAAW,IAAQlE,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,IAAE,CAACnD,KAAKL,EAAAA,EAAEH,OAAOC,EAAAA,GAAGqF,KAAK,CAACE,MAAM,CAACG,cAAa,GAAIF,QAAQ,CAAC,YAAY,CAACD,MAAM,CAACG,cAAa,SAAUzF,EAAEqE,UAAU,YAAY,OAAMlE,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,GAAE,YAAY,cAAc5C,EAAEqE,UAAU,iBAAiB,MAAMrE,GAAEG,EAAAA,EAAAA,GAAE,EAACN,EAAAA,EAAAA,GAAE,8BAA8BG,GAAG,MAAMU,EAAEV,C,oLCA3gD,IAAIc,EAAE,cAAca,EAAAA,EAAE+D,iBAAiBlD,EAAAA,IAAItC,WAAAA,CAAYC,GAAGC,MAAMD,GAAGE,KAAKe,SAAS,KAAKf,KAAK8B,YAAY,IAAI9B,KAAK+B,QAAQ,EAAE/B,KAAKgC,KAAK,GAAGhC,KAAKiC,sBAAsB,GAAGjC,KAAKkC,oBAAoB,GAAGlC,KAAKsF,QAAQ,IAAI,CAAC,SAAItE,GAAQ,OAAO,MAAMhB,KAAKe,UAAUf,KAAK8B,YAAY,CAAC,CAAC8B,MAAAA,CAAO9D,GAAG,OAAOgD,EAAAA,EAAAA,IAAE9C,KAAKe,SAASjB,EAAEiB,WAAWf,KAAK8B,cAAchC,EAAEgC,aAAa9B,KAAK+B,UAAUjC,EAAEiC,SAAS/B,KAAKgC,OAAOlC,EAAEkC,MAAMhC,KAAKiC,wBAAwBnC,EAAEmC,uBAAuBjC,KAAKkC,sBAAsBpC,EAAEoC,sBAAqBxC,EAAAA,EAAAA,IAAEM,KAAKsF,QAAQxF,EAAEwF,QAAQ,IAAGxF,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,IAAE,CAACtC,KAAKI,EAAAA,EAAE0E,KAAK,CAACE,MAAM,CAACM,YAAW,OAAQ9E,EAAEuD,UAAU,gBAAW,IAAQlE,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,IAAE,CAACtC,KAAKuF,OAAOtB,aAAY,EAAGuB,MAAM,CAAC9B,IAAI,GAAGoB,KAAK,CAACE,MAAM,CAACM,YAAW,OAAQ9E,EAAEuD,UAAU,mBAAc,IAAQlE,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,IAAE,CAACtC,KAAKuF,OAAOtB,aAAY,EAAGa,KAAK,CAACE,MAAM,CAACM,YAAW,OAAO/F,EAAAA,EAAAA,GAAGM,GAAGF,EAAAA,GAAE4C,WAAUJ,EAAAA,EAAAA,IAAEtC,QAAG,GAAO,KAAOW,EAAEuD,UAAU,eAAU,IAAQlE,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,IAAE,CAACtC,KAAKuF,OAAOtB,aAAY,EAAGuB,MAAM,CAAC9B,IAAI,EAAEF,IAAI,KAAKsB,KAAK,CAACE,MAAM,CAACM,YAAW,OAAQ9E,EAAEuD,UAAU,YAAO,IAAQlE,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,IAAE,CAACtC,KAAKuF,OAAOtB,aAAY,EAAGuB,MAAM,CAAC9B,IAAI,EAAEF,IAAI,KAAKsB,KAAK,CAACE,MAAM,CAACM,YAAW,OAAQ9E,EAAEuD,UAAU,6BAAwB,IAAQlE,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,IAAE,CAACtC,KAAKuF,OAAOtB,aAAY,EAAGuB,MAAM,CAAC9B,IAAI,EAAEF,IAAI,KAAKsB,KAAK,CAACE,MAAM,CAACM,YAAW,OAAQ9E,EAAEuD,UAAU,2BAAsB,IAAQlE,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,IAAE1B,EAAAA,KAAIJ,EAAEuD,UAAU,eAAU,IAAQlE,EAAAA,EAAAA,GAAE,EAACyC,EAAAA,EAAAA,IAAE,CAAC4B,UAAS,EAAGY,KAAK,CAACC,MAAK,MAAOvE,EAAEuD,UAAU,QAAQ,MAAMvD,GAAEX,EAAAA,EAAAA,GAAE,EAACsD,EAAAA,EAAAA,GAAE,2BAA2B3C,E,wHCA/lD,SAASA,EAAEX,EAAEF,GAAG,OAAO6C,EAAE3C,KAAK2C,EAAE7C,EAAE,CAAC,SAAS6C,EAAE3C,GAAG,GAAG,MAAMA,EAAE,OAAO,KAAK,MAAMF,EAAE,MAAME,EAAE4F,MAAM5F,EAAE4F,MAAMC,GAAG,GAAG,IAAIjG,EAAE,KAAK,OAAOA,EAAE,MAAMI,EAAE8F,SAAS9F,EAAE8F,SAAS,MAAM9F,EAAE4F,OAAO,kBAAkB5F,EAAE4F,OAAO,MAAM5F,EAAE4F,MAAMG,eAAe,MAAM/F,EAAEgG,WAAWhG,EAAEgG,WAAWhG,EAAE4F,MAAMG,eAAe/F,EAAEiG,IAAI,MAAMrG,EAAE,KAAI,KAAAsG,OAAMpG,EAAC,KAAAoG,OAAItG,EAAG,CAAC,MAAMuG,EAAE,CAAClB,KAAK,CAACE,MAAM,CAACiB,OAAmK,SAAWpG,EAAEF,GAAE,IAAAuG,EAAC,OAAO,OAADrG,QAAC,IAADA,GAAQ,QAAPqG,EAADrG,EAAG4F,aAAK,IAAAS,OAAA,EAARA,EAAUN,gBAAe,MAAM/F,EAAEgG,aAAalG,EAAE0F,QAAQ,CAACc,QAAQtG,EAAE4F,MAAMC,GAAGC,SAAS9F,EAAEgG,WAAWhG,EAAE4F,MAAMG,gBAAgB,EAA1SQ,OAAO,CAAC,kBAAkB,CAACpG,KAAK,CAACuF,OAAOc,QAAQf,YAAW,GAAI,mBAAmB,CAACtF,KAAK,CAACuF,OAAOc,QAAQf,YAAW,KAAML,QAAQ,CAAC,YAAY,CAACF,KAA4J,SAAWlF,GAAG,GAAG,MAAMA,EAAEsG,SAAS,MAAMtG,EAAE8F,SAAS,MAAM,CAACG,IAAI,KAAKL,MAAM,CAACC,GAAG7F,EAAEsG,QAAQP,cAAc,YAAYC,WAAW,CAACS,SAASzG,EAAE8F,UAAU,MAAC,SAASxD,EAAEG,EAAEjB,EAAEwB,EAAErC,GAAE,IAAA+F,EAAAC,EAAC,MAAMC,wBAAwBT,GAAG1D,GAAGxB,SAASQ,EAAEoF,kBAAkBC,EAAEC,gBAAgBzE,EAAEiE,OAAO/C,GAAGR,EAAE,GAAG,MAAM8D,GAAG,MAAMxE,EAAE,OAAO3B,IAAIA,EAAEX,GAAGA,IAAGA,EAAAA,EAAAA,GAAEsD,EAAE7B,EAAE+B,GAAG,MAAM/D,GAAEK,EAAAA,EAAAA,GAAEwD,IAAO1D,EAAAA,EAAAA,GAAE0D,EAAE7B,EAAE6B,EAAR,EAAY7D,GAAG,MAAMuH,GAAE3E,EAAAA,EAAAA,IAAEiB,EAAEE,EAAE3D,GAAG2B,EAAEyF,QAAQC,MAAMnG,EAAAA,EAAEoG,IAAIhB,EAAEiB,4BAA4BJ,EAAExF,GAAG,IAAI6F,EAAE,KAAK5D,EAAE,KAAK6D,EAAE,KAAKC,EAAE,KAAK,IAAI,MAAMvH,KAAKwB,EAAEgG,QAAQC,IAAI,CAAC,MAAM3H,GAAES,EAAAA,EAAAA,IAAEP,EAAEyC,GAAG,GAAG,MAAM3C,GAAG,MAAME,EAAE0H,sBAAsB,SAAS,MAAM9H,EAAE+C,EAAE7C,GAAG,MAAMF,IAAI,MAAMkH,GAAGlH,IAAIkH,IAAK,OAADO,QAAC,IAADA,IAAAA,EAAI1G,EAAEgH,EAAE3H,EAAEyC,EAAEhD,KAAIO,EAAE0H,sBAAnR,EAA2SL,IAAIC,EAAEtH,IAAI,MAAMsC,GAAG1C,IAAI0C,IAAK,OAADmB,QAAC,IAADA,IAAAA,EAAI9C,EAAEgH,EAAE3H,EAAEyC,EAAEhD,KAAI,MAAM8H,GAAGvH,EAAE0H,sBAAjW,EAAyXjI,GAAGA,EAAEO,EAAE0H,sBAAhY,EAAwZjE,IAAI8D,EAAEvH,IAAI,CAAC,MAAM4H,iBAAiBC,EAAEC,eAAevF,GAAGS,EAAG,QAAD0D,EAAAY,SAAC,IAAAZ,GAADA,EAAGqB,qBAAqBF,GAAG7E,EAAEgF,sBAAsBV,EAAEW,sBAAqBvI,EAAAA,EAAAA,OAAKsD,EAAEgF,sBAAsB,KAAM,QAADrB,EAAAY,SAAC,IAAAZ,GAADA,EAAGoB,qBAAqBxF,GAAGS,EAAEkF,oBAAoBX,EAAEU,sBAAqBvI,EAAAA,EAAAA,OAAKsD,EAAEkF,oBAAoB,IAAI,CAAC,SAASP,EAAE3H,EAAEF,EAAEF,GAAG,IAAG4B,EAAAA,EAAAA,IAAExB,GAAG,CAAC,MAAMN,GAAEsD,EAAAA,EAAAA,IAAEhD,EAAEF,GAAG,GAAG,MAAMJ,EAAE,OAAOmD,KAAKgB,IAAInE,EAAE8D,EAAE5D,EAAE,CAAC,OAAO,KAAKA,CAAC,CAAC,MAAM4D,EAAE,IAAI3D,GAAE4C,EAAAA,EAAAA,MAAIa,GAAE5D,EAAAA,EAAAA,K","sources":["../node_modules/@arcgis/core/analysis/ViewshedAnalysis.js","../node_modules/@arcgis/core/layers/ViewshedLayer.js","../node_modules/@arcgis/core/analysis/Viewshed.js","../node_modules/@arcgis/core/analysis/featureReferenceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"./Analysis.js\";import r from\"./Viewshed.js\";import{equals as s}from\"../core/arrayUtils.js\";import n from\"../core/Collection.js\";import{referenceSetter as i,castForReferenceSetter as o}from\"../core/collectionUtils.js\";import{cyclicalDegrees as l}from\"../core/Cyclical.js\";import{deg2rad as a,clamp as p}from\"../core/mathUtils.js\";import{watch as u,syncAndInitial as c}from\"../core/reactiveUtils.js\";import{property as m}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{subclass as h}from\"../core/accessorSupport/decorators/subclass.js\";import d from\"../geometry/Extent.js\";import{projectOrLoadMany as f}from\"../geometry/projectionUtils.js\";const v=n.ofType(r);let y=class extends t{constructor(e){super(e),this.type=\"viewshed\",this._extent=null}initialize(){this.addHandles(u((()=>this._computeExtent()),(e=>{null==e.pending&&(this._extent=e.extent)}),c))}get viewsheds(){return this._get(\"viewsheds\")||new v}set viewsheds(e){this._set(\"viewsheds\",i(e,this.viewsheds,v))}get spatialReference(){for(const e of this.viewsheds)if(null!=e.observer)return e.observer.spatialReference;return null}get extent(){return this._extent}get valid(){return this.viewsheds.every((e=>e.valid))}async waitComputeExtent(){const e=this._computeExtent();null!=e.pending&&await e.pending}_computeExtent(){const{spatialReference:e}=this;if(null==e)return{pending:null,extent:null};const t=this.viewsheds.filter((e=>null!=e.observer)),r=t.map((e=>e.observer)).toArray(),s=f(r,e);if(null!=s.pending)return{pending:s.pending,extent:null};return{pending:null,extent:s.geometries.map(((e,r)=>{const s=t.at(r);return null!=e&&null!=s?this._computeViewshedExtent(this.viewsheds.at(r),e):null})).filter((e=>null!=e)).reduce(((e,t)=>x(e,t)),null)}}_computeViewshedExtent(e,t){const{farDistance:r,heading:s,tilt:n,horizontalFieldOfView:i,verticalFieldOfView:o}=e,{spatialReference:u}=t,c=i/2,m=o/2,h=r/u.metersPerUnit,f=[l.normalize(s-c),s,l.normalize(s+c)],v=d.fromPoint(t),y=e=>{const t=f.map((t=>l.normalize(t-e)));if(t[0]>t[2]||360===i)return h;const r=t.map((e=>Math.abs(e>180?360-e:e))).reduce(((e,t)=>e>t?t:e));return r>90?0:h*Math.cos(a(r))};v.xmax+=y(90),v.xmin-=y(-90),v.ymax+=y(0),v.ymin-=y(180);const x=t.z;if(null!=x){let e=x,t=x;const s=n-90,i=p(s+m,-90,90),o=p(s-m,-90,90),l=u?.isGeographic?r:h;e+=l*g(i),t+=l*g(o);const a=w(m)*l,d=g(s)*a*(1-w(c));n<90&&(e-=d),n>90&&(t-=d),v.zmax=Math.max(e,x),v.zmin=Math.min(t,x)}return v}equals(e){return this===e||super.equals(e)&&s(this.viewsheds.toArray(),e.viewsheds.toArray(),((e,t)=>e.equals(t)))}clear(){this.viewsheds.removeAll()}};function x(e,t){return null==e?t:null==t?e:e.union(t)}function w(e){return Math.cos(a(e))}function g(e){return Math.sin(a(e))}e([m({type:[\"viewshed\"]})],y.prototype,\"type\",void 0),e([m({cast:o,type:v,nonNullable:!0})],y.prototype,\"viewsheds\",null),e([m({readOnly:!0})],y.prototype,\"spatialReference\",null),e([m()],y.prototype,\"_extent\",void 0),e([m()],y.prototype,\"extent\",null),e([m({readOnly:!0})],y.prototype,\"valid\",null),y=e([h(\"esri.analysis.ViewshedAnalysis\")],y);export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../analysis/Viewshed.js\";import s from\"../analysis/ViewshedAnalysis.js\";import t from\"../core/Collection.js\";import{MultiOriginJSONMixin as o}from\"../core/MultiOriginJSONSupport.js\";import{watch as i,syncAndInitial as a}from\"../core/reactiveUtils.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as l}from\"../core/accessorSupport/decorators/writer.js\";import c from\"./Layer.js\";import{OperationalLayer as d}from\"./mixins/OperationalLayer.js\";let y=class extends(d(o(c))){constructor(e){super(e),this.type=\"viewshed\",this.operationalLayerType=\"ViewshedLayer\",this.source=new s,this.opacity=1}initialize(){this.addHandles(i((()=>this.source),((e,r)=>{null!=r&&r.parent===this&&(r.parent=null),null!=e&&(e.parent=this)}),a))}async load(){return this.addResolvingPromise(this.source.waitComputeExtent()),this}get spatialReference(){return this.source.spatialReference}get fullExtent(){return this.source.extent}releaseAnalysis(e){this.source===e&&(this.source=new s)}get analysis(){return this.source}set analysis(e){this.source=e}get viewsheds(){return this.source.viewsheds}set viewsheds(e){this.source.viewsheds=e}writeViewsheds(e,r,s,t){r.viewsheds=e.filter((e=>e.valid)).toJSON(t)}};e([p({json:{read:!1},readOnly:!0})],y.prototype,\"type\",void 0),e([p({type:[\"ViewshedLayer\"]})],y.prototype,\"operationalLayerType\",void 0),e([p({type:s,nonNullable:!0})],y.prototype,\"source\",void 0),e([p({readOnly:!0})],y.prototype,\"spatialReference\",null),e([p({readOnly:!0})],y.prototype,\"fullExtent\",null),e([p({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-document\":{read:!1,write:!1}}}})],y.prototype,\"opacity\",void 0),e([p({type:[\"show\",\"hide\"]})],y.prototype,\"listMode\",void 0),e([p({type:t.ofType(r),json:{write:{ignoreOrigin:!0},origins:{\"web-scene\":{write:{ignoreOrigin:!0}}}}})],y.prototype,\"viewsheds\",null),e([l(\"web-scene\",\"viewsheds\")],y.prototype,\"writeViewsheds\",null),y=e([n(\"esri.layers.ViewshedLayer\")],y);const u=y;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{featureReferenceEquals as r,featureReferenceProperty as i}from\"./featureReferenceUtils.js\";import o from\"../core/Clonable.js\";import{cyclicalDegrees as t}from\"../core/Cyclical.js\";import s from\"../core/JSONSupport.js\";import{equalsMaybe as a}from\"../core/maybe.js\";import{property as l}from\"../core/accessorSupport/decorators/property.js\";import{cast as n}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as p}from\"../core/accessorSupport/decorators/subclass.js\";import{ensureNumber as m}from\"../core/accessorSupport/ensureType.js\";import u from\"../geometry/Point.js\";let c=class extends(s.JSONSupportMixin(o)){constructor(e){super(e),this.observer=null,this.farDistance=1e3,this.heading=0,this.tilt=90,this.horizontalFieldOfView=45,this.verticalFieldOfView=45,this.feature=null}get valid(){return null!=this.observer&&this.farDistance>0}equals(e){return a(this.observer,e.observer)&&this.farDistance===e.farDistance&&this.heading===e.heading&&this.tilt===e.tilt&&this.horizontalFieldOfView===e.horizontalFieldOfView&&this.verticalFieldOfView===e.verticalFieldOfView&&r(this.feature,e.feature)}};e([l({type:u,json:{write:{isRequired:!0}}})],c.prototype,\"observer\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0},json:{write:{isRequired:!0}}})],c.prototype,\"farDistance\",void 0),e([l({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),n((e=>t.normalize(m(e),void 0,!0)))],c.prototype,\"heading\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],c.prototype,\"tilt\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:360},json:{write:{isRequired:!0}}})],c.prototype,\"horizontalFieldOfView\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],c.prototype,\"verticalFieldOfView\",void 0),e([l(i)],c.prototype,\"feature\",void 0),e([l({readOnly:!0,json:{read:!1}})],c.prototype,\"valid\",null),c=e([p(\"esri.analysis.Viewshed\")],c);export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{a as e,l as t,b as r}from\"../chunks/vec32.js\";import{create as n}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as l,fromPoints as o}from\"../geometry/support/ray.js\";import{StoreResults as i}from\"../views/3d/webgl-engine/lib/IntersectorInterfaces.js\";import{toGraphic as u,hasLod as s,getIntersectedFeatureBSRadius as a}from\"../views/3d/webgl-engine/lib/intersectorUtilsConversions.js\";function c(e,t){return d(e)===d(t)}function d(e){if(null==e)return null;const t=null!=e.layer?e.layer.id:\"\";let r=null;return r=null!=e.objectId?e.objectId:null!=e.layer&&\"objectIdField\"in e.layer&&null!=e.layer.objectIdField&&null!=e.attributes?e.attributes[e.layer.objectIdField]:e.uid,null==r?null:`o-${t}-${r}`}const b={json:{write:{writer:f,target:{\"feature.layerId\":{type:[Number,String],isRequired:!0},\"feature.objectId\":{type:[Number,String],isRequired:!0}}},origins:{\"web-scene\":{read:I}}}};function f(e,t){null!=e?.layer?.objectIdField&&null!=e.attributes&&(t.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})}function I(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:\"ObjectId\"},attributes:{ObjectId:e.objectId}}}function m(l,s,a,c){const{sceneIntersectionHelper:b}=l,{observer:f,observerFeatureId:I,targetFeatureId:m,target:g}=a;if(null==I&&null==m)return;c||(c=e=>e),e(p,f,g);const v=t(p),S=1;r(p,f,p,S/v);const F=o(p,g,y);s.options.store=i.ALL,b.intersectToolIntersectorRay(F,s);let N=null,w=null,R=null,A=null;for(const e of s.results.all){const t=u(e,l);if(null==t||null==e.distanceInRenderSpace)continue;const r=d(t);null!=r&&(null!=I&&r===I&&(N??=c(j(e,l,v)),e.distanceInRenderSpace-S<N&&(R=e)),null!=m&&r===m&&(w??=c(j(e,l,v)),null==A&&e.distanceInRenderSpace-S<v&&v-e.distanceInRenderSpace+S<w&&(A=e)))}const{observerAdjusted:T,targetAdjusted:h}=a;R?.getIntersectionPoint(T)?a.observerSurfaceNormal=R.getTransformedNormal(n()):a.observerSurfaceNormal=null,A?.getIntersectionPoint(h)?a.targetSurfaceNormal=A.getTransformedNormal(n()):a.targetSurfaceNormal=null}function j(e,t,r){if(s(e)){const n=a(e,t);if(null!=n)return Math.min(n*g,r)}return 1e-5*r}const g=.05,y=l(),p=n();export{c as featureReferenceEquals,b as featureReferenceProperty,d as getFeatureId,m as updatePointsFromFeatureReference};\n"],"names":["v","n","ofType","r","y","t","constructor","e","super","this","type","_extent","initialize","addHandles","u","_computeExtent","pending","extent","c","viewsheds","_get","_set","i","spatialReference","observer","valid","every","waitComputeExtent","filter","map","toArray","s","f","geometries","at","_computeViewshedExtent","reduce","union","x","farDistance","heading","tilt","horizontalFieldOfView","verticalFieldOfView","o","m","h","metersPerUnit","l","normalize","d","fromPoint","Math","abs","cos","a","xmax","xmin","ymax","ymin","z","p","isGeographic","g","w","zmax","max","zmin","min","equals","clear","removeAll","sin","prototype","cast","nonNullable","readOnly","operationalLayerType","source","opacity","parent","load","addResolvingPromise","fullExtent","releaseAnalysis","analysis","writeViewsheds","toJSON","json","read","write","origins","service","ignoreOrigin","JSONSupportMixin","feature","isRequired","Number","range","layer","id","objectId","objectIdField","attributes","uid","concat","b","writer","_e$layer","layerId","target","String","ObjectId","_R","_A","sceneIntersectionHelper","observerFeatureId","I","targetFeatureId","F","options","store","ALL","intersectToolIntersectorRay","N","R","A","results","all","distanceInRenderSpace","j","observerAdjusted","T","targetAdjusted","getIntersectionPoint","observerSurfaceNormal","getTransformedNormal","targetSurfaceNormal"],"sourceRoot":""}