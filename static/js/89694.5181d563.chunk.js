"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[89694],{89694:(t,s,r)=>{r.r(s),r.d(s,{SplatSortWorkerInput:()=>e,SplatSortWorkerOutput:()=>n,destroy:()=>h,sort:()=>f});class e{constructor(t,s,r){let e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.distances=t,this.sortOrderIndices=s,this.numGaussians=r,this.preciseSort=e}}class n{constructor(t,s){this.distances=t,this.sortedOrderIndices=s}}let l=null,o=null;const i=10,u=20,a=.25;function c(t,s){const r=t.length,e=Math.max(i,Math.min(u,Math.round(Math.log2(r/a)))),n=1+(1<<e);!function(t,s){var r;(null===(r=l)||void 0===r?void 0:r.length)!==t&&(l=new Uint32Array(t)),o&&o.length===1+(1<<s)?o.fill(0):o=new Uint32Array(1+(1<<s))}(r,e);let c=t[0],f=t[0];for(let l=0;l<t.length;l++)c=Math.min(c,t[l]),f=Math.max(f,t[l]);const h=f-c;if(h<1e-6)for(let i=0;i<r;++i)l[i]=0,o[0]++;else{const s=(1<<e)/h;for(let e=0;e<r;e++){const r=(t[e]-c)*s>>>0;l[e]=r,o[r]++}}for(let l=1;l<n;l++)o[l]+=o[l-1];for(let i=0;i<r;i++){const t=l[i];s[--o[t]]=i}}async function f(t){const{distances:s,sortOrderIndices:r,preciseSort:e,numGaussians:l}=t,o=s.subarray(0,l),i=r.subarray(0,l);if(0===o.length||0===i.length)return{result:new n(s,r),transferList:[s.buffer,r.buffer]};if(e){const t=Array.from(i.keys());t.sort((t,s)=>o[t]-o[s]||t-s);const s=t.map(t=>i[t]);i.set(s)}else c(o,i);return{result:new n(s,r),transferList:[s.buffer,r.buffer]}}function h(){l=null,o=null}}}]);
//# sourceMappingURL=89694.5181d563.chunk.js.map