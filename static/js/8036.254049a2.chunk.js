"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[8036],{11149:(e,t,n)=>{n.d(t,{_:()=>y});var r=n(35143),i=n(91967),s=n(30726),o=n(46053),l=(n(81806),n(76460),n(47249),n(85842)),a=n(76797),u=n(3569),c=n(48094),d=n(1900),p=n(77725),f=n(68295);const h=c.do;let y=class extends i.A{constructor(e){super(e)}initialize(){this.addHandles(this.layerView.on("visible-geometry-changed",()=>this.spatialIndex.events.emit("changed")))}destroy(){this._dataQueryEngineInstance=(0,s.pR)(this._dataQueryEngineInstance),this._set("layerView",null)}get spatialReference(){return this.layerView.view.spatialReference}get layer(){return this.layerView.i3slayer}get defaultQueryJSON(){return new f.A({outSpatialReference:this.spatialReference}).toJSON()}get _dataQueryEngine(){return this._ensureDataQueryEngine()}async executeQueryForCount(e,t){return this._dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e),t)}async executeQueryForExtent(e,t){const{count:n,extent:r}=await this._dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e),t);return{count:n,extent:a.A.fromJSON(r)}}async executeQueryForIds(e,t){return this._dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e),t)}async executeQuery(e,t){const r=this._ensureQueryJSON(e),i=await this._dataQueryEngine.executeQuery(r,t);if(null!==e&&void 0!==e&&e.returnGeometry){const{processQueryGeometries:e}=await Promise.all([n.e(50756),n.e(25213),n.e(92278)]).then(n.bind(n,92278));return e(this.layerView,i)}return p.A.fromJSON(i)}_ensureQueryJSON(e){return null==e?this.defaultQueryJSON:e.toJSON()}_ensureDataQueryEngine(){var e;if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;const t=this.layer.objectIdField||u.r,n=(null===(e=this.layer.fieldsIndex)||void 0===e?void 0:e.toJSON())||new d.A([]),r=this.layerView.view.resourceController.scheduler,i=this.spatialReference.toJSON(),s=this.priority,o=this.spatialIndex;return this._dataQueryEngineInstance=new h({hasZ:!0,hasM:!1,geometryType:"esriGeometryPolygon",fieldsIndex:n,timeInfo:null,spatialReference:i,featureIdInfo:{type:"object-id",fieldName:t},featureStore:o,scheduler:r,priority:s}),this._dataQueryEngineInstance}};(0,r._)([(0,o.MZ)({constructOnly:!0})],y.prototype,"layerView",void 0),(0,r._)([(0,o.MZ)({constructOnly:!0})],y.prototype,"priority",void 0),(0,r._)([(0,o.MZ)({constructOnly:!0})],y.prototype,"spatialIndex",void 0),(0,r._)([(0,o.MZ)()],y.prototype,"spatialReference",null),(0,r._)([(0,o.MZ)()],y.prototype,"layer",null),(0,r._)([(0,o.MZ)()],y.prototype,"defaultQueryJSON",null),y=(0,r._)([(0,l.$)("esri.views.3d.layers.i3s.I3SQueryEngine")],y)},31516:(e,t,n)=>{n.d(t,{F:()=>s});n(18690),n(53084);var r=n(18288),i=n(48718);n(42052),n(72027);function s(e,t,n){if(null==(null===e||void 0===e?void 0:e.timeInfo))return null;const{datesInUnknownTimezone:s=!1,timeOffset:o,useViewTime:l}=e;let a=e.timeExtent;s&&(a=function(e){if(!e)return e;const{start:t,end:n}=e;return new i.T({start:null!=t?(0,r.S1)(t,t.getTimezoneOffset(),"minutes"):t,end:null!=n?(0,r.S1)(n,n.getTimezoneOffset(),"minutes"):n})}(a));let u=l?t&&a?t.intersection(a):t||a:a;return!u||u.isEmpty||u.isAllTime?u:(o&&(u=u.offset(-o.value,o.unit)),s&&(u=function(e){if(!e)return e;const{start:t,end:n}=e;return new i.T({start:null!=t?(0,r.S1)(t,-t.getTimezoneOffset(),"minutes"):t,end:null!=n?(0,r.S1)(n,-n.getTimezoneOffset(),"minutes"):n})}(u)),u.equals(n)?n:u)}},39097:(e,t,n)=>{n.d(t,{E:()=>u});var r=n(35143),i=n(76460),s=n(46053),o=(n(81806),n(47249),n(85842)),l=n(98683),a=n(74279);const u=e=>{let t=class extends e{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=e=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&i.A.getLogger(this).error("Error while evaluating definitionExpression: "+e),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&i.A.getLogger(this).error("Further errors are ignored")}}get parsedDefinitionExpression(){var e;if(null===(e=this.i3slayer)||void 0===e||!e.definitionExpression)return null;try{const e=l.default.create(this.i3slayer.definitionExpression,{fieldsIndex:this.i3slayer.fieldsIndex});if(!e.isStandardized)return i.A.getLogger(this).error("definitionExpression is using non standard function"),null;const t=[],n=e.fieldNames;return(0,a.W)(n,this.i3slayer.fieldsIndex,{missingFields:t}),t.length>0?(i.A.getLogger(this).error("definitionExpression references unknown fields: ".concat(t.join(", "))),null):(this._definitionExpressionErrors=0,e)}catch(t){return i.A.getLogger(this).error("Failed to parse definitionExpression: "+t),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:[]}_evaluateClause(e,t){if(null==e)return!0;try{return e.testFeature(t)}catch(n){return this.logError(n),!1}}_addDefinitionExpressionToQuery(e){if(!this.parsedDefinitionExpression)return e;const t=this.i3slayer.definitionExpression,n=e.clone();return n.where?n.where="(".concat(t,") AND (").concat(n.where,")"):n.where=t,n}};return(0,r._)([(0,s.MZ)({readOnly:!0})],t.prototype,"parsedDefinitionExpression",null),(0,r._)([(0,s.MZ)({readOnly:!0})],t.prototype,"definitionExpressionFields",null),t=(0,r._)([(0,o.$)("esri.views.3d.layers.support.DefinitionExpressionSceneLayerView")],t),t}},50532:(e,t,n)=>{n.d(t,{P:()=>d});var r=n(35143),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842)),o=n(23478),l=n(8203),a=n(31516),u=n(75913),c=n(74279);const d=e=>{let t=class extends e{get timeExtent(){var e;return(0,a.F)(this.i3slayer,null===(e=this.view)||void 0===e?void 0:e.timeExtent,this._get("timeExtent"))}get mergedFilter(){var e,t,n;const{filter:r,timeExtent:i}=this;if(null==i)return r;const s=null!==(e=null===r||void 0===r?void 0:r.clone())&&void 0!==e?e:new l.A;return null!=i&&(s.timeExtent=null!==(t=null===(n=s.timeExtent)||void 0===n?void 0:n.intersection(i))&&void 0!==t?t:i),s}getTimeFilterDependencies(){const{timeInfo:e}=this.i3slayer;if(null==e)return[];const{startField:t,endField:n}=e;return[t,n]}addTimeFilter(e,t){if(null==t)return;const{timeInfo:n}=this.i3slayer;if(null==n)return;const{startField:r,endField:i,useTime:s}=n;if(!s||null==r&&null==i)return;const l=n.toJSON(),a=t.toJSON();e.push((e,t)=>function(e,t,n,r){var i;const s=null===(i=t.attributeInfo)||void 0===i?void 0:i.attributeData;if(null==s)return;const{startTimeField:l,endTimeField:a}=n;if(null!=l&&null==s[l]||null!=a&&null==s[a])return;const u=(0,o.I)(n,r,new p(s));if(null==u)return;const{featureIds:d}=t;(0,c.$i)(e,d,u)}(e,t,l,a))}};return(0,r._)([(0,i.MZ)({readOnly:!0})],t.prototype,"timeExtent",null),(0,r._)([(0,i.MZ)()],t.prototype,"mergedFilter",null),t=(0,r._)([(0,s.$)("esri.views.3d.layers.support.TemporalSceneLayerView")],t),t};class p{constructor(e){this.attributeData=e}getAttribute(e,t){return(0,u.E5)(this.attributeData[t],e)}getAttributeAsTimestamp(e,t){const n=this.getAttribute(e,t);return"string"==typeof n?new Date(n).getTime():"number"==typeof n||null==n?n:null}}},53596:(e,t,n)=>{n.d(t,{DS:()=>s,J7:()=>r,w$:()=>i});const r="updating";function i(e){return"updating"===e?null:e}function s(e){return"updating"===e}},68830:(e,t,n)=>{n.d(t,{n:()=>l,w:()=>a});var r=n(42294),i=n(90321),s=n(1484),o=n(75913);class l{constructor(e){this._objectIdField=e.objectIdField,this._getFeatureExtent=e.getFeatureExtent}getObjectId(e){return e.id}getAttributes(e){var t;const{meta:n,index:r}=e,i={};this._objectIdField&&(i[this._objectIdField]=e.id);const s=null===(t=n.attributeInfo)||void 0===t?void 0:t.attributeData;if(null!=s)for(const l of Object.keys(s))i[l]=(0,o.E5)(s[l],r);return i}getAttribute(e,t){var n;if(t===this._objectIdField)return e.id;const{meta:r,index:i}=e,s=null===(n=r.attributeInfo)||void 0===n?void 0:n.attributeData;return null!=s?(0,o.E5)(s[t],i):null}getGeometry(e){if(e.geometry)return e.geometry;const[t,n,r,i,o,l]=this._getFeatureExtent(e,u);return new s.A([5,5],[t,n,r,i,n,r,i,o,r,t,o,r,t,n,r,t,n,l,i,n,l,i,o,l,t,o,l,t,n,l])}getCentroid(e,t){if(e.geometry)return(0,i.Q)(new s.A,e.geometry,t.hasZ,t.hasM);const[n,r,o,l,a,c]=this._getFeatureExtent(e,u);return new s.A([0],[(n+l)/2,(r+a)/2,(o+c)/2])}cloneWithGeometry(e,t){const{id:n,index:r,meta:i}=e;return new a(n,r,i,t)}getMetadata(e){return e}}class a{constructor(e,t,n,r){this.id=e,this.index=t,this.meta=n,this.geometry=r}get usedMemory(){var e,t;return 32+(null!==(e=null===(t=this.geometry)||void 0===t?void 0:t.usedMemory)&&void 0!==e?e:0)}}const u=(0,r.vt)()},81068:(e,t,n)=>{n.d(t,{D:()=>y});var r=n(35143),i=n(91967),s=n(4212),o=n(54099),l=n(46053),a=(n(76460),n(47249),n(85842)),u=n(79115),c=n(42294),d=n(2413),p=n(78315),f=n(9561);const h=(0,c.vt)();let y=class extends i.A{constructor(e){super(e),this.events=new o.A}forEach(e){this.forAllFeatures(t=>(e(t),f._R.CONTINUE))}forEachBounds(e,t){for(const n of e)t(this.getFeatureExtent(n,h))}forEachInBounds(e,t){this.forAllFeatures(n=>{const r=this.getFeatureExtent((0,s.zI)(n),m);return(0,d.HY)(e,(0,c.ES)(r,v))&&t((0,s.zI)(n)),f._R.CONTINUE},t=>{if((0,u.z)(t,this.sourceSpatialReference,g,this.viewSpatialReference),g[0]>=e[0]&&g[2]<=e[2]&&g[1]>=e[1]&&g[3]<=e[3])return f._R.CONTINUE;const n=Math.max(e[0],Math.min(g[0],e[2])),r=Math.max(e[1],Math.min(g[1],e[3])),i=g[0]-n,s=g[1]-r;return i*i+s*s<=g[3]*g[3]?f._R.CONTINUE:f._R.SKIP})}};(0,r._)([(0,l.MZ)({constructOnly:!0})],y.prototype,"featureAdapter",void 0),(0,r._)([(0,l.MZ)({constructOnly:!0})],y.prototype,"forAllFeatures",void 0),(0,r._)([(0,l.MZ)({constructOnly:!0})],y.prototype,"getFeatureExtent",void 0),(0,r._)([(0,l.MZ)({constructOnly:!0})],y.prototype,"sourceSpatialReference",void 0),(0,r._)([(0,l.MZ)({constructOnly:!0})],y.prototype,"viewSpatialReference",void 0),y=(0,r._)([(0,a.$)("esri.views.3d.layers.i3s.I3SQueryFeatureStore")],y);const g=(0,p.f)(0,0,0,0),m=(0,c.vt)(),v=(0,d.vt)()},92081:(e,t,n)=>{n.d(t,{_:()=>O});var r=n(35143),i=n(91967),s=n(18690),o=n(76460),l=n(15941),a=n(53596),u=n(68134),c=n(31633),d=n(46053),p=(n(81806),n(85842)),f=n(20664),h=n(9392),y=n(98683),g=n(34111),m=n(9956),v=n(13312),E=n(79115),_=n(14487),w=n(42294),x=n(2413),S=n(44815),F=n(14556),I=n(80963),R=n(78315),b=n(45417),M=n(8203),A=n(74279);let O=class extends i.A{constructor(e){super(e),this._projectionEngineLoaded=!1}initialize(){(0,u.C_)(()=>{var e;return(null===(e=this.viewFilter)||void 0===e?void 0:e.geometry)||null!=this.layerFilter}).then(()=>this.loadAsyncModule(Promise.all([n.e(52612),n.e(63391)]).then(n.bind(n,63391)).then(e=>{this.destroyed||(this._geometryEngine=e)})))}get sortedObjectIds(){var e;if(null==(null===(e=this.viewFilter)||void 0===e?void 0:e.objectIds))return null;const t=(0,S.xm)(this.viewFilter.objectIds);return t.sort(),t}get parsedWhereClause(){var e;const t=null===(e=this.viewFilter)||void 0===e?void 0:e.where;if(null==t||!t)return null;try{return y.default.create(t,{fieldsIndex:this.layerFieldsIndex})}catch(n){o.A.getLogger(this).error("Failed to parse filter where clause: ".concat(n))}return null}addFilters(e,t,n,r){var i;const s=this.sortedObjectIds;null!=s&&e.push(e=>(0,A.Be)(s,!0,e)),this.addSqlFilter(e,this.parsedWhereClause),this.addTimeFilter(e,null===(i=this.viewFilter)||void 0===i?void 0:i.timeExtent);const l=(0,a.w$)(this._layerMaskGeometries),u=this._geometryEngine,c=()=>o.A.getLogger(this);if(null!=l&&null!=this.layerFilter&&null!=u){const i=this.layerFilter.spatialRelationship;e.push((e,s)=>k(c,u,e,s,r,t,n,l,i))}const d=(0,a.w$)(this._viewMaskGeometries);if(null!=d&&null!=this.viewFilter&&null!=u){const i=this.viewFilter.spatialRelationship;e.push((e,s)=>k(c,u,e,s,r,t,n,d,i))}}isMBSGeometryVisible(e,t,n){const r=(0,a.w$)(this._layerMaskGeometries),i=this._geometryEngine;if(null!=r&&null!=this.layerFilter&&null!=i){const s=this.layerFilter.spatialRelationship,l=r[0].spatialReference||t;return(0,E.z)(e,n,Z,l)?Q(i,Z,r,l,s):(o.A.getLogger(this).warnOnce("SceneLayer.mask geometry is using unsupported SpatialReference, skipping geometry filter for MBS"),!0)}const s=(0,a.w$)(this._viewMaskGeometries);if(null!=s&&null!=this.viewFilter&&null!=i){const r=this.viewFilter.spatialRelationship,l=s[0].spatialReference||t;return(0,E.z)(e,n,Z,l)?Q(i,Z,s,l,r):(o.A.getLogger(this).warnOnce("SceneLayerView.filter.geometry is using unsupported SpatialReference, skipping geometry filter for MBS"),!0)}return!0}get parsedGeometry(){const e=(0,a.w$)(this._viewMaskGeometries),t=(0,a.w$)(this._layerMaskGeometries);return null==e||null==t?e||t:t.concat(e)}get _layerMaskGeometries(){const e=this.layerFilter;return null==e?null:null==this._geometryEngine?a.J7:"disjoint"===e.spatialRelationship?e.geometries.map(e=>({type:"polygon",rings:e.rings,spatialReference:e.spatialReference,cache:{}})):[e.geometries.reduce((e,t)=>(e.rings=[...e.rings,...t.rings],e),{type:"polygon",rings:[],spatialReference:e.geometries[0].spatialReference,cache:{}})]}get _viewMaskGeometries(){if(null==this.viewFilter)return null;const{geometry:e}=this.viewFilter;if(null==e)return null;if(null==this.viewFilter||null==this._geometryEngine)return a.J7;const{distance:t,units:n}=this.viewFilter,r=this.viewFilter.spatialRelationship,i="mesh"===e.type?e.extent:e;if(null==t||0===t)return j(this._geometryEngine,i,r);const s=n||(0,c.Ij)(i.spatialReference);if(i.spatialReference.isWGS84){const e=this._geometryEngine.geodesicBuffer(i,t,s);return j(this._geometryEngine,e,r)}const l=(0,b.Cv)(i,v.A.WGS84);if(null!=l){const e=(0,b.Cv)(this._geometryEngine.geodesicBuffer(l,t,s),i.spatialReference);return j(this._geometryEngine,e,r)}if(!this._projectionEngineLoaded&&(this.loadAsyncModule((0,m.load)().then(()=>this._projectionEngineLoaded=!0)),!this._projectionEngineLoaded))return null;let u=null;try{u=(0,m.project)(i,v.A.WGS84)}catch(d){}if(u)try{u=(0,m.project)(this._geometryEngine.geodesicBuffer(u,t,s),i.spatialReference)}catch(d){u=null}return u||o.A.getLogger(this).error("Filter by geodesic buffer (distance) unsupported, failed to project input geometry (".concat(i.spatialReference.wkid,") to WGS84.")),j(this._geometryEngine,u,r)}get updating(){return(0,a.DS)(this._layerMaskGeometries)||(0,a.DS)(this._viewMaskGeometries)}static checkSupport(e){return null!=e&&(!!function(e){return null!=e&&T.includes(e)}(e.spatialRelationship)||(o.A.getLogger(this.prototype).warn("Filters with spatialRelationship other than ".concat(T.join(", ")," are not supported for mesh scene layers")),!1))}};(0,r._)([(0,d.MZ)()],O.prototype,"layerFilter",void 0),(0,r._)([(0,d.MZ)({type:M.A})],O.prototype,"viewFilter",void 0),(0,r._)([(0,d.MZ)()],O.prototype,"layerFieldsIndex",void 0),(0,r._)([(0,d.MZ)()],O.prototype,"loadAsyncModule",void 0),(0,r._)([(0,d.MZ)()],O.prototype,"addSqlFilter",void 0),(0,r._)([(0,d.MZ)()],O.prototype,"addTimeFilter",void 0),(0,r._)([(0,d.MZ)({readOnly:!0})],O.prototype,"sortedObjectIds",null),(0,r._)([(0,d.MZ)({readOnly:!0})],O.prototype,"parsedWhereClause",null),(0,r._)([(0,d.MZ)({readOnly:!0})],O.prototype,"parsedGeometry",null),(0,r._)([(0,d.MZ)({readOnly:!0})],O.prototype,"_layerMaskGeometries",null),(0,r._)([(0,d.MZ)({readOnly:!0})],O.prototype,"_viewMaskGeometries",null),(0,r._)([(0,d.MZ)()],O.prototype,"updating",null),(0,r._)([(0,d.MZ)()],O.prototype,"_projectionEngineLoaded",void 0),(0,r._)([(0,d.MZ)()],O.prototype,"_geometryEngine",void 0),O=(0,r._)([(0,p.$)("esri.views.3d.layers.i3s.I3SMeshViewFilter")],O);const T=["contains","intersects","disjoint"];var D;function j(e,t,n){if(null==t)return null;if("disjoint"===n&&"polygon"===t.type){const n=t.rings.length,r=t.spatialReference,i=new Array(n);for(let e=0;e<n;++e){const n=(0,x.fA)(1/0,1/0,-1/0,-1/0);(0,x.Jf)(n,t.rings[e]),i[e]={type:"polygon",rings:[t.rings[e]],spatialReference:r,cache:{},aabr:n}}i.sort((e,t)=>e.aabr[0]-t.aabr[0]);const o=new Set,l=new s.vW;for(let t=0;t<i.length;++t){const n=i[t],r=n.aabr[0];o.forEach(t=>{if(r>=t.aabr[2])return void o.delete(t);if(n.aabr[1]>t.aabr[3]||n.aabr[3]<t.aabr[1]||!e.intersects(n,t))return;n.rings=n.rings.concat(t.rings),(0,x.fT)(n.aabr,t.aabr,n.aabr),n.cache={},o.delete(t);const a=(0,s.qh)(i,t,i.length,l);i.splice(a,1)}),o.add(n)}for(const e of i)e.aabr=void 0;return i}return[t]}function Q(e,t,n,r,i){if(t[3]>=.5*(t[2]+(0,g.tO)(r).radius))return!0;const s=C(e,t,r);return n.every(t=>N(e,t,s,i)!==D.DISCARD)}function k(e,t,n,r,i,s,o,l,a){var u,c,d,p;const f=l[0].spatialReference||s.spatialReference;if(!(0,E.z)(r.node.serviceMbsInIndexSR,o,Z,f))return void e().warnOnce("SceneLayerView.filter.geometry is using unsupported SpatialReference, skipping geometry filter");const h=C(t,Z,f),y=function(e,t,n,r,i){const s=t.renderSpatialReference,o=new Map,l={type:"polygon",rings:[[[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],spatialReference:n};l.rings[0][3]=l.rings[0][0];const a={indices:null,data:null,stride:0,startIndex:0,endIndex:0};let u,c;switch(e){case"intersects":u=(e,t,n)=>e.intersects(t,n)?D.KEEP:D.TEST,c=G;break;case"contains":u=(e,t,n)=>e.contains(t,n)?D.TEST:D.DISCARD,c=G;break;default:u=(e,t,n)=>e.disjoint(t,n)?D.TEST:D.DISCARD,c=L}return{collection:r,object:i,type:e,maskSR:n,renderSR:s,aabbCache:o,triangle:l,positions:a,triangleTest:u,geometryTest:c}}(a,s,f,i,r.objectHandle),g="intersects"===a;let m=null;for(const v of l){if(0===n.length)return;switch(N(t,v,h,a)){case D.DISCARD:return g&&(r.weaklyRemovedIds=null!==(u=null===(c=r.weaklyRemovedIds)||void 0===c?void 0:c.concat(n))&&void 0!==u?u:n.slice()),void(n.length=0);case D.KEEP:continue}(0,A.$i)(n,r.featureIds,e=>!!J(t,v,e,y)||(g&&(m||(m=[]),m.push(r.featureIds[e])),!1))}m&&(r.weaklyRemovedIds=null!==(d=null===(p=r.weaklyRemovedIds)||void 0===p?void 0:p.concat(m))&&void 0!==d?d:m)}!function(e){e[e.KEEP=0]="KEEP",e[e.DISCARD=1]="DISCARD",e[e.TEST=2]="TEST"}(D||(D={}));const Z=(0,R.f)(0,0,0,0);function C(e,t,n){const r={type:"point",x:t[0],y:t[1],hasZ:!1,hasM:!1,spatialReference:n},i=!(0,I.oT)(n)&&!(0,I.K8)(n),s=Number.isNaN(t[3])?0:(0,l.qE)(t[3],0,2*F.$O.radius),o=i?e.buffer(r,s,1):e.geodesicBuffer(r,s,1);return o.type="polygon",o}function N(e,t,n,r){switch(r){case"intersects":case"contains":return G(e,t,n);case"disjoint":return L(e,t,n)}}function G(e,t,n){return e.intersects(t,n)?e.contains(t,n)?D.KEEP:D.TEST:D.DISCARD}function L(e,t,n){return e.intersects(t,n)?e.contains(t,n)?D.DISCARD:D.TEST:D.KEEP}function J(e,t,n,r){const{collection:i,object:s,renderSR:o,maskSR:l,geometryTest:a,aabbCache:u}=r;let c=u.get(n);if(!c){const e=i.getObjectTransform(s);i.getComponentAabb(s,n,$);const t=[(0,h.fA)($[0],$[1],0),(0,h.fA)($[0],$[4],0),(0,h.fA)($[3],$[4],0),(0,h.fA)($[3],$[1],0)];for(let n=0;n<4;++n)(0,f.o)(t[n],t[n],e.rotationScale),(0,f.f)(t[n],t[n],e.position),(0,_.F)(t[n],o,t[n],l);c={type:"polygon",rings:[t],spatialReference:l,cache:{}},c.rings[0][4]=c.rings[0][0],u.set(n,c)}switch(a(e,t,c)){case D.DISCARD:return!1;case D.KEEP:return!0}const{triangle:d,triangleTest:p,positions:y}=r,g=d.rings[0][0],m=d.rings[0][1],v=d.rings[0][2],E=i.getObjectTransform(s);i.getComponentPositions(s,n,y);const{indices:w,data:x,stride:S,startIndex:F,endIndex:I}=y;for(let h=F;h<I;h+=3){const n=S*w[h],r=S*w[h+1],i=S*w[h+2];switch((0,f.i)(g,x[n],x[n+1],x[n+2]),(0,f.i)(m,x[r],x[r+1],x[r+2]),(0,f.i)(v,x[i],x[i+1],x[i+2]),(0,f.o)(g,g,E.rotationScale),(0,f.o)(m,m,E.rotationScale),(0,f.o)(v,v,E.rotationScale),(0,f.f)(g,g,E.position),(0,f.f)(m,m,E.position),(0,f.f)(v,v,E.position),(0,_.F)(g,o,g,l),(0,_.F)(m,o,m,l),(0,_.F)(v,o,v,l),p(e,t,d)){case D.DISCARD:return!1;case D.KEEP:return!0}}return"intersects"!==r.type}const $=(0,w.vt)()}}]);
//# sourceMappingURL=8036.254049a2.chunk.js.map