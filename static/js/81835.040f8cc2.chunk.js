"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[81835],{28383:(e,n,i)=>{i.d(n,{$r:()=>I,Jc:()=>g,Lc:()=>x,MH:()=>M,Wk:()=>b,gV:()=>T,lX:()=>F,rb:()=>w,sf:()=>V});var t=i(89379),a=i(36140),l=i(50076),o=i(76931),s=i(18288),r=i(19247),u=i(13312),f=i(76279),c=i(80963),d=i(53430),m=i(4414),p=i(42633),v=i(72003),y=i(76386);let h=null;const z=(0,a.A)(/^(([0-1][0-9])|([2][0-3])):([0-5][0-9])(:([0-5][0-9]))?([.](\d+))?$/,{hh:1,mm:4,ss:6,ms:8});function I(e,n,i,t){const a=(0,c.d9)(i)?(0,c.Vp)(i):null,l=a?Math.round((a.valid[1]-a.valid[0])/n.scale[0]):null;return e.map(e=>{const i=new r.A(e.geometry);return(0,f.Gy)(n,i,i),e.geometry=a?function(e,n,i){return e.x<0?e.x+=n:e.x>i&&(e.x-=n),e}(i,null!==l&&void 0!==l?l:0,t[0]):i,e})}function T(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,i=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;const l=new Float64Array(t*a);n=Math.round((0,o.Lz)(n));let s=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;const u=(0,m.YW)(i);for(const{geometry:o,attributes:f}of e){const{x:e,y:i}=o,c=Math.max(0,e-n),d=Math.max(0,i-n),p=Math.min(a,i+n),v=Math.min(t,e+n),y=+u(f);for(let a=d;a<p;a++)for(let o=c;o<v;o++){const u=a*t+o,f=(0,m.hv)(o-e,a-i,n)*y,c=l[u]+=f;s=Math.min(s,c),r=Math.max(r,c)}}return{min:s,max:r}}function w(e){const n=z.exec(e);if(!n)return null;const{hh:i,mm:t,ss:a,ms:l}=n.groups;return Number(i)*s.vf.hours+Number(t)*s.vf.minutes+Number(a)*s.vf.seconds+Number(l||0)}async function g(e,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!n)return[];const{field:a,field2:l,field3:o,fieldDelimiter:s,fieldInfos:r,timeZone:f}=e,c=a&&(null===r||void 0===r?void 0:r.find(e=>e.name.toLowerCase()===a.toLowerCase())),m=!!c&&(0,d.OH)(c),z=!!c&&(0,p.fs)(c),I=e.valueExpression,T=e.normalizationType,g=e.normalizationField,x=e.normalizationTotal,F=[],V=e.viewInfoParams;let b=null,M=null;if(I){if(!h){const{arcadeUtils:e}=await(0,y.l)();h=e}h.hasGeometryOperations(I)&&await h.enableGeometryOperations(),b=h.createFunction(I),M=V?h.getViewInfo({viewingMode:V.viewingMode,scale:V.scale,spatialReference:new u.A(V.spatialReference)}):null}const N=e.fieldInfos,E=n[0]&&"declaredClass"in n[0]&&"esri.Graphic"===n[0].declaredClass||!N?null:{fields:N};return n.forEach(e=>{const n=e.attributes;let r;if(I){const n=E?(0,t.A)((0,t.A)({},e),{},{layer:E}):e,i=h.createExecContext(n,M,f);r=h.executeFunction(b,i)}else n&&(r=n[a],l?(r="".concat((0,v.gJ)(r)).concat(s).concat((0,v.gJ)(n[l])),o&&(r="".concat(r).concat(s).concat((0,v.gJ)(n[o])))):"string"==typeof r&&i&&(z?r=r?new Date(r).getTime():null:m&&(r=r?w(r):null)));if(T&&"number"==typeof r&&isFinite(r)){const e=n&&parseFloat(n[g]);r=(0,v.zS)(r,T,e,x)}F.push(r)}),F}function x(e){const n=e.field,i=e.normalizationType,t=e.normalizationField;let a;return"field"===i?a="(NOT "+t+" = 0)":"log"!==i&&"natural-log"!==i&&"square-root"!==i||(a="(".concat(n," > 0)")),a}function F(e,n,i){const t=null!=n?e+" >= "+n:"",a=null!=i?e+" <= "+i:"";let l="";return l=t&&a?V(t,a):t||a,l?"("+l+")":""}function V(e,n){let i=null!=e?e:"";return null!=n&&n&&(i=i?"("+i+") AND ("+n+")":n),i}function b(e,n){if(e&&"intersects"!==e.spatialRelationship)return new l.A(n,"Only 'intersects' spatialRelationship is supported for featureFilter")}function M(e,n,i){const t=function(e){const n=e.layer;return e.fields.filter(e=>!n.getField(e))}({layer:e,fields:n});if(t.length)return new l.A(i,"Unknown fields: "+t.join(", ")+". You can only use fields defined in the layer schema");const a=function(e){const n=e.layer;return e.fields.filter(e=>{const i=n.getFieldUsageInfo(e);return!i||!i.supportsStatistics})}({layer:e,fields:n});return a.length?new l.A(i,"Unsupported fields: "+a.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true"):void 0}},81835:(e,n,i)=>{i.r(n),i.d(n,{classBreaks:()=>s,heatmapStatistics:()=>u,histogram:()=>r,summaryStatistics:()=>l,uniqueValues:()=>o});var t=i(28383),a=i(72003);async function l(e){const{attribute:n,features:i}=e,{normalizationType:l,normalizationField:o,minValue:s,maxValue:r,fieldType:u,outStatisticTypes:f}=n,c=await(0,t.Jc)({field:n.field,valueExpression:n.valueExpression,normalizationType:l,normalizationField:o,normalizationTotal:n.normalizationTotal,viewInfoParams:n.viewInfoParams,timeZone:n.timeZone,fieldInfos:n.fieldInfos},i),d=(0,a.Vb)({normalizationType:l,normalizationField:o,minValue:s,maxValue:r}),m={value:.5,fieldType:u},p="esriFieldTypeString"===u?(0,a.z9)({values:c,supportsNullCount:d,percentileParams:m,outStatisticTypes:f}):(0,a.G_)({values:c,minValue:s,maxValue:r,useSampleStdDev:!l,supportsNullCount:d,percentileParams:m,outStatisticTypes:f});return(0,a.oZ)(p,f,"esriFieldTypeDate"===u)}async function o(e){const{attribute:n,features:i}=e,l=await(0,t.Jc)({field:n.field,field2:n.field2,field3:n.field3,fieldDelimiter:n.fieldDelimiter,valueExpression:n.valueExpression,viewInfoParams:n.viewInfoParams,timeZone:n.timeZone,fieldInfos:n.fieldInfos},i,!1),o=(0,a.b3)(l);return(0,a.lv)(o,n.domains,n.returnAllCodedValues,n.fieldDelimiter)}async function s(e){const{attribute:n,features:i}=e,{field:l,normalizationType:o,normalizationField:s,normalizationTotal:r,classificationMethod:u}=n,f=await(0,t.Jc)({field:l,valueExpression:n.valueExpression,normalizationType:o,normalizationField:s,normalizationTotal:r,viewInfoParams:n.viewInfoParams,timeZone:n.timeZone,fieldInfos:n.fieldInfos},i),c=(0,a.Rw)(f,{field:l,normalizationType:o,normalizationField:s,normalizationTotal:r,classificationMethod:u,standardDeviationInterval:n.standardDeviationInterval,numClasses:n.numClasses,minValue:n.minValue,maxValue:n.maxValue});return(0,a.jM)(c,u)}async function r(e){const{attribute:n,features:i}=e,{field:l,normalizationType:o,normalizationField:s,normalizationTotal:r,classificationMethod:u}=n,f=await(0,t.Jc)({field:l,valueExpression:n.valueExpression,normalizationType:o,normalizationField:s,normalizationTotal:r,viewInfoParams:n.viewInfoParams,timeZone:n.timeZone,fieldInfos:n.fieldInfos},i);return(0,a.$y)(f,{field:l,normalizationType:o,normalizationField:s,normalizationTotal:r,classificationMethod:u,standardDeviationInterval:n.standardDeviationInterval,numBins:n.numBins,minValue:n.minValue,maxValue:n.maxValue})}async function u(e){var n;const{attribute:i,features:a}=e,{field:l,radius:o,transform:s,spatialReference:r}=i,u=null!==(n=i.size)&&void 0!==n?n:[0,0],f=(0,t.$r)(null!==a&&void 0!==a?a:[],s,r,u);return(0,t.gV)(f,null!==o&&void 0!==o?o:void 0,l,u[0],u[1])}}}]);
//# sourceMappingURL=81835.040f8cc2.chunk.js.map