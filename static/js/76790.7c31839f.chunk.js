"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[76790],{14303:(e,t,i)=>{i.d(t,{A:()=>y});var o,r=i(35143),s=i(42553),n=i(53084),a=i(62754),l=i(46053),c=(i(81806),i(76460),i(85842)),p=i(17707),f=i(37546),d=i(65215),u=i(9956);let y=o=class extends s.A{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,t,i,o){var r;if(null!==(r=o.layer)&&void 0!==r&&r.spatialReference&&!o.layer.spatialReference.equals(this.geometry.spatialReference)){if(!(0,u.canProjectWithoutEngine)(e.spatialReference,o.layer.spatialReference))return void((null===o||void 0===o?void 0:o.messages)&&o.messages.push(new a.A("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:o.layer.spatialReference,context:o})));const r=new d.A;(0,u.projectPolygon)(e,r,o.layer.spatialReference),t[i]=r.toJSON(o)}else t[i]=e.toJSON(o);delete t[i].spatialReference}clone(){return new o({geometry:(0,n.o8)(this.geometry),type:this.type})}};(0,r._)([(0,l.MZ)({type:d.A}),(0,f.P)()],y.prototype,"geometry",void 0),(0,r._)([(0,p.K)(["web-scene","portal-item"],"geometry")],y.prototype,"writeGeometry",null),(0,r._)([(0,l.MZ)({type:["clip","mask","replace"],nonNullable:!0}),(0,f.P)()],y.prototype,"type",void 0),y=o=(0,r._)([(0,c.$)("esri.layers.support.SceneModification")],y)},49050:(e,t,i)=>{i.d(t,{A:()=>u});var o,r=i(89379),s=i(35143),n=i(3825),a=i(19276),l=i(42553),c=i(90534),p=i(46053),f=(i(81806),i(76460),i(47249),i(85842)),d=i(14303);let u=o=class extends(l.A.JSONSupportMixin(a.A.ofType(d.A))){constructor(e){super(e),this.url=null}clone(){return new o({url:this.url,items:this.items.map(e=>e.clone())})}toJSON(e){return this.toArray().map(t=>t.toJSON(e)).filter(e=>!!e.geometry)}static fromJSON(e,t){const i=new o;for(const o of e)i.add(d.A.fromJSON(o,t));return i}static async fromUrl(e,t,i){const s={url:(0,c.An)(e),origin:"service"},a=await(0,n.A)(e,{responseType:"json",signal:null===i||void 0===i?void 0:i.signal}),l=t.toJSON(),p=[];for(const o of a.data)p.push(d.A.fromJSON((0,r.A)((0,r.A)({},o),{},{geometry:(0,r.A)((0,r.A)({},o.geometry),{},{spatialReference:l})}),s));return new o({url:e,items:p})}};(0,s._)([(0,p.MZ)({type:String})],u.prototype,"url",void 0),u=o=(0,s._)([(0,f.$)("esri.layers.support.SceneModifications")],u)},76790:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var o=i(89379),r=i(35143),s=i(3825),n=i(50076),a=i(76460),l=i(15941),c=i(77717),p=i(50346),f=i(68134),d=i(46053),u=(i(81806),i(47249),i(28379)),y=i(85842),h=i(37546),m=i(20664),A=i(9392),v=i(34111),g=i(76797),_=i(13312),x=i(45308),S=i(25515),w=i(12406),M=i(19502),b=i(31362),R=i(11270),N=i(94729),J=i(5682),O=i(95363),T=i(49050),E=i(12482),L=i(79453);let Z=class extends((0,M.b)((0,R.q)((0,N.A)((0,J.j)((0,c.P)((0,b.d)((0,w.p)(S.A)))))))){readModifications(e,t,i){this._modificationsSource={url:(0,L.f)(e,i),context:i}}initialize(){this.addHandles((0,f.on)(()=>this.modifications,"after-changes",()=>this.modifications=this.modifications,f.OH))}constructor(e){super(e),this.operationalLayerType="IntegratedMesh3DTilesLayer",this.modifications=null,this._modificationsSource=null,this.spatialReference=new _.A({wkid:4326,vcsWkid:115700}),this.fullExtent=new g.A(-180,-90,180,90,this.spatialReference),this.url=null,this.type="integrated-mesh-3dtiles",this.path=null,this.minScale=0,this.maxScale=0,this.rootTilesetJSON=null}set elevationInfo(e){null!=e&&"absolute-height"!==e.mode||this._set("elevationInfo",e),this._validateElevationInfo(e)}_verifyArray(e,t){if(!Array.isArray(e)||e.length<t)return!1;for(const i of e)if("number"!=typeof i)return!1;return!0}_initFullExtent(){var e,t;const i=null===(e=this.rootTilesetJSON)||void 0===e||null===(e=e.root)||void 0===e?void 0:e.boundingVolume;if(!i)return;if(i.box){const e=null===i||void 0===i?void 0:i.box;if(e[3]>7645211&&e[7]>7645211&&e[11]>7645211)return}const o=null===(t=this.rootTilesetJSON)||void 0===t||null===(t=t.root)||void 0===t?void 0:t.transform,r=(0,A.vt)();if(i.region&&this._verifyArray(i.region,6)){const e=i.region,t=(0,l.KJ)(e[0]),o=(0,l.KJ)(e[1]),r=e[4],s=(0,l.KJ)(e[2]),n=(0,l.KJ)(e[3]),a=e[5];this.fullExtent=new g.A({xmin:t,ymin:o,zmin:r,xmax:s,ymax:n,zmax:a,spatialReference:this.spatialReference})}else if(i.sphere&&this._verifyArray(i.sphere,4)){const e=i.sphere,t=(0,A.fA)(e[0],e[1],e[2]),s=e[3]/Math.sqrt(3),n=(0,A.vt)();(0,m.d)(n,t,(0,A.fA)(s,s,s));const a=(0,A.vt)();if((0,m.f)(a,t,(0,A.fA)(s,s,s)),o&&this._verifyArray(o,16)){const e=o;(0,m.t)(r,n,e),(0,m.c)(n,r),(0,m.t)(r,a,e),(0,m.c)(a,r)}(0,x.projectBuffer)(n,v.Ro,0,n,_.A.WGS84,0),(0,x.projectBuffer)(a,v.Ro,0,a,_.A.WGS84,0);const l=(0,A.vt)(),c=(0,A.vt)();(0,m.A)(l,n,a),(0,m.z)(c,n,a),this.fullExtent=new g.A({xmin:l[0],ymin:l[1],zmin:l[2],xmax:c[0],ymax:c[1],zmax:c[2],spatialReference:this.spatialReference})}else if(i.box&&this._verifyArray(i.box,12)){const e=i.box,t=(0,A.fA)(e[0],e[1],e[2]),r=(0,A.fA)(e[3],e[4],e[5]),s=(0,A.fA)(e[6],e[7],e[8]),n=(0,A.fA)(e[9],e[10],e[11]),a=[];for(let i=0;i<8;++i)a.push((0,A.vt)());if((0,m.f)(a[0],t,r),(0,m.f)(a[0],a[0],s),(0,m.f)(a[0],a[0],n),(0,m.a)(a[1],t,r),(0,m.f)(a[1],a[1],s),(0,m.f)(a[1],a[1],n),(0,m.f)(a[2],t,r),(0,m.a)(a[2],a[2],s),(0,m.f)(a[2],a[2],n),(0,m.a)(a[3],t,r),(0,m.a)(a[3],a[3],s),(0,m.f)(a[3],a[3],n),(0,m.f)(a[4],t,r),(0,m.f)(a[4],a[4],s),(0,m.a)(a[4],a[4],n),(0,m.a)(a[5],t,r),(0,m.f)(a[5],a[5],s),(0,m.a)(a[5],a[5],n),(0,m.f)(a[6],t,r),(0,m.a)(a[6],a[6],s),(0,m.a)(a[6],a[6],n),(0,m.a)(a[7],t,r),(0,m.a)(a[7],a[7],s),(0,m.a)(a[7],a[7],n),o&&this._verifyArray(o,16)){const e=o;for(let t=0;t<8;++t)(0,m.t)(a[t],a[t],e)}const l=(0,A.fA)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),c=(0,A.fA)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let i=0;i<8;++i)(0,x.projectBuffer)(a[i],v.Ro,0,a[i],_.A.WGS84,0),(0,m.A)(c,c,a[i]),(0,m.z)(l,l,a[i]);this.fullExtent=new g.A({xmin:c[0],ymin:c[1],zmin:c[2],xmax:l[0],ymax:l[1],zmax:l[2],spatialReference:this.spatialReference})}}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const t=null!=e?e.signal:null;try{await this.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:e=>{var t;if(null!==(t=e.typeKeywords)&&void 0!==t&&t.includes("IntegratedMesh"))return!0;throw new n.A("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service containing IntegratedMesh"})}},e)}catch(i){(0,p.QP)(i)}if(null!=this._modificationsSource){const t=await T.A.fromUrl(this._modificationsSource.url,this.spatialReference,e);this.setAtOrigin("modifications",t,this._modificationsSource.context.origin),this._modificationsSource=null}if(this.url){const e=(0,s.A)(this.url,{query:(0,o.A)((0,o.A)({},this.customParameters),{},{token:this.apiKey}),responseType:"json",signal:t}).then(e=>{this.rootTilesetJSON=e.data,this._initFullExtent()},e=>{(0,p.QP)(e)});await e}}beforeSave(){if(null!=this._modificationsSource)return this.load().then(()=>{},()=>{})}async fetchAttributionData(){return this.load().then(()=>({}))}_validateElevationInfo(e){const t="Integrated mesh 3d tiles layers";(0,E.XF)(a.A.getLogger(this),(0,E.B)(t,"absolute-height",e)),(0,E.XF)(a.A.getLogger(this),(0,E.tW)(t,e))}};(0,r._)([(0,d.MZ)({type:["IntegratedMesh3DTilesLayer"]})],Z.prototype,"operationalLayerType",void 0),(0,r._)([(0,d.MZ)({type:T.A,clonable:e=>e.clone()}),(0,h.P)({origins:["web-scene","portal-item"],type:"resource",prefix:"modifications"})],Z.prototype,"modifications",void 0),(0,r._)([(0,u.w)(["web-scene","portal-item"],"modifications")],Z.prototype,"readModifications",null),(0,r._)([(0,d.MZ)({type:_.A})],Z.prototype,"spatialReference",void 0),(0,r._)([(0,d.MZ)({type:g.A})],Z.prototype,"fullExtent",void 0),(0,r._)([(0,d.MZ)(O.Yj)],Z.prototype,"elevationInfo",null),(0,r._)([(0,d.MZ)({type:["show","hide"]})],Z.prototype,"listMode",void 0),(0,r._)([(0,d.MZ)(O.OZ)],Z.prototype,"url",void 0),(0,r._)([(0,d.MZ)({readOnly:!0})],Z.prototype,"type",void 0),(0,r._)([(0,d.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],Z.prototype,"path",void 0),(0,r._)([(0,d.MZ)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],Z.prototype,"minScale",void 0),(0,r._)([(0,d.MZ)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],Z.prototype,"maxScale",void 0),Z=(0,r._)([(0,y.$)("esri.layers.IntegratedMesh3DTilesLayer")],Z);const I=Z}}]);
//# sourceMappingURL=76790.7c31839f.chunk.js.map