"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[30416,98774],{771:(e,t,i)=>{i.d(t,{A:()=>o});var r=i(35143),s=i(76460),n=i(50346),a=i(68134),l=(i(81806),i(47249),i(50076),i(85842));const o=e=>{let t=class extends e{initialize(){this.addHandles((0,a.on)(()=>this.layer,"refresh",e=>{this.doRefresh(e.dataChanged).catch(e=>{(0,n.zf)(e)||s.A.getLogger(this).error(e)})}),"RefreshableLayerView")}};return t=(0,r._)([(0,l.$)("esri.views.layers.RefreshableLayerView")],t),t}},29201:(e,t,i)=>{i.d(t,{I:()=>A,a:()=>w,b:()=>x});var r,s,n=i(57528),a=i(34981),l=i(26917),o=i(59395),d=i(90080),u=i(94192),h=i(80883),p=i(3799),c=i(21390),g=i(86955),v=i(70367),y=i(66470),f=i(91911),_=i(31432),m=i(2687);class w extends _.Y{}function x(e){const t=new m.N5,{vertex:i,fragment:_,varyings:w}=t,{output:x,perspectiveInterpolation:A}=e;return(0,p.NB)(i,e),t.include(o.d,e),t.include(u.Z,e),t.fragment.include(l.HQ,e),t.include(d.g,e),t.include(f.z,e),t.attributes.add(y.r.POSITION,"vec3"),t.attributes.add(y.r.UV0,"vec2"),A&&t.attributes.add(y.r.PERSPECTIVEDIVIDE,"float"),i.main.add((0,g.H)(r||(r=(0,n.A)(["\n    vpos = position;\n    forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);\n    vTexCoord = uv0;\n    gl_Position = transformPosition(proj, view, vpos);\n    ",""])),(0,g.If)(A,"gl_Position *= perspectiveDivide;"))),w.add("vpos","vec3",{invariant:!0}),w.add("vTexCoord","vec2"),_.include(h.a),_.uniforms.add(new c.m("opacity",e=>e.opacity),new v.N("tex",e=>e.glTexture)).main.add((0,g.H)(s||(s=(0,n.A)(["\n    discardBySlice(vpos);\n    discardByTerrainDepth();\n    ","\n    vec4 finalColor = texture(tex, vTexCoord) * opacity;\n    outputColorHighlightOID(finalColor, vpos, finalColor.rgb);"])),(0,g.If)(x===a.V.ObjectAndLayerIdColor,"fragColor = vec4(0, 0, 0, 1); return;"))),t}const A=Object.freeze(Object.defineProperty({__proto__:null,ImageMaterialPassParameters:w,build:x},Symbol.toStringTag,{value:"Module"}))},30416:(e,t,i)=>{i.d(t,{r:()=>C});var r=i(89379),s=i(88105),n=i(34981),a=i(83490),l=i(59696),o=i(34812),d=i(45463),u=i(60322),h=i(77730),p=i(86994),c=i(66470),g=i(82809),v=i(86401),y=i(63928),f=i(52757),_=i(16506),m=i(59246),w=i(72001),x=i(96643),A=i(29201),I=i(57162);class b extends m.w{constructor(e,t){super(e,t,new _.$(A.I,()=>i.e(48391).then(i.bind(i,48391))),E)}_getPipelineState(e,t){const{oitPass:i,output:r,hasOccludees:s,cullFace:a}=e,l=i===w.Y.NONE;return(0,I.Ey)({blending:(0,n.RN)(r)?l?I.RC:(0,u.ez)(i):null,culling:(0,I.Xt)(a),depthTest:{func:(0,u.K_)(i)},depthWrite:(0,u.z5)(e),drawBuffers:(0,u.m6)(i,r),colorWrite:I.kn,stencilWrite:s?x.v0:null,stencilTest:s?t?x.a9:x.qh:null,polygonOffset:(0,u.mE)(e)})}initializePipeline(e){return this._occludeePipeline=this._getPipelineState(e,!0),this._getPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}const E=new Map([[c.r.POSITION,0],[c.r.UV0,2],[c.r.PERSPECTIVEDIVIDE,3]]);var R=i(35143),O=i(97808),S=i(42717),T=i(6485),M=i(92656);class P extends M.E{constructor(e){super(),this.draped=e,this.cullFace=a.s2.None,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.perspectiveInterpolation=!0,this.textureCoordinateType=O.I.None,this.emissionSource=S.ZX.None,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.objectAndLayerIdColorInstanced=!1,this.snowCover=!1}}(0,R._)([(0,T.W)({count:a.s2.COUNT})],P.prototype,"cullFace",void 0),(0,R._)([(0,T.W)()],P.prototype,"enableOffset",void 0),(0,R._)([(0,T.W)()],P.prototype,"writeDepth",void 0),(0,R._)([(0,T.W)()],P.prototype,"hasOccludees",void 0),(0,R._)([(0,T.W)()],P.prototype,"terrainDepthTest",void 0),(0,R._)([(0,T.W)()],P.prototype,"cullAboveTerrain",void 0),(0,R._)([(0,T.W)()],P.prototype,"perspectiveInterpolation",void 0);class C extends y.W{constructor(e){super(e,L),this.vertexAttributeLocations=E,this.supportsEdges=!0,this.produces=new Map([[h.N.OPAQUE_MATERIAL,e=>(0,n.CL)(e)],[h.N.TRANSPARENT_MATERIAL,e=>(0,n._o)(e)&&this.parameters.writeDepth],[h.N.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(0,n._o)(e)&&!this.parameters.writeDepth],[h.N.DRAPED_MATERIAL,e=>(0,n._o)(e)||(0,n.CL)(e)]]),this._configuration=new P(e.draped)}dispose(){this.setParameters({texture:void 0})}getConfiguration(e,t){return super.getConfiguration(e,t,this._configuration),this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=t.hasOccludees,this._configuration.oitPass=t.oitPass,this._configuration.enableOffset=t.camera.relativeElevation<u.xt,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}get visible(){return!0}createGLMaterial(e){return new D(e)}createBufferWriter(){let e=v.l5;return this.parameters.perspectiveInterpolation&&(e=e.clone().f32(c.r.PERSPECTIVEDIVIDE)),new V(e)}}class D extends l.A{constructor(e){super((0,r.A)((0,r.A)({},e),e.material.parameters)),this.parameters=e;const t=this._material.parameters.texture;(0,o.y)(t)&&e.textures.updater.add(t)}dispose(){this.parameters.textures.updater.remove(this._material.parameters.texture)}beginSlot(e){return this.getTechnique(b,e)}}class V extends g.Z{write(e,t,i,r,n,a){for(const l of this.vertexBufferLayout.fields.keys()){const r=i.get(l);if(r)if(l===c.r.PERSPECTIVEDIVIDE){(0,p.vA)(1===r.size);const e=n.getField(l,s.Y$);e&&(0,f.uO)(r,e,a)}else(0,f.zC)(l,r,e,t,n,a)}return null}}class L extends d.qA{constructor(e,t){super(),this.texture=e,this.draped=t,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=a.s2.None,this.opacity=1,this.perspectiveInterpolation=!1}get glTexture(){return this.texture.glTexture}}},44882:(e,t,i)=>{i.d(t,{A:()=>V});var r=i(89379),s=i(35143),n=i(98773),a=i(54901),l=i(76460),o=i(30726),d=i(50346),u=i(68134),h=i(46053),p=(i(81806),i(47249),i(85842)),c=i(76797),g=i(2413),v=i(57662),y=i(69576),f=i(44815),_=i(75002),m=i(50468),w=i(17345),x=i(62577),A=i(66470);function I(e,t){return(0,x.Gj)(e,[[t[0],t[1],-1],[t[2],t[1],-1],[t[2],t[3],-1],[t[0],t[3],-1]])}function b(e,t,i){if(!(0,g.HY)(t,i))return I(e,i);const r=[t[1]-i[1],Math.min(t[3],i[3])-Math.max(t[1],i[1]),i[3]-t[3],123456],s=[t[0]-i[0],Math.min(t[2],i[2])-Math.max(t[0],i[0]),i[2]-t[2],123456],n=i[2]-i[0],a=i[3]-i[1],l=s[0]>0&&s[2]>0?3:2,o=r[0]>0&&r[2]>0?3:2,d=(o+1)*(l+1),u=(0,f.jh)(3*d),h=(0,_.oe)(2*d),p=new Array(6*(o*l-1));let c=0,v=0,y=0,x=0,b=0;for(let g=0;g<4;g++){const e=r[g];if(e<=0)continue;let t=0;for(let r=0;r<4;r++){const e=s[r];e<=0||(u[v++]=i[0]+t,u[v++]=i[1]+c,u[v++]=-1,h[y++]=t/n,h[y++]=c/a,r<3&&g<3&&(1!==r||1!==g)&&(p[b++]=x,p[b++]=x+1,p[b++]=x+l+1,p[b++]=x+1,p[b++]=x+l+2,p[b++]=x+l+1),x++,t+=e)}c+=e}const R=new Array(p.length);return new w.V(e,[[A.r.POSITION,new m.n(u,p,3,!0)],[A.r.NORMAL,new m.n(E,R,3,!0)],[A.r.UV0,new m.n(h,p,2,!0)]])}const E=[0,0,1];var R=i(22955),O=i(19539),S=i(57824),T=i(442),M=i(96897),P=i(44513),C=i(30416),D=i(93345);let V=class extends y.A{constructor(e){super(e),this.drapeSourceType=v.Om.RasterImage,this.updatePolicy=P.q.SYNC,this.type="draped",this.maximumDataResolution=null,this._images=new Array,this._extents=new Array,this._overlays=new Array,this._drapeSourceRenderer=null}initialize(){this._drapeSourceRenderer=this.view.basemapTerrain.overlayManager.registerGeometryDrapeSource(this),this.addHandles((0,a.hA)(()=>this.view.basemapTerrain.overlayManager.unregisterDrapeSource(this)))}setDrapingExtent(e,t){this._spatialReference=t,e.forEach((e,t)=>{this._overlays[t]=e,this._updateImageExtent(e,t)})}destroy(){this.clear()}get spatialReference(){return this._spatialReference}_updateImageExtent(e,t){const i=this._clippedExtent(e.extent,L);if(null==i)return;const r=function(e,t,i){const r=(0,g.VL)(e)/(0,g.uJ)(e),s={width:i,height:i};return r>1.0001?s.height=i/r:r<.9999&&(s.width=i*r),s.width=Math.round(s.width/((0,g.VL)(e)/(0,g.VL)(t))),s.height=Math.round(s.height/((0,g.uJ)(e)/(0,g.uJ)(t))),s}(e.extent,i,e.resolution);let s=e.pixelRatio*this.view.state.pixelRatio;const{layer:n}=this;if("imageMaxWidth"in n&&null!=n.imageMaxWidth||"imageMaxHeight"in n&&null!=n.imageMaxHeight){const e=n.imageMaxWidth,t=n.imageMaxHeight;if(r.width>e){const t=e/r.width;r.height=Math.floor(r.height*t),r.width=e,s*=t}if(r.height>t){const e=t/r.height;r.width=Math.floor(r.width*e),r.height=t,s*=e}}const a=this._extents[t];a&&(0,g.aI)(a.extent,i)&&this._imageSizeEquals(i,a.imageSize,r)||(this._extents[t]={extent:(0,g.vt)(i),imageSize:r,pixelRatio:s},this.suspended||this._fetch(t).catch(e=>{(0,d.zf)(e)||l.A.getLogger(this).error(e)}))}clear(){for(let e=0;e<this._images.length;e++)this._clearImage(e)}async doRefresh(e){const t=[];for(let i=0;i<this._extents.length;i++)this._extents[i]&&t.push(this._fetch(i,e));await Promise.allSettled(t)}async processResult(e,t,i){(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement)&&(e.image=t)}findExtentInfoAt(e){for(const t of this._extents){const i=t.extent;if(new c.A(i[0],i[1],i[2],i[3],this._spatialReference).contains(e))return t}return null}async redraw(e,t){await(0,n.jJ)(this._images,async(i,r)=>{i&&(await e(i,t),await this._createStageObjects(r,i.image,t))})}_imageSizeEquals(e,t,i){if(!this.maximumDataResolution)return!1;const r=(0,g.VL)(e)/this.maximumDataResolution.x,s=(0,g.uJ)(e)/this.maximumDataResolution.y,n=r/t.width,a=s/t.height,l=r/i.width,o=s/i.height,d=Math.abs(n-l),u=Math.abs(a-o),h=R.b.TESTS_DISABLE_OPTIMIZATIONS?0:1.5;return d<=h&&u<=h}async _fetch(e,t){if(this.suspended)return;const i=this._extents[e],s=i.extent;this._images[e]||(this._images[e]={texture:null,material:null,renderGeometry:null,loadingPromise:null,loadingAbortController:null,image:null,pixelData:null,renderExtent:(0,g.vt)(s)});const n=this._images[e];n.loadingAbortController=(0,o.DC)(n.loadingAbortController);const a=new c.A(s[0],s[1],s[2],s[3],this._spatialReference);if(0===a.width||0===a.height)return void this._clearImage(e);const u=new AbortController;n.loadingAbortController=u,(0,d.u7)(t,()=>u.abort());const h=u.signal,p=this._waitFetchReady(h).then(async()=>{(0,d.Te)(h);const t=(0,r.A)((0,r.A)({requestAsImageElement:!0,pixelRatio:this._overlays[e].pixelRatio},this.layerView.getFetchOptions()),{},{signal:h}),{height:s,width:n}=i.imageSize;return this.layer?"imagery"===this.layer.type?this.layer.internalFetchImage(a,n,s,t):this.layer.fetchImage(a,n,s,t):null}).then(e=>{if((0,d.G4)(h))throw l.A.getLogger(this).warnOnce("A call to fetchImage resolved even though the request was aborted. fetchImage should not resolve if options.signal.aborted is true."),(0,d.NK)();return this.processResult(n,e)}).then(()=>{(0,g.C)(n.renderExtent,s)});n.loadingPromise=p,await this.updatingHandles.addPromise(p.then(async()=>{(0,d.Te)(h),await this._createStageObjects(e,n.image,h)}).catch(e=>{throw e&&!(0,d.zf)(e)&&l.A.getLogger(this).error(e),e}).finally(()=>{p===n.loadingPromise&&(n.loadingPromise=null,n.loadingAbortController=null)}))}_clearImage(e){const t=this._images[e];if(t){null!=t.renderGeometry&&(this._drapeSourceRenderer.removeGeometries([t.renderGeometry],S.q.UPDATE),t.renderGeometry=null);const e=this.view.stage,i=t.texture;null!==i&&void 0!==i&&i.unload(),e.removeTexture(i),t.texture=null,t.material=null,t.loadingAbortController=(0,o.DC)(t.loadingAbortController),t.loadingPromise=null,t.image=null,t.pixelData=null}}async _createStageObjects(e,t,i){const r=this.view.stage,s=this._images[e],a=()=>{var e;null!==(e=s.texture)&&void 0!==e&&e.unload(),r.removeTexture(s.texture),s.texture=null,s.renderGeometry&&(this._drapeSourceRenderer.removeGeometries([s.renderGeometry],S.q.UPDATE),s.renderGeometry=null)};if(t){var l;const o=new M.g(t,{width:t.width,height:t.height,preMultiplyAlpha:!0,wrap:{s:D.pF.CLAMP_TO_EDGE,t:D.pF.CLAMP_TO_EDGE}});if(await(0,n.Ke)(this._images[e===O.vr.INNER?O.vr.OUTER:O.vr.INNER].loadingPromise),(0,d.Te)(i),a(),await r.schedule(()=>o.load(r.renderView.renderingContext),i),!o.loaded)return void a();let u;if(r.addTexture(o),s.texture=o,null!==(l=s.material)&&void 0!==l||(s.material=new C.r({draped:!0,texture:o})),s.material.setParameters({texture:o}),e===O.vr.INNER)u=I(s.material,s.renderExtent);else{const e=this._images[0].renderExtent;if(!e)return void a();u=b(s.material,e,s.renderExtent)}s.renderGeometry=new T.$(u),s.renderGeometry.localOrigin=this._overlays[e].renderLocalOrigin,this._drapeSourceRenderer.addGeometries([s.renderGeometry],S.q.UPDATE)}else a(),s.material=null}_clippedExtent(e,t){if("local"!==this.view.viewingMode)return(0,g.C)(t,e);const i=this.view.basemapTerrain;return i.ready?(0,g.E$)(e,i.extent,t):(0,g.C)(t,e)}async _waitFetchReady(e){await(0,u.C_)(()=>this.view.stationary,e),(0,d.Te)(e)}};(0,s._)([(0,h.MZ)()],V.prototype,"type",void 0),V=(0,s._)([(0,p.$)("esri.views.3d.layers.DrapedSubView3D")],V);const L=(0,g.vt)()},63928:(e,t,i)=>{i.d(t,{W:()=>a});var r=i(9392),s=i(45463),n=i(48168);class a extends s.im{constructor(){super(...arguments),this._pp0=(0,r.fA)(0,0,1),this._pp1=(0,r.fA)(0,0,0)}intersect(e,t,i,r,s,a){return(0,n.Uy)(e,i,r,s,void 0,a)}intersectDraped(e,t,i,r){return this._pp0[0]=this._pp1[0]=i[0],this._pp0[1]=this._pp1[1]=i[1],(0,n.Uy)(e,t,this._pp0,this._pp1,void 0,r)}}},69576:(e,t,i)=>{i.d(t,{A:()=>o});var r=i(35143),s=i(91967),n=i(46053),a=(i(81806),i(76460),i(47249),i(85842)),l=i(19451);let o=class extends s.A{constructor(e){super(e),this.updatingHandles=new l.U}destroy(){this.updatingHandles.destroy()}get updating(){return this.updatingHandles.updating}get layer(){return this.layerView.layer}get view(){return this.layerView.view}get suspended(){return this.layerView.suspended}get fullOpacity(){return this.layerView.fullOpacity}};(0,r._)([(0,n.MZ)({constructOnly:!0})],o.prototype,"layerView",void 0),(0,r._)([(0,n.MZ)({readOnly:!0})],o.prototype,"updatingHandles",void 0),(0,r._)([(0,n.MZ)()],o.prototype,"updating",null),(0,r._)([(0,n.MZ)()],o.prototype,"layer",null),(0,r._)([(0,n.MZ)()],o.prototype,"view",null),(0,r._)([(0,n.MZ)()],o.prototype,"suspended",null),(0,r._)([(0,n.MZ)()],o.prototype,"fullOpacity",null),o=(0,r._)([(0,a.$)("esri.views.3d.layers.SubView3D")],o)},83491:(e,t,i)=>{i.d(t,{w:()=>u});var r=i(35143),s=i(54901),n=i(50346),a=i(68134),l=i(46053),o=(i(81806),i(76460),i(47249),i(85842)),d=i(47700);const u=e=>{let t=class extends e{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(){super.postscript(),(0,d.jI)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,t=e.signal;this.addHandles((0,s.hA)(()=>e.abort())),await(0,a.C_)(()=>{var e;return null===(e=this.view.defaultsFromMap)||void 0===e?void 0:e.heightModelInfoReady},t),(0,n.Te)(t);const i=(0,d.Hu)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}};return(0,r._)([(0,l.MZ)()],t.prototype,"view",void 0),(0,r._)([(0,l.MZ)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,r._)([(0,o.$)("esri.views.3d.layers.LayerView3D")],t),t}},86401:(e,t,i)=>{i.d(t,{Ci:()=>n,KL:()=>o,dB:()=>l,l5:()=>a,wB:()=>d});var r=i(48549),s=i(66470);const n=(0,r.BP)().vec3f(s.r.POSITION),a=(0,r.BP)().vec3f(s.r.POSITION).vec2f16(s.r.UV0),l=(0,r.BP)().vec3f(s.r.POSITION).vec4u8(s.r.COLOR),o=((0,r.BP)().vec3f(s.r.POSITION).vec2f16(s.r.UV0).vec4u8(s.r.OLIDCOLOR),(0,r.BP)().vec3f(s.r.POSITION).vec2f(s.r.UV0)),d=(0,r.BP)().vec3f(s.r.POSITION).vec2f(s.r.UV0).vec4u8(s.r.OLIDCOLOR)},91196:(e,t,i)=>{i.d(t,{A:()=>g});var r=i(35143),s=i(91967),n=i(54099),a=i(5632),l=i(76460),o=i(30726),d=i(91291),u=i(46053),h=(i(81806),i(47249),i(85842)),p=i(19451),c=i(90992);let g=class extends(a.A.IdentifiableMixin(d.A.EsriPromiseMixin(n.A.EventedMixin(s.A)))){get spatialReferenceSupported(){return!0}constructor(e){super(e),this._updatingHandles=new p.U,this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if("layerview:create-error"!==e.name){var t;const i=this.layer&&this.layer.id||"no id",r=(null===(t=this.layer)||void 0===t?void 0:t.title)||"no title";l.A.getLogger(this).error("#resolve()","Failed to resolve layer view (layer title: '".concat(r,"', id: '").concat(i,"')"),e)}})}destroy(){this._updatingHandles=(0,o.pR)(this._updatingHandles)}get fullOpacity(){var e,t,i,r;return(null!==(e=null===(t=this.layer)||void 0===t?void 0:t.opacity)&&void 0!==e?e:1)*(null!==(i=null===(r=this.parent)||void 0===r?void 0:r.fullOpacity)&&void 0!==i?i:1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var e;return!this.suspended&&!0===(null===(e=this.layer)||void 0===e?void 0:e.legendEnabled)}get updating(){var e;return!((null===(e=this._updatingHandles)||void 0===e||!e.updating)&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){var e;return!0===(null===(e=this.layer)||void 0===e?void 0:e.visible)}set visible(e){this._overrideIfSome("visible",e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){var e;const t=this.view.timeExtent,i=null===(e=this.layer)||void 0===e?void 0:e.visibilityTimeExtent;return!t||!i||!t.intersection(i).isEmpty}canResume(){var e,t;const i=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&(null===(e=this.layer)||void 0===e?void 0:e.loaded)&&this.parent&&!this.parent.suspended&&(null===(t=this.view)||void 0===t?void 0:t.ready)&&(0,c.g7)(i)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){var e,t;const i=null!==(e=this.parent)&&void 0!==e&&e.suspended?this.parent.suspendInfo:{};null!==(t=this.view)&&void 0!==t&&t.ready||(i.viewNotReady=!0),this.layer&&this.layer.loaded||(i.layerNotLoaded=!0);const r=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return(0,c.g7)(r)&&this.visibleAtCurrentScale||(i.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(i.outsideVisibilityTimeExtent=!0),this.visible||(i.layerInvisible=!0),i}isUpdating(){return!1}};(0,r._)([(0,u.MZ)({readOnly:!0})],g.prototype,"spatialReferenceSupported",null),(0,r._)([(0,u.MZ)()],g.prototype,"view",void 0),(0,r._)([(0,u.MZ)()],g.prototype,"fullOpacity",null),(0,r._)([(0,u.MZ)()],g.prototype,"layer",void 0),(0,r._)([(0,u.MZ)()],g.prototype,"parent",void 0),(0,r._)([(0,u.MZ)({readOnly:!0})],g.prototype,"suspended",null),(0,r._)([(0,u.MZ)({readOnly:!0})],g.prototype,"suspendInfo",null),(0,r._)([(0,u.MZ)({readOnly:!0})],g.prototype,"legendEnabled",null),(0,r._)([(0,u.MZ)({type:Boolean,readOnly:!0})],g.prototype,"updating",null),(0,r._)([(0,u.MZ)({readOnly:!0})],g.prototype,"updatingProgress",null),(0,r._)([(0,u.MZ)()],g.prototype,"updateSuspended",null),(0,r._)([(0,u.MZ)()],g.prototype,"visible",null),(0,r._)([(0,u.MZ)({readOnly:!0})],g.prototype,"visibleAtCurrentScale",null),(0,r._)([(0,u.MZ)({readOnly:!0})],g.prototype,"visibleAtCurrentTimeExtent",null),g=(0,r._)([(0,h.$)("esri.views.layers.LayerView")],g)},98774:(e,t,i)=>{i.d(t,{A:()=>v});var r=i(35143),s=(i(81806),i(76460)),n=i(30726),a=i(50346),l=i(46053),o=(i(47249),i(85842)),d=i(44882),u=i(83491),h=i(91196),p=i(771),c=i(90992),g=i(53963);let v=class extends((0,p.A)((0,u.w)(h.A))){constructor(){super(...arguments),this.fullExtentInLocalViewSpatialReference=null,this.refreshDebounced=(0,a.sg)(async e=>{this.destroyed||await this._doRefresh(e).catch(e=>{(0,a.zf)(e)||s.A.getLogger(this).error(e)})},2e3)}get visibleAtCurrentScale(){const e=this.layer,t="effectiveScaleRange"in e?e.effectiveScaleRange:null;return(0,c.E5)(t,this.view.scale)}isUpdating(){var e;return super.isUpdating()||(null===(e=this.subView)||void 0===e?void 0:e.updating)}initialize(){this._initSubView(),"local"===this.view.viewingMode&&this.addResolvingPromise((async()=>this.fullExtentInLocalViewSpatialReference=await(0,g.n)(this.layer.fullExtent,this.view.spatialReference))()),this._updatingHandles.add(()=>this.suspended,()=>this._suspendedChangeHandler())}destroy(){this.subView=(0,n.pR)(this.subView)}_initSubView(){this.subView=new d.A({layerView:this})}async doRefresh(){return this._doRefresh()}async _doRefresh(e){this.suspended||await this.subView.doRefresh(e)}getFetchOptions(){}_suspendedChangeHandler(){this.suspended?this.subView.clear():this.refreshDebounced()}get test(){}};(0,r._)([(0,l.MZ)()],v.prototype,"layer",void 0),(0,r._)([(0,l.MZ)()],v.prototype,"suspended",void 0),(0,r._)([(0,l.MZ)()],v.prototype,"fullExtentInLocalViewSpatialReference",void 0),(0,r._)([(0,l.MZ)({readOnly:!0})],v.prototype,"visibleAtCurrentScale",null),(0,r._)([(0,l.MZ)()],v.prototype,"updating",void 0),(0,r._)([(0,l.MZ)()],v.prototype,"subView",void 0),v=(0,r._)([(0,o.$)("esri.views.3d.layers.DynamicLayerView3D")],v)}}]);
//# sourceMappingURL=98774.f9aa3aff.chunk.js.map