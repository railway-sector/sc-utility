{"version":3,"file":"static/js/17392.780fdc28.chunk.js","mappings":"oMAIgT,IAAIA,EAAE,cAAcC,EAAAA,IAAID,GAAEE,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,GAAE,0CAA0CH,E,uHCAf,IAAIC,EAAE,cAAcG,EAAAA,EAAEC,WAAAA,CAAYL,GAAGM,MAAMN,EAAE,CAACO,UAAAA,GAAaC,KAAKC,YAAWP,EAAAA,EAAAA,IAAE,IAAIM,KAAKE,iBAAiBC,QAAQX,GAAGQ,KAAKG,QAAQX,EAAEY,EAAAA,IAAG,CAACC,UAAAA,GAAaL,KAAKM,eAAeN,KAAKO,SAASP,KAAKQ,SAASC,OAAO,CAACC,YAAAA,GAAeV,KAAKW,KAAK,WAAU,EAAG,GAAGlB,GAAED,EAAAA,EAAAA,IAAE,EAACG,EAAAA,EAAAA,GAAE,4CAA4CF,E,0HCA3H,SAASmB,EAAEnB,EAAEW,GAAG,OAAOT,EAAAA,EAAAA,IAAE,IAAIF,EAAEoB,YAAY,IAAc,SAAWpB,EAAEW,GAAGX,EAAEoB,YAAwB,SAAWpB,EAAEW,GAAGU,EAAErB,GAAG,MAAMsB,KAAKvB,EAAEgB,SAASQ,GAAGvB,EAAEG,EAAE,IAAIQ,EAAE,CAACW,KAAKvB,EAAEgB,SAASQ,EAAEd,iBAAiBT,IAAWA,EAAEwB,KAAKrB,EAAEJ,EAAE0B,MAAMC,IAAIvB,EAAI,CAA5IwB,CAAE3B,EAAEW,GAAGU,EAAErB,EAAE,CAAnD4B,CAAE5B,EAAEW,GAAGV,EAAAA,GAAE,CAA4K,SAASoB,EAAErB,GAAG,MAAMsB,KAAKX,EAAEa,KAAKzB,GAAGC,EAAE,MAAMD,IAAIY,EAAEc,MAAMI,OAAO9B,GAAGC,EAAEwB,KAAK,KAAK,CAAC,SAASM,EAAE/B,EAAEgC,GAAE,IAAAC,EAAC,MAAM9B,EAAEH,EAAEkC,cAAchC,GAAED,EAAAA,EAAAA,IAAEkC,UAAS,IAAAC,EAAC,GAAGjC,EAAE,CAAC,MAAMS,EAAET,EAAEkC,QAAQC,MAAM,QAAS,OAADnC,QAAC,IAADA,GAAAA,EAAGoC,cAAc3B,GAAEY,EAAAA,EAAAA,IAAEvB,EAAE,CAAC,MAAMC,EAAvmB,SAAWU,EAAEY,GAAGZ,EAAES,aAAY,EAAG,MAAMI,KAAKrB,EAAEmB,KAAKpB,GAAGS,EAAET,EAAEqC,WAAWpC,EAAE,IAAIF,GAAE8B,EAAAA,EAAAA,IAAER,EAAE,KAAKrB,EAAEqC,aAAapC,IAAID,EAAEqC,WAAW,QAAQ,OAAOvC,EAAAA,EAAAA,IAAEkC,gBAAgBM,EAAAA,EAAAA,IAAE,SAAAC,EAAA,QAAW,QAAPA,EAAC9B,EAAEa,YAAI,IAAAiB,GAANA,EAAQC,SAAO1C,GAAGC,GAAEF,EAAAA,EAAAA,IAAEE,IAAIsB,EAAE,CAA+aoB,CAAE5C,EAAE,CAAC6C,OAAO5C,IAAIwC,EAAyB,QAAxBL,EAAE,OAADJ,QAAC,IAADA,OAAC,EAADA,EAAGc,4BAAoB,IAAAV,EAAAA,EAAG,KAAI,EAAIhB,GAAER,EAAAA,EAAAA,IAAE,EAACmC,EAAAA,EAAAA,IAAE,IAAI/C,EAAEyB,KAAK,SAAS,KAAKgB,KAAKvC,EAAEqC,aAAad,KAAKI,GAAG7B,EAAE,IAAG,IAAAgD,EAACnB,IAAIA,EAAEX,eAAgB,OAADc,QAAC,IAADA,GAAkB,QAAjBgB,EAADhB,EAAGiB,uBAAe,IAAAD,GAAlBA,EAAAE,KAAAlB,EAAqBH,UAAU3B,EAAEmC,SAAQb,EAAAA,EAAAA,IAAEvB,EAAE,CAAC,MAAM2B,GAAG,GAAG3B,EAAEkD,WAAU/C,EAAAA,EAAAA,IAAEwB,IAAIa,IAAI,MAAMb,CAAC,CAAC,QAAS,OAADR,QAAC,IAADA,GAAAA,EAAGU,QAAQ,GAAG,CAACe,OAAQ,OAADb,QAAC,IAADA,GAAe,QAAdC,EAADD,EAAGoB,oBAAY,IAAAnB,OAAA,EAAfA,EAAiBY,SAAS,OAAO7C,EAAEkC,cAAchC,EAAEA,EAAEmC,QAAQgB,QAAQ,KAAKrD,EAAEkC,gBAAgBhC,IAAIF,EAAEkC,cAAc,OAAO,CAACC,eAAemB,EAAErD,EAAEW,GAAG,MAAMZ,EAAEC,EAAEe,SAASuC,QAAQ,aAAaxB,EAAE9B,EAAE,CAACmD,aAAc,OAADxC,QAAC,IAADA,OAAC,EAADA,EAAG4C,iBAAiBP,gBAAiB,OAADrC,QAAC,IAADA,OAAC,EAADA,EAAGqC,gBAAgBH,qBAAqBA,KAAK,MAAM9B,SAASJ,GAAGX,EAAE,OAAOW,EAAE6C,OAAO7C,EAAE8C,OAAO1D,MAAM,CAAC,CAAC,C,8PCAwH,MAAM2D,UAAUxD,EAAAA,EAAEE,WAAAA,GAAcC,SAASsD,WAAWpD,KAAKqD,UAAU,CAACC,aAAa,KAAKC,QAAQ,CAAC,EAAE,KAAKC,eAAe,EAAEC,aAAa,CAAC,CAAC,EAAE,EAAE,EAAE,KAAKzD,KAAK0D,aAAa,CAAC,EAAE,EAAE,GAAG1D,KAAK2D,SAAS,CAAC,EAAE,EAAE,GAAG3D,KAAK4D,KAAK,CAAC,GAAG,IAAI5D,KAAK6D,eAAe,CAAC,EAAE,GAAG7D,KAAK8D,eAAe,CAAC,EAAE,EAAE,GAAG9D,KAAK+D,mBAAmBnE,EAAAA,GAAEoE,OAAOhE,KAAKiE,aAAarE,EAAAA,GAAEoE,OAAOhE,KAAKkE,aAAa,CAAC,EAAE,SAASC,IAAI,MAAMvE,EAAE,IAAIwC,EAAAA,GAAE3C,EAAEG,EAAEwE,SAAS,OAAOxE,EAAEyE,QAAQjE,EAAAA,GAAGR,EAAEyE,QAAQrD,EAAAA,GAAGvB,EAAE4E,QAAQ3E,EAAAA,GAAGD,EAAE4E,QAAQ7C,EAAAA,GAAG/B,EAAE6E,SAASnD,IAAI,IAAIP,EAAAA,EAAE,eAAepB,IAAC,IAAA+E,EAAA,OAAS,QAATA,EAAE/E,EAAEgF,aAAK,IAAAD,OAAA,EAAPA,EAASE,aAAY,IAAI3D,EAAAA,EAAE,0BAA0BtB,GAAGA,EAAEkF,OAAOC,yBAAyB,IAAI7D,EAAAA,EAAE,0BAA0B8D,IAAA,IAAEF,OAAO9E,GAAEgF,EAAA,OAAGpF,EAAAA,EAAAA,IAAEqF,EAAEjF,EAAEkF,8BAA6B,IAAIvC,EAAAA,EAAE,yBAAyB/C,GAAGA,EAAEsE,gBAAgB,IAAIvB,EAAAA,EAAE,uBAAuB/C,GAAGA,EAAEkE,cAAc,IAAInB,EAAAA,EAAE,mBAAmB/C,GAAGA,EAAEmE,UAAU,IAAIb,EAAAA,EAAE,eAAetD,GAAGA,EAAEoE,MAAM,IAAId,EAAAA,EAAE,yBAAyBtD,GAAGA,EAAEqE,gBAAgB,IAAIf,EAAAA,EAAE,kBAAkBtD,IAAC,IAAAuF,EAAA,OAAqB,QAArBA,EAAEvF,EAAE6D,UAAUE,eAAO,IAAAwB,EAAAA,EAAE,CAAC,EAAE,OAAM,IAAIC,EAAAA,EAAE,uBAAuBxF,GAAGA,EAAE0E,cAAc,IAAIe,EAAAA,EAAE,oBAAoBzF,GAAGA,EAAE6D,UAAUC,cAAc,IAAIjC,EAAAA,EAAE,6BAA6B7B,GAAGA,EAAEuE,mBAAmB,GAAG,IAAI1C,EAAAA,EAAE,uBAAuB7B,GAAGA,EAAEyE,aAAa,GAAG,IAAIiB,EAAAA,EAAE,mBAAmB1F,GAAGA,EAAE6D,UAAUG,gBAAgB,IAAIpC,EAAAA,EAAE,uBAAuB5B,GAAGA,EAAE6D,UAAUI,aAAaO,OAAO,IAAI,IAAIiB,EAAAA,EAAE,YAAYzF,GAAGA,EAAE2F,UAAU1F,EAAE2F,UAAUjE,IAAI,eAAe,OAAO,CAAC,EAAE,EAAE,EAAE,KAAK1B,EAAE2F,UAAUjE,IAAI,gBAAgB,OAAO,CAAC,EAAE,EAAE,EAAE,KAAK1B,EAAE4F,KAAKlE,KAAIc,EAAAA,EAAAA,GAACqD,IAAAA,GAAAC,EAAAA,EAAAA,GAAA,kyKA0HnhG9F,EAAE+F,KAAKrE,KAAIc,EAAAA,EAAAA,GAACwD,IAAAA,GAAAF,EAAAA,EAAAA,GAAA,6sBAmBZ3F,CAAC,CAAC,MAAMiF,GAAEpF,EAAAA,EAAAA,MAAIiG,EAAEC,OAAOC,OAAOD,OAAOE,eAAe,CAACC,UAAU,KAAKC,uBAAuB5C,EAAE6C,MAAM7B,GAAG8B,OAAOC,YAAY,CAACC,MAAM,W,wIC7IwY,MAAMvF,UAAUqB,EAAAA,EAAEpC,WAAAA,GAAcC,SAASsD,WAAWpD,KAAKoG,aAAYxG,EAAAA,EAAAA,KAAG,EAAE,SAAS2C,EAAE3C,GAAGA,EAAEyE,QAAQjE,EAAAA,IAAGR,EAAEwE,SAASE,SAASnD,IAAI,IAAIzB,EAAAA,EAAE,oBAAoB,CAACE,EAAEQ,KAAK,MAAMoB,GAAE7B,EAAAA,EAAAA,KAAEF,EAAAA,EAAAA,MAAIW,EAAEsE,OAAO2B,WAAWzG,EAAEwG,aAAa,OAAO5G,EAAAA,EAAAA,IAAEgC,EAAEA,MAAM6D,KAAKlE,KAAIK,EAAAA,EAAAA,GAAC8D,IAAAA,GAAAC,EAAAA,EAAAA,GAAA,0LAGpvB,C,mLCHmsB,IAAInD,EAAE,eAAc1C,EAAAA,EAAAA,GAAEE,EAAAA,KAAIC,WAAAA,CAAYL,GAAGM,MAAMN,GAAGQ,KAAKsG,SAAS,KAAKtG,KAAKuG,YAAY,IAAIvG,KAAKwG,QAAQ,EAAExG,KAAKyG,KAAK,GAAGzG,KAAK0G,sBAAsB,GAAG1G,KAAK2G,oBAAoB,GAAG3G,KAAK4G,QAAQ,IAAI,CAAC,SAAI3D,GAAQ,OAAO,MAAMjD,KAAKsG,UAAUtG,KAAKuG,YAAY,CAAC,CAACrD,MAAAA,CAAO1D,GAAG,OAAOgC,EAAAA,EAAAA,IAAExB,KAAKsG,SAAS9G,EAAE8G,WAAWtG,KAAKuG,cAAc/G,EAAE+G,aAAavG,KAAKwG,UAAUhH,EAAEgH,SAASxG,KAAKyG,OAAOjH,EAAEiH,MAAMzG,KAAK0G,wBAAwBlH,EAAEkH,uBAAuB1G,KAAK2G,sBAAsBnH,EAAEmH,sBAAqBhH,EAAAA,EAAAA,IAAEK,KAAK4G,QAAQpH,EAAEoH,QAAQ,IAAGpH,EAAAA,EAAAA,IAAE,EAAC+C,EAAAA,EAAAA,IAAE,CAACsE,KAAK5E,EAAAA,EAAE6E,KAAK,CAACC,MAAM,CAACC,YAAW,OAAQ5E,EAAE6E,UAAU,gBAAW,IAAQzH,EAAAA,EAAAA,IAAE,EAAC+C,EAAAA,EAAAA,IAAE,CAACsE,KAAKK,OAAOC,aAAY,EAAGC,MAAM,CAACC,IAAI,GAAGP,KAAK,CAACC,MAAM,CAACC,YAAW,OAAQ5E,EAAE6E,UAAU,mBAAc,IAAQzH,EAAAA,EAAAA,IAAE,EAAC+C,EAAAA,EAAAA,IAAE,CAACsE,KAAKK,OAAOC,aAAY,EAAGL,KAAK,CAACC,MAAM,CAACC,YAAW,OAAOhG,EAAAA,EAAAA,GAAExB,GAAGY,EAAAA,GAAEkH,WAAU1G,EAAAA,EAAAA,IAAEpB,QAAG,GAAO,KAAM4C,EAAE6E,UAAU,eAAU,IAAQzH,EAAAA,EAAAA,IAAE,EAAC+C,EAAAA,EAAAA,IAAE,CAACsE,KAAKK,OAAOC,aAAY,EAAGC,MAAM,CAACC,IAAI,EAAEE,IAAI,KAAKT,KAAK,CAACC,MAAM,CAACC,YAAW,OAAQ5E,EAAE6E,UAAU,YAAO,IAAQzH,EAAAA,EAAAA,IAAE,EAAC+C,EAAAA,EAAAA,IAAE,CAACsE,KAAKK,OAAOC,aAAY,EAAGC,MAAM,CAACC,IAAI,EAAEE,IAAI,KAAKT,KAAK,CAACC,MAAM,CAACC,YAAW,OAAQ5E,EAAE6E,UAAU,6BAAwB,IAAQzH,EAAAA,EAAAA,IAAE,EAAC+C,EAAAA,EAAAA,IAAE,CAACsE,KAAKK,OAAOC,aAAY,EAAGC,MAAM,CAACC,IAAI,EAAEE,IAAI,KAAKT,KAAK,CAACC,MAAM,CAACC,YAAW,OAAQ5E,EAAE6E,UAAU,2BAAsB,IAAQzH,EAAAA,EAAAA,IAAE,EAAC+C,EAAAA,EAAAA,IAAE9C,EAAAA,KAAI2C,EAAE6E,UAAU,eAAU,IAAQzH,EAAAA,EAAAA,IAAE,EAAC+C,EAAAA,EAAAA,IAAE,CAACiF,UAAS,EAAGV,KAAK,CAACW,MAAK,MAAOrF,EAAE6E,UAAU,QAAQ,MAAM7E,GAAE5C,EAAAA,EAAAA,IAAE,EAAC6B,EAAAA,EAAAA,GAAE,2BAA2Be,E,8GCAzrD,SAASH,EAAEzC,EAAEY,GAAG,OAAOV,EAAEF,KAAKE,EAAEU,EAAE,CAAC,SAASV,EAAEF,GAAG,GAAG,MAAMA,EAAE,OAAO,KAAK,MAAMY,EAAE,MAAMZ,EAAEkI,MAAMlI,EAAEkI,MAAMC,GAAG,GAAG,IAAIhI,EAAE,KAAK,OAAOA,EAAE,MAAMH,EAAEoI,SAASpI,EAAEoI,SAAS,MAAMpI,EAAEkI,OAAO,kBAAkBlI,EAAEkI,OAAO,MAAMlI,EAAEkI,MAAMG,eAAe,MAAMrI,EAAEsI,WAAWtI,EAAEsI,WAAWtI,EAAEkI,MAAMG,eAAerI,EAAEuI,IAAI,MAAMpI,EAAE,KAAI,KAAAqI,OAAM5H,EAAC,KAAA4H,OAAIrI,EAAG,CAAC,MAAMmD,EAAE,CAACgE,KAAK,CAACC,MAAM,CAACkB,OAAwL,SAAWzI,EAAEY,GAAE,IAAA8H,EAAC,OAAO,OAAD1I,QAAC,IAADA,GAAQ,QAAP0I,EAAD1I,EAAGkI,aAAK,IAAAQ,OAAA,EAARA,EAAUL,gBAAe,MAAMrI,EAAEsI,aAAa1H,EAAEwG,QAAQ,CAACuB,QAAQ3I,EAAEkI,MAAMC,GAAGC,SAASpI,EAAEsI,WAAWtI,EAAEkI,MAAMG,gBAAgB,EAA/TO,OAAO,CAAC,kBAAkB,CAACvB,KAAK,CAACK,OAAOmB,QAAQrB,YAAW,GAAI,mBAAmB,CAACH,KAAK,CAACK,OAAOmB,QAAQrB,YAAW,KAAMsB,QAAQ,CAAC,YAAY,CAACb,KAAiL,SAAWjI,GAAG,GAAG,MAAMA,EAAE2I,SAAS,MAAM3I,EAAEoI,SAAS,MAAM,CAACG,IAAI,KAAKL,MAAM,CAACC,GAAGnI,EAAE2I,QAAQN,cAAc,YAAYC,WAAW,CAACS,SAAS/I,EAAEoI,UAAU,KAAzTY,SAAS,aAAiT,SAASC,EAAElG,EAAE3C,EAAE4B,EAAES,GAAE,IAAAyG,EAAAC,EAAC,MAAMC,wBAAwB9F,GAAGP,GAAG+D,SAASzB,EAAEgE,kBAAkB/H,EAAEgI,gBAAgBL,EAAEL,OAAOxH,GAAGY,EAAE,GAAG,MAAMV,GAAG,MAAM2H,EAAE,OAAOxG,IAAIA,EAAEzC,GAAGA,IAAGA,EAAAA,EAAAA,GAAEyF,EAAEJ,EAAEjE,GAAG,MAAMS,GAAEjB,EAAAA,EAAAA,GAAE6E,IAAOtF,EAAAA,EAAAA,GAAEsF,EAAEJ,EAAEI,EAAR,EAAY5D,GAAG,MAAMD,GAAE3B,EAAAA,EAAAA,IAAEwF,EAAErE,EAAEW,GAAG3B,EAAEmJ,QAAQC,MAAM,EAAElG,EAAEmG,4BAA4B7H,EAAExB,GAAG,IAAIsJ,EAAE,KAAKC,EAAE,KAAKC,EAAE,KAAKlE,EAAE,KAAK,IAAI,MAAM1F,KAAKI,EAAEyJ,QAAQC,IAAI,CAAC,MAAMlJ,GAAEgC,EAAAA,EAAAA,IAAE5C,EAAE+C,GAAG,GAAG,MAAMnC,GAAG,MAAMZ,EAAE+J,sBAAsB,SAAS,MAAM5J,EAAED,EAAEU,GAAG,MAAMT,IAAI,MAAMmB,GAAGnB,IAAImB,IAAK,OAADoI,QAAC,IAADA,IAAAA,EAAIjH,EAAEuH,EAAEhK,EAAE+C,EAAElB,KAAI7B,EAAE+J,sBAA/Q,EAAuSL,IAAIE,EAAE5J,IAAI,MAAMiJ,GAAG9I,IAAI8I,IAAK,OAADU,QAAC,IAADA,IAAAA,EAAIlH,EAAEuH,EAAEhK,EAAE+C,EAAElB,KAAI,MAAM6D,GAAG1F,EAAE+J,sBAA7V,EAAqXlI,GAAGA,EAAE7B,EAAE+J,sBAA5X,EAAoZJ,IAAIjE,EAAE1F,IAAI,CAAC,MAAMiK,iBAAiBC,EAAEC,eAAe3E,GAAGxD,EAAG,QAADkH,EAAAU,SAAC,IAAAV,GAADA,EAAGkB,qBAAqBF,GAAGlI,EAAEqI,sBAAsBT,EAAEU,sBAAqB9I,EAAAA,EAAAA,OAAKQ,EAAEqI,sBAAsB,KAAM,QAADlB,EAAAzD,SAAC,IAAAyD,GAADA,EAAGiB,qBAAqB5E,GAAGxD,EAAEuI,oBAAoB7E,EAAE4E,sBAAqB9I,EAAAA,EAAAA,OAAKQ,EAAEuI,oBAAoB,IAAI,CAAC,SAASP,EAAEhK,EAAEY,EAAET,GAAG,IAAGC,EAAAA,EAAAA,IAAEJ,GAAG,CAAC,MAAMwB,GAAEQ,EAAAA,EAAAA,IAAEhC,EAAEY,GAAG,GAAG,MAAMY,EAAE,OAAOgJ,KAAK3C,IAAIrG,EAAEJ,EAAEjB,EAAE,CAAC,OAAO,KAAKA,CAAC,CAAC,MAAMiB,EAAE,IAAIW,GAAEgB,EAAAA,EAAAA,MAAI0C,GAAEjE,EAAAA,EAAAA,K,kDCAl/D,SAASvB,EAAEA,GAAG,MAAMuB,EAAE,IAAIxB,EAAAA,EAAEC,GAAG,OAAOuB,EAAE+H,QAAQC,MAAM,EAAEhI,EAAE+H,QAAQkB,eAAc,EAAGjJ,CAAC,C,qICAoS,IAAIA,EAAE,eAAcvB,EAAAA,EAAAA,GAAEW,EAAAA,KAAIP,WAAAA,GAAcC,SAASsD,WAAWpD,KAAKkK,OAAO,KAAKlK,KAAKmK,kBAAiB,EAAGnK,KAAKoK,2BAA2B,CAAC,CAAC,eAAIvJ,GAAc,OAAOb,KAAKoK,2BAA2B,GAAGpK,KAAKmK,gBAAgB,CAAC,eAAItJ,CAAYrB,GAAGQ,KAAKmK,iBAAiB3K,CAAC,CAAC,YAAI6K,GAAW,OAAM,CAAE,CAAC,WAAIlK,GAAS,IAAAyE,EAAA0F,EAAC,OAAmD,QAAnD1F,GAAkB,QAAX0F,EAAAtK,KAAKkK,cAAM,IAAAI,OAAA,EAAXA,EAAanK,WAAUH,KAAKkK,OAAOK,iBAAS,IAAA3F,GAAAA,CAAK,CAAC,WAAIzE,CAAQX,GAAGQ,KAAKwK,gBAAgB,UAAUhL,EAAE,CAACiL,gBAAAA,GAAmB,OAAOzK,KAAKoK,8BAA6BzK,EAAAA,EAAAA,IAAE,IAAIK,KAAKoK,6BAA6B,IAAG5K,EAAAA,EAAAA,IAAE,EAACI,EAAAA,EAAAA,IAAE,CAAC8K,eAAc,KAAM1J,EAAEiG,UAAU,cAAS,IAAQzH,EAAAA,EAAAA,IAAE,EAACI,EAAAA,EAAAA,IAAE,CAAC8K,eAAc,KAAM1J,EAAEiG,UAAU,YAAO,IAAQzH,EAAAA,EAAAA,IAAE,EAACI,EAAAA,EAAAA,IAAE,CAACiH,KAAK8D,WAAW3J,EAAEiG,UAAU,cAAc,OAAMzH,EAAAA,EAAAA,IAAE,EAACI,EAAAA,EAAAA,OAAKoB,EAAEiG,UAAU,wBAAmB,IAAQzH,EAAAA,EAAAA,IAAE,EAACI,EAAAA,EAAAA,IAAE,CAAC4H,UAAS,KAAMxG,EAAEiG,UAAU,WAAW,OAAMzH,EAAAA,EAAAA,IAAE,EAACI,EAAAA,EAAAA,OAAKoB,EAAEiG,UAAU,UAAU,OAAMzH,EAAAA,EAAAA,IAAE,EAACI,EAAAA,EAAAA,OAAKoB,EAAEiG,UAAU,kCAA6B,GAAQjG,GAAExB,EAAAA,EAAAA,IAAE,EAACE,EAAAA,EAAAA,GAAE,qCAAqCsB,E,6DCA9qC,MAAMpB,UAAUD,EAAAA,EAAEiL,SAAAA,CAAUjL,EAAES,EAAER,EAAEF,EAAEsB,EAAEvB,GAAG,OAAOD,EAAAA,EAAAA,IAAEG,EAAEC,EAAEF,EAAEsB,OAAE,EAAOvB,EAAE,CAACoL,eAAAA,CAAgBlL,EAAEH,EAAEI,EAAEF,GAAG,OAAOU,EAAAA,EAAAA,IAAER,EAAE,GAAGA,EAAE,GAAGD,EAAED,EAAE,E,kGCAiD,SAASkB,EAAER,EAAEY,GAAG,OAAOZ,EAAE,GAAGY,EAAE,GAAGZ,EAAE,GAAGY,EAAE,EAAE,CAA2J,SAASO,EAAEnB,EAAET,EAAED,EAAED,GAAM,IAAJwC,EAACmB,UAAA0H,OAAA,QAAAC,IAAA3H,UAAA,GAAAA,UAAA,GAAC1D,EAAG,OAAOsB,EAAAA,EAAAA,IAAEgK,EAAEvL,EAAEC,IAAGsB,EAAAA,EAAAA,IAAEiK,EAAEtL,EAAEsC,GAApG,SAAW7B,EAAEY,EAAErB,GAAG,MAAMH,GAAEC,EAAAA,EAAAA,IAAEE,EAAEqB,IAAGiB,EAAAA,EAAAA,IAAEtC,IAAUyC,EAAAA,EAAAA,IAAEhC,EAAET,EAAEH,EAAE,CAAkD+C,CAAE2C,EAAE+F,EAAED,IAAGxL,EAAAA,EAAAA,IAAEY,EAAE6B,EAAEiD,EAAE,CAAwF,SAASpC,EAAE1C,EAAEZ,EAAEC,EAAEwC,IAAGjB,EAAAA,EAAAA,IAAEgK,EAAExL,EAAEC,GAAG,MAAM2C,EAAEH,GAAEvC,EAAAA,EAAAA,IAAEsL,GAAG,OAAOrL,EAAAA,EAAAA,IAAES,EAAEX,EAAEuL,EAAE5I,EAAE,CAA2J,SAASsD,EAAEtF,EAAEZ,GAAG,MAAME,EAAEU,EAAE8K,MAAMzL,EAAEW,EAAE+K,IAAIlJ,EAAEzC,EAAE0L,MAAM9I,EAAE5C,EAAE2L,IAAIvL,GAAEoB,EAAAA,EAAAA,IAAEgK,EAAEvL,EAAEC,GAAGoB,GAAEE,EAAAA,EAAAA,IAAEoK,EAAEhJ,EAAEH,GAAGT,EAAEZ,EAAEhB,EAAEkB,GAAG,GAAGkJ,KAAKqB,IAAI7J,IAAIJ,EAAE,MAAM,GAAG,MAAMC,GAAEL,EAAAA,EAAAA,IAAEiK,EAAEvL,EAAEuC,GAAG+C,EAAEpE,EAAEE,EAAEO,GAAGG,EAAEe,EAAE3B,EAAEhB,EAAEyB,GAAGG,EAAE,GAAGwD,GAAG,GAAG,GAAGzC,GAAG,GAAG,IAAI/C,EAAEqH,KAAK,MAAM,EAAClH,EAAAA,EAAAA,IAAEuF,EAAExF,EAAEE,EAAEoF,SAAS,GAAG,IAAI5E,EAAEyG,OAAOtE,GAAG,GAAG,IAAI/C,EAAEqH,MAAM,MAAM,EAAClH,EAAAA,EAAAA,IAAEuF,EAAExF,EAAEE,EAAEoF,IAAI,MAAM,EAAE,CAAC,SAASC,EAAE7E,EAAEZ,EAAEE,GAAG,MAAM0C,EAAE,GAAGxC,GAAEoB,EAAAA,EAAAA,IAAEgK,EAAE5K,EAAE+K,IAAI/K,EAAE8K,OAAOpK,GAAEE,EAAAA,EAAAA,IAAEoK,EAAEhL,EAAE8K,MAAM1L,GAAGgC,GAAES,EAAAA,EAAAA,IAAErC,GAAGyB,EAAE,GAAE5B,EAAAA,EAAAA,IAAEG,EAAEkB,GAAGF,EAAES,EAAEA,EAAE,EAAEG,IAAGS,EAAAA,EAAAA,IAAEnB,GAAGpB,EAAEA,GAAG,GAAG,IAAIkB,EAAE,CAAC,MAAMI,GAAGK,GAAG,EAAEG,IAAI,IAAIpB,EAAEyG,MAAM7F,GAAG,IAAIoB,EAAEkJ,MAAK3L,EAAAA,EAAAA,IAAEuF,EAAE9E,EAAE8K,MAAMtL,EAAEoB,GAAG,MAAM,GAAGJ,EAAE,EAAE,CAAC,MAAMI,EAAEgJ,KAAKuB,KAAK3K,GAAGpB,IAAI6B,EAAEL,IAAI,EAAEQ,IAAI,IAAIpB,EAAEyG,MAAMrH,GAAG,IAAI4C,EAAEkJ,MAAK3L,EAAAA,EAAAA,IAAEuF,EAAE9E,EAAE8K,MAAMtL,EAAEJ,IAAI,MAAME,IAAI2B,EAAEL,IAAI,EAAEQ,IAAI,IAAIpB,EAAEyG,MAAMnH,GAAG,IAAI0C,EAAEkJ,MAAK3L,EAAAA,EAAAA,IAAEsL,EAAE7K,EAAE8K,MAAMtL,EAAEF,GAAG,CAAC,OAAO0C,CAAC,CAAC,MAAMhB,EAAE,KAAK4J,GAAExJ,EAAAA,EAAAA,MAAI4J,GAAE5J,EAAAA,EAAAA,MAAIyJ,GAAEzJ,EAAAA,EAAAA,MAAI0D,GAAE1D,EAAAA,EAAAA,K,oUCAh6C,MAAc9B,GAAEE,EAAAA,EAAAA,IAAE,GAAikB,MAAMoB,EAAE,IAAhkB,MAAQnB,WAAAA,GAAcG,KAAKwL,gBAAgB,EAAExL,KAAKyL,qBAAjE,EAAwFzL,KAAK0L,mBAAjG,EAAsH1L,KAAKyL,qBAAqBzL,KAAK2L,gBAAgB,GAAG3L,KAAK4L,wBAAwB,KAAK5L,KAAK6L,uBAAuB,EAAE7L,KAAK8L,0BAA0B,GAAG9L,KAAK+L,mCAA/Q,EAAoT,IAAI/L,KAAKgM,aAAa,EAAEhM,KAAKiM,yBAAyB,IAAIjM,KAAKkM,mBAAmB,EAAE,CAACC,cAAAA,CAAe3M,GAAG,OAAOA,EAAEQ,KAAK0L,mBAAmB1L,KAAKyL,oBAAoB,CAACW,4BAAAA,CAA6B5M,GAAG,OAAOQ,KAAK8L,2BAA2BtM,EAAEQ,KAAK+L,mCAAmC,EAAE,GAAoa,MAAMxJ,EAAE,IAA5Z,MAAQ1C,WAAAA,GAAcG,KAAKqM,sBAAsB,GAAGrM,KAAKsM,mBAAmB,EAAEtM,KAAKuM,WAAW,IAAI/M,EAAAA,EAAE,CAAC,IAAI,IAAI,IAAI,MAAMQ,KAAKwM,2BAA2B,CAACC,KAAK,EAAEC,sBAAqB,EAAGC,UAAU,SAASC,cAAc,CAACC,KAAK,kBAAkBC,OAAO,GAAGC,YAAY,EAAEC,MAAMxN,EAAAA,EAAEyN,WAAW,IAAIzN,EAAAA,EAAE,CAAC,EAAE,IAAI,IAAI,MAAMQ,KAAKkN,wBAAwB,CAACF,MAAM,CAAC,IAAI,IAAI,IAAI,KAAKG,eAAe,EAAEC,SAAS,EAAEC,YAAW,EAAG,G,8CCAtJ,SAASjE,EAACxE,EAAwD5D,GAAE,IAAxDsM,eAAe3N,EAAE4N,YAAY/N,EAAEgO,oBAAoBpN,GAAEwE,EAAI,MAAMnF,GAAE+J,EAAAA,EAAAA,IAAE7J,EAAEH,EAAEY,EAAEY,GAAG,OAAOvB,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,EAAEA,CAAC,CAAC,SAAS2L,EAAEhL,EAAEY,EAAEvB,EAAEG,GAAG,MAAM4J,GAAEjH,EAAAA,EAAAA,MAAInB,GAAEN,EAAAA,EAAAA,IAAErB,EAAEgO,OAAOC,EAA+iB,SAAWlO,EAAEY,GAAG,MAAMY,EAAE2M,EAAEnO,EAAEoO,mBAAmBC,eAAerO,EAAEkF,OAAOoJ,SAAS9M,GAAG,MAAMvB,GAAE2B,EAAAA,EAAAA,IAAE5B,EAAEwB,EAAExB,EAAEkF,OAAO8B,QAAQhH,EAAEkF,OAAO+B,MAAKiH,EAAAA,EAAAA,OAAKK,UAAU,OAAOpO,EAAAA,EAAAA,KAAEC,EAAAA,EAAAA,GAAEH,EAAEW,IAAI,EAAE,CAA/sB4N,CAAEhN,EAAEI,GAAG,IAAIgI,EAAE,GAAGY,KAAKqB,IAAIqC,GAAG1I,EAAEkH,mBAAmB9C,EAAEhJ,EAAE6N,MAAK9K,EAAAA,EAAAA,IAAEnC,EAAEvB,EAAEgO,YAAY,CAAC,MAAM9N,GAAEyC,EAAAA,EAAAA,IAAExC,EAAEsO,kBAAkBzO,EAAE0O,QAAOlJ,EAAAA,EAAAA,OAAKvF,GAAE8B,EAAAA,EAAAA,GAAEmM,EAAElO,EAAE0O,QAAQrN,GAAEU,EAAAA,EAAAA,GAAEkE,EAAEjG,EAAE2O,QAAQhF,EAAEhJ,EAAE6N,MAAK9K,EAAAA,EAAAA,IAAEnC,EAAErB,IAAIsO,KAAKtO,IAAI,MAAMS,EAAET,IAAI,MAAMS,GAAE6B,EAAAA,EAAAA,IAAErB,EAAAA,EAAAA,GAAEuD,EAAExE,EAAEF,EAAE4O,QAAQvN,GAAGE,EAAEgJ,KAAKsE,MAAK9O,EAAAA,EAAAA,IAAEY,EAAER,EAAE2O,wBAAwB,EAAE,IAAI/M,EAAEwI,KAAKwE,IAAIxN,GAAGpB,EAAE2O,uBAAuB,OAAOlN,EAAAA,EAAAA,IAAEkB,EAAAA,EAAAA,MAAI9C,EAAE4O,QAAOhN,EAAAA,EAAAA,IAAEkB,EAAAA,EAAAA,OAAIO,EAAAA,EAAAA,GAAEqB,EAAEzE,EAAE8B,IAAGsB,EAAAA,EAAAA,GAAEoC,EAAEpE,EAAEV,MAAMY,EAAEZ,EAAET,EAAE8O,aAAajN,EAAEpB,EAAET,EAAE+O,WAAW,OAAAC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAUhP,GAAC,IAAC8O,YAAYzN,EAAE0N,UAAUlN,KAAI,CAAC,OAAO4H,EAAE6E,KAAKzO,IAAI,UAAUA,EAAEoP,SAAQlP,EAAAA,EAAAA,GAAE8J,EAAEhK,EAAEiP,aAAa,MAAMrO,GAAET,EAAAA,EAAAA,KAAEkF,EAAAA,EAAAA,IAAE2E,EAAEhK,EAAEkP,UAAUjP,EAAE4O,OAAOjN,IAAI,OAAAuN,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAUnP,GAAC,IAACqP,WAAWzO,KAAI,CAAoK,SAAS0O,EAAEnP,EAAEH,EAAEwB,EAAEQ,GAAG,OAAOpB,EAAAA,EAAAA,IAAE2O,EAAE/N,EAAEQ,IAAG/B,EAAAA,EAAAA,GAAEE,EAAEH,EAAEuP,EAAE,CAAC,MAAMpB,GAAEpL,EAAAA,EAAAA,MAAImD,GAAEnD,EAAAA,EAAAA,MAAI4B,GAAE5B,EAAAA,EAAAA,MAAI2C,GAAE3C,EAAAA,EAAAA,MAAIwM,GAAE/N,EAAAA,EAAAA,MCA5nC,IAAI0M,EAAE,IAAI9M,EAAE8M,EAAE,cAActN,EAAAA,EAAEP,WAAAA,CAAYL,GAAGM,MAAMN,GAAGQ,KAAKgP,4BAA4B,KAAKhP,KAAKiP,qBAAoB,CAAE,CAAC,YAAI3I,GAAU,IAAA4I,EAAC,OAA6B,QAA7BA,EAAOlP,KAAKmP,SAAS7I,gBAAQ,IAAA4I,EAAAA,EAAE,IAAI9N,EAAAA,CAAC,CAAC,gCAAIgO,GAA8B,IAAAC,EAAC,OAAuC,QAAvCA,EAAOrP,KAAKgP,mCAA2B,IAAAK,EAAAA,EAAErP,KAAKwN,mBAAmB,CAAC,qBAAI8B,GAAoB,OAAOtP,KAAKuP,mBAAmBvP,KAAKoP,6BAA6BpP,KAAKsG,SAASkJ,iBAAiB,CAAC,8BAAIC,GAA6B,OAAOzP,KAAK0P,0BAA0B1P,KAAKoP,6BAA6B,CAAC,eAAI7I,GAAc,OAAOvG,KAAKmP,SAAS5I,WAAW,CAAC,0BAAIgI,GAAyB,OAAOvO,KAAKuG,YAAYvG,KAAK2P,aAAa,CAAC,WAAInJ,GAAU,OAAOxG,KAAKmP,SAAS3I,OAAO,CAAC,QAAIC,GAAO,OAAOzG,KAAKmP,SAAS1I,IAAI,CAAC,WAAIG,GAAU,OAAO5G,KAAKmP,SAASvI,OAAO,CAAC,yBAAIgJ,GAAwB,OAAO5P,KAAKyG,KAAK,EAAE,CAAC,yBAAIC,GAAwB,OAAO1G,KAAKmP,SAASzI,qBAAqB,CAAC,uBAAIC,GAAsB,OAAO3G,KAAKmP,SAASxI,mBAAmB,CAAC,uBAAI6G,GAAsB,OAAOxN,KAAK6P,oBAAoB7P,KAAKsG,UAASxD,EAAAA,EAAAA,MAAI,CAAC,UAAIsF,GAAS,MAAM5I,EAAEQ,KAAKkO,kBAAkB,OAAOlO,KAAKuP,mBAAmB/P,EAAEQ,KAAKsG,SAASkJ,iBAAiB,CAAC,qBAAItB,GAAoB,OAAOlO,KAAK0P,0BAA0B1P,KAAKwN,oBAAoB,CAAC,mBAAIsC,GAAkB,MAAMtQ,GAAEwB,EAAAA,EAAAA,IAAE8B,EAAAA,EAAAA,MAAI9C,KAAKkO,kBAAkBlO,KAAKwN,qBAAqB,OAAOnM,EAAAA,EAAAA,GAAE7B,EAAEA,EAAE,CAAC,kBAAI8N,GAAiB,MAAM9N,EAAEyF,GAAEnC,EAAAA,EAAAA,MAAI9C,KAAK2D,WAAUhE,EAAAA,EAAAA,IAAEK,KAAK4P,uBAAuB5P,KAAK+P,YAAY,OAAO1O,EAAAA,EAAAA,GAAE7B,EAAEA,EAAE,CAAC,UAAIwQ,GAAS,OAAOhQ,KAAK4N,mBAAmBqC,sBAAsBjQ,KAAKwN,qBAAoB9N,EAAAA,EAAAA,MAAI,CAAC,YAAIiE,GAAW,MAAMnE,EAAEQ,KAAKgQ,OAAO,OAAO5N,EAAAA,EAAAA,IAAE5C,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAI,CAAC,eAAI0Q,GAAc,MAAM1Q,EAAEQ,KAAKgQ,OAAO,OAAO5N,EAAAA,EAAAA,IAAE5C,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAG,CAAC,cAAIuQ,GAAa,MAAMvQ,EAAEQ,KAAK2D,SAASvD,EAAE6E,GAAEnC,EAAAA,EAAAA,MAAI9C,KAAKkQ,cAAavQ,EAAAA,EAAAA,IAAEK,KAAKwG,SAAShH,GAAG,OAAOgC,EAAAA,EAAAA,GAAEpB,EAAEZ,EAAEY,EAAE,CAAC,eAAImN,GAAc,OAAOtL,EAAAA,EAAAA,IAAEa,EAAAA,EAAAA,MAAI9C,KAAK+P,WAAW,CAAChN,KAAAA,GAAQ,OAAO,IAAI2K,EAAE,CAACE,mBAAmB5N,KAAK4N,mBAAmBuB,SAASnP,KAAKmP,SAASpM,SAAS,CAAC,SAAIE,GAAQ,OAAOjD,KAAKmP,SAASlM,KAAK,CAAC,iBAAI0M,GAAgB,OAAO3P,KAAK4N,mBAAmB4B,iBAAiBG,aAAa,CAACQ,aAAAA,CAAc3Q,EAAEY,EAAEX,GAAG,MAAM+N,oBAAoB5N,EAAEsO,kBAAkBxO,GAAGM,KAAKqB,GAAEL,EAAAA,EAAAA,GAAEoI,EAAE1J,EAAEE,GAAG,OAAOqF,EAAE5D,EAAEA,IAAG1B,EAAAA,EAAAA,IAAES,GAAGJ,KAAK+P,YAAY9K,EAAE5D,EAAEA,IAAG1B,EAAAA,EAAAA,IAAEH,GAAGQ,KAAKsN,iBAAgB/K,EAAAA,EAAAA,GAAE9C,EAAE4B,EAAEzB,EAAE,CAACwQ,YAAAA,CAAa5Q,GAAG,MAAMY,EAAEJ,KAAK0G,sBAAsB,EAAE/G,EAAEK,KAAK2G,oBAAoB,EAAE3G,KAAKmQ,eAAe/P,EAAET,EAAEH,EAAE6Q,SAASrQ,KAAKmQ,cAAc/P,EAAET,EAAEH,EAAE8Q,UAAUtQ,KAAKmQ,eAAe/P,GAAGT,EAAEH,EAAE+Q,YAAYvQ,KAAKmQ,cAAc/P,GAAGT,EAAEH,EAAEgR,YAAY,CAACC,gBAAAA,CAAiBjR,GAAG,MAAMY,EAAEJ,KAAK0G,sBAAsB,EAAE/G,EAAEK,KAAK2G,oBAAoB,EAAE3G,KAAKmQ,cAAc,EAAExQ,EAAEH,EAAEkR,KAAK1Q,KAAKmQ,cAAc,GAAGxQ,EAAEH,EAAEmR,QAAQ3Q,KAAKmQ,eAAe/P,EAAE,EAAEZ,EAAEoR,MAAM5Q,KAAKmQ,cAAc/P,EAAE,EAAEZ,EAAEqR,MAAM,CAACC,oBAAAA,CAAqBtR,GAAG,MAAMY,EAAEJ,KAAKwN,oBAAoB/N,EAAEO,KAAKuO,uBAAuBvE,KAAKwE,KAAI7O,EAAAA,EAAAA,IAAEK,KAAK2G,oBAAoB,IAAI/G,GAAEoF,EAAAA,EAAAA,GAAEoE,EAAEpJ,KAAKsN,eAAe7N,IAAG8C,EAAAA,EAAAA,GAAE/C,EAAEkR,IAAItQ,EAAER,IAAGoB,EAAAA,EAAAA,GAAExB,EAAEmR,OAAOvQ,EAAER,EAAE,CAAC2P,kBAAAA,CAAmB/P,EAAEY,GAAG,MAAMT,EAAEyJ,EAAE,OAAOpJ,KAAK4N,mBAAmBmD,iBAAiBvR,EAAEG,EAAES,GAAG,IAAIgB,EAAAA,EAAEzB,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAGS,EAAE,CAACyP,mBAAAA,CAAoBrQ,EAAEY,GAAG,MAAMT,GAAEmB,EAAAA,EAAAA,IAAEtB,EAAEwR,WAAW,OAAOhR,KAAK4N,mBAAmBC,eAAelO,EAAEH,EAAEgQ,iBAAiBpP,GAAGA,CAAC,CAACsP,yBAAAA,CAA0BlQ,GAAG,MAAMuQ,WAAW3P,EAAE8P,YAAYzQ,EAAEkE,SAAS/D,GAAGI,KAAKN,EAAEM,KAAKuO,uBAAuBvN,GAAE8B,EAAAA,EAAAA,MAAI,OAAOkC,EAAAA,EAAAA,GAAEhE,EAAEvB,EAAEC,GAAGuF,EAAEjE,EAAEA,IAAGrB,EAAAA,EAAAA,IAAEK,KAAKwG,SAAS5G,GAAGqF,EAAEjE,EAAEA,IAAGrB,EAAAA,EAAAA,IAAEK,KAAK4P,uBAAuBxP,IAAGmC,EAAAA,EAAAA,GAAEvB,EAAExB,EAAEwB,GAAGA,CAAC,IAAGxB,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,0BAAqB,IAAQzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,gBAAW,IAAQzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,mCAA8B,IAAQzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,2BAAsB,IAAQzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,WAAW,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,+BAA+B,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,oBAAoB,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,6BAA6B,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,cAAc,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,yBAAyB,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,UAAU,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,OAAO,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,UAAU,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,wBAAwB,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,wBAAwB,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,sBAAsB,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,sBAAsB,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,SAAS,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,oBAAoB,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,kBAAkB,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,iBAAiB,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,SAAS,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,WAAW,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,cAAc,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,aAAa,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,cAAc,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,QAAQ,OAAMzH,EAAAA,EAAAA,IAAE,EAACC,EAAAA,EAAAA,OAAKmB,EAAEqG,UAAU,gBAAgB,MAAMrG,EAAE8M,GAAElO,EAAAA,EAAAA,IAAE,EAACI,EAAAA,EAAAA,GAAE,yDAAyDgB,GAAG,MAAMwI,GAAEtG,EAAAA,EAAAA,M,2LCAzrH,MAAMK,WAAU6K,GAAAA,EAAEnO,WAAAA,CAAYO,GAAGN,QAAQE,KAAKiR,SAAS,IAAItR,EAAAA,EAAEK,KAAKkR,MAAM9Q,EAAEa,KAAKjB,KAAKmR,MAAM/Q,EAAEW,KAAKf,KAAKoR,oBAAoBpR,KAAKqR,oBAAmB,GAAIrR,KAAKsR,sBAAsBtR,KAAKqR,oBAAmB,GAAIrR,KAAKuR,sBAAsBvR,KAAKwR,mBAAmBpR,GAAGJ,KAAKkR,MAAMO,aAAatQ,IAAIf,GAAG,CAACsR,OAAAA,GAAU1R,KAAKiR,UAASxR,EAAAA,EAAAA,IAAEO,KAAKiR,UAAUjR,KAAKwR,mBAAmBpR,IAAIJ,KAAKkR,MAAMO,aAAanQ,OAAOlB,GAAGA,EAAEsR,YAAY1R,KAAKkR,MAAM,KAAKlR,KAAKmR,MAAM,KAAKnR,KAAK2R,cAAc,IAAI,CAACC,kBAAAA,CAAmBxR,EAAET,GAAG,MAAM6B,EAAEmE,OAAOkM,OAAO7R,KAAK2R,eAAe,OAAOnS,EAAAA,EAAAA,IAAEgC,EAAEsQ,IAAIlN,IAAA,IAAEmN,YAAYvS,EAAEwS,KAAKxQ,GAAEoD,EAAA,OAAGwG,EAAAA,GAAAA,IAAE5L,EAAE,CAACA,EAAEI,EAAEH,EAAEuB,EAAEtB,KAAK,MAAM6C,EAAw7F,SAAWnC,EAAC6R,GAAqG,IAAnGzE,oBAAoB7N,EAAEuO,kBAAkB1O,EAAE8N,eAAe9L,EAAE+L,YAAY3N,EAAE2O,uBAAuB9O,GAAEwS,EAAE,MAAMjR,GAAEkR,EAAAA,EAAAA,GAAEC,GAAE3S,EAAEG,GAAGD,EAAE+I,GAAErI,GAAGR,EAAE4B,EAAEe,GAAE0C,EAAAA,EAAAA,GAAEmN,GAAE1S,EAAED,GAAG,OAAO2B,EAAAA,EAAAA,GAAEzB,EAAEqB,EAAEuB,EAAE,CAA9lG8P,CAAE7Q,EAAE7B,GAAGsC,EAAErC,EAAEqO,KAAK7N,IAACuO,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOvO,GAAC,IAACkS,gBAAgB,EAAEN,KAAKxQ,KAAKY,EAAE2M,EAAE9M,EAAEjC,KAAKmR,MAAM5O,EAAE5C,GAAGS,EAAEZ,EAAE4C,EAAE3C,OAAM,CAAC8S,2BAAAA,CAA4BnS,GAAGA,EAAEqQ,iBAAiB+B,IAAGxS,KAAKyS,wBAAwB9S,GAAGK,KAAK0S,+BAA+B/S,EAAES,EAAEoS,GAAE7S,EAAEqS,OAAO,CAACW,wBAAAA,CAAyBvS,GAAGJ,KAAKyS,wBAAwB9S,GAAGK,KAAK4S,6BAA6BjT,EAAES,GAAG,CAACwS,4BAAAA,CAA4BC,EAAwBrT,GAAE,IAAxBuS,YAAY3R,EAAE4R,KAAKrS,GAAEkT,EAAI,MAAMrR,EAAE,GAAG,GAAG,MAAMhC,EAAE,CAAC,MAAMI,EAAEH,GAAm0D,SAAWW,EAAET,EAAEH,GAAG,MAAMkH,sBAAsBjH,EAAEkH,oBAAoB3F,GAAGrB,EAAED,EAAE+I,GAAErI,GAAGmC,GAAEf,EAAAA,EAAAA,KAAE5B,EAAAA,EAAAA,KAAGF,EAAEsB,EAAEvB,GAAG,EAAE,EAAE,KAAKwC,EAAoE,SAAW7B,EAAET,EAAEH,GAAO,IAALgC,EAAC4B,UAAA0H,OAAA,QAAAC,IAAA3H,UAAA,GAAAA,UAAA,GAAC,IAAIgG,EAAAA,GAAAA,IAAE5H,EAAE,EAAE,gEAAgE,MAAM5B,EAAED,EAAES,EAAE,GAAGR,GAAG,GAAGJ,GAAG,EAAE,CAAC,MAAMY,EAAE,IAAI,MAAM,EAACyE,EAAAA,EAAAA,IAAE,EAAE,EAAEzE,IAAGyE,EAAAA,EAAAA,IAAE,EAAE,GAAGzE,GAAG,CAAC,MAAMX,EAAE,GAAGuB,EAAEpB,EAAE4B,EAAE,IAAI,IAAI9B,EAAE,EAAEA,EAAE8B,EAAE9B,IAAI,CAAC,IAAIE,EAAEQ,EAAEV,EAAEsB,EAAEtB,IAAI8B,EAAE,IAAI5B,EAAED,GAAG,MAAM4C,EAAEyH,KAAK8I,IAAIlT,GAAGJ,EAAEyC,EAAE+H,KAAKwE,IAAI5O,GAAGJ,EAAE4C,GAAEyC,EAAAA,EAAAA,IAAEtC,EAAE/C,EAAE,EAAEyC,GAAGxC,EAAE6L,KAAKlJ,EAAE,CAAC,OAAO3C,CAAC,CAAvWiO,EAAGnL,EAAE,EAAEA,EAAE,EAAE7C,EAAE,EAAEsK,KAAKzC,IAAIyC,KAAKwE,KAAIhN,EAAAA,EAAAA,IAAE,GAAGR,EAAE,IAAI,KAAK,MAAM,EAACO,EAAAA,GAAAA,IAAE/B,EAAEyC,GAAGA,EAAE,CAA1+D8Q,CAAEpT,EAAEH,EAAEQ,KAAKsR,uBAAuB9P,EAAE8J,KAAK,IAAI0H,GAAAA,EAAEpT,EAAE,GAAG,IAAIoT,GAAAA,EAAEpT,EAAEqT,YAAY,CAACC,SAASlT,KAAKoR,sBAAsB,IAAIhR,EAAE+S,cAAc,CAACtM,KAAK,OAAOuM,MAAM,CAAC3T,GAAG,CAACW,EAAEiT,cAAc7R,EAAEpB,EAAEkT,OAAO9J,EAAEgC,eAAe,CAACkH,8BAAAA,CAA8Ba,EAAwB/T,EAAEI,GAAE,IAA1BmS,YAAY3R,EAAE4R,KAAKrS,GAAE4T,EAAM,MAAM9T,EAAED,EAAEkH,sBAAsB1F,GAAEQ,EAAAA,EAAAA,IAAEhC,EAAEmH,oBAAoB,GAAGjH,GAAE8B,EAAAA,EAAAA,IAAE/B,EAAE,GAAGyS,EAAEzJ,GAAE9I,GAAGS,EAAEoT,eAAe5T,EAAE,MAAMqF,GAAEnE,EAAAA,EAAAA,MAAI4E,EAAEtF,KAAI4E,EAAAA,EAAAA,IAAEC,EAAE7E,EAAE6E,IAAIS,GAAEnD,EAAAA,EAAAA,IAAE0I,IAAEzJ,EAAAA,EAAAA,KAAG,MAAM0Q,GAAGxM,GAAEzD,EAAAA,EAAAA,IAAEgJ,GAAEjK,IAAI,MAAM6D,EAAErF,EAAE+O,uBAAuB,IAAInN,EAAEoI,EAAE9D,GAAEtD,EAAAA,EAAAA,IAAE6I,IAAEnI,EAAAA,EAAAA,GAAEqP,GAAEtN,EAAEA,EAAEA,KAAKa,GAAErE,EAAAA,EAAAA,IAAE4J,GAAm6D,SAAW7K,GAAG,OAAzH,SAAWA,GAAG,OAAOA,GAAG,IAAI,OAAO,OAAO,EAAE,IAAI,SAAS,OAAO,EAAE,IAAI,QAAQ,OAAO,EAAE,IAAI,MAAM,OAAO,EAAE,CAAsBuN,CAAEvN,GAAGqT,EAAC,CAA57DvK,CAAEvJ,KAAK+F,EAAER,EAAE1F,EAAEyL,KAAIiH,GAAG9Q,EAAE1B,EAAE8J,EAAEhK,EAAE8N,iBAAiB9D,EAAEhK,EAAE+N,YAAYnM,EAAEJ,GAAGI,GAAG,UAAUzB,GAAG,WAAWA,GAAG,EAAE,EAAE,MAAMoP,GAAEnO,EAAAA,EAAAA,IAAEqK,GAAE7J,EAAEoI,GAAG,MAAMuF,GAAGrJ,EAAEqJ,GAAG3O,EAAEsT,eAAezO,CAAC,CAACsM,mBAAAA,GAAsB,MAAMnR,EAAEJ,KAAK2T,sBAAsB,QAAQhU,EAAEK,KAAK2T,sBAAsB,SAASnU,EAAEQ,KAAK2T,sBAAsB,OAAOnS,EAAExB,KAAK2T,sBAAsB,UAAU3T,KAAK2R,cAAc,CAACf,KAAKxQ,EAAEyQ,MAAMlR,EAAE+Q,IAAIlR,EAAEmR,OAAOnP,GAAG,CAAC,CAACA,EAAEuQ,YAAYvS,EAAEuS,aAAa,CAAC3R,EAAE2R,YAAYpS,EAAEoS,cAAc6B,QAAQC,IAAS,IAAPzT,EAAET,GAAEkU,EAAIzT,EAAE0T,SAAS,CAACC,kBAAkBpU,GAAGA,EAAEmU,SAAS,CAACC,kBAAkB3T,IAAI,CAACuT,qBAAAA,CAAsBvT,GAAG,MAAMT,EAAE,IAAIwE,GAAAA,EAAE,CAACpD,KAAKf,KAAKmR,MAAM6C,wBAAuB,EAAGC,YAAW,IAAKzU,EAAE,CAACuS,YAAYpS,EAAEqS,KAAK5R,GAAG,OAAOJ,KAAK4S,6BAA6BpT,GAAGQ,KAAKiR,SAAS9P,IAAIxB,EAAEuU,OAAOC,GAAG,CAAC,gBAAgB,gBAAgB/T,IAAG,IAAAgU,EAAC,MAAM5U,EAAY,QAAX4U,EAACzU,EAAEmU,gBAAQ,IAAAM,OAAA,EAAVA,EAAYL,kBAAkB,MAAMvU,IAAIA,EAAE6U,WAAW1U,EAAE0U,WAAW7U,EAAE6U,SAAS1U,EAAE0U,UAAU7U,EAAE8U,WAAW3U,EAAE2U,WAAW9U,EAAE8U,SAAS3U,EAAE2U,cAAc9U,CAAC,CAAC6R,kBAAAA,CAAmB1R,GAAG,MAAMH,EAAEgK,EAAE2C,eAAexM,GAAG6B,EAAE,IAAIkI,GAAAA,EAAE,CAACyD,eAAe,EAAEoH,cAAa,EAAGC,MAAMhV,GAAGQ,KAAKmR,MAAMsD,MAAMC,UAAU,OAAO1U,KAAKiR,SAAS9P,KAAIH,EAAAA,EAAAA,IAAE,IAAIZ,EAAAA,EAAE6M,WAAWjN,KAAKmR,MAAMwD,eAAeC,aAAaxU,GAAGoB,EAAEqT,cAAc,CAAC7H,MAAM5M,IAAIV,EAAAA,KAAI8B,CAAC,CAACgQ,kBAAAA,CAAmBpR,GAAGuF,OAAOkM,OAAO7R,KAAK2R,eAAeiC,QAAQkB,IAAA,IAAE/C,YAAYpS,GAAEmV,EAAA,OAAG1U,EAAET,EAAE,IAAG,CAAC8S,uBAAAA,CAAwBrS,GAAGuF,OAAOkM,OAAO7R,KAAK2R,eAAeiC,QAAQjU,GAAGS,EAAET,GAAG,CAAC,QAAIoV,GAAO,MAAM,CAACtD,aAAazR,KAAK2R,cAAc,EAA0lB,SAASlJ,GAAErI,GAAG,MAAM,SAASA,GAAG,UAAUA,CAAC,CAA6P,MAAMqT,GAAEzJ,KAAKgL,GAAG,EAAE/J,IAAEnK,EAAAA,EAAAA,MAAIqR,IAAEzM,EAAAA,EAAAA,MAAI0M,IAAE1M,EAAAA,EAAAA,MAAI8M,GAAE,CAAC9B,KAAIhL,EAAAA,EAAAA,MAAIiL,QAAOjL,EAAAA,EAAAA,MAAIkL,MAAKlL,EAAAA,EAAAA,MAAImL,OAAMnL,EAAAA,EAAAA,O,wCCAj0I,MAAMR,WAAUF,GAAAA,EAAEnF,WAAAA,CAAYL,EAAEG,GAAGG,MAAM,CAACiB,KAAKvB,EAAEwU,wBAAuB,EAAGC,YAAW,EAAGX,OAAOxS,EAAE0K,kBAAkBxL,KAAKiR,SAAS,IAAI7Q,EAAAA,EAAEJ,KAAKiV,wBAAwBtV,EAAE,CAAC+R,OAAAA,GAAU1R,KAAKiR,SAAS3P,SAASxB,MAAM4R,SAAS,CAACuD,uBAAAA,CAAwBzV,GAAG,MAAMY,EAAEJ,KAAKkV,kBAAsBzV,EAAE,EAACmB,EAAAA,EAAAA,IAAE,EAAE,EAAE,IAAGA,EAAAA,EAAAA,IAAE,EAAE,EAAlB,IAAwBoE,GAAE5C,EAAAA,GAAAA,IAAEhC,EAAEX,EAAED,EAAE,IAAG,GAAIgK,GAAEpH,EAAAA,GAAAA,IAAEhC,EAAEX,EAAED,EAAE6B,GAAAA,GAAE,IAAG,GAAI4D,EAAEJ,IAAE,EAAGzE,EAAEZ,GAAG0F,EAAEL,IAAE,EAAGzE,EAAEZ,GAAGkG,GAAEnD,EAAAA,EAAAA,OAAI3C,EAAAA,EAAAA,IAAE8F,EAAEjG,EAAEA,EAAEqL,OAAO,KAAIpL,EAAAA,EAAAA,IAAEgG,EAAEA,GAAElE,EAAAA,EAAAA,IAAEJ,GAAE4I,KAAKgL,GAAG,KAAItV,EAAAA,EAAAA,IAAEgG,EAAEA,GAAE1E,EAAAA,EAAAA,IAAEI,GAAE4I,KAAKgL,GAAG,IAAI/P,EAAEkQ,eAAezP,EAAER,EAAEiQ,eAAezP,EAAE1F,KAAKqT,cAAc,CAAC,IAAIvQ,GAAAA,EAAEkC,EAAE,GAAG,IAAIlC,GAAAA,EAAE0G,EAAE,GAAG,IAAI1G,GAAAA,EAAEmC,EAAE,GAAG,IAAInC,GAAAA,EAAEoC,EAAE,IAAI,MAAMgN,GAAEtR,EAAAA,EAAAA,IAAE,EAAEE,EAAEsL,8BAA6B,GAAI,GAAG4G,GAAE/Q,EAAAA,EAAAA,GAAEiQ,EAAEA,EAAExM,GAAGvC,EAAE,IAAI1D,EAAEuT,GAAGhT,KAAKmT,cAAc,CAACtM,KAAK,OAAOuM,MAAM,CAACjQ,GAAG,CAAC+R,eAAAA,GAAkB,MAAM9U,EAAE,IAAI6E,GAAAA,EAAE,CAACmI,SAAS,EAAED,eAAe,EAAEoH,cAAa,IAAK,OAAOvU,KAAKiR,SAAS9P,KAAIxB,EAAAA,EAAAA,IAAE,IAAIH,EAAAA,EAAEyN,WAAWjN,KAAKe,KAAK4T,eAAeC,aAAapV,GAAGY,EAAEyU,cAAc,CAAC7H,MAAMxN,IAAIC,EAAAA,KAAIW,CAAC,EAAE,SAASyE,GAAErF,EAAEY,EAAET,GAAG,MAAMF,EAAEqB,EAAEsL,6BAA6B5M,GAAG,IAAII,EAAE,EAAED,EAAEH,IAAII,GAAGyB,GAAAA,IAAG,MAAM3B,EAAED,EAAE,EAAE,OAAO+J,EAAAA,GAAAA,IAAEpJ,EAAEX,EAAEC,EAAEA,EAAEE,EAAE,EAAE,CAAC,MAAMwB,IAAEmB,EAAAA,EAAAA,M,gBCApiB,MAAM4B,WAAUiF,GAAAA,EAAEvJ,WAAAA,CAAYD,GAAGE,QAAQE,KAAKiR,SAAS,IAAI7Q,EAAAA,EAAEJ,KAAKkR,MAAMtR,EAAEqB,KAAKjB,KAAKmR,MAAMvR,EAAEmB,KAAK,MAAMvB,EAAEmO,EAAE/B,wBAAwB5L,KAAKoV,oBAAoB,IAAI5L,GAAExJ,KAAKmR,MAAM3R,GAAGQ,KAAKqV,iBAAiB,IAAI7L,GAAExJ,KAAKmR,MAAM3R,GAAGQ,KAAKsV,qBAAqB,IAAI9L,GAAExJ,KAAKmR,MAAM3R,GAAGQ,KAAKwR,mBAAmBpR,GAAGJ,KAAKkR,MAAMO,aAAatQ,IAAIf,GAAG,CAACsR,OAAAA,GAAU1R,KAAKiR,SAASS,UAAU1R,KAAKwR,mBAAmBpR,IAAIJ,KAAKkR,MAAMO,aAAanQ,OAAOlB,GAAGA,EAAEsR,YAAY1R,KAAKoV,oBAAoB,KAAKpV,KAAKqV,iBAAiB,KAAKrV,KAAKsV,qBAAqB,KAAKtV,KAAKkR,MAAM,KAAKlR,KAAKmR,MAAM,IAAI,CAACoE,yBAAAA,CAA0BnV,EAAEZ,GAAG,OAAO+B,EAAAA,GAAAA,IAAEvB,KAAKoV,oBAAoB,CAAC5T,EAAE7B,EAAEF,EAAEuB,EAAEtB,KAAK,MAAM6C,EAAEvC,KAAKmR,OAAOvB,sBAAsBhP,EAAE2N,uBAAuBzL,EAAEa,SAAS7C,EAAE0M,oBAAoB0E,EAAEhE,kBAAkBjJ,EAAEsI,YAAY7D,GAAGlK,EAAE0F,EAAE8E,KAAKwE,KAAI5O,EAAAA,EAAAA,IAAEgB,IAAIkC,EAAE0G,GAAEnI,EAAAA,EAAAA,GAAE8Q,GAAED,GAAEjQ,EAAAA,EAAAA,GAAE+Q,GAAElS,EAAEoE,IAAIyI,GAAEvL,EAAAA,EAAAA,GAAE4Q,GAAE/N,EAAEuE,GAAGgJ,GAAEvQ,EAAAA,EAAAA,GAAEgJ,GAAEvB,GAAE1E,EAAAA,EAAAA,GAAE2I,IAAejI,EAAEvC,EAAExD,EAAE4C,GAAfnB,EAAAA,EAAAA,GAAEoI,EAAEmE,EAAE6E,GAAahT,GAAGyO,KAAK7N,IAACuO,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOvO,GAAC,IAACkS,gBAAgB,KAAKlS,EAAEoB,EAAEkE,EAAEjG,IAAI,CAAC+V,sBAAAA,CAAuBpV,EAAER,GAAG,OAAO2B,EAAAA,GAAAA,IAAEvB,KAAKqV,iBAAiB,CAAC7V,EAAEgC,EAAE7B,EAAEF,EAAEuB,KAAK,MAAMwM,oBAAoB9N,EAAE6O,uBAAuBhM,EAAEoB,SAAS/C,EAAEkP,gBAAgBzO,GAAGzB,EAAEwC,GAAEU,EAAAA,EAAAA,GAAEzB,EAAET,GAAGoE,GAAElE,EAAAA,EAAAA,GAAEqR,GAAE9Q,EAAET,GAAGwB,IAAGH,EAAAA,EAAAA,GAAE+C,GAAEkN,EAAAA,EAAAA,GAAElN,EAAEA,GAAGzC,GAAG,MAAM0C,GAAEhD,EAAAA,EAAAA,GAAE+Q,GAAEpS,EAAE2B,GAAGmH,GAAEtI,EAAAA,EAAAA,GAAE1B,EAAEsF,EAAEC,GAAGC,EAAE/B,EAAE3B,EAAExB,KAAKmR,MAAMzH,EAAE9J,GAAGqO,KAAK7N,IAACuO,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOvO,GAAC,IAACkS,gBAAgB,KAAKlS,EAAEZ,EAAE0F,EAAEvF,IAAI,CAAC8V,0BAAAA,CAA2BrV,EAAER,GAAG,OAAO2B,EAAAA,GAAAA,IAAEvB,KAAKsV,qBAAqB,CAAC9V,EAAEgC,EAAE7B,EAAEF,EAAEuB,KAAK,MAAMtB,GAAEgK,EAAAA,GAAAA,IAAE9J,EAAE4N,oBAAoB5N,EAAEkQ,iBAAiBvN,EAAEf,EAAEyM,MAAKpJ,EAAAA,GAAAA,IAAE7E,KAAKmR,MAAM3R,EAAEkW,WAAWzH,MAAKP,EAAAA,EAAAA,IAAE1N,KAAKmR,MAAMzR,IAAIuO,KAAK7N,IAACuO,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAOvO,GAAC,IAACkS,gBAAgB,KAAKlS,EAAEZ,EAAE+C,EAAE5C,IAAI,CAACgW,kBAAAA,CAAmBvV,GAAG,MAAM8N,kBAAkBtO,GAAGQ,EAAEJ,KAAKoV,oBAAoB5B,eAAe5T,EAAEI,KAAKqV,iBAAiB7B,eAAe5T,EAAEI,KAAKsV,qBAAqB9B,eAAe5T,EAAE,MAAMyB,GAAEkB,EAAAA,EAAAA,MAAIH,EAAEhC,KAAIV,EAAAA,EAAAA,IAAE2B,EAAEjB,EAAEiB,IAAI2D,EAAE2I,EAAEhC,iBAAiBjG,GAAAA,GAAEqN,GAAAA,IAAG3Q,GAAE5C,EAAAA,EAAAA,IAAEwO,IAAEpN,EAAAA,EAAAA,GAAEuR,GAAEnN,EAAEA,EAAEA,KAAK5C,EAAEoQ,EAAEpS,EAAE4N,KAAI,MAAMlL,EAAE6K,EAAE/B,wBAAwB1G,GAAAA,GAAEF,EAAElE,GAAEmB,EAAAA,EAAAA,GAAEkQ,GAAE/R,EAAE0P,gBAAgBhN,GAAGV,GAAEZ,EAAAA,EAAAA,IAAEwM,GAAElN,IAAI,MAAMoR,GAAEvS,EAAAA,EAAAA,IAAEqO,IAAGc,KAAGrP,EAAAA,EAAAA,IAAEyS,EAAEA,GAAElR,EAAAA,EAAAA,IAAEyH,IAAGqG,KAAI9O,KAAKoV,oBAAoB1B,gBAAejU,EAAAA,EAAAA,KAAE8C,EAAAA,EAAAA,MAAIlB,EAAE6Q,GAAG,MAAMjN,GAAEjE,EAAAA,EAAAA,IAAEgN,GAAEc,KAAGrP,EAAAA,EAAAA,IAAEwF,EAAEA,GAAEtF,EAAAA,EAAAA,IAAE8I,GAAEuB,KAAKgL,KAAKhV,KAAKqV,iBAAiB3B,gBAAehU,EAAAA,EAAAA,KAAE6C,EAAAA,EAAAA,MAAIlB,EAAE4D,GAAGjF,KAAKsV,qBAAqB5B,eAAerS,CAAC,CAACmQ,kBAAAA,CAAmBpR,GAAGA,EAAEJ,KAAKoV,oBAAoB,GAAGhV,EAAEJ,KAAKqV,iBAAiB,GAAGjV,EAAEJ,KAAKsV,qBAAqB,EAAE,EAAE,MAAMtH,IAAEzL,EAAAA,EAAAA,MAAIkG,IAAElG,EAAAA,EAAAA,MAAI4P,IAAElN,EAAAA,EAAAA,MAAI+N,IAAE/N,EAAAA,EAAAA,MAAIgG,IAAEhG,EAAAA,EAAAA,MAAI6J,GAAE9E,KAAKgL,GAAG,E,kBCAhoF,MAAMzS,WAAU3B,GAAAA,EAAEf,WAAAA,CAAYF,EAAEH,GAAGM,MAAM,CAACiB,KAAKpB,EAAEqU,wBAAuB,EAAGC,YAAW,EAAGX,OAAOrR,EAAE+J,aAAanL,aAAY,IAAKb,KAAKiR,SAAS,IAAIxR,EAAAA,EAAE,MAAMC,GAAE8B,EAAAA,EAAAA,IAAExB,KAAK4V,QAAQ5V,KAAKqT,cAAc,CAAC,IAAIrS,GAAAA,GAAEK,EAAAA,GAAAA,IAAE3B,EAAEuC,EAAE+J,aAAa,GAAG,MAAMxM,EAAEiS,aAAatQ,IAAInB,MAAMA,KAAKiR,SAAS9P,IAAI,EAACf,EAAAA,EAAAA,IAAE,IAAIJ,KAAK4V,OAAOjW,IAAID,EAAEmV,cAAc,CAAC7H,MAAMrN,KAAKC,EAAAA,KAAI,CAAC8R,OAAAA,GAAU1R,KAAKiR,SAAS3P,SAASxB,MAAM4R,SAAS,CAAC,UAAIkE,GAAS,OAAOpW,EAAAA,EAAEyN,WAAWjN,KAAKe,KAAK4T,eAAeC,YAAY,GAAEjV,EAAAA,EAAAA,IAAE,EAACD,EAAAA,EAAAA,OAAK6C,GAAE0E,UAAU,SAAS,M,4BCAqnB,MAAM+G,GAAE/H,OAAO,eAAe9C,GAAE8C,OAAO,oBAAoB8I,GAAE9I,OAAO,uBAAuBwN,GAAExN,OAAO,2BAA2B,IAAImF,GAAE,cAAcxL,EAAAA,EAAEC,WAAAA,CAAYL,GAAGM,MAAMN,GAAGQ,KAAK6V,kBAAkB,KAAK7V,KAAK8V,qBAAqB,KAAK9V,KAAK+V,yBAAyB,KAAK/V,KAAKgW,yBAAyB,KAAKhW,KAAKiW,mBAAmB,KAAKjW,KAAKkW,0BAA0B,KAAKlW,KAAKmW,WAAU,EAAGnW,KAAKoW,qBAAqB,IAAI,CAACrW,UAAAA,GAAaC,KAAK6V,kBAAkB7V,KAAKqW,0BAA0BrW,KAAK+V,yBAAyB,IAAIxU,GAAE,CAACR,KAAKf,KAAKe,KAAKE,KAAKjB,KAAKsW,aAAatW,KAAKgW,yBAAyB,IAAIxD,GAAE,CAACzR,KAAKf,KAAKe,KAAKE,KAAKjB,KAAKsW,aAAatW,KAAK8V,qBAAqB,IAAItM,GAAExJ,KAAKe,KAAKf,KAAKsW,YAAYtW,KAAKC,WAAW,EAAC6C,EAAAA,EAAAA,IAAE,SAAAyT,EAAA,OAA6B,QAA7BA,EAAIvW,KAAKoW,4BAAoB,IAAAG,OAAA,EAAzBA,EAA2B/I,qBAAoBhO,IAAI,MAAMA,IAAIQ,KAAK6V,kBAAkBrC,eAAehU,EAAEQ,KAAK8V,qBAAqBtC,eAAehU,IAAIyC,EAAAA,KAAGa,EAAAA,EAAAA,IAAE,SAAA0T,EAAA,OAA6B,QAA7BA,EAAIxW,KAAKoW,4BAAoB,IAAAI,OAAA,EAAzBA,EAA2BhQ,SAAQhH,IAAIA,IAAIQ,KAAK6V,kBAAkBY,OAAM9W,EAAAA,EAAAA,IAAE,GAAGH,KAAK4B,EAAAA,KAAG0B,EAAAA,EAAAA,IAAE,KAAK,MAAMsT,qBAAqB5W,GAAGQ,KAAK,MAAM,CAACoW,qBAAqB5W,EAAE8G,SAAU,OAAD9G,QAAC,IAADA,OAAC,EAADA,EAAG8G,WAAW,CAAA1B,EAAqCpD,KAAI,IAAvC4U,qBAAqB5W,EAAE8G,SAAS1G,GAAEgF,EAAM5E,KAAKmW,WAAWvW,KAAK,OAAD4B,QAAC,IAADA,OAAC,EAADA,EAAG8E,YAAWtG,KAAK0W,cAAc1I,KAAI,OAADxO,QAAC,IAADA,OAAC,EAADA,EAAGyD,QAAOjD,KAAKC,WAAW,CAACD,KAAK2W,2BAA2BnX,GAAGQ,KAAK4W,sBAAsBpX,GAAGQ,KAAK6W,8BAA8BrX,IAAIsX,OAAO1W,EAAAA,IAAG4N,MAAK5M,EAAAA,KAAG0B,EAAAA,EAAAA,IAAE,KAAK,MAAMtD,EAAEQ,KAAKoW,qBAAqB,OAAQ,OAAD5W,QAAC,IAADA,GAAAA,EAAGyD,MAAM,CAAC8T,iBAAiBvX,EAAE4I,OAAO5I,EAAE0O,kBAAkB8I,KAAKxX,EAAEkH,sBAAsBuQ,KAAKzX,EAAEmH,qBAAqB,MAAMnH,IAAI,MAAMA,GAAGQ,KAAK+V,yBAAyBxD,4BAA4B/S,EAAEuX,mBAAmB3V,EAAAA,KAAG0B,EAAAA,EAAAA,IAAE,KAAK,MAAMtD,EAAEQ,KAAKoW,qBAAqB,OAAQ,OAAD5W,QAAC,IAADA,GAAAA,EAAGyD,MAAM,CAAC8T,iBAAiBvX,EAAEwX,KAAKxX,EAAEkH,sBAAsBuQ,KAAKzX,EAAEmH,oBAAoBF,KAAKjH,EAAEiH,MAAM,MAAMjH,IAAI,MAAMA,GAAGQ,KAAK+V,yBAAyBpD,yBAAyBnT,EAAEuX,mBAAmB3V,EAAAA,KAAG0B,EAAAA,EAAAA,IAAE,KAAI,IAAAoU,EAAAC,EAAC,MAAM3X,EAAEQ,KAAKE,iBAAiBC,SAA0C,QAAnC+W,EAA4B,QAA5BC,EAAGnX,KAAKoW,4BAAoB,IAAAe,OAAA,EAAzBA,EAA2BlU,aAAK,IAAAiU,GAAAA,EAAMtX,EAAEI,KAAKsW,WAAWc,+BAA+BpX,KAAKoW,qBAAqB,MAAM,CAACiB,yBAAyB7X,IAAIQ,KAAKsW,WAAWgB,gBAAgBC,4BAA4B/X,KAAKQ,KAAKsW,WAAWkB,UAAU5X,KAAKiT,IAA8D,IAA5DwE,yBAAyB7X,EAAE+X,4BAA4B3X,GAAEiT,EAAI7S,KAAK6V,kBAAkB4B,UAAU7X,EAAEI,KAAKgW,yBAAyByB,UAAU7X,EAAEI,KAAK8V,qBAAqB2B,UAAU7X,EAAEI,KAAK+V,yBAAyB0B,UAAUjY,GAAG4B,EAAAA,KAAG0B,EAAAA,EAAAA,IAAE,KAAK,MAAMtD,EAAEQ,KAAKoW,qBAAqB,GAAK,OAAD5W,QAAC,IAADA,IAAAA,EAAGyD,MAAM,OAAO,KAAK,MAAMqD,SAAS1G,EAAEwI,OAAOhI,EAAEuG,oBAAoBnF,EAAEkF,sBAAsBjH,GAAGD,EAAE,MAAM,CAACuX,iBAAiBvX,EAAE8G,SAAS1G,EAAEwI,OAAOhI,EAAEuG,oBAAoBnF,EAAEkF,sBAAsBjH,IAAID,IAAI,MAAMA,GAAGQ,KAAKgW,yBAAyBL,mBAAmBnW,EAAEuX,mBAAmB3V,EAAAA,MAA0zBpB,KAAK0X,oBAAlzBlY,IAAI,MAAMI,EAAEI,KAAKE,iBAAiBF,KAAKC,WAAW,CAACT,EAAE0U,OAAOC,GAAG,gBAAgB,KAAK,MAAM3U,EAAEQ,KAAK2X,2BAA2BnY,GAAGQ,KAAKsW,WAAWsB,eAAehE,QAAQL,IAAe,IAAbsE,QAAQrY,GAAE+T,EAAI/T,EAAEsY,uBAAuB9X,KAAK+X,4BAA4BvY,IAAIQ,KAAKiW,oBAAmBzU,EAAAA,EAAAA,IAAEG,UAAS,IAAAqW,QAAqC,QAApCA,EAAMhY,KAAKkW,iCAAyB,IAAA8B,EAAAA,GAAEhT,EAAAA,EAAAA,IAAEb,EAAE8H,yBAAyBzM,KAAI4C,EAAAA,EAAAA,IAAE5C,GAAGQ,KAAKiW,mBAAmB,KAAKjW,KAAKiY,oCAAoCzY,EAAE0U,OAAOC,GAAG,eAAe/T,IAAG,IAAA8X,EAAClY,KAAKmW,UAAU,UAAU/V,EAAEwO,OAAO,QAAQxO,EAAEwO,QAAc,QAARsJ,EAAEtY,EAAEqB,YAAI,IAAAiX,GAANA,EAAQC,qCAAqCnY,KAAKsW,WAAWsB,eAAehE,QAAQC,IAAe,IAAbgE,QAAQrY,GAAEqU,EAAIrU,IAAIQ,MAAMR,EAAE4Y,iBAAiBpY,KAAKmW,aAAanW,KAAKoY,gBAAgBxY,GAAGA,EAAEyY,eAAe7Y,KAAKQ,KAAKmW,aAAa3W,EAAE0U,OAAOC,GAAG,OAAO3U,IAAG,IAAA8Y,EAAC,UAAU9Y,EAAEoP,SAAc,QAAR0J,EAAE1Y,EAAEqB,YAAI,IAAAqX,GAANA,EAAQH,2CAAqE,CAACzG,OAAAA,GAAU1R,KAAKiW,oBAAmB1T,EAAAA,EAAAA,IAAEvC,KAAKiW,oBAAoBjW,KAAK6V,mBAAkBxU,EAAAA,EAAAA,IAAErB,KAAK6V,mBAAmB7V,KAAK+V,0BAAyB1U,EAAAA,EAAAA,IAAErB,KAAK+V,0BAA0B/V,KAAKgW,0BAAyB3U,EAAAA,EAAAA,IAAErB,KAAKgW,0BAA0BhW,KAAKsW,WAAW7E,aAAanQ,OAAOtB,KAAK8V,sBAAsB9V,KAAK8V,sBAAqBzU,EAAAA,EAAAA,IAAErB,KAAK8V,qBAAqB,CAAC,YAAI3G,GAAU,IAAAoJ,EAAC,OAAgC,QAAhCA,EAAOvY,KAAKoW,4BAAoB,IAAAmC,OAAA,EAAzBA,EAA2BpJ,QAAQ,CAAC,YAAImF,GAAW,OAAOtU,KAAKmW,SAAS,CAAC,YAAI7P,GAAU,IAAAkS,EAAC,OAAoB,QAApBA,EAAOxY,KAAKmP,gBAAQ,IAAAqJ,OAAA,EAAbA,EAAelS,QAAQ,CAAC,YAAIA,CAAS9G,GAAG,MAAMI,EAAEI,KAAKmP,SAAS,MAAMvP,IAAIA,EAAE0G,SAAS9G,EAAE,CAAC,mBAAIiZ,GAAkB,OAAOzY,KAAK6V,kBAAkB6C,eAAeD,eAAe,CAAC,wBAAIE,GAAuB,MAAMC,SAASpZ,EAAE8U,SAAS1U,GAAGI,KAAK6V,kBAAkB,MAAM,CAAC+C,SAASpZ,EAAE8U,SAAS1U,EAAE,CAAC,+BAAIiZ,GAA8B,MAAMD,SAASpZ,EAAE8U,SAAS1U,GAAGI,KAAKgW,yBAAyB,MAAM,CAAC4C,SAASpZ,EAAE8U,SAAS1U,EAAE,CAACwY,eAAAA,CAAgB5Y,GAAG,MAAMI,EAAE,kBAAkBJ,EAAEQ,KAAK8Y,qBAAqB1Y,GAAGA,EAAES,YAAYjB,EAAEJ,EAAEA,EAAEY,GAAG,CAAC2Y,6BAAAA,GAAmC/Y,KAAKiY,+BAAgCjY,KAAK+X,6BAA4B/X,KAAKE,iBAAiB8Y,mBAAmBhZ,KAAKmP,WAAWnP,KAAKE,iBAAiB8Y,iBAAiB,MAAMhZ,KAAK8X,qBAAqB,CAACO,cAAAA,CAAe7Y,GAAG,IAAII,GAAE,EAAG,OAAOI,KAAK0X,oBAAoBtX,IAAIR,EAAEA,GAAGQ,IAAIZ,IAAII,CAAC,CAACmY,wBAAAA,GAA2B,OAAO/X,KAAK6V,kBAAkBoD,UAAUjZ,KAAK+V,yBAAyBkD,UAAUjZ,KAAKgW,yBAAyBiD,QAAQ,CAACtB,wBAAAA,GAA2B,OAAO3X,KAAK6V,kBAAkBxB,UAAUrU,KAAK+V,yBAAyB1B,UAAUrU,KAAKgW,yBAAyB3B,QAAQ,CAACgC,uBAAAA,GAA0B,OAAO,IAAInN,GAAAA,EAAE,CAACnI,KAAKf,KAAKe,KAAKE,KAAKjB,KAAKsW,WAAW4C,aAAY,EAAGC,aAAY,EAAGC,iBAAgB,EAAGC,YAAW,EAAG/F,OAAOxE,GAAAA,IAAG,CAAC6H,0BAAAA,CAA2BnX,GAAG,MAA0CY,EAAEZ,EAAE8G,SAAS,GAAG,MAAMlG,EAAE,OAAO,KAAK,MAAMoB,EAAExB,KAAKe,KAAKyO,iBAAiB,OAAOxP,KAAK6V,kBAAkBjE,mBAAmB,CAACpS,EAAEI,EAAEH,EAAEuB,EAAEtB,KAAKsB,EAAEA,EAAEiN,MAAKP,EAAAA,GAAAA,IAAE1N,KAAK,CAAC,cAAc,MAAML,GAAEuF,EAAAA,EAAAA,2BAAE9E,EAAEoB,GAAG,GAAG,MAAM7B,EAAE,MAAM,CAAC2Z,MAAM7Z,EAAE8Z,OAAOvY,GAAG,MAAMuB,EAAE0I,GAAAA,EAAEuO,aAAa7Z,GAAEqT,EAAAA,EAAAA,GAAEhT,KAAKe,KAAK0Y,cAAc,MAAM,CAACH,MAAM7Z,EAAEwO,MAAK8E,EAAAA,GAAAA,IAAE,CAAC2G,WAAWnX,KAAK0L,KAAKzO,IAAIQ,KAAKsG,SAAS/D,EAAEoX,KAAKC,SAASpa,IAAI+Z,OAAOvY,IAAtY,CAAC6L,KAAK,kBAAkBC,OAAO,GAA6WtL,OAAE,EAAO,CAACoV,qBAAAA,CAAsBpX,GAAG,IAAII,EAAE,EAAEQ,EAAE,EAAE,OAAOJ,KAAK+V,yBAAyBnE,mBAAmB,CAACpQ,EAAER,EAAEtB,KAAK,GAAG,MAAMF,EAAE,MAAM,CAAC8Z,MAAMtY,EAAEuY,OAAO7Z,GAAG,MAAMC,EAAEH,EAAE2P,SAAS,IAAI5M,EAAE,KAAoE,OAA/D7C,EAAEA,EAAEuO,MAAKP,EAAAA,GAAAA,IAAE/N,EAAE,CAAC,wBAAwB,yBAA+B,CAAC2Z,MAAMtY,EAAEiN,KAAKzM,IAAI,UAAUA,EAAEoN,SAASrM,EAAE,KAAK3C,EAAEJ,EAAEkH,sBAAsBtG,EAAEZ,EAAEmH,qBAAqB,MAAM3F,EAAEQ,EAAEqN,WAAW,GAAG,MAAMtM,GAAG,IAAIvB,EAAE,CAAC,MAAMxB,EAAE,WAAWgC,EAAEwQ,MAAM,SAASxQ,EAAEwQ,KAAKhR,EAAE,EAAEA,EAAE,EAAEuB,EAAEoL,GAAEnM,EAAEwQ,MAAM,IAAIpS,GAAGJ,GAAG,MAAMI,IAAIJ,EAAE,IAAIY,GAAGZ,CAAC,CAAC,MAAME,EAAE6C,EJAn8F,SAAWnC,GAAG,MAAM,SAASA,EAAE,QAAQ,UAAUA,EAAE,OAAO,QAAQA,EAAE,SAAS,KAAK,CIAm3FsJ,CAAElI,EAAEwQ,MAAMxQ,EAAEwQ,KAAK,IAAI3Q,EAAE,EAAE,OAAO3B,GAAG,IAAI,OAAO2B,EAAEzB,EAAE,EAAEoB,EAAE,MAAM,IAAI,QAAQK,EAAEzB,EAAE,EAAEoB,EAAE,MAAM,IAAI,MAAMK,EAAEjB,EAAE,EAAEY,EAAE,MAAM,IAAI,SAASK,EAAEjB,EAAE,EAAEY,EAAE,OAAO2M,GAAEjO,IAAI2B,EAAE5B,EAAAA,GAAE6H,UAAUjG,GAAGA,EAAEA,EAAE,IAAI,EAAEA,EAAE,IAAI,IAAIA,EAAE1B,EAAE+G,sBAAsB,EAAErF,GAAG1B,EAAEgH,oBAAoBtF,EAAEG,IAAI+X,OAAO7Z,IAAIF,EAAE,CAACqX,6BAAAA,CAA8BrX,GAAG,IAAII,EAAE,EAAEQ,EAAE,EAAE,MAAMoB,EAAEA,CAAC5B,EAAEQ,IAAI,CAACoB,EAAE/B,EAAEuB,KAAK,GAAG,MAAMxB,EAAE,MAAM,CAAC8Z,MAAM7Z,EAAE8Z,OAAOvY,GAAG,MAAMtB,EAAEF,EAAE2P,SAAS,OAAOnO,EAAEA,EAAEiN,MAAKP,EAAAA,GAAAA,IAAEhO,EAAE,CAACE,KAAK,CAAC0Z,MAAM7Z,EAAEA,EAAEwO,KAAK7N,EAAEV,EAAEF,IAAI+Z,OAAOvY,IAAI,OAAOtB,EAAAA,EAAAA,IAAE,CAACM,KAAKgW,yBAAyBT,0BAA0B/T,EAAE,UAAU,CAAC5B,EAAE4B,IAAIA,IAAI,UAAUA,EAAEoN,SAASxO,EAAEZ,EAAEgH,SAAS5G,EAAE4G,QAAQ/G,EAAAA,GAAE6H,UAAUlH,EAAEoB,EAAEqN,YAAYrN,IAAIhC,GAAGQ,KAAKgW,yBAAyBR,uBAAuBhU,EAAE,OAAO,CAACpB,EAAEoB,IAAIA,IAAI,UAAUA,EAAEoN,SAAShP,EAAEJ,EAAEiH,MAAM,IAAIhH,EAAEG,EAAE4B,EAAEqN,WAAW,OAAOpP,GAAG,GAAGA,EAAE,IAAIA,EAAE,MAAMA,EAAE,GAAGW,EAAEqG,KAAK2C,GAAEyQ,MAAMpa,GAAG+B,IAAIhC,GAAGQ,KAAKgW,yBAAyBP,2BAA2BjU,EAAE,cAAc,CAAChC,EAAEI,IAAIQ,IAAI,MAAMoB,GAAEyD,EAAAA,EAAAA,GAAEwD,GAAErI,EAAEsO,UAAU9O,EAAE4N,qBAAqB/N,GAAEiG,EAAAA,EAAAA,GAAElE,GAAG5B,EAAE+P,cAAc3O,GAAE6D,EAAAA,EAAAA,GAAErD,EAAE5B,EAAEkQ,iBAAiB,EAAE3L,EAAE0H,uBAAuBpM,EAAE,OAAOD,EAAE+G,YAAYvF,EAAEZ,IAAIZ,IAAI,CAACyY,4BAAAA,GAA+B,MAAMzY,EAAEQ,KAAK+X,2BAA2BnY,EAAE,MAAMI,KAAKiW,oBAAoBjW,KAAK2X,2BAA2BvX,EAAEJ,KAAK+V,yBAAyB1B,SAAS7S,EAAExB,KAAKsW,WAAWkB,SAAS,IAAI/X,EAAE,GAAG,MAAMuB,EAAExB,IAAIC,EAAE6L,KAAK9L,EAAEsa,mBAAmBta,IAAIgC,GAAG5B,EAAEI,KAAK0W,cAAcvT,KAAInD,KAAKgW,yBAAyBxE,mBAAmBxQ,GAAGhB,KAAK6V,kBAAkBrE,mBAAmBxQ,GAAGhB,KAAKC,WAAWR,EAAE0D,IAAG1D,EAAE,IAAID,IAAIgC,GAAG5B,GAAG4B,GAAGpB,EAAEJ,KAAK0W,cAAc3H,KAAI/O,KAAK+V,yBAAyBvE,mBAAmBxQ,GAAGhB,KAAKC,WAAWR,EAAEsP,KAAIvP,IAAIgC,EAAExB,KAAK0W,cAAcjD,IAAGzT,KAAKC,WAAWD,KAAK8V,qBAAqBgE,iBAAiBrG,GAAE,CAACqE,kBAAAA,GAAqB9X,KAAKiW,oBAAmB1T,EAAAA,EAAAA,IAAEvC,KAAKiW,oBAAoBjW,KAAKiY,8BAA8B,CAACP,mBAAAA,CAAoBlY,GAAGQ,KAAK8Y,qBAAqBlZ,IAAIA,EAAE4R,mBAAmBhS,KAAKA,EAAEQ,KAAK8V,qBAAqB,CAACgD,oBAAAA,CAAqBtZ,GAAGA,EAAEQ,KAAK6V,mBAAmBrW,EAAEQ,KAAK+V,0BAA0BvW,EAAEQ,KAAKgW,yBAAyB,CAAC,QAAIjB,GAAO,MAAM,CAACgF,iBAAiB/Z,KAAK6V,kBAAkBmE,wBAAwBha,KAAK+V,yBAAyBkE,wBAAwBja,KAAKgW,yBAAyBI,qBAAqBpW,KAAKoW,qBAAqB8D,0BAA0B1a,IAAIQ,KAAKkW,0BAA0B1W,GAAG,IAAGA,EAAAA,EAAAA,IAAE,EAACoB,EAAAA,EAAAA,IAAE,CAAC8J,eAAc,KAAMU,GAAEnE,UAAU,gBAAW,IAAQzH,EAAAA,EAAAA,IAAE,EAACoB,EAAAA,EAAAA,IAAE,CAAC8J,eAAc,KAAMU,GAAEnE,UAAU,wBAAmB,IAAQzH,EAAAA,EAAAA,IAAE,EAACoB,EAAAA,EAAAA,IAAE,CAAC8J,eAAc,KAAMU,GAAEnE,UAAU,kBAAa,IAAQzH,EAAAA,EAAAA,IAAE,EAACoB,EAAAA,EAAAA,IAAE,CAAC8J,eAAc,EAAGvD,aAAY,KAAMiE,GAAEnE,UAAU,YAAO,IAAQzH,EAAAA,EAAAA,IAAE,EAACoB,EAAAA,EAAAA,OAAKwK,GAAEnE,UAAU,WAAW,OAAMzH,EAAAA,EAAAA,IAAE,EAACoB,EAAAA,EAAAA,OAAKwK,GAAEnE,UAAU,iBAAY,IAAQzH,EAAAA,EAAAA,IAAE,EAACoB,EAAAA,EAAAA,OAAKwK,GAAEnE,UAAU,WAAW,OAAMzH,EAAAA,EAAAA,IAAE,EAACoB,EAAAA,EAAAA,OAAKwK,GAAEnE,UAAU,4BAAuB,IAAQzH,EAAAA,EAAAA,IAAE,EAACoB,EAAAA,EAAAA,OAAKwK,GAAEnE,UAAU,WAAW,MAAMmE,IAAE5L,EAAAA,EAAAA,IAAE,EAACsB,EAAAA,EAAAA,GAAE,oDAAoDsK,IAAG,MAAM3C,IAAEyJ,EAAAA,EAAAA,MAAI9I,GAAE,IAAIpI,EAAAA,GAAE,EAAE,K,kGCArsR,MAAMoI,GAAEnD,OAAO,sBAAsB,IAAIkU,GAAE,cAAcpH,GAAAA,EAAElT,WAAAA,CAAYL,GAAGM,MAAMN,GAAGQ,KAAKoa,0BAAyB,EAAGpa,KAAKqa,+BAA8B,EAAGra,KAAKsa,gBAAgB,KAAKta,KAAKua,4BAA4B,KAAKva,KAAKwa,eAAepI,GAAEpS,KAAKya,gBAAe,EAAGza,KAAK0a,2BAA2B,KAAK1a,KAAK2a,UAAU,IAAIjV,GAAAA,EAAE,CAACkV,SAASA,IAAI5a,KAAKe,KAAK4T,iBAAiB3U,KAAK6a,qBAAqB,IAAI,CAAC9a,UAAAA,GAAaC,KAAK8a,cAAa3I,EAAAA,GAAAA,GAAEnS,KAAKe,KAAK0T,MAAMgF,aAAazZ,KAAK+a,4BAA4B,MAAMvb,EAAEQ,KAAKE,iBAAiB8a,4BAA4Bhb,KAAK4X,gBAAelY,EAAAA,EAAAA,GAAE,IAAIF,EAAEoF,IAA4B,IAA1BwR,qBAAqB5W,GAAEoF,EAAI,MAAMxE,EAAE,IAAI0O,GAAE,CAACtO,SAASR,KAAKQ,SAASN,iBAAiBF,KAAKE,iBAAiBoW,WAAWtW,KAAKe,KAAKf,KAAKe,KAAKqV,qBAAqB5W,IAAI,MAAM,CAACqY,QAAQzX,EAAEkB,OAAOA,KAAKtB,KAAKgZ,mBAAmBxZ,EAAE2P,WAAWnP,KAAKgZ,iBAAiB,MAAM5Y,EAAEsR,cAAc1R,KAAKC,WAAW,EAACe,EAAAA,EAAAA,IAAE,IAAIhB,KAAKib,OAAO,IAAIjb,KAAKkb,qBAAqBvb,EAAAA,KAAG4C,EAAAA,EAAAA,IAAE,IAAIvC,KAAKsa,gBAAgB9a,IAAG,IAAA2b,EAAC,MAAM/a,EAAEJ,KAAKE,iBAAiB8a,4BAA4Bhb,KAAKua,4BAA4B,MAAM/a,GAAG,MAAMY,EAAsB,QAArB+a,EAACnb,KAAKob,aAAa5b,UAAE,IAAA2b,OAAA,EAApBA,EAAsB/E,qBAAqB,MAAMzW,EAAAA,IAAGK,KAAKQ,SAAS6a,UAAUlH,GAAG,eAAe3U,IAAI,MAAMY,EAAEJ,KAAKsa,gBAAgB,MAAMla,GAAGZ,EAAE8b,OAAOlb,GAAGJ,KAAKQ,SAAS6a,UAAUla,IAAIf,MAAKmC,EAAAA,EAAAA,IAAE,IAAIvC,KAAKub,wBAAwB/b,IAAG,IAAAgc,EAAC,GAAG,MAAMhc,EAAE,KAAAic,EAAC,MAAMrb,EAAsB,QAArBqb,EAACzb,KAAKob,aAAa5b,UAAE,IAAAic,OAAA,EAApBA,EAAsBtM,SAASnP,KAAKgZ,iBAAiB5Y,EAAEJ,KAAK0b,mBAAmBlc,EAAE,MAA2B,QAArBgc,EAAAxb,KAAK2b,wBAAgB,IAAAH,GAArBA,EAAuBzC,iCAAiCjW,EAAAA,KAAGP,EAAAA,EAAAA,IAAE,IAAIvC,KAAKe,KAAKiB,WAAWxC,IAAIA,IAAIQ,MAAM,MAAMR,IAAIQ,KAAKgZ,iBAAiB,SAAQhY,EAAAA,EAAAA,IAAE,KAAK,MAAMxB,EAAEQ,KAAKoX,6BAA6B,OAAO,MAAM5X,EAAE,KAAK,CAACqY,QAAQ7X,KAAK2b,iBAAiBrV,SAAS9G,EAAEgO,oBAAoBpF,OAAO5I,EAAE0O,oBAAoB1O,IAAI,MAAMqY,QAAQzX,EAAEkG,SAAS1G,EAAEwI,OAAO1I,GAAGF,EAAG,OAADY,QAAC,IAADA,GAAAA,EAAGuY,qBAAqBC,SAAS5Y,KAAK4b,kCAAkChc,GAAE,IAAK,OAADQ,QAAC,IAADA,OAAC,EAADA,EAAGyY,4BAA4BD,WAAU5Y,KAAK4b,kCAAkClc,GAAE,IAAKuC,EAAAA,KAAGM,EAAAA,EAAAA,IAAE,IAAIvC,KAAKwX,SAAS,IAAIxX,KAAKmY,uCAAsC5V,EAAAA,EAAAA,IAAE,IAAIvC,KAAKgZ,iBAAiBxZ,IAAI,MAAMY,EAAEJ,KAAK6a,qBAAqBjb,EAAEI,KAAK2b,iBAAiB,MAAMnc,EAAEQ,KAAK0b,mBAAmB,MAAM,MAAMtb,GAAGR,EAAEyY,eAAejY,IAAIJ,KAAK0b,mBAAmB9b,EAAE6Y,kBAAkBxW,EAAAA,KAAI,CAACyP,OAAAA,GAAU1R,KAAK4X,gBAAenY,EAAAA,EAAAA,IAAEO,KAAK4X,gBAAgB5X,KAAK0W,cAActN,GAAE,CAAC9I,YAAAA,GAAeN,KAAK6b,eAAe7b,KAAKya,gBAAe,CAAE,CAAC,UAAIQ,GAAQ,IAAAa,EAAAC,EAAC,OAA+F,QAA/FD,EAAwD,QAAxDC,EAAO/b,KAAKE,iBAAiB8a,mCAA2B,IAAAe,OAAA,EAAjDA,EAAmDC,KAAKxc,GAAGA,EAAE4W,qBAAqBnT,cAAM,IAAA6Y,GAAAA,CAAI,CAAC,UAAIG,GAAS,OAAOjc,KAAKwX,SAAS,YAAY,IAAI,CAAC,oBAAImE,GAAmB,OAAO3b,KAAKob,aAAapb,KAAKgZ,iBAAiB,CAAC0C,kBAAAA,CAAmBlc,GAAE,IAAA0c,EAAAC,EAAC,MAAM/b,EAAEJ,KAAK6a,qBAAqBza,IAAIZ,IAAIQ,KAAK6a,qBAAqBrb,EAAE,MAAMY,IAAIA,EAAE6Y,UAAS,GAAI,MAAMzZ,IAAIA,EAAEyZ,UAAS,GAAwB,QAArBiD,EAAClc,KAAKob,aAAahb,UAAE,IAAA8b,GAApBA,EAAsBnD,gCAAqD,QAAtBoD,EAACnc,KAAK2b,wBAAgB,IAAAQ,GAArBA,EAAuBpD,gCAAgC,CAAC,oBAAIC,GAAmB,OAAOhZ,KAAKE,iBAAiB8Y,gBAAgB,CAAC,oBAAIA,CAAiBxZ,GAAGQ,KAAKE,iBAAiB8Y,iBAAiBxZ,CAAC,CAAC,gCAAI4X,GAA8B,IAAAgF,EAAC,OAA4B,QAA5BA,EAAOpc,KAAK2b,wBAAgB,IAAAS,OAAA,EAArBA,EAAuBhG,oBAAoB,CAAC,kBAAIiG,GAAiB,OAAOrc,KAAKsa,eAAe,CAAC,YAAIhG,GAAW,OAAOtU,KAAK4X,eAAeoE,KAAKnJ,IAAA,IAAEgF,QAAQrY,GAAEqT,EAAA,OAAGrT,EAAE8U,UAAS,CAAC,YAAIkD,GAAW,OAAOxX,KAAKya,gBAAgBza,KAAKmC,MAAM,CAAC,mBAAImV,GAAkB,MAAM,mBAAmBtX,KAAKya,cAAc,CAAC6B,KAAAA,CAAM9c,GAAGQ,KAAKgZ,iBAAiB,KAAKhZ,KAAKwa,eAAehb,EAAEQ,KAAKya,eAAe,mBAAmBza,KAAKuc,4BAA4B,CAACxD,6BAAAA,GAAgC/Y,KAAK4X,eAAehE,QAAQpU,GAAGA,EAAEqY,QAAQkB,gCAAgC,CAACyD,YAAAA,CAAahd,GAAG,OAAOA,EAAEqH,MAAM,IAAI,yBAAyB7G,KAAKyc,oBAAoBjd,GAAG,MAAM,IAAI,eAAeQ,KAAK0c,oBAAoBld,GAAG,MAAM,IAAI,WAAWwO,GAAAA,GAAEuL,SAAS/Z,EAAEmd,IAAI3c,KAAK4c,kBAAkBpd,GAAGwO,GAAAA,GAAE6O,OAAOC,SAAStd,EAAEmd,MAAM3c,KAAK+c,oBAAoB,MAAM,IAAI,OAAO/c,KAAKmY,oCAAmC,GAAI,CAAC6E,iBAAAA,CAAkBxd,GAAM,oBAAoBA,EAAEqH,MAAK7G,KAAKid,uBAAuBzd,EAAE,CAAC0d,UAAAA,GAAald,KAAKwa,eAAepI,EAAC,CAAC6K,sBAAAA,CAAuBzd,GAAG,IAAIQ,KAAKwX,UAAUxX,KAAKmd,uBAAuB,OAAO,MAAMvd,EAAEI,KAAKod,iBAAiB5d,EAAE6S,IAAG,GAAG,MAAMzS,EAAE,CAAC,GAAG,qBAAqBI,KAAKya,eAAe,KAAA4C,EAACzd,EAAE0d,SAAS7J,GAAe,QAAb4J,EAACzd,EAAE0d,SAAS7J,SAAC,IAAA4J,EAAAA,EAAE,GRAl0L,IQAu0L,MAAM7d,EAAE,IAAIY,EAAAA,EAAE,CAACkG,SAAS1G,EAAE0d,SAASva,QAAQ6D,QAAQhH,EAAEgH,UAAU5G,KAAKQ,SAAS6a,UAAUla,IAAI3B,GAAGQ,KAAKsa,gBAAgB9a,EAAEQ,KAAKya,eAAe,iBAAiBza,KAAKud,sBAAsB3d,EAAE4d,WAAW,MAAM,GAAG,mBAAmBxd,KAAKya,eAAe,CAACza,KAAKud,sBAAsB3d,EAAE4d,YAAY,MAAMhe,EAAEQ,KAAKsa,gBAAgBta,KAAKsa,gBAAgB,KAAK,aAAata,KAAKwa,eAAexa,KAAKya,eAAe,oBAAoBza,KAAKya,gBAAe,EAAGza,KAAKsa,gBAAgB,KAAKta,KAAKuc,6BAA6Bvc,KAAKe,KAAKiB,WAAW,MAAMhC,KAAKgZ,iBAAiBxZ,CAAC,CAACA,EAAEie,iBAAiB,CAAC,CAAChB,mBAAAA,CAAoBjd,GAAGQ,KAAKwX,WAAWxX,KAAK6b,eAAe7b,KAAKya,gBAAe,EAAGza,KAAKe,KAAKiB,WAAW,KAAKxC,EAAEie,kBAAkB,CAACf,mBAAAA,CAAoBld,GAAG,IAAIQ,KAAKwX,SAAS,OAAO,MAAMpX,EAAEJ,KAAKod,iBAAiB5d,EAAE6S,IAAG,MAAMjS,IAAIJ,KAAK4b,kCAAkCxb,EAAEod,YAAW,GAAIxd,KAAKud,sBAAsBnd,EAAEod,YAAY,CAACZ,iBAAAA,CAAkBpd,GAAGQ,KAAKwX,SAASxX,KAAK0d,uBAAuBle,GAAGQ,KAAKsU,WAAWtU,KAAKgZ,iBAAiB,KAAKxZ,EAAEie,kBAAkB,CAACC,sBAAAA,CAAuBle,GAAG,MAAMY,EAAEJ,KAAK6b,eAAe7b,KAAKuc,6BAA6Bnc,GAAGJ,KAAKya,eAAe,mBAAmBza,KAAKgZ,iBAAiB,KAAK,aAAahZ,KAAKwa,gBAAgBhb,EAAEie,mBAAmBzd,KAAKya,gBAAe,CAAE,CAACsC,iBAAAA,GAAoB/c,KAAKwX,WAAWxX,KAAK6b,eAAe7b,KAAKya,eAAe,oBAAoB,MAAMza,KAAKgZ,kBAAkBhZ,KAAKQ,SAAS6a,UAAU/Z,OAAOtB,KAAKgZ,iBAAiB,CAACuD,0BAAAA,GAA6Bvc,KAAKib,QAAQjb,KAAKkb,oBAAoB,CAACqC,qBAAAA,CAAsB/d,GAAG,MAAMY,EAAEJ,KAAKsa,gBAAgB1a,EAAEI,KAAKua,4BAA4B,GAAG,MAAMna,GAAG,MAAMR,EAAE,OAAO,MAAM4G,QAAQ9G,EAAE+G,KAAKjF,EAAE+E,YAAY9G,GAAymE,SAAWD,EAAEY,EAAER,GAAG,MAAMF,EAAEU,EAAEoN,oBAAoB/N,GAAEmB,EAAAA,EAAAA,GAAEoS,GAAEpT,EAAEF,GAAGsB,GAAEiE,EAAAA,EAAAA,GAAExF,GAAGW,EAAEuP,cAAcpN,EAAE/C,EAAEoO,mBAAmBqC,sBAAsBvQ,EAAEie,IAAGhe,GAAEyB,EAAAA,EAAAA,GAAEgK,GAAE7I,EAAE,GAAGA,EAAE,GAAGA,EAAE,KAAKO,GAAE+B,EAAAA,EAAAA,IAAEnF,EAAEC,EAAEuJ,IAAGjH,GAAEyL,EAAAA,EAAAA,IAAE5K,EAAElD,EAAEmP,IAAG/J,GAAEpE,EAAAA,EAAAA,GAAEqB,EAAEA,EAAEvC,GAAG0C,IAAG6C,EAAAA,EAAAA,GAAED,GAAG,KAAK,IAAGxD,EAAAA,EAAAA,KAAE0D,EAAAA,EAAAA,GAAEzF,EAAEuF,OAAMkN,EAAAA,EAAAA,GAAEvS,EAAEF,GAAG,GAAG,EAAE,GAAG,GAAG4B,GAAED,EAAAA,EAAAA,GAAEqS,GAAElR,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAI4B,GAAE3C,EAAAA,EAAAA,KAAE0D,EAAAA,EAAAA,GAAE7D,EAAE2D,IAAIlE,GAAEM,EAAAA,EAAAA,GAAEqS,GAAElR,EAAE,GAAGA,EAAE,GAAGA,EAAE,IAAI,MAAM,CAACiE,SAAQ0L,EAAAA,EAAAA,GAAElN,EAAElE,GAAG,EAAE,IAAIqD,EAAEA,EAAEsC,KAAKrE,EAAEmE,YAAYvF,EAAE,CAA77EmC,CAAEnD,KAAKe,KAAKnB,EAAEJ,GAAGY,EAAEmG,YAAY9G,EAAEW,EAAEqG,KAAKjF,EAAEpB,EAAEoG,QAAQ9G,CAAC,CAACmc,YAAAA,GAAe,MAAMrc,EAAEQ,KAAKsa,gBAAgB,OAAO,MAAM9a,IAAIQ,KAAKsa,gBAAgB,KAAKta,KAAKQ,SAAS6a,UAAU/Z,OAAO9B,IAAG,EAAG,CAAC4d,gBAAAA,CAAiB5d,EAAEY,GAAG,MAAMR,GAAEqL,EAAAA,GAAAA,IAAEzL,GAAGQ,KAAKe,KAAK6H,wBAAwBgV,+BAA+Bhe,EAAEI,KAAK8a,cAAc,MAAMpb,EAAEM,KAAK8a,aAAazR,QAAQhC,IAAI7F,EAAEpB,EAAEod,WAAW,IAAI9d,EAAEkK,qBAAqBpI,GAAG,OAAO,KAAK,MAAM/B,EAAEW,EAAEkd,SAAS,OAAO7d,EAAE+P,iBAAiBxP,KAAKe,KAAKyO,iBAAiBxP,KAAKe,KAAK6M,mBAAmBmD,iBAAiBvP,EAAE/B,GAAG,MAAMA,EAAE,MAAMW,EAAEwG,SAAQ6B,EAAAA,GAAAA,IAAE/I,EAAEM,KAAKe,MAAMX,EAAE,CAAC2a,yBAAAA,GAA4B/a,KAAK0W,cAActN,IAAG,MAAM5J,EAAEQ,KAAK2a,UAAUkD,eAAezd,EAAE,IAAIoS,GAAAA,EAAE,CAACzR,KAAKf,KAAKe,KAAK+c,UAAS,EAAGC,MAAM,CAACC,UAAUxe,EAAEye,YAAYD,UAAUE,WAAW1e,EAAEye,YAAYC,YAAY3J,cAAa,IAAK7U,EAAE,IAAI8J,GAAAA,EAAE,CAACzI,KAAKf,KAAKe,KAAKod,cAAc3e,EAAE4e,cAAcD,cAAcL,UAAS,EAAGI,WAAW,EAAEG,mBAAkB,EAAGlR,eAAe,EAAEoH,cAAa,IAAKvU,KAAK0a,2BAA2B,CAAC4D,UAAUle,EAAEme,aAAa7e,GAAGM,KAAKC,WAAW,EAACsC,EAAAA,EAAAA,IAAE,IAAI/C,EAAE4e,cAAc5e,GAAGA,EAAEgf,MAAM9e,GAAGC,EAAAA,KAAG4C,EAAAA,EAAAA,IAAE,IAAI/C,EAAEye,YAAYze,GAAGA,EAAEgf,MAAMpe,GAAGT,EAAAA,KAAGC,EAAAA,EAAAA,IAAE,KAAKQ,EAAEsR,UAAUhS,EAAEgS,UAAU1R,KAAK0a,2BAA2B,QAAQtR,GAAE,CAAC+O,kCAAAA,GAAwC,IAAL3Y,EAAC4D,UAAA0H,OAAA,QAAAC,IAAA3H,UAAA,IAAAA,UAAA,GAAK,MAAMhD,EAAEJ,KAAKwX,SAAS5X,EAAEI,KAAKE,iBAAiBC,QAAQT,EAAEM,KAAK2b,iBAAiBna,EAAExB,KAAKoX,6BAA6B3X,EAAEA,CAACD,EAAEY,KAAK,MAAMR,EAAEI,KAAK0a,2BAA2B,MAAM9a,IAAIA,EAAE2e,aAAaT,SAAS1d,EAAER,EAAE0e,UAAUR,SAASte,IAAI,GAAGY,EAAE,YAAYX,EAAEG,GAAE,GAAI,GAAG,MAAMF,GAAG,MAAM8B,EAAE,YAAY/B,GAAE,GAAG,GAAI,MAAMuB,EAAEtB,EAAEiZ,qBAAqBpW,EAAE/C,EAAEwB,EAAEsT,SAAStT,EAAE4X,SAASjZ,EAAED,EAAEmZ,4BAA4B/V,EAAEtD,EAAEG,EAAE2U,SAAS3U,EAAEiZ,SAAS3W,EAAErC,IAAI2C,GAAGO,GAAG,GAAGrD,EAAEwC,EAAEM,GAAGN,EAAE,CAAC,MAAMzC,EAAE+C,EAAEf,EAAEgM,oBAAoBhM,EAAE0M,kBAAkBlO,KAAK4b,kCAAkCpc,EAAE+C,EAAE,CAAC,CAACqZ,iCAAAA,CAAkCpc,EAAEY,GAAG,MAAMR,EAAEI,KAAK0a,2BAA2B,GAAG,MAAM9a,EAAE,OAAO,MAAM0e,UAAU5e,EAAE6e,aAAa/c,GAAG5B,EAAEF,EAAE+e,qBAAqBjf,EAAEE,EAAEgf,4BAA4Bte,EAAEZ,EAAE,KAAK,MAAMA,GAAGgC,EAAEmd,mCAAmCnf,EAAE,CAAC4b,YAAAA,CAAa5b,GAAE,IAAAof,EAAC,GAAG,MAAMpf,EAAE,OAAO,KAAK,MAAMY,EAAEZ,aAAamO,GAAAA,EAAEvN,GAAGA,EAAEyX,QAAQQ,eAAe7Y,GAAGY,GAAGA,EAAEyX,QAAQ1I,WAAW3P,EAAE,OAA0B,QAA1Bof,EAAO5e,KAAK4X,sBAAc,IAAAgH,GAAS,QAATA,EAAnBA,EAAqBC,KAAKze,UAAE,IAAAwe,OAAA,EAA5BA,EAA8B/G,OAAO,CAAC,QAAI9C,GAAO,IAA2VvV,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,IAAE,CAAC0F,eAAc,KAAMyP,GAAElT,UAAU,YAAO,IAAQzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,wBAAmB,IAAQzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,gCAA2B,IAAQzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,qCAAgC,IAAQzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,IAAE,CAAC0F,eAAc,KAAMyP,GAAElT,UAAU,gBAAW,IAAQzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,sBAAiB,IAAQzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,uBAAkB,IAAQzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,mCAA8B,IAAQzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,sBAAiB,IAAQzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,sBAAiB,IAAQzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,SAAS,OAAMzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,IAAE,CAACwC,UAAS,KAAM2S,GAAElT,UAAU,SAAS,OAAMzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,4BAAuB,IAAQzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,mBAAmB,OAAMzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,mBAAmB,OAAMzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,+BAA+B,OAAMzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,iBAAiB,OAAMzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,WAAW,OAAMzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,WAAW,OAAMzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKmV,GAAElT,UAAU,kBAAkB,MAAMkT,IAAE3a,EAAAA,EAAAA,IAAE,EAAC4C,EAAAA,EAAAA,GAAE,iDAAiD+X,IAAG,MAAMnH,IAAE7O,EAAAA,EAAAA,MAAIiH,IAAEjH,EAAAA,EAAAA,MAAI4K,IAAE5K,EAAAA,EAAAA,MAAIsP,IAAEtP,EAAAA,EAAAA,MAAIwZ,IAAEtc,EAAAA,EAAAA,MAAI6H,IAAE3H,EAAAA,EAAAA,MAAI8Q,GAAE,CAACiL,SAAS,IAAIxc,EAAAA,EAAE0c,YAAWrZ,EAAAA,EAAAA,MAAIyC,QAAQ,MAAMwL,GAAE,W,oDCAlrU,MAAMzE,WAAU7K,GAAAA,EAAEjD,WAAAA,CAAYO,GAAGN,MAAMM,GAAGJ,KAAK8e,UAAU,KAAK9e,KAAK+e,sBAAsB,KAAK/e,KAAK8e,UAAU,IAAItV,GAAAA,GAACmF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAG7N,EAAEoM,yBAAuB,IAACqH,aAAavU,KAAKuU,aAAalH,YAAW,KAAKrN,KAAKgf,gBAAgB5e,EAAE,CAAC,wBAAIgW,GAAuB,OAAOpW,KAAK+e,qBAAqB,CAAC,wBAAI3I,CAAqBhW,GAAGJ,KAAK+e,sBAAsB3e,EAAEJ,KAAKif,iBAAiB,CAACA,eAAAA,GAAkB,MAAM7e,EAAEJ,KAAK+e,sBAAsB,GAAG,MAAM3e,EAAE,OAAO,MAAMX,GAAEG,EAAAA,EAAAA,MAAI4B,EAAEpB,EAAEmO,wBAAuB/O,EAAAA,EAAAA,IAAEC,GAAEmB,EAAAA,EAAAA,IAAEY,EAAEA,EAAEA,IAAIH,EAAEjB,EAAEsF,KAAG/F,EAAAA,EAAAA,IAAEF,EAAEiG,GAAEjG,IAAGC,EAAAA,EAAAA,IAAEgG,GAAE1F,KAAK+e,sBAAsBvR,sBAAqB7N,EAAAA,EAAAA,IAAEF,EAAEiG,GAAEjG,GAAGO,KAAKkf,UAAUzf,CAAC,CAAC0f,uBAAAA,GAA0B,CAACC,wBAAAA,GAA2B,CAACC,eAAAA,CAAgBjf,GAAGA,EAAEJ,KAAK8e,UAAU,CAACQ,gBAAAA,CAAiBlf,GAAG,MAAM0e,UAAUtf,EAAE4W,qBAAqBzW,GAAGK,KAAQ,MAAML,GAAG,MAAMH,GAAIG,EAAEsD,OAAkD,SAAWzD,EAAEG,GAAG,MAAM+G,sBAAsBhH,EAAEiH,oBAAoB/G,GAAGD,EAAEiB,GAAEY,EAAAA,EAAAA,GAAEsN,GAAE,EAAE,EAAE,GAAG7M,GAAET,EAAAA,EAAAA,GAAE0Q,GAAE,EAAE,EAAE,GAAGpR,GAAEU,EAAAA,EAAAA,GAAE2B,GAAE,EAAE,EAAE,GAAGf,EAAExB,EAAEA,GAAER,EAAAA,EAAAA,IAAER,EAAE,GAAGqC,GAAGG,EAAExB,EAAEA,GAAER,EAAAA,EAAAA,IAAEV,EAAE,GAAGoB,GAAG,MAAMO,EAAEjB,GAAG4J,KAAKuV,KAAKvV,KAAKqB,IAAIjL,GAAG4E,GAAG,EAAElC,GAAE1C,EAAAA,EAAAA,IAAEV,GAAG8J,GAAExI,EAAAA,EAAAA,GAAEgN,GAAElN,GAAG6M,EAAEtM,EAAEyB,GAAG+B,EAAEI,IAAGnC,GAAG6K,EAAE,IAAIvE,GAAE3J,EAAAA,EAAAA,IAAEiG,GAAEb,EAAE2E,GAAGrF,GAAE/D,EAAAA,EAAAA,KAAGR,GAAGyS,EAAEhR,EAAE8C,GAAG6O,EAAE/N,GAAEd,GAAGkO,EAAE,IAAI3I,GAAE1I,EAAAA,EAAAA,GAAEkR,GAAEjQ,GAAGiH,GAAEzJ,EAAAA,EAAAA,IAAE8B,IAAEnB,EAAAA,EAAAA,IAAEV,GAAG,EAAEoB,IAAGyB,EAAAA,EAAAA,GAAEmH,EAAEA,EAAER,GAAG,MAAMC,EAAE5H,GAAEwR,EAAE,GAAGrF,GAAE1M,EAAAA,EAAAA,GAAEmC,GAAEvC,GAAG,IAAI,IAAIR,EAAE,EAAEA,EAAEuN,EAAEvN,IAAI,EAACX,EAAAA,EAAAA,IAAE0J,EAAE6J,EAAEtJ,GAAG,IAAI,IAAIlK,EAAE,EAAEA,EAAE6S,EAAE7S,IAAI,CAAC,MAAMG,EAAE,GAAGH,EAAEmO,EAAEvN,GAAG2S,EAAEpT,GAAG+N,EAAE,GAAGqF,EAAEpT,EAAE,GAAG+N,EAAE,GAAGqF,EAAEpT,EAAE,GAAG+N,EAAE,IAAGnL,EAAAA,EAAAA,GAAEmL,EAAEA,EAAEvE,EAAE,EAAC5G,EAAAA,EAAAA,GAAEmH,EAAEA,EAAEN,IAAG7G,EAAAA,EAAAA,GAAE3B,EAAEA,EAAEwI,IAAGpI,EAAAA,EAAAA,GAAE0M,EAAE9M,EAAE,CAAC,MAAMwK,EAAEuC,EAAE0E,EAAEU,EAAE,EAAE3H,GAAG,EAAE2H,EAAE,EAAE3H,EAAE,GAAG,EAAE2H,EAAE,EAAE3H,EAAE,GAAG,EAAE,MAAMH,EAAE,GAAG,IAAI,IAAI7K,EAAE,EAAEA,EAAEuN,EAAE,EAAEvN,IAAI,IAAI,IAAIZ,EAAE,EAAEA,EAAE6S,EAAE,EAAE7S,IAAI,CAAC,MAAMG,EAAE,GAAGH,GAAGmO,EAAE,GAAGvN,GAAG6K,EAAEtL,GAAGH,EAAEmO,EAAEvN,EAAE6K,EAAEtL,EAAE,IAAIH,EAAE,GAAGmO,EAAEvN,EAAE6K,EAAEtL,EAAE,GAAGH,EAAEmO,EAAEvN,EAAE,EAAE6K,EAAEtL,EAAE,GAAGH,EAAEmO,EAAEvN,EAAE,EAAE6K,EAAEtL,EAAE,IAAIH,EAAE,GAAGmO,EAAEvN,EAAE6K,EAAEtL,EAAE,IAAIH,EAAE,GAAGmO,EAAEvN,EAAE,CAAC,CAAC,MAAMqT,EAAE,CAACxI,GAAG,GAAG,MAAMvL,GAAG,IAAIE,EAAE,CAAC,MAAMQ,EAAE,GAAGZ,EAAE,GAAG,IAAI,IAAIG,EAAE,EAAEA,EAAE0S,EAAE,EAAE1S,IAAI,CAAC,MAAMD,EAAE,EAAEC,EAAES,EAAEV,GAAG0L,EAAEhL,EAAEV,EAAE,IAAIC,EAAE,GAAGgO,EAAEvN,EAAEV,EAAE,GAAGC,EAAEgO,EAAEnO,EAAEE,GAAG0L,EAAE5L,EAAEE,EAAE,GAAGC,EAAEgO,EAAEA,EAAE,EAAEnO,EAAEE,EAAE,IAAIC,EAAE,GAAGgO,EAAEA,EAAE,CAAC,CAAC8F,EAAEnI,KAAKlL,EAAEZ,EAAE,CAAC,GAAG,MAAMI,GAAG,IAAIF,EAAE,CAAC,MAAMU,EAAE,GAAGZ,EAAE,GAAG,IAAI,IAAIG,EAAE,EAAEA,EAAEgO,EAAE,EAAEhO,IAAI,CAAC,MAAMD,EAAE,EAAEC,EAAES,EAAEV,GAAG0L,EAAEhL,EAAEV,EAAE,GAAGC,EAAES,EAAEV,EAAE,GAAGC,EAAE,EAAEH,EAAEE,GAAG0L,EAAE5L,EAAEE,EAAE,GAAGC,GAAG0S,EAAE,GAAG1E,EAAE,EAAEnO,EAAEE,EAAE,GAAGC,GAAG0S,EAAE,GAAG1E,CAAC,CAAC8F,EAAEnI,KAAKlL,EAAEZ,EAAE,CAAC,OAAOiU,EAAE3B,IAAI1R,IAAI,MAAMT,EAAE,CAAC,CAAC,WAAW,IAAIuF,GAAAA,EAAE6N,EAAE3S,EAAE,GAAE,KAAM,OAAO,IAAIgB,GAAAA,EAAE5B,EAAEG,IAAI,CAA1kCkF,CAAErF,EAAEG,GAAGiU,QAAQpU,GAAGY,EAAEof,YAAYhgB,GAAG,EAAwiC,SAASyF,GAAE7E,GAAG,OAAOqf,MAAMrf,GAAG,EAAEA,CAAC,CAAC,MAAM0O,IAAE7M,EAAAA,EAAAA,MAAIiQ,IAAEjQ,EAAAA,EAAAA,MAAIkB,IAAElB,EAAAA,EAAAA,MAAI+L,IAAE/L,EAAAA,EAAAA,MAAIyD,IAAE9F,EAAAA,EAAAA,MAAI2B,IAAE3B,EAAAA,EAAAA,M,uCCAx4C,IAAI8N,GAAE,cAAc9N,EAAAA,EAAEC,WAAAA,CAAYL,GAAGM,MAAMN,GAAGQ,KAAKG,SAAQ,EAAGH,KAAK0f,iBAAiB,CAACrP,SAAQpL,EAAAA,EAAAA,MAAIqL,UAASrL,EAAAA,EAAAA,MAAIsL,YAAWtL,EAAAA,EAAAA,MAAIuL,aAAYvL,EAAAA,EAAAA,OAAKjF,KAAK2f,iBAAiB,CAACjP,KAAIzL,EAAAA,EAAAA,MAAI0L,QAAO1L,EAAAA,EAAAA,MAAI2L,MAAK3L,EAAAA,EAAAA,MAAI4L,OAAM5L,EAAAA,EAAAA,OAAKjF,KAAK4f,iBAAiB,CAAClP,KAAIzL,EAAAA,EAAAA,MAAI0L,QAAO1L,EAAAA,EAAAA,MAAI,CAAClF,UAAAA,GAAa,MAAMP,EAAE,CAACuB,KAAKf,KAAKe,KAAKwT,cAAa,GAAInU,GAACuO,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAKnP,GAAC,IAACwN,MAAMhN,KAAK4V,OAAOzI,eAAe,IAAGvN,GAAC+O,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAKvO,GAAC,IAACyf,gBAAezW,EAAAA,GAAAA,IAAE,KAAIpJ,KAAK8f,uBAAuB,IAAI5W,GAAAA,GAACyF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAGnP,GAAK2S,EAAE3F,6BAA6BxM,KAAK+f,oBAAoB,IAAIpS,IAACgB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAGnP,GAAC,IAAC+U,aAAavU,KAAKuU,gBAAevU,KAAKggB,yBAAyB,IAAIxW,GAAAA,EAAEpJ,GAAGJ,KAAKigB,sBAAsB,IAAIzW,GAAAA,EAAEpJ,GAAGJ,KAAKkgB,uBAAuB,IAAI1W,GAAAA,EAAEpJ,GAAGJ,KAAKmgB,qBAAqB,IAAI3W,GAAAA,EAAEpJ,GAAGJ,KAAKogB,wBAAwB,IAAI5W,GAAAA,EAAEpJ,GAAGJ,KAAKqgB,kBAAkB,IAAI7W,GAAAA,EAAE5J,GAAGI,KAAKsgB,iBAAiB,IAAI9W,GAAAA,EAAE5J,GAAGI,KAAKC,WAAW,EAACuB,EAAAA,EAAAA,IAAE,KAAK,MAAMhC,EAAEQ,KAAKoW,qBAAqB,GAAK,OAAD5W,QAAC,IAADA,IAAAA,EAAGyD,MAAM,OAAO,KAAK,MAAM7C,EAAEJ,KAAK0f,iBAAiB9f,EAAEI,KAAK2f,iBAAiBjgB,EAAEM,KAAK4f,iBAAiB,OAAOpgB,EAAE4Q,aAAahQ,GAAGZ,EAAEiR,iBAAiB7Q,GAAGJ,EAAEsR,qBAAqBpR,GAAG,CAAC0W,qBAAqB5W,EAAE+gB,QAAQngB,EAAEogB,WAAW5gB,EAAE6gB,gBAAgB/gB,EAAEmB,YAAYb,KAAKE,iBAAiBW,YAAYoY,SAASjZ,KAAK0gB,YAAYlhB,IAAI,MAAMY,EAAE,MAAMZ,EAAEQ,KAAK2gB,sBAAsBnhB,GAAGA,EAAEse,SAAS1d,GAAGA,GAAGJ,KAAK4gB,sBAAsBphB,IAAI,CAACqhB,SAAQ,EAAG3d,OAAOxD,GAAAA,MAAI8B,EAAAA,EAAAA,IAAE,KAAK,MAAM4U,qBAAqB5W,GAAGQ,MAAM0G,sBAAsBtG,EAAEuG,oBAAoB/G,GAAI,OAADJ,QAAC,IAADA,EAAAA,EAAG,CAAC,EAAE,MAAM,CAAC4W,qBAAqB5W,EAAEkH,sBAAsBtG,EAAEuG,oBAAoB/G,IAAIgF,IAA4B,IAA1BwR,qBAAqB5W,GAAEoF,EAAI,MAAMmb,oBAAoB3f,GAAGJ,KAAKR,IAAIY,EAAEgW,uBAAuBhW,EAAEgW,qBAAqB5W,GAAGQ,KAAK+f,oBAAoBe,oBAAoBve,EAAAA,KAAGf,EAAAA,EAAAA,IAAE,KAAI,IAAA+U,EAAC,MAAM1V,YAAYrB,GAAGQ,KAAKE,iBAAiB,MAAM,CAACC,QAAQH,KAAKG,QAAQ8Y,SAASzZ,GAAGQ,KAAK0gB,UAAUK,OAAOvhB,GAAGQ,KAAKghB,QAAQC,aAAa,OAA+B,QAA5B1K,EAAGvW,KAAKoW,4BAAoB,IAAAG,OAAA,EAAzBA,EAA2B7P,yBAAwBmM,IAAkD,IAAhD1S,QAAQX,EAAEyZ,SAAS7Y,EAAE2gB,OAAOnhB,EAAEqhB,aAAavhB,GAAEmT,EAAI,MAAMpT,EAAEW,GAAGR,EAAEI,KAAK+f,oBAAoB5f,QAAQX,EAAEQ,KAAKmgB,qBAAqBhgB,QAAQX,EAAEQ,KAAKogB,wBAAwBjgB,QAAQX,EAAEQ,KAAKggB,yBAAyB7f,QAAQX,GAAGE,EAAE,MAAMC,EAAEH,IAAIY,GAAGV,GAAGM,KAAKigB,sBAAsB9f,QAAQR,EAAEK,KAAKkgB,uBAAuB/f,QAAQR,EAAEK,KAAKkhB,0BAA0B1hB,IAAIA,EAAEgV,MAAM/U,EAAE0S,EAAE7F,mBAAmB6F,EAAE9F,sBAAsB7M,EAAE2N,eAAe/M,EAAE,EAAE,IAAI,CAACJ,KAAKsgB,iBAAiBtgB,KAAKqgB,mBAAmBzM,QAAQhU,IAAIA,EAAE4U,MAAM,GAAG/U,EAAE0S,EAAE7F,mBAAmB6F,EAAE9F,uBAAuBzM,EAAEO,QAAQX,GAAGY,KAAKmC,EAAAA,KAAGf,EAAAA,EAAAA,IAAE,KAAI,IAAA2f,EAAC,MAAMjhB,kBAAkBW,YAAYrB,EAAEyB,KAAKb,GAAGsgB,UAAU9gB,EAAEO,QAAQT,GAAGM,KAAKP,EAAEO,KAAKe,KAAKiB,WAAWrC,IAAI,OAADS,QAAC,IAADA,GAAAA,EAAG+B,SAAQ1C,aAAa8B,IAAG9B,EAAE+X,SAAS,MAAM,CAAC4J,gBAAgB1hB,IAAIE,KAAKJ,GAAe,QAAd2hB,EAAI,OAAD/gB,QAAC,IAADA,OAAC,EAADA,EAAGoX,gBAAQ,IAAA2J,GAAAA,GAAOxhB,GAAGqN,MAAMhN,KAAK4V,SAASrC,IAA+B,IAA7B6N,gBAAgB5hB,EAAEwN,MAAM5M,GAAEmT,EAAIvT,KAAK8f,uBAAuB3f,QAAQX,EAAEQ,KAAKkhB,0BAA0B1hB,GAAGA,EAAEwN,MAAM5M,IAAImC,EAAAA,KAAI,CAAC,UAAIqT,GAAQ,IAAAyL,EAAAC,EAAC,MAAMlL,qBAAqB5W,EAAEkhB,UAAU9gB,EAAEM,iBAAiBR,GAAGM,KAAK,GAAG,MAAMR,EAAE,OAAOY,EAAAA,EAAE6M,WAAWkF,EAAE5F,YAAY,MAAM9M,GAAQ,QAAN4hB,EAAA3hB,EAAEuB,YAAI,IAAAogB,OAAA,EAANA,EAAQlf,SAAQzC,EAAEmB,YAAYlB,EAAEH,EAAE2P,YAAiB,QAATmS,EAAG5hB,EAAEuB,YAAI,IAAAqgB,OAAA,EAANA,EAAQjF,gBAAe7a,EAAE/B,IAAIG,GAAGD,GAAGK,KAAKe,KAAK4T,eAAeC,YAAYzC,EAAE5F,WAAW,OAAOnM,EAAAA,EAAE6M,WAAWzL,EAAE,CAAC,aAAIkf,GAAY,MAAMtK,qBAAqB5W,EAAEU,kBAAkBkX,6BAA6BhX,IAAIJ,KAAK,OAAO,MAAMR,GAAGA,IAAIY,CAAC,CAAC,WAAI4gB,GAAU,MAAM9gB,kBAAkBe,KAAKzB,GAAG4W,qBAAqBhW,GAAGJ,KAAK,OAAO,MAAMR,GAAGA,EAAEgY,UAAUhY,EAAE6c,kBAAkB,OAADjc,QAAC,IAADA,OAAC,EAADA,EAAG+O,SAAQ,CAACuC,OAAAA,GAAU1R,KAAK8f,wBAAuBngB,EAAAA,EAAAA,IAAEK,KAAK8f,wBAAwB9f,KAAK+f,qBAAoBpgB,EAAAA,EAAAA,IAAEK,KAAK+f,qBAAqB/f,KAAKggB,0BAAyBrgB,EAAAA,EAAAA,IAAEK,KAAKggB,0BAA0BhgB,KAAKigB,uBAAsBtgB,EAAAA,EAAAA,IAAEK,KAAKigB,uBAAuBjgB,KAAKkgB,wBAAuBvgB,EAAAA,EAAAA,IAAEK,KAAKkgB,wBAAwBlgB,KAAKmgB,sBAAqBxgB,EAAAA,EAAAA,IAAEK,KAAKmgB,sBAAsBngB,KAAKogB,yBAAwBzgB,EAAAA,EAAAA,IAAEK,KAAKogB,yBAAyBpgB,KAAKqgB,mBAAkB1gB,EAAAA,EAAAA,IAAEK,KAAKqgB,mBAAmBrgB,KAAKsgB,kBAAiB3gB,EAAAA,EAAAA,IAAEK,KAAKsgB,iBAAiB,CAACY,yBAAAA,CAA0B1hB,GAAG,CAACQ,KAAKggB,yBAAyBhgB,KAAKigB,sBAAsBjgB,KAAKkgB,uBAAuBlgB,KAAKmgB,qBAAqBngB,KAAKogB,wBAAwBpgB,KAAKsgB,iBAAiBtgB,KAAKqgB,mBAAmBzM,QAAQpU,EAAE,CAACmhB,qBAAAA,CAAsBnhB,GAAGQ,KAAKkhB,0BAA0B1hB,GAAGA,EAAEQ,KAAK8f,wBAAwBtgB,EAAEQ,KAAK+f,oBAAoB,CAACa,qBAAAA,CAAsBphB,GAAG,MAAM4W,qBAAqBhW,EAAEmgB,QAAQ3gB,EAAE4gB,WAAW9gB,EAAE+gB,gBAAgBhhB,GAAGD,EAAEG,GAAEmP,EAAAA,EAAAA,IAAE1O,EAAEoN,qBAAqBxN,KAAK8f,uBAAuBlG,SAASxZ,EAAEkG,SAAStG,KAAK+f,oBAAoBd,kBAAkBjf,KAAKuhB,kBAAkB5hB,EAAEC,GAAGI,KAAKwhB,iBAAiBphB,EAAER,EAAEH,GAAGO,KAAKyhB,yBAAyBrhB,EAAEV,EAAE,CAAC6hB,iBAAAA,CAAkB/hB,EAAEY,GAAGJ,KAAKggB,yBAAyBpG,SAAS,CAAC,CAACpa,EAAEY,EAAEiQ,SAAS,CAAC7Q,EAAEY,EAAEkQ,UAAU,CAAC9Q,EAAEY,EAAEmQ,YAAY,CAAC/Q,EAAEY,EAAEoQ,aAAa,CAACgR,gBAAAA,CAAiBhiB,EAAEY,EAAER,GAAG,MAAM4N,oBAAoB9N,EAAE6N,YAAY5N,EAAE+G,sBAAsBlF,EAAE8L,eAAe/K,GAAG/C,EAAEwB,GAAEvB,EAAAA,EAAAA,IAAE+B,GAAGS,GAAEgD,EAAAA,EAAAA,MAAI5D,GAAET,EAAAA,EAAAA,OAAIoE,EAAAA,EAAAA,IAAE3D,EAAEL,EAAE,EAAEuB,IAAGO,EAAAA,EAAAA,GAAEb,EAAEtC,EAAE0B,GAAG2R,GAAEhT,KAAKigB,sBAAsBvgB,EAAEU,EAAEmQ,WAAWnQ,EAAEiQ,QAAQ,UAAUpO,IAAG+C,EAAAA,EAAAA,IAAE3D,GAAGL,EAAE,EAAEuB,IAAGH,EAAAA,EAAAA,GAAEH,EAAE,EAAE,EAAE,IAAGa,EAAAA,EAAAA,GAAEb,EAAEtC,EAAE0B,GAAG2R,GAAEhT,KAAKkgB,uBAAuBxgB,EAAEU,EAAEoQ,YAAYpQ,EAAEkQ,SAAS,UAAUrO,GAAG,MAAMiQ,EAAE1Q,EAAE,IAAI,WAAW,UAAUwR,GAAEhT,KAAKmgB,qBAAqBvgB,EAAE8Q,IAAItQ,EAAEkQ,SAASlQ,EAAEiQ,QAAQ6B,EAAE3P,GAAGyQ,GAAEhT,KAAKogB,wBAAwBxgB,EAAE+Q,OAAOvQ,EAAEoQ,YAAYpQ,EAAEmQ,WAAW2B,EAAE3P,EAAE,CAACkf,wBAAAA,CAAyBjiB,EAAEY,GAAG,MAAMR,EAAEJ,EAAEgO,oBAAoB9N,EAAEF,EAAEkH,uBAAuB,IAAI,WAAW,UAAUsM,GAAEhT,KAAKsgB,iBAAiB1gB,EAAEQ,EAAEyQ,MAAMzQ,EAAEwQ,KAAKlR,EAAEF,EAAE8N,gBAAgB0F,GAAEhT,KAAKqgB,kBAAkBzgB,EAAEQ,EAAEsQ,IAAItQ,EAAEuQ,OAAO,UAAUnR,EAAEuQ,WAAW,CAAC,QAAIgF,GAAO,GAAG,SAAS/B,GAAExT,EAAEY,EAAER,EAAEF,EAAED,EAAEE,GAAM,IAAJ6B,EAAC4B,UAAA0H,OAAA,QAAAC,IAAA3H,UAAA,GAAAA,UAAA,GAAC2L,EAAG,MAAMxM,GAAE0C,EAAAA,EAAAA,OAAI5D,EAAAA,EAAAA,GAAEkB,EAAE3C,EAAEQ,GAAG,MAAMY,GAAEkR,EAAAA,EAAAA,GAAE3P,GAAGN,GAAEgD,EAAAA,EAAAA,OAAI5D,EAAAA,EAAAA,GAAEY,EAAEvC,EAAEU,IAAG+D,EAAAA,EAAAA,GAAElC,EAAEA,IAAGnB,EAAAA,EAAAA,GAAEmB,EAAEA,EAAEjB,GAAG,IAAIoB,GAAEhB,EAAAA,EAAAA,GAAEmB,EAAEN,GAAG,MAAMkQ,GAAErD,EAAAA,EAAAA,IAAEnP,GAAG,aAAaF,KAAIyF,EAAAA,EAAAA,GAAEiN,EAAEA,GAAG/P,IAAI,EAAE4H,KAAKgL,GAAG5S,IAAI,MAAMuL,EAAE,GAAGpM,EAAEyI,KAAKuV,KAAKvV,KAAKqB,IAAIjJ,GAAGZ,GAAGgI,GAAE5I,EAAAA,EAAAA,OAAIoE,EAAAA,EAAAA,IAAEwE,EAAEpH,EAAEb,EAAE4Q,GAAG,MAAMjJ,GAAEjE,EAAAA,EAAAA,OAAI+I,EAAAA,EAAAA,GAAE9E,EAAE3G,GAAG,MAAM6G,GAAEnE,EAAAA,EAAAA,OAAI+I,EAAAA,EAAAA,GAAE5E,EAAExJ,GAAG,IAAI,IAAIoF,EAAE,EAAEA,EAAEzD,EAAEyD,IAAI,CAAC,MAAMxF,GAAEyF,EAAAA,EAAAA,OAAI+I,EAAAA,EAAAA,GAAExO,EAAE4J,IAAGtG,EAAAA,EAAAA,GAAEoG,EAAEA,EAAEM,IAAG3E,EAAAA,EAAAA,GAAEuE,EAAEhJ,EAAE8I,GAAG,MAAMtJ,GAAEqF,EAAAA,EAAAA,OAAI+I,EAAAA,EAAAA,GAAEpO,EAAEwJ,GAAGuE,EAAErC,KAAK,CAAC9L,EAAEI,GAAG,CAACJ,EAAEoa,SAASjM,CAAC,EAACnO,EAAAA,EAAAA,IAAE,EAACwB,EAAAA,EAAAA,OAAK0M,GAAEzG,UAAU,YAAO,IAAQzH,EAAAA,EAAAA,IAAE,EAACwB,EAAAA,EAAAA,IAAE,CAAC0J,eAAc,KAAMgD,GAAEzG,UAAU,oBAAe,IAAQzH,EAAAA,EAAAA,IAAE,EAACwB,EAAAA,EAAAA,OAAK0M,GAAEzG,UAAU,wBAAmB,IAAQzH,EAAAA,EAAAA,IAAE,EAACwB,EAAAA,EAAAA,OAAK0M,GAAEzG,UAAU,4BAAuB,IAAQzH,EAAAA,EAAAA,IAAE,EAACwB,EAAAA,EAAAA,OAAK0M,GAAEzG,UAAU,eAAU,IAAQzH,EAAAA,EAAAA,IAAE,EAACwB,EAAAA,EAAAA,OAAK0M,GAAEzG,UAAU,SAAS,OAAMzH,EAAAA,EAAAA,IAAE,EAACwB,EAAAA,EAAAA,OAAK0M,GAAEzG,UAAU,YAAY,OAAMzH,EAAAA,EAAAA,IAAE,EAACwB,EAAAA,EAAAA,OAAK0M,GAAEzG,UAAU,UAAU,MAAMyG,IAAElO,EAAAA,EAAAA,IAAE,EAACyC,EAAAA,EAAAA,GAAE,6DAA6DyL,ICA3tN,IAAIzL,GAAE,cAAcvC,EAAAA,EAAE,WAAIS,GAAU,OAAOH,KAAKE,iBAAiBC,OAAO,CAACN,WAAAA,CAAYD,GAAGE,MAAMF,EAAE,CAACG,UAAAA,GAAa,MAAMH,EAAEI,KAAKE,iBAAiBR,GAAEU,EAAAA,EAAAA,GAAE,IAAIJ,KAAKE,iBAAiB8a,4BAA4BpW,IAA4B,IAA1BwR,qBAAqB1W,GAAEkF,EAAI,MAAMnF,EAAE,IAAIuB,GAAE,CAACD,KAAKf,KAAKe,KAAKqV,qBAAqB1W,EAAEQ,iBAAiBN,EAAE2U,aAAavU,KAAKuU,eAAe,MAAM,CAACmN,cAAcjiB,EAAE6B,OAAOA,IAAI7B,EAAEiS,aAAa1R,KAAK2hB,mBAAmBjiB,EAAEM,KAAKC,WAAW,EAACR,EAAAA,EAAAA,IAAEC,IAAGF,EAAAA,EAAAA,IAAE,IAAIQ,KAAKG,QAAQP,GAAGI,KAAK2hB,mBAAmB/N,QAAQf,IAAA,IAAE6O,cAAchiB,GAAEmT,EAAA,OAAGnT,EAAES,QAAQP,IAAGD,EAAAA,KAAI,CAAC,QAAIoV,GAAO,IAAGnV,EAAAA,EAAAA,IAAE,EAAC4B,EAAAA,EAAAA,IAAE,CAACkJ,eAAc,KAAMzI,GAAEgF,UAAU,wBAAmB,IAAQrH,EAAAA,EAAAA,IAAE,EAAC4B,EAAAA,EAAAA,IAAE,CAACkJ,eAAc,EAAGvD,aAAY,KAAMlF,GAAEgF,UAAU,YAAO,IAAQrH,EAAAA,EAAAA,IAAE,EAAC4B,EAAAA,EAAAA,IAAE,CAACkJ,eAAc,KAAMzI,GAAEgF,UAAU,oBAAe,IAAQrH,EAAAA,EAAAA,IAAE,EAAC4B,EAAAA,EAAAA,OAAKS,GAAEgF,UAAU,UAAU,MAAMhF,IAAErC,EAAAA,EAAAA,IAAE,EAAC2C,EAAAA,EAAAA,GAAE,0DAA0DN,I,oGCAzrB,IAAIgD,GAAE,cAAcrE,GAAAA,EAAEf,WAAAA,GAAcC,SAASsD,WAAWpD,KAAK4hB,eAAcrf,EAAAA,GAAAA,KAAG,CAAC,oBAAIsf,GAAmB,OAAOxgB,EAAAA,GAAAA,IAAErB,KAAK4hB,cAAc9P,IAAI1R,IAAGX,EAAAA,EAAAA,IAAEW,IAAI,CAAC,oBAAIyhB,CAAiBzhB,GAAGJ,KAAK4hB,eAAcvgB,EAAAA,GAAAA,IAAEjB,EAAE0R,IAAI1R,IAAGZ,EAAAA,EAAAA,IAAEY,IAAI,CAAC,oBAAI0hB,GAAmB,OAAOliB,EAAAA,EAAAA,KAAEqC,EAAAA,EAAAA,MAAIjC,KAAK+hB,cAAc/hB,KAAKgiB,0BAA0B,CAAC,iBAAID,GAAgB,MAAM3hB,EAAEJ,KAAK4hB,cAAc,GAAGniB,EAAEO,KAAK4hB,cAAc,GAAGpiB,EAAEQ,KAAK4hB,cAAc,GAAGliB,EAAEM,KAAK4hB,cAAc,IAAG5c,EAAAA,GAAAA,IAAE5E,GAAGX,IAAGuF,EAAAA,GAAAA,IAAExF,GAAGE,GAAG,MAAMC,EAAE,EAAEqK,KAAKiY,IAAIjiB,KAAKkiB,KAAK,GAAG3f,EAAE,EAAEyH,KAAKiY,IAAIjiB,KAAKmiB,KAAK,GAAG9gB,EAAE2I,KAAKiY,IAAI7hB,GAAGQ,EAAEoJ,KAAKiY,IAAIxiB,GAAGwF,EAAE+E,KAAKiY,IAAIziB,GAAGsB,EAAEF,EAAES,EAAEqE,EAAEsE,KAAKiY,IAAIviB,GAAGuF,EAAEuE,EAAE7J,EAAEmB,EAAEsB,EAAEG,EAAEmD,EAAEqJ,IAAI1N,EAAEP,EAAE,GAAGnB,EAAE,EAAEwD,IAAI8B,EAAES,EAAE,GAAGnD,EAAE,EAAEsC,GAAE5C,EAAAA,EAAAA,OAAIjB,EAAAA,EAAAA,IAAE6D,EAAE,CAACkK,EAAE5L,EAAE,IAAI,MAAML,GAAEb,EAAAA,EAAAA,OAAIT,EAAAA,EAAAA,IAAEsB,EAAE,CAAC0G,EAAEpH,EAAE,IAAI,MAAMhB,GAAEa,EAAAA,EAAAA,MAAI,OAAOrC,EAAAA,EAAAA,IAAEwB,EAAE0B,EAAE+B,EAAE,CAAC,kBAAIud,GAAiB,MAAMhiB,EAAE4J,KAAKiY,IAAIjiB,KAAK4hB,cAAc,IAAIniB,EAAEuK,KAAKiY,IAAIjiB,KAAK4hB,cAAc,IAAIpiB,EAAE,EAAEwK,KAAKiY,IAAIjiB,KAAKkiB,KAAK,GAAG,OAAOlY,KAAK3C,IAAI,GAAG5H,EAAEW,GAAGZ,EAAE,CAAC6iB,WAAAA,CAAYjiB,EAAEX,GAAG,MAAMD,EAAEC,EAAEO,KAAKoiB,eAAe,OAAOpiB,KAAKsiB,SAAS,CAACliB,EAAE,GAAGA,EAAE,GAAGZ,EAAEC,GAAGD,CAAC,IAAGY,EAAAA,EAAAA,IAAE,EAACV,EAAAA,EAAAA,OAAKuF,GAAEgC,UAAU,qBAAgB,IAAQ7G,EAAAA,EAAAA,IAAE,EAACV,EAAAA,EAAAA,OAAKuF,GAAEgC,UAAU,mBAAmB,OAAM7G,EAAAA,EAAAA,IAAE,EAACV,EAAAA,EAAAA,OAAKuF,GAAEgC,UAAU,mBAAmB,OAAM7G,EAAAA,EAAAA,IAAE,EAACV,EAAAA,EAAAA,OAAKuF,GAAEgC,UAAU,gBAAgB,OAAM7G,EAAAA,EAAAA,IAAE,EAACV,EAAAA,EAAAA,OAAKuF,GAAEgC,UAAU,iBAAiB,MAAMhC,IAAE7E,EAAAA,EAAAA,IAAE,EAACT,EAAAA,EAAAA,GAAE,sDAAsDsF,I,4BCAtpC,MAAMnC,GAAEjD,WAAAA,GAAcG,KAAKuiB,mBAAmB,EAAEviB,KAAKwiB,0BAA0B,IAAIxiB,KAAKyiB,yBAAyB,GAAGziB,KAAK0iB,oBAAoB,IAAI1iB,KAAK2iB,eAAe,EAAE3iB,KAAK4iB,mBAAmB,EAAE,CAACC,mBAAAA,CAAoBziB,GAAG,MAAMZ,EAAEY,EAAEJ,KAAKwiB,0BAA0BxiB,KAAKyiB,yBAAyB,OAAOziB,KAAKuiB,mBAAmB/iB,CAAC,CAACsjB,mBAAAA,CAAoB1iB,GAAG,OAAO4J,KAAKuV,KAAKnf,EAAEJ,KAAK0iB,qBAAqB1iB,KAAK0iB,mBAAmB,EAAE,MAAMrhB,GAAE,CAAC,QAAQ,OAAO,QAAQ,OAAO,MAAM,UAA4D,MAAM6Q,GAAErS,WAAAA,CAAYO,GAAGJ,KAAK+iB,MAAM3iB,EAAEJ,KAAKgjB,OAAO,CAAC,EAAEhjB,KAAKijB,OAAO,EAAEjjB,KAAKkjB,QAAQ,EAAEljB,KAAKmjB,SAAS,IAAIrgB,GAAE9C,KAAKojB,gBAAgBpZ,KAAK3C,KAAIgc,EAAAA,EAAAA,GAAI,eAAe,KAAK,MAAMjjB,EAAEkjB,KAAKC,WAAWC,eAAe,CAAC,gBAAIlgB,GAAc,IAAAmgB,EAAC,OAAmB,QAAnBA,EAAOzjB,KAAK0jB,eAAO,IAAAD,OAAA,EAAZA,EAAcE,WAAWvhB,GAAAA,GAAE,CAAC,SAAIwhB,GAAQ,OAAO,MAAM5jB,KAAKsD,cAAc,IAAItD,KAAKijB,QAAQ,IAAIjjB,KAAKkjB,OAAO,CAAC,WAAI3f,GAAU,MAAMnD,EAAEJ,KAAK6jB,MAAM,OAAO,IAAIzjB,EAAE0K,OAAO,KAAK1K,EAAE,GAAGmD,OAAO,CAAC,kBAAIC,GAAiB,MAAMpD,EAAEJ,KAAKgjB,OAAO,IAAIxjB,EAAE,EAAE,OAAOmG,OAAOme,KAAK1jB,GAAGwT,QAAQhU,IAAIQ,EAAER,KAAKJ,GAAG,KAAKA,CAAC,CAAC,SAAIqkB,GAAQ,MAAMzjB,EAAEJ,KAAKgjB,OAAOxjB,EAAE,GAAG,IAAI,MAAMI,KAAKyB,GAAE,CAAC,MAAM3B,EAAEU,EAAER,GAAGF,GAAGF,EAAE8L,KAAK5L,EAAE,CAAC,OAAOF,CAAC,CAAC,gBAAIiE,GAAe,OAAOzD,KAAK6jB,MAAM/R,IAAI1R,GAAG,CAACA,EAAE+C,EAAEnD,KAAKijB,QAAQ7iB,EAAE+C,EAAE/C,EAAEoU,OAAOxU,KAAKijB,OAAO7iB,EAAEmB,EAAEvB,KAAKkjB,SAAS9iB,EAAEmB,EAAEnB,EAAE2jB,QAAQ/jB,KAAKkjB,SAAS,CAAC,8BAAIc,GAA6B,OAAOhkB,KAAK6jB,MAAM/R,IAAI1R,GAAGA,EAAE0hB,iBAAiB,CAAC,wBAAImC,GAAuB,OAAOjkB,KAAK6jB,MAAM/R,IAAI1R,GAAGA,EAAEiG,WAAW,CAAC6d,gBAAAA,CAAiB1kB,EAAEwB,EAAEoB,EAAExB,GAAG,MAAMwO,6BAA6BtO,EAAEwM,eAAexK,EAAEoL,kBAAkB7M,EAAEkN,uBAAuB2D,EAAExL,sBAAsBvD,EAAEwD,oBAAoBzB,GAAGlE,EAAE6D,GAAE5C,EAAAA,EAAAA,OAAItC,EAAAA,EAAAA,GAAEkF,EAAExD,EAAEP,GAAG,MAAM4E,GAAEzD,EAAAA,EAAAA,MAAIyL,GAAEzL,EAAAA,EAAAA,MAAIiH,EAAEA,CAAC9I,EAAEZ,KAAK,MAAMG,GAAEsC,EAAAA,EAAAA,MAAIxC,GAAEC,EAAAA,EAAAA,MAAI,OAAOE,EAAAA,EAAAA,IAAEH,EAAEW,EAAEZ,IAAGwF,EAAAA,EAAAA,GAAErF,EAAEkF,EAAEpF,IAAG+B,EAAAA,EAAAA,GAAE7B,EAAEmB,EAAEnB,GAAGA,GAAG,IAAI8T,EAAE/J,EAAE5G,EAAE,MAAM1B,EAAE4I,KAAK3C,IAAI,GAAGlE,GAAG6P,EAAEhJ,KAAK3C,IAAI,GAAG2C,KAAKzC,IAAI,GAAGpE,EAAE,IAAI,IAAI,IAAIqG,GAAG,GAAG4I,EAAE,GAAG7Q,GAAG,GAAG0J,EAAE,GAAG,GAAlwC,SAAW7K,GAAG,OAAO,CAAC,MAAM,UAAU0c,SAAS1c,EAAE,CAAotC6E,CAAEzF,GAAG,CAAC,MAAMA,EAAEA,IAAGY,EAAAA,EAAAA,IAAEZ,GAAG,GAAG,IAAI+B,EAAE/B,GAAG0F,EAAE,GAAGlF,KAAKmjB,SAASP,mBAAmB3X,EAAEzL,GAAG0F,EAAE,GAAGlF,KAAKmjB,SAASP,kBAAkB,CAAC,OAAOpjB,GAAG,IAAI,QAAQiU,EAAEpS,EAAEmI,GAAGpI,EAAE,EAAEgR,EAAEhR,EAAE,EAAE,MAAM,IAAI,OAAOqS,EAAEvK,EAAEc,KAAKgL,GAAG,EAAElS,GAAG0G,EAAE,GAAGwJ,EAAE,MAAM,IAAI,QAAQS,EAAEvK,GAAGc,KAAKgL,GAAG,EAAElS,GAAGsP,GAAG,GAAGY,EAAE,MAAM,IAAI,MAAMS,GAAEjS,EAAAA,EAAAA,GAAEkE,EAAE5E,EAAEgC,GAAG4G,GAAEjK,EAAAA,EAAAA,GAAEiO,EAAE7I,GAAG,MAAM,IAAI,SAAS4O,GAAE9T,EAAAA,EAAAA,GAAE+F,EAAE5E,EAAEgC,GAAG4G,EAAE7E,EAAE,MAAM,IAAI,OAAO4O,EAAEvK,EAAEc,KAAKgL,GAAGlS,GAAG,MAAMqB,EAAE,IAAI5B,GAAE,CAAC4hB,OAAO1Q,EAAE2Q,IAAItjB,EAAEujB,GAAG3a,EAAE4a,IAAIpS,IAAI/N,EAAE0d,iBAAiB,CAACrY,EAAExJ,KAAKmjB,SAASR,eAAevQ,EAAEpS,KAAKmjB,SAASR,eAAephB,EAAE0J,GAAG9G,EAAEge,KAAKnY,KAAKgL,GAAG,EAAE,MAAMjC,EAAE5O,EAAEke,YAAYjgB,EAAExB,GAAG,OAAOZ,KAAKgjB,OAAOxjB,GAAG2E,EAAE4O,CAAC,CAACwR,QAAAA,CAASnkB,GAAG,OAAOJ,KAAKwkB,oBAAoBpkB,GAAGqM,KAAK,CAAC,CAAC+X,mBAAAA,CAAoBpkB,GAAG,MAAMZ,EAAE,IAAIilB,KAAK/d,sBAAsB9G,EAAE+G,oBAAoBjH,GAAGU,EAAET,GAAGD,EAAE,EAAE8B,EAAE9B,EAAE,EAAE,OAAO,IAAIE,GAAG,IAAIF,IAAIC,GAAG,IAAI6B,IAAI,IAAIhC,EAAE2B,IAAI,SAASvB,EAAE,KAAKJ,EAAE2B,IAAI,QAAQ3B,EAAE2B,IAAI,UAAUvB,EAAE,KAAKJ,EAAE2B,IAAI,QAAQK,EAAE,GAAGxB,KAAKmjB,SAASP,oBAAoBpjB,EAAE2B,IAAI,OAAOxB,GAAG,GAAGK,KAAKmjB,SAASP,oBAAoBpjB,EAAE2B,IAAI,WAAW3B,CAAC,CAACklB,uBAAAA,CAAuB9f,EAAyClF,EAAEC,EAAE6B,GAAE,IAA7CmjB,WAAWvkB,EAAEwkB,UAAUplB,EAAEqlB,WAAWjlB,GAAEgF,EAAQ,MAAMnF,EAAEC,EAAEU,EAAE4E,EAAEhF,KAAKmjB,SAASN,oBAAoBljB,GAAG,OAAOqB,EAAAA,GAAAA,IAAEgJ,KAAKzC,IAAI/H,EAAEI,GAAGH,EAAEuF,EAAEhF,KAAKojB,gBAAgB5hB,EAAE,CAACsjB,UAAAA,CAAW1kB,GAAE,IAAA2kB,EAAAC,EAAAC,EAAAC,EAAC,MAAM1lB,EAAEQ,KAAKijB,OAAOrjB,EAAEI,KAAKkjB,QAAQxjB,EAAc,QAAbqlB,EAAC/kB,KAAK0jB,eAAO,IAAAqB,OAAA,EAAZA,EAAcI,IAAIzlB,GAAGA,EAAE8U,QAAQhV,GAAGE,EAAEqkB,SAASnkB,GAAGQ,KAAIU,EAAAA,GAAAA,IAAmD,QAAlDkkB,EAAsB,QAAtBC,EAACvlB,EAAE0lB,2BAAmB,IAAAH,GAAY,QAAZA,EAArBA,EAAuBI,kBAAU,IAAAJ,OAAA,EAAjCA,EAAmCK,sBAAc,IAAAN,EAAAA,EAAEpkB,GAAAA,GAAE2kB,qBAAiC,QAAZL,EAAAllB,KAAK0jB,eAAO,IAAAwB,GAAZA,EAAcM,UAAUxlB,KAAK0jB,QAAQ1jB,KAAKylB,aAAarlB,GAAG,CAACqlB,YAAAA,CAAarlB,GAAE,IAAAslB,EAAC,MAAMzC,OAAOzjB,EAAE0jB,QAAQtjB,GAAGI,KAAKN,EAAEU,EAAE,GAAG,GAAGT,EAAEK,KAAK+iB,MAAM4C,QAAQnmB,EAAEI,EAAE,sBAAsBF,GAAG,OAAsB,QAAfgmB,EAAA/lB,EAAEgkB,WAAWvhB,GAAAA,WAAE,IAAAsjB,GAAfA,EAAiBE,oBAAmB,GAAIjmB,CAAC,CAACkmB,QAAAA,CAASzlB,GAAE,IAAA0lB,EAAC,MAAMtmB,EAAEQ,KAAK+iB,MAAMO,KAAKtjB,KAAK8kB,WAAW1kB,GAAGZ,EAAEumB,gBAA4B,QAAbD,EAAC9lB,KAAK0jB,eAAO,IAAAoC,OAAA,EAAZA,EAAcX,KAAK3lB,EAAEwmB,cAAc,EAAE,EAAE,EAAE,GAAGxmB,EAAEiB,MAAM,MAAM,CAACwlB,OAAAA,GAAUjmB,KAAKkmB,YAAYlmB,KAAK0jB,SAAQlkB,EAAAA,EAAAA,IAAEQ,KAAK0jB,SAAS,CAACxY,KAAAA,CAAM9K,EAAEZ,EAAEI,EAAEF,GAAO,IAALC,EAACyD,UAAA0H,OAAA,QAAAC,IAAA3H,UAAA,IAAAA,UAAA,GAAKpD,KAAKgjB,OAAO,CAAC,EAAE,MAAMxhB,EAAExB,KAAKwkB,oBAAoBhlB,GAAGC,EAAE+B,EAAEiL,KAAK,GAAG,IAAIhN,EAAE,OAAM,EAAG,MAAMuF,EAAEhF,KAAK0kB,wBAAwBtkB,EAAEV,EAAEE,EAAEH,GAAG,IAAIwC,EAAE,EAAEjB,EAAE,EAAEuB,EAAE,EAAE,OAAOlB,GAAEyV,OAAO1W,GAAGoB,EAAE6hB,IAAIjjB,IAAIwT,QAAQxT,IAAI,MAAMR,EAA4N,SAAWQ,EAAEZ,GAAG,GAAGA,EAAE,EAAE,OAAO,EAAE,MAAMI,EAAE,UAAUQ,GAAG,SAASA,EAAE,OAAO,IAAIZ,EAAEI,EAAE,EAAE,EAAEA,GAAG,UAAUQ,EAAE,EAAE,CAAC,CAA/T+C,CAAE/C,EAAEX,GAAGG,EAAEoB,IAAIuB,EAAEyH,KAAKzC,IAAIhF,EAAEN,GAAGA,EAAE,GAAGjB,EAAEpB,EAAE,MAAMF,EAAEE,EAAEoF,EAAE/C,GAAGjC,KAAKkkB,iBAAiB9jB,EAAEZ,EAAE,CAACyC,EAAEvC,GAAGsF,KAAKzC,EAAEyH,KAAKzC,IAAIhF,EAAEN,GAAGjC,KAAKijB,OAAOjjB,KAAKmjB,SAASL,oBAAoBvgB,GAAGvC,KAAKkjB,QAAgK,SAAW9iB,GAAG,OAAOA,EAAE,EAAE,EAAE,CAAC,CAApL8E,CAAEzF,GAAGuF,EAAEhF,KAAK6lB,SAASlmB,IAAG,CAAE,CAACwmB,MAAAA,GAAS,CAAC,QAAIpR,GAAO,E,gECAzkI,MAAMvT,WAAU7B,GAAAA,EAAEE,WAAAA,CAAYF,EAAED,GAAGI,MAAMH,EAAED,EAAE,IAAIF,GAAAA,EAAEI,GAAAA,EAAE,IAAI,kCAA8BH,GAAAA,GAAE,CAAC2mB,kBAAAA,GAAqB,OAAO1mB,EAAAA,GAAAA,IAAE,CAAC2mB,WAAW9jB,GAAAA,GAAE+jB,SAASlmB,GAAAA,IAAG,ECAkpB,IAAIoJ,GAAE,cAAc9D,GAAAA,EAAE,aAAIrC,GAAY,OAAOrD,KAAKumB,UAAU,CAAC,gBAAIC,GAAe,OAAOxmB,KAAKymB,WAAW3b,OAAO,CAAC,CAAC,sBAAI4b,GAAqB,OAAO1mB,KAAKe,KAAK0T,MAAMkS,iBAAiB,CAAC,oBAAIC,GAAmB,OAAO5mB,KAAKymB,WAAWI,MAAM/P,OAAOtX,GAAw+F,SAAWA,EAAEE,GAAG,MAAMU,GAAE+D,EAAAA,GAAAA,GAAEzE,EAAE8N,oBAAoB9N,EAAE6O,wBAAwB,QAAQ/O,EAAEokB,OAAOpkB,EAAEsnB,QAAQC,iBAAiB3mB,EAAE,CAA7lG+C,CAAEnD,KAAKe,KAAKvB,GAAG,CAACK,WAAAA,CAAYL,GAAGM,MAAMN,GAAGQ,KAAKuU,cAAa,EAAGvU,KAAKgnB,gBAAgB,IAAItZ,GAAAA,EAAE1N,KAAKymB,WAAW,IAAI/mB,GAAAA,EAAEM,KAAKumB,WAAW,KAAKvmB,KAAKinB,SAAS,CAACC,SAAS,CAACjiB,GAAAA,GAAEkiB,SAAS,YAAYnnB,KAAKonB,SAASniB,GAAAA,GAAEkiB,SAASnnB,KAAKqnB,sBAAqB,CAAE,CAACtnB,UAAAA,GAAaC,KAAKumB,WAAW,IAAI1hB,GAAE7E,KAAKsnB,UAAUtnB,KAAKC,WAAW,EAACL,EAAAA,EAAAA,IAAE,IAAII,KAAKe,KAAKwmB,gBAAgB/nB,IAAI,MAAME,EAAEM,KAAKumB,WAAW7mB,IAAIA,EAAEyjB,SAASZ,mBAAmB/iB,IAAIgC,EAAAA,KAAG/B,EAAAA,EAAAA,IAAE,KAAKO,KAAKwmB,aAAa,SAAAgB,EAAA,OAAmB,QAAnBA,EAAIxnB,KAAKumB,kBAAU,IAAAiB,OAAA,EAAfA,EAAiBvB,aAAWrmB,EAAAA,EAAAA,IAAE,IAAII,KAAK4mB,iBAAiB9U,IAAItS,GAAG,CAACA,EAAEgO,oBAAoBhO,EAAEgH,QAAQhH,EAAEiH,KAAKjH,EAAE+G,YAAY/G,EAAEkH,sBAAsBlH,EAAEmH,sBAAsB,IAAI3G,KAAKynB,cAAc,GAAGzmB,EAAAA,KAAI,CAAC0Q,OAAAA,GAAU1R,KAAKumB,YAAW5mB,EAAAA,EAAAA,IAAEK,KAAKumB,WAAW,CAACmB,UAAAA,GAAa,GAAG1nB,KAAKwmB,aAAa,CAACxmB,KAAK2nB,WAAWD,WAAWnmB,IAAG,IAAI,MAAM/B,KAAKQ,KAAK4mB,iBAAgB,KAAAgB,EAAC,GAAkB,QAAlBA,EAAG5nB,KAAKumB,kBAAU,IAAAqB,GAAfA,EAAiBrD,SAAS/kB,GAAG,YAAYQ,KAAKe,KAAK8mB,MAAMC,SAASC,6BAA6B,EAAC,CAACC,MAAAA,CAAOxoB,GAAE,IAAAyoB,EAAAC,EAAAC,EAAC,MAAMzoB,EAAEM,KAAKooB,eAAehoB,EAAEJ,KAAKqoB,iBAAiB1oB,EAAEH,EAAEqf,KAAKja,IAAA,IAAE0jB,KAAK9oB,GAAEoF,EAAA,OAAGpF,IAAIyF,GAAAA,GAAEkiB,WAAU,IAAInnB,KAAKwmB,eAAe9mB,EAAE8E,OAAOxE,KAAKuU,eAAe7U,EAAE6oB,YAAY,OAAO5oB,EAAEK,KAAKgnB,gBAAgB3jB,UAAyB,QAAhB4kB,EAACjoB,KAAKumB,kBAAU,IAAA0B,EAAAA,EAAEjoB,KAAKgnB,gBAAgB3jB,UAAUrD,KAAKgnB,gBAAgB7hB,QAAyC,QAAlC+iB,EAAC1oB,EAAEqf,KAAKhM,IAAA,IAAEyV,KAAK9oB,GAAEqT,EAAA,MAAG,YAAYrT,WAAE,IAAA0oB,OAAA,EAAjCA,EAAmCvE,aAAa,MAAM/jB,EAAEI,KAAK2nB,WAAWa,IAAIjnB,IAAG,GAAK,OAAD3B,QAAC,IAADA,IAAAA,EAAG6oB,SAAS,OAAOzoB,KAAKynB,cAAc,GAAG9nB,EAAE,MAAMF,EAAEO,KAAKe,KAAK8mB,MAAMC,SAASY,iBAAiB,GAAG,IAAI,MAAMlnB,KAAKxB,KAAK4mB,iBAAiB,KAAA+B,EAAC,IAAI3oB,KAAK4oB,qBAAqBlpB,EAAE8B,EAAE/B,IAAoB,QAAhBkpB,EAAC3oB,KAAKumB,kBAAU,IAAAoC,IAAfA,EAAiB/E,MAAM,SAAS,MAAMpkB,EAAEQ,KAAK6oB,yBAAyBrnB,EAAE9B,EAAEgF,QAAQtE,EAAE0oB,cAAclpB,EAAEF,EAAEF,GAAGY,EAAE2lB,gBAAgBpmB,EAAEwlB,KAAK/kB,EAAE2oB,OAAOC,MAAM,CAAC,OAAqB,QAAdb,EAAAnoB,KAAKqD,iBAAS,IAAA8kB,GAAdA,EAAgBlC,UAAUtmB,CAAC,CAACspB,eAAAA,CAAgBzpB,GAAG,MAAME,EAAEM,KAAKymB,YAAYyC,QAAQ9oB,EAAE+oB,KAAKxpB,GAAGH,EAAE,GAAGY,IAAIgpB,MAAMC,QAAQjpB,GAAGV,EAAE4pB,WAAWlpB,GAAGV,EAAE4B,OAAOlB,IAAIT,EAAE,GAAGypB,MAAMC,QAAQ1pB,GAAG,CAAC,MAAMH,EAAEG,EAAEmX,OAAOtX,IAAIE,EAAEod,SAAStd,IAAIE,EAAE6pB,QAAQ/pB,EAAE,MAAME,EAAEod,SAASnd,IAAID,EAAEyB,IAAIxB,EAAE,CAACipB,oBAAAA,CAAqBppB,EAAEE,EAAEU,GAAG,MAAMT,EAAEK,KAAKumB,WAAW,IAAI5mB,EAAE,OAAM,EAAG,MAAMC,EAAEI,KAAKe,KAAKyoB,eAAeC,yBAAyBhqB,EAAEE,EAAEuL,MAAM1L,EAAEkF,OAAOhF,EAAEU,EAAEJ,KAAK0mB,mBAAmB9mB,GAAG,OAAOH,GAAGE,EAAEkkB,MAAMjQ,QAAQpU,GAAGQ,KAAKe,KAAK8mB,MAAMC,SAAS4B,wBAAwBlqB,IAAIG,EAAEwmB,SAAS1mB,CAAC,CAACopB,wBAAAA,CAAyBrpB,EAAEE,GAAE,IAAAiqB,EAAC,MAAMhqB,EAAEK,KAAKumB,WAAW,IAAI5mB,EAAE,OAAOK,KAAKgnB,gBAAgB,MAAMpnB,EAAEI,KAAKgnB,gBAAgBvnB,EAAED,EAAE4P,6BAA6BxP,EAAEwG,YAAY3G,EAAEG,EAAEkE,gBAAe1B,EAAAA,EAAAA,GAAE4L,GAAExO,EAAEgO,oBAAoBhO,EAAE4P,8BAA8BxP,EAAEgE,KAAK,EAACxD,EAAAA,EAAAA,IAAEZ,EAAEkH,wBAAuBtG,EAAAA,EAAAA,IAAEZ,EAAEmH,sBAAsB/G,EAAEiE,eAAe,EAACzD,EAAAA,EAAAA,IAAEZ,EAAEgH,UAASpG,EAAAA,EAAAA,IAAEZ,EAAEoQ,wBAAwBhQ,EAAE+D,SAASnE,EAAE8N,eAAe,MAAM9L,EAA4b,SAAWhC,EAAEE,GAAG,MAAMU,GAAEgB,EAAAA,EAAAA,MAAI,OAAOgB,EAAAA,EAAAA,GAAEhC,EAAEZ,EAAEE,EAAE,CAAre0J,CAAE5J,EAAE0O,kBAAkBzO,GAAGG,EAAE8D,aAAalC,EAAE,MAAMR,EAAE,IAAIooB,MAAMpkB,EAAE,IAAIokB,MAAM,IAAI,IAAIhpB,EAAE,EAAEA,EAAET,EAAE6D,eAAepD,KAAI6B,EAAAA,EAAAA,IAAEwG,GAAE9I,EAAEskB,qBAAqB7jB,GAAGX,GAAGuB,EAAEsK,QAAQ7C,IAAGsK,GAAEpT,EAAEqkB,2BAA2B5jB,GAAGqI,GAAEkF,IAAG3I,EAAEsG,QAAQqC,IAAG,OAAO/N,EAAEqE,aAAajD,EAAEpB,EAAEmE,mBAAmBiB,EAAEpF,EAAEsE,cAAkC,QAArBylB,EAAA3pB,KAAKgZ,wBAAgB,IAAA2Q,OAAA,EAArBA,EAAAjnB,KAAA1C,SAA4BR,EAAE2P,SAAuY,SAAW3P,EAAEE,EAAEU,GAAG,GAAG,MAAMZ,EAAE,OAAO,EAAE,MAAMgO,oBAAoB7N,EAAEuO,kBAAkBtO,GAAGJ,EAAEC,GAAEqB,EAAAA,EAAAA,GAAEV,EAAET,IAAGmB,EAAAA,EAAAA,GAAEV,EAAER,GAAGJ,EAAE8G,SAAS9G,EAAE4I,OAAO,OAAO1I,EAAEkqB,YAAYnqB,EAAE,CAAlhBsP,CAAEvP,EAAEQ,KAAKe,KAAKrB,EAAE0kB,KAAK,EAAExkB,CAAC,CAAC,QAAImV,GAAO,MAAM,CAACsG,UAAUrb,KAAKymB,WAAWpjB,UAAUrD,KAAKumB,WAAWsD,gBAAgB7pB,KAAK4mB,iBAAiB,GAA+C,SAAS7T,GAAEvT,EAAEE,EAAEU,GAAG,MAAMT,GAAEuS,EAAAA,EAAAA,IAAE,GAAG,GAAG,IAAI,OAAO7Q,EAAAA,EAAAA,IAAEjB,EAAET,IAAGuF,EAAAA,EAAAA,IAAE9E,EAAEA,EAAET,IAAG4C,EAAAA,EAAAA,IAAEnC,EAAEA,EAAEZ,IAAG+C,EAAAA,EAAAA,IAAEnC,EAAEA,EAAEV,GAAGU,CAAC,EAA+QZ,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKwE,GAAEvC,UAAU,wBAAmB,IAAQzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKwE,GAAEvC,UAAU,oBAAe,IAAQzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKwE,GAAEvC,UAAU,YAAY,OAAMzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKwE,GAAEvC,UAAU,eAAe,OAAMzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKwE,GAAEvC,UAAU,qBAAqB,OAAMzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKwE,GAAEvC,UAAU,mBAAmB,OAAMzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKwE,GAAEvC,UAAU,gBAAW,IAAQzH,EAAAA,EAAAA,IAAE,EAACwF,EAAAA,EAAAA,OAAKwE,GAAEvC,UAAU,gBAAW,GAAQuC,IAAEhK,EAAAA,EAAAA,IAAE,EAACsD,EAAAA,EAAAA,GAAE,4CAA4C0G,IAAG,MAAMwE,IAAE5M,EAAAA,EAAAA,MAAIqH,IAAE7H,EAAAA,EAAAA,MAAI+M,IAAE/M,EAAAA,EAAAA,M,gBCAl+G,IAAImO,GAAE,cAAcvF,EAAAA,EAAE3J,WAAAA,CAAYL,GAAGM,MAAMN,GAAGQ,KAAK6G,KAAK,mBAAmB7G,KAAKQ,SAAS,KAAKR,KAAKiB,KAAK,KAAKjB,KAAK8pB,kBAAkB,KAAK9pB,KAAKgb,4BAA4B,KAAKhb,KAAK0B,cAAc,KAAK1B,KAAK+pB,oBAAoB,KAAK/pB,KAAK8a,aAAa,IAAI,CAAC,WAAI3a,GAAU,OAAOL,MAAMK,OAAO,CAAC,WAAIA,CAAQX,GAAGM,MAAMK,QAAQX,CAAC,CAAC,eAAIqB,GAAc,OAAOf,MAAMe,WAAW,CAAC,eAAIA,CAAYrB,GAAGM,MAAMe,YAAYrB,CAAC,CAAC,oBAAIwZ,GAAmB,OAAOhZ,KAAK8pB,iBAAiB,CAAC,oBAAI9Q,CAAiBxZ,GAAGQ,KAAKgqB,wBAAwBxqB,GAAGQ,KAAK8pB,kBAAkBtqB,CAAC,CAAC,gCAAI4X,GAA8B,IAAA6S,EAAC,OAAgB,QAAhBA,EAAOjqB,KAAKiB,YAAI,IAAAgpB,OAAA,EAATA,EAAW7S,4BAA4B,CAAC,iBAAI8S,GAAgB,OAAOlqB,KAAKkK,MAAM,CAACnK,UAAAA,GAAa,MAAMP,EAAEQ,KAAKe,KAAKf,KAAK+pB,oBAAoB,IAAIvX,GAAE,CAACzR,KAAKvB,EAAEwZ,iBAAiBA,KAAA,IAAA2Q,EAAAQ,EAAA,OAAyB,QAAzBR,EAAI3pB,KAAKgZ,wBAAgB,IAAA2Q,EAAAA,EAAW,QAAXQ,EAAEnqB,KAAKiB,YAAI,IAAAkpB,OAAA,EAATA,EAAW9N,gBAAe9H,aAAavU,KAAKkqB,gBAAgBlqB,KAAK8a,aAAa,IAAI5R,GAAAA,EAAElJ,KAAKe,KAAK0T,MAAMgF,aAAazZ,KAAK8a,aAAa/R,QAAQqhB,KAAI,EAAGpqB,KAAK8a,aAAa/R,QAAQC,MAAM,EAAEhJ,KAAKgb,6BAA4Brb,EAAAA,EAAAA,GAAE,IAAIK,KAAKQ,SAAS6a,UAAUjb,IAAI,MAAMV,EAAE,IAAImF,EAAE,CAAC+I,mBAAmBpO,EAAEoO,mBAAmBuB,SAAS/O,IAAIT,EAAEsG,SAAS,OAAOjG,KAAKC,WAAW,EAAC6C,EAAAA,EAAAA,IAAE,SAAAunB,EAAA,MAAK,CAACpnB,MAAMvD,EAAEuD,MAAMqnB,YAAWplB,EAAAA,EAAAA,yBAAY,QAAXmlB,EAAC3qB,EAAE4G,gBAAQ,IAAA+jB,OAAA,EAAVA,EAAY7a,iBAAiBxP,KAAKe,KAAKyO,oBAAmB1O,EAAAA,EAAAA,cAAM,CAAA8D,EAAwBjF,KAAI,IAA1BsD,MAAMzD,EAAE8qB,WAAWlqB,GAAEwE,EAAM5E,KAAKG,UAAUX,GAAGY,EAAEJ,KAAKuqB,wBAAwB7qB,IAAI,OAADC,QAAC,IAADA,OAAC,EAADA,EAAGsD,SAAQ,OAADtD,QAAC,IAADA,OAAC,EAADA,EAAG2qB,aAAYtqB,KAAKwqB,6BAA6B9qB,GAAGU,IAAGgJ,EAAAA,EAAAA,GAAEpJ,KAAKQ,SAASd,EAAE4G,SAASkJ,iBAAiB5P,EAAAA,EAAE6qB,UAAUzqB,SAASgB,EAAAA,OAAMhB,KAAK0qB,+BAA+BhrB,IAAIC,GAAG,CAACyW,qBAAqB1W,EAAE4B,OAAOA,KAAKtB,KAAK0W,cAAc/W,GAAGK,KAAKwqB,6BAA6B9qB,GAAGA,EAAEgS,cAAc1R,KAAK2qB,eAAe,IAAI7b,GAAE,CAAC/N,KAAKvB,EAAEU,iBAAiBF,KAAKuU,aAAavU,KAAKkqB,gBAAgBlqB,KAAKC,WAAW,EAAC6C,EAAAA,EAAAA,IAAE,IAAI9C,KAAKG,QAAQX,IAAI,MAAMY,EAAEJ,KAAKgb,4BAA4B,GAAG,MAAM5a,EAAE,OAAOZ,IAAIQ,KAAKgZ,iBAAiB,MAAM,MAAMtZ,EAAEU,EAAE0R,IAAItS,GAAGA,EAAE4W,sBAAsBU,OAAOtX,GAAGA,EAAEyD,OAAO+N,UAAUxR,EAAEQ,KAAKuqB,wBAAwB7qB,GAAGM,KAAKwqB,6BAA6B9qB,MAAKoD,EAAAA,EAAAA,IAAE,IAAItD,EAAEoO,mBAAmBpO,IAAG,IAAA+W,EAAiC,QAAhCA,EAAAvW,KAAKgb,mCAA2B,IAAAzE,GAAhCA,EAAkC3C,QAAQf,IAAA,IAAEuD,qBAAqBhW,GAAEyS,EAAA,OAAGzS,EAAEwN,mBAAmBpO,OAAKwT,EAAAA,GAAAA,IAAEhT,KAAK2N,KAAGpL,EAAAA,EAAAA,IAAE,IAAIvC,KAAKa,YAAY,KAAKb,KAAKgqB,wBAAwBhqB,KAAKgZ,mBAAmBhU,EAAAA,KAAI,CAAC0M,OAAAA,GAAU1R,KAAK0B,eAAcjC,EAAAA,EAAAA,IAAEO,KAAK0B,gBAAe0J,EAAAA,GAAAA,IAAEpL,MAAMA,KAAK2qB,gBAAenpB,EAAAA,EAAAA,IAAExB,KAAK2qB,gBAAgB,MAAMnrB,EAAEQ,KAAKgb,4BAA4B,MAAMxb,GAAGQ,KAAKwqB,6BAA6BhrB,EAAEsS,IAAItS,GAAGA,EAAE4W,sBAAsBpF,UAAU,CAAC0Z,8BAAAA,CAA+BlrB,GAAG,MAAMuB,KAAKX,GAAGJ,KAAK,MAAM,EAAC8C,EAAAA,EAAAA,IAAE,IAAI,CAAC1C,EAAEqU,MAAM/P,OAAOtE,EAAEwqB,MAAMnd,MAAMjO,EAAE2P,SAAS7I,SAAS9G,EAAE0O,kBAAkB1O,EAAEmH,oBAAoBnH,EAAEkH,sBAAsBlH,EAAEoH,SAAS,KAAK5G,KAAK6qB,2BAA2BzqB,EAAEZ,IAAIwB,EAAAA,IAAGhB,KAAK8qB,6BAA6BtrB,IAAG+C,EAAAA,EAAAA,IAAE,IAAI/C,EAAEyP,oBAAoB,KAAKjP,KAAK6qB,2BAA2BzqB,EAAEZ,GAAGA,EAAEyP,qBAAoB,IAAK,CAAC6b,4BAAAA,CAA6BtrB,GAAG,MAAMY,EAAEA,CAACV,EAAEE,KAAK,MAAMmB,KAAKpB,GAAGK,MAAMsG,SAAS7G,GAAGD,EAAE,GAAG,MAAMC,EAAE,OAAO,MAAM+B,GAAE2C,EAAAA,EAAAA,eAAE1E,EAAEE,EAAE6P,kBAAkB,GAAG,MAAMhO,EAAEupB,QAAQ,YAAYvpB,EAAEupB,QAAQloB,QAAQ,IAAIzC,EAAEV,EAAEE,IAAI,MAAMkD,EAAEtB,EAAEoY,SAAS,MAAM9W,KAAIvB,EAAAA,EAAAA,GAAE7B,EAAEE,EAAE6T,GAAE9T,EAAE6P,mBAAkBvK,EAAAA,EAAAA,IAAEwO,GAAE,CAAC3Q,EAAEK,EAAEL,EAAEvB,MAAM/B,EAAEyP,qBAAoB,KAAM,OAAOjP,KAAKe,KAAKiqB,kBAAkB7W,GAAG,mBAAmBZ,IAAA,IAAE0X,OAAOzrB,EAAEgQ,iBAAiB9P,GAAE6T,EAAA,OAAGnT,EAAEZ,EAAEE,IAAG,CAAC,qBAAMwrB,CAAgB1rB,SAASkO,EAAAA,GAAAA,IAAE1N,KAAK,CAACgD,iBAAiBxD,EAAEiD,gBAAgBjD,GAAGA,EAAE8c,MAAM,aAAa,CAACA,KAAAA,CAAM9c,GAAG,OAAOkO,EAAAA,GAAAA,IAAE1N,KAAK,CAACgD,iBAAiBxD,EAAEiD,gBAAgBjD,GAAGA,EAAE8c,MAAM,WAAW,CAACiO,uBAAAA,CAAwB/qB,GAAGQ,KAAK+pB,oBAAoBd,gBAAgB,CAACE,KAAK3pB,GAAG,CAACgrB,4BAAAA,CAA6BhrB,GAAGQ,KAAK+pB,oBAAoBd,gBAAgB,CAACC,QAAQ1pB,GAAG,CAACqrB,0BAAAA,CAA2BrrB,EAAEI,GAAG,MAAMD,EAAEC,EAAE4N,oBAAoB/N,EAAEG,EAAEsO,kBAAkB1M,GAAEY,EAAAA,EAAAA,IAAEhB,EAAAA,EAAAA,MAAIzB,GAAGmD,EAAE,CAACwD,SAAS3G,EAAEkK,sBAAsB,KAAKJ,iBAAiBjI,EAAEqH,mBAAkBzI,EAAAA,EAAAA,IAAER,EAAEgH,SAASwB,OAAO3I,EAAEsK,oBAAoB,KAAKJ,gBAAevH,EAAAA,EAAAA,IAAEhB,EAAAA,EAAAA,MAAI3B,GAAGqJ,gBAAgB,OAAMpJ,EAAAA,EAAAA,IAAEF,EAAEQ,KAAK8a,aAAahY,EAAEtD,GAAGwK,KAAK3C,IAAI7H,EAAE,IAAII,EAAE2O,yBAAyB3O,EAAEoP,6BAA4BpO,EAAAA,EAAAA,GAAEY,EAAE7B,GAAG,KAAK6B,CAAC,CAACwoB,uBAAAA,CAAwBxqB,GAAG,GAAG,MAAMA,EAAE,IAAI,MAAMY,KAAKJ,KAAKe,KAAKG,MAAM2lB,MAAMzmB,IAAIJ,KAAKiB,MAAMb,aAAauN,KAAIvN,EAAEF,iBAAiB8Y,iBAAiB,KAAK,CAAC,QAAIjE,GAAO,IAAGvV,EAAAA,EAAAA,IAAE,EAAC6B,EAAAA,EAAAA,IAAE,CAACmG,UAAS,KAAMuH,GAAE9H,UAAU,YAAO,IAAQzH,EAAAA,EAAAA,IAAE,EAAC6B,EAAAA,EAAAA,IAAE,CAACqJ,eAAc,EAAGvD,aAAY,KAAM4H,GAAE9H,UAAU,gBAAW,IAAQzH,EAAAA,EAAAA,IAAE,EAAC6B,EAAAA,EAAAA,OAAK0N,GAAE9H,UAAU,YAAO,IAAQzH,EAAAA,EAAAA,IAAE,EAAC6B,EAAAA,EAAAA,OAAK0N,GAAE9H,UAAU,yBAAoB,IAAQzH,EAAAA,EAAAA,IAAE,EAAC6B,EAAAA,EAAAA,OAAK0N,GAAE9H,UAAU,mBAAmB,OAAMzH,EAAAA,EAAAA,IAAE,EAAC6B,EAAAA,EAAAA,OAAK0N,GAAE9H,UAAU,+BAA+B,OAAMzH,EAAAA,EAAAA,IAAE,EAAC6B,EAAAA,EAAAA,OAAK0N,GAAE9H,UAAU,mCAA8B,IAAQzH,EAAAA,EAAAA,IAAE,EAAC6B,EAAAA,EAAAA,OAAK0N,GAAE9H,UAAU,qBAAgB,IAAQzH,EAAAA,EAAAA,IAAE,EAAC6B,EAAAA,EAAAA,OAAK0N,GAAE9H,UAAU,sBAAiB,IAAQzH,EAAAA,EAAAA,IAAE,EAAC6B,EAAAA,EAAAA,OAAK0N,GAAE9H,UAAU,2BAAsB,GAAQ8H,IAAEvP,EAAAA,EAAAA,IAAE,EAACyC,EAAAA,EAAAA,GAAE,kDAAkD8M,IAAG,MAAM5F,GAAE4F,GAAE0E,IAAEvB,EAAAA,EAAAA,K,+RCAviM,MAAM9R,GAAEijB,EAAAA,EAAAA,GAAI,OAAO,OAAO,UAAU1jB,EAAE,QAAQD,EAAE,EAAE8B,EAAE,KAAKS,EAAE,KAAKrB,EAAE,KAAKoE,EAAE,IAAIxF,EAAEwK,KAAK8I,KAAIrT,EAAAA,EAAAA,IAAE,KAAKG,EAAEoK,KAAK8I,KAAIrT,EAAAA,EAAAA,IAAE,IAAIqB,EAAE,IAAIO,EAAE,GAAGqE,EAAE,EAAE8D,EAAE,EAAEjH,EAAE,EAAEvB,EAAE,GAAGmC,EAAE,KAAK2L,EAAE,GAAGpB,EAAE,GAAGtC,EAAE,KAAKvG,EAAE,EAAE/B,EAAE,EAAEmC,EAAE,GAAGgG,EAAE,EAAED,EAAE,EAAE5I,EAAE,KAAKhB,EAAE,E","sources":["../node_modules/@arcgis/core/views/3d/analysis/AnalysisView3D.js","../node_modules/@arcgis/core/views/interactive/AnalysisToolBase.js","../node_modules/@arcgis/core/views/analysis/analysisViewUtils.js","../node_modules/@arcgis/core/chunks/Viewshed.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/LocalFromScreenSpace.glsl.js","../node_modules/@arcgis/core/analysis/Viewshed.js","../node_modules/@arcgis/core/analysis/featureReferenceUtils.js","../node_modules/@arcgis/core/views/interactive/ToolIntersector.js","../node_modules/@arcgis/core/views/analysis/AnalysisView.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/TriangleMaterial.js","../node_modules/@arcgis/core/views/support/geometry2dUtils.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedConfiguration.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/viewshedToolUtils.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedComputedData.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedFieldOfViewManipulation.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedArrowManipulator.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedScaleOrientManipulation.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/viewshedToolManipulatorUtils.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedSubTool.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedTool.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedShapeVisualElement.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedSubVisualization.js","../node_modules/@arcgis/core/views/3d/analysis/Viewshed/ViewshedVisualization.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ViewshedFaceCamera.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ViewshedShadowMap.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ViewshedTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Viewshed.js","../node_modules/@arcgis/core/views/3d/analysis/ViewshedAnalysisView3D.js","../node_modules/@arcgis/core/views/3d/analysis/Slice/sliceToolConfig.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as s}from\"tslib\";import\"../../../core/Logger.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import\"../../../core/Error.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import{AnalysisView as o}from\"../../analysis/AnalysisView.js\";let e=class extends o{};e=s([r(\"esri.views.3d.analysis.AnalysisView3D\")],e);export{e as AnalysisView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{watch as s,syncAndInitial as t}from\"../../core/reactiveUtils.js\";import\"../../core/Logger.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import\"../../core/Error.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import{InteractiveToolBase as i}from\"./InteractiveToolBase.js\";let o=class extends i{constructor(e){super(e)}initialize(){this.addHandles(s(()=>this.analysisViewData.visible,e=>this.visible=e,t))}deactivate(){this.onDeactivate(),this.created||this.analysis.clear()}resetCreated(){this._set(\"created\",!1)}};o=e([r(\"esri.views.interactive.AnalysisToolBase\")],o);export{o as AnalysisToolBase};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{createTask as o}from\"../../core/asyncUtils.js\";import{handlesGroup as t}from\"../../core/handleUtils.js\";import{removeMaybe as e}from\"../../core/maybe.js\";import{throwIfAborted as n,isAbortError as i,onAbort as a}from\"../../core/promiseUtils.js\";import{watch as r,syncAndInitial as s,on as l,whenOnce as c}from\"../../core/reactiveUtils.js\";function u(t,n){t.interactive=!0;const{tool:i,view:r}=t;r.activeTool=i;let s=a(n,()=>{r.activeTool===i&&(r.activeTool=null)});return o(async o=>{await c(()=>!t.tool?.active,o),s=e(s)},n)}function m(o,t){return r(()=>o.interactive,()=>p(o,t),s)}function p(o,t){o.interactive?v(o,t):f(o)}function v(o,t){f(o);const{view:e,analysis:n}=o,i=new t({view:e,analysis:n,analysisViewData:o});return o.tool=i,e.tools.add(i),i}function f(o){const{view:t,tool:e}=o;null!=e&&(t.tools.remove(e),o.tool=null)}function y(e,a){const r=e.userOperation,s=o(async o=>{if(r){const t=r.promise.catch(()=>{});r?.abort(),await t,n(o)}const s=u(e,{signal:o}),c=a?.shouldRejectOnCancel??(()=>!0),m=t([l(()=>e.tool,\"cancel\",()=>{c()&&s.abort()})]),{tool:p}=e;try{p&&(p.resetCreated(),a?.onToolActivated?.(p)),await s.promise,n(o)}catch(v){if(o.aborted||!i(v)||c())throw v}finally{m?.remove()}},{signal:a?.abortOptions?.signal});return e.userOperation=s,s.promise.finally(()=>{e.userOperation===s&&(e.userOperation=null)})}async function d(o,t){const e=o.analysis.clone();return await y(o,{abortOptions:t?.placementOptions,onToolActivated:t?.onToolActivated,shouldRejectOnCancel:()=>{const{analysis:t}=o;return!t.valid||t.equals(e)}}),{}}export{u as activateAnalysisViewTool,m as connectAnalysisViewToTool,f as removeAnalysisViewTool,y as startExclusiveInteractiveOperation,d as startPlaceOperation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{invertOrIdentity as e}from\"../core/libs/gl-matrix-2/math/mat4.js\";import{IDENTITY as i,create as o}from\"../core/libs/gl-matrix-2/factories/mat4f64.js\";import{ScreenSpacePass as t}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{ReadDepth as s}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js\";import{PiUtils as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js\";import{LocalFromScreenSpacePassParameters as r,localFromScreenSpace as n}from\"../views/3d/webgl-engine/core/shaderLibrary/util/LocalFromScreenSpace.glsl.js\";import{Float2PassUniform as d}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{Float3PassUniform as l}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{FloatPassUniform as h}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{FloatsPassUniform as v}from\"../views/3d/webgl-engine/core/shaderModules/FloatsPassUniform.js\";import{glsl as c}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{IntegerPassUniform as w}from\"../views/3d/webgl-engine/core/shaderModules/IntegerPassUniform.js\";import{Matrix4BindUniform as f}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4BindUniform.js\";import{Matrix4sPassUniform as p}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4sPassUniform.js\";import{Texture2DBindUniform as m}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DBindUniform.js\";import{Texture2DPassUniform as g}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{ShaderBuilder as u}from\"../views/webgl/ShaderBuilder.js\";class x extends r{constructor(){super(...arguments),this.shadowMap={depthTexture:null,nearFar:[1,100],numActiveFaces:1,atlasRegions:[[0,0,1,1]]},this.targetVector=[1,0,0],this.upVector=[0,0,1],this.fovs=[45,45],this.headingAndTilt=[0,0],this.observerOffset=[0,0,0],this.projectionMatrices=i.flat(),this.viewMatrices=i.flat(),this.volumeOffset=0}}function V(){const i=new u,o=i.fragment;return i.include(t),i.include(n),o.include(s),o.include(a),o.uniforms.add(new m(\"depthTexture\",e=>e.depth?.attachment),new f(\"inverseProjectionMatrix\",e=>e.camera.inverseProjectionMatrix),new f(\"inverseViewNormalMatrix\",({camera:i})=>e(b,i.viewInverseTransposeMatrix)),new l(\"viewshedObserverOffset\",e=>e.observerOffset),new l(\"viewshedTargetVector\",e=>e.targetVector),new l(\"viewshedUpVector\",e=>e.upVector),new d(\"viewshedFOVs\",e=>e.fovs),new d(\"viewshedHeadingAndTilt\",e=>e.headingAndTilt),new d(\"viewshedNearFar\",e=>e.shadowMap.nearFar??[1,100]),new h(\"viewshedVolumeOffset\",e=>e.volumeOffset),new g(\"viewshedShadowMap\",e=>e.shadowMap.depthTexture),new p(\"viewshedProjectionMatrices\",e=>e.projectionMatrices,6),new p(\"viewshedViewMatrices\",e=>e.viewMatrices,6),new w(\"viewshedNumFaces\",e=>e.shadowMap.numActiveFaces),new v(\"viewshedAtlasRegions\",e=>e.shadowMap.atlasRegions.flat(),24),new g(\"normalMap\",e=>e.normals)),o.constants.add(\"visibleColor\",\"vec4\",[0,1,0,.5]),o.constants.add(\"occludedColor\",\"vec4\",[1,0,0,.5]),o.code.add(c`vec2 getViewshedUv(vec4 worldPosition, int face) {\nmat4 viewshedMatrix = viewshedProjectionMatrices[face];\nvec4 viewshedUv4 = viewshedMatrix * worldPosition;\nvec3 viewshedUv = viewshedUv4.xyz / viewshedUv4.w;\nreturn viewshedUv.xy;\n}\nfloat viewshedDepthToFloat(float depth) {\nreturn (depth - viewshedNearFar[0]) / (viewshedNearFar[1] - viewshedNearFar[0]);\n}\nfloat getOrthographicDepthToViewshed(vec4 worldPosition, int face) {\nmat4 viewshedViewMatrix = viewshedViewMatrices[face];\nvec4 viewshedUv4 = viewshedViewMatrix * worldPosition;\nvec3 viewshedUv = viewshedUv4.xyz / viewshedUv4.w;\nfloat depth = -viewshedUv.z;\nreturn viewshedDepthToFloat(depth);\n}\nfloat viewshedReadShadowMapDepth(sampler2D _viewshedShadowmap, ivec2 uv) {\nreturn texelFetch(_viewshedShadowmap, uv, 0).r;\n}\nfloat viewshedFilterShadow(sampler2D _viewshedShadowmap, vec2 uv) {\nvec2 uvScaled = uv * vec2(textureSize(_viewshedShadowmap, 0));\nvec2 st    = fract(uvScaled);\nivec2 base = ivec2(uvScaled);\nfloat s00 = viewshedReadShadowMapDepth( _viewshedShadowmap, ivec2(base.x,     base.y    ));\nfloat s10 = viewshedReadShadowMapDepth( _viewshedShadowmap, ivec2(base.x + 1, base.y    ));\nfloat s11 = viewshedReadShadowMapDepth( _viewshedShadowmap, ivec2(base.x + 1, base.y + 1));\nfloat s01 = viewshedReadShadowMapDepth( _viewshedShadowmap, ivec2(base.x,     base.y + 1));\nreturn mix(mix(s00, s10, st.x), mix(s01, s11, st.x), st.y);\n}\nfloat viewshedTextureAtlasLookup(sampler2D _viewshedShadowmap, vec2 uv, vec4 atlasRegion) {\nvec2 atlasScale = atlasRegion.zw - atlasRegion.xy;\nvec2 uvAtlas = fract(uv) * atlasScale + atlasRegion.xy;\nreturn viewshedFilterShadow(_viewshedShadowmap, uvAtlas);\n}\nfloat getDepthFromShadowMap(vec2 uv, int face) {\nint index = 4 * face;\nfloat umin = viewshedAtlasRegions[index];\nfloat umax = viewshedAtlasRegions[index + 1];\nfloat vmin = viewshedAtlasRegions[index + 2];\nfloat vmax = viewshedAtlasRegions[index + 3];\nvec4 atlasRegion = vec4(umin, vmin, umax, vmax);\nreturn viewshedTextureAtlasLookup(viewshedShadowMap, uv, atlasRegion);\n}\nstruct ViewshedPoint {\nint face;\nvec2 uv;\nbool isWithin;\nfloat orthographicDepth;\n};\nmat3 rotationMatrix(vec3 axis, float angle)\n{\nfloat s = sin(angle);\nfloat c = cos(angle);\nfloat oc = 1.0 - c;\nreturn mat3(\noc * axis.xxz * axis.xyx + vec3(c, axis.zy) * vec3(1., -s, s),\noc * axis.xyy * axis.yyz + vec3(axis.z, c, axis.x) * vec3(s, 1., -s),\noc * axis.zyz * axis.xzz + vec3(axis.yx, c) * vec3(-s, s, 1.)\n);\n}\nfloat distanceToPlane(vec3 position, vec3 normal) {\nreturn dot(position, normal);\n}\nbool outsideViewshed(float distance) {\nreturn distance > -viewshedVolumeOffset;\n}\nbool isWithinViewshed(vec3 position) {\nfloat positionLength = length(position - viewshedObserverOffset);\nfloat farSphereDistance = positionLength - viewshedNearFar[1];\nif (outsideViewshed(farSphereDistance)) { return false; }\nfloat nearSphereDistance = viewshedNearFar[0] - positionLength;\nif (outsideViewshed(nearSphereDistance)) { return false; }\nvec3 westVector = normalize(cross(viewshedUpVector, viewshedTargetVector));\nbool leftOfTarget = distanceToPlane(position, westVector) > 0.0;\nif (viewshedFOVs[0] < TWO_PI) {\nfloat horAngle = viewshedFOVs[0] / 2.0;\nhorAngle = leftOfTarget ? horAngle : -horAngle;\nvec3 sideVector = viewshedTargetVector * rotationMatrix(viewshedUpVector, horAngle);\nbool inFront = distanceToPlane(position, sideVector) > 0.0;\nif (inFront) {\nvec3 sideNormal = cross(viewshedUpVector, sideVector) * (leftOfTarget ? 1. : -1.);\nfloat sideDistance = distanceToPlane(position, normalize(sideNormal));\nif (outsideViewshed(sideDistance)) { return false; }\n} else if (viewshedFOVs[0] < PI) { return false; }\n}\nif (viewshedFOVs[1] < PI) {\nfloat t = dot(viewshedUpVector, position);\nvec3 nProjVector = normalize(position - t * viewshedUpVector);\nfloat heading = acos(clamp(dot(normalize(viewshedTargetVector), nProjVector), -1.0, 1.0));\nheading = leftOfTarget ? heading : -heading;\nbool aboveTarget = distanceToPlane(position, viewshedUpVector) > 0.0;\nfloat verFOV = viewshedFOVs[1] / 2.0;\nverFOV = aboveTarget ? -verFOV : verFOV;\nmat3 rotateByHeading = rotationMatrix(viewshedUpVector, heading);\nvec3 sideVector = viewshedTargetVector * rotationMatrix(westVector, verFOV) * rotateByHeading;\nvec3 leftVector = westVector * rotateByHeading;\nvec3 sideNormal = cross(sideVector, leftVector) * (aboveTarget ? 1. : -1.);\nfloat sideDistance = distanceToPlane(position, normalize(sideNormal));\nif (outsideViewshed(sideDistance)) { return false; }\n}\nreturn true;\n}\nbool getViewshedPoint(vec4 localPosition, out ViewshedPoint point) {\nfor(int i=0; i < viewshedNumFaces; i++) {\nvec2 viewshedUv = getViewshedUv(localPosition, i);\nif (viewshedUv.x > 0. && viewshedUv.x < 1. && viewshedUv.y > 0. && viewshedUv.y < 1.) {\nfloat orthoDepth = getOrthographicDepthToViewshed(localPosition, i);\nif (orthoDepth >= 0.) {\nbool isWithin = isWithinViewshed(localPosition.xyz);\npoint = ViewshedPoint(i, viewshedUv, isWithin, orthoDepth);\nreturn true;\n}\n}\n}\nreturn false;\n}\nfloat normalCosAngle(float linearDepth, vec3 localPosition) {\nvec4 normal4 = texture(normalMap, uv);\nvec3 normalN = normalize(normal4.xyz * 2.0 - 1.0);\nvec3 normal =  normalize((inverseViewNormalMatrix * vec4(normalN, 1.0)).xyz);\nvec3 viewingDir = normalize(localPosition);\nreturn dot(normal, viewingDir);\n}`),o.main.add(c`float depth = depthFromTexture(depthTexture, uv);\nif (depth >= 1.0 || depth <= 0.0) {\nreturn;\n}\nfloat linearDepth = linearizeDepth(depth);\nvec4 localPosition = reconstructLocalPosition(gl_FragCoord.xy, linearDepth);\nViewshedPoint point;\nbool foundFace = getViewshedPoint(localPosition, point);\nif (!foundFace || !point.isWithin) {\nreturn;\n}\nfloat viewshedDepth = getDepthFromShadowMap(point.uv, point.face);\nfloat distance = point.orthographicDepth;\nbool visible = distance < viewshedDepth;\nfragColor = visible ? visibleColor : occludedColor;\nfloat cosAngle = normalCosAngle(linearDepth, localPosition.xyz);\nfloat threshold = -0.01;\nif (cosAngle > threshold) {\nfragColor = occludedColor;\n}`),i}const b=o(),M=Object.freeze(Object.defineProperty({__proto__:null,ViewshedPassParameters:x,build:V},Symbol.toStringTag,{value:\"Module\"}));export{x as V,M as a,V as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{translate as r,invertOrIdentity as e}from\"../../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as o}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{zeros as i}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{CameraSpace as t}from\"./CameraSpace.glsl.js\";import{glsl as a}from\"../../shaderModules/glsl.js\";import{Matrix4PassUniform as s}from\"../../shaderModules/Matrix4PassUniform.js\";import{NoParameters as c}from\"../../../../../webgl/NoParameters.js\";class m extends c{constructor(){super(...arguments),this.localOrigin=i()}}function l(i){i.include(t),i.fragment.uniforms.add(new s(\"inverseViewMatrix\",(i,t)=>{const a=r(o(),t.camera.viewMatrix,i.localOrigin);return e(a,a)})).code.add(a`vec4 reconstructLocalPosition(vec2 coord, float linearDepth) {\nvec4 cameraSpace = vec4(reconstructPosition(coord, linearDepth), 1.0);\nreturn inverseViewMatrix * cameraSpace;\n}`)}export{m as LocalFromScreenSpacePassParameters,l as localFromScreenSpace};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{featureReferenceEquals as r,featureReferenceProperty as o}from\"./featureReferenceUtils.js\";import{Clonable as i}from\"../core/Clonable.js\";import{cyclicalDegrees as t}from\"../core/Cyclical.js\";import{JSONSupportMixin as s}from\"../core/JSONSupport.js\";import{equalsMaybe as a}from\"../core/maybe.js\";import{property as l}from\"../core/accessorSupport/decorators/property.js\";import{cast as n}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as p}from\"../core/accessorSupport/decorators/subclass.js\";import{ensureNumber as m}from\"../core/accessorSupport/ensureType.js\";import c from\"../geometry/Point.js\";let u=class extends(s(i)){constructor(e){super(e),this.observer=null,this.farDistance=1e3,this.heading=0,this.tilt=90,this.horizontalFieldOfView=45,this.verticalFieldOfView=45,this.feature=null}get valid(){return null!=this.observer&&this.farDistance>0}equals(e){return a(this.observer,e.observer)&&this.farDistance===e.farDistance&&this.heading===e.heading&&this.tilt===e.tilt&&this.horizontalFieldOfView===e.horizontalFieldOfView&&this.verticalFieldOfView===e.verticalFieldOfView&&r(this.feature,e.feature)}};e([l({type:c,json:{write:{isRequired:!0}}})],u.prototype,\"observer\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0},json:{write:{isRequired:!0}}})],u.prototype,\"farDistance\",void 0),e([l({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),n(e=>t.normalize(m(e),void 0,!0))],u.prototype,\"heading\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],u.prototype,\"tilt\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:360},json:{write:{isRequired:!0}}})],u.prototype,\"horizontalFieldOfView\",void 0),e([l({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],u.prototype,\"verticalFieldOfView\",void 0),e([l(o)],u.prototype,\"feature\",void 0),e([l({readOnly:!0,json:{read:!1}})],u.prototype,\"valid\",null),u=e([p(\"esri.analysis.Viewshed\")],u);export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{a as e,b as t,c as r}from\"../chunks/vec32.js\";import{create as n}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as l,fromPoints as o}from\"../geometry/support/ray.js\";import{toGraphic as u,hasLod as i,getIntersectedFeatureBSRadius as a}from\"../views/3d/webgl-engine/lib/intersectorUtilsConversions.js\";function c(e,t){return s(e)===s(t)}function s(e){if(null==e)return null;const t=null!=e.layer?e.layer.id:\"\";let r=null;return r=null!=e.objectId?e.objectId:null!=e.layer&&\"objectIdField\"in e.layer&&null!=e.layer.objectIdField&&null!=e.attributes?e.attributes[e.layer.objectIdField]:e.uid,null==r?null:`o-${t}-${r}`}const d={json:{write:{writer:b,target:{\"feature.layerId\":{type:[Number,String],isRequired:!0},\"feature.objectId\":{type:[Number,String],isRequired:!0}}},origins:{\"web-scene\":{read:f}}},clonable:\"reference\"};function b(e,t){null!=e?.layer?.objectIdField&&null!=e.attributes&&(t.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})}function f(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:\"ObjectId\"},attributes:{ObjectId:e.objectId}}}function I(l,i,a,c){const{sceneIntersectionHelper:d}=l,{observer:b,observerFeatureId:f,targetFeatureId:I,target:m}=a;if(null==f&&null==I)return;c||(c=e=>e),e(g,b,m);const p=t(g),S=1;r(g,b,g,S/p);const v=o(g,m,y);i.options.store=2,d.intersectToolIntersectorRay(v,i);let F=null,N=null,R=null,w=null;for(const e of i.results.all){const t=u(e,l);if(null==t||null==e.distanceInRenderSpace)continue;const r=s(t);null!=r&&(null!=f&&r===f&&(F??=c(j(e,l,p)),e.distanceInRenderSpace-S<F&&(R=e)),null!=I&&r===I&&(N??=c(j(e,l,p)),null==w&&e.distanceInRenderSpace-S<p&&p-e.distanceInRenderSpace+S<N&&(w=e)))}const{observerAdjusted:T,targetAdjusted:h}=a;R?.getIntersectionPoint(T)?a.observerSurfaceNormal=R.getTransformedNormal(n()):a.observerSurfaceNormal=null,w?.getIntersectionPoint(h)?a.targetSurfaceNormal=w.getTransformedNormal(n()):a.targetSurfaceNormal=null}function j(e,t,r){if(i(e)){const n=a(e,t);if(null!=n)return Math.min(n*m,r)}return 1e-5*r}const m=.05,y=l(),g=n();export{c as featureReferenceEquals,d as featureReferenceProperty,s as getFeatureId,I as updatePointsFromFeatureReference};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{Intersector as e}from\"../3d/webgl-engine/lib/Intersector.js\";function o(o){const n=new e(o);return n.options.store=0,n.options.excludeLabels=!0,n}export{o as newToolIntersector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{EventedAccessor as t}from\"../../core/Evented.js\";import{makeHandle as r}from\"../../core/handleUtils.js\";import{EsriPromiseMixin as o}from\"../../core/Promise.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";let n=class extends(o(t)){constructor(){super(...arguments),this.parent=null,this._userInteractive=!1,this._interactiveViewModelCount=0}get interactive(){return this._interactiveViewModelCount>0||this._userInteractive}set interactive(e){this._userInteractive=e}get updating(){return!1}get visible(){return(this.parent?.visible&&!this.parent.suspended)??!0}set visible(e){this._overrideIfSome(\"visible\",e)}forceInteractive(){return this._interactiveViewModelCount++,r(()=>this._interactiveViewModelCount--)}};e([i({constructOnly:!0})],n.prototype,\"parent\",void 0),e([i({constructOnly:!0})],n.prototype,\"view\",void 0),e([i({type:Boolean})],n.prototype,\"interactive\",null),e([i()],n.prototype,\"_userInteractive\",void 0),e([i({readOnly:!0})],n.prototype,\"updating\",null),e([i()],n.prototype,\"visible\",null),e([i()],n.prototype,\"_interactiveViewModelCount\",void 0),n=e([s(\"esri.views.analysis.AnalysisView\")],n);export{n as AnalysisView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{Material as r}from\"../lib/Material.js\";import{intersectTriangleGeometry as e,intersectTriangleGeometry2d as t}from\"../lib/RayIntersections.js\";class i extends r{intersect(r,t,i,s,n,o){return e(r,i,s,n,void 0,o)}intersectDraped(r,e,i,s){return t(i[0],i[1],r,s)}}export{i as TriangleMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{floatEqualAbsolute as t}from\"../../core/mathUtils.js\";import{subtract as n,scaleAndAdd as r,add as e,length as s,dot as o,squaredLength as c,scale as u,distance as i,copy as f}from\"../../core/libs/gl-matrix-2/math/vec2.js\";import{create as a,clone as p}from\"../../core/libs/gl-matrix-2/factories/vec2f64.js\";function m(t,n){return t[0]*n[1]-t[1]*n[0]}function h(t,n,r){const e=(n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0]);return Math.abs(e)/i(n,r)}function l(t,n,r){const e=o(r,n)/c(r);return u(t,r,e)}function y(t,r,s,o,c=s){return n(q,o,s),n(k,r,c),l(w,k,q),e(t,c,w)}function b(t,e,s,u){n(q,u,s),n(k,e,s);const i=o(q,k)/c(q);return i>0?r(t,s,q,i):f(t,s)}function d(t,e,o,c){n(q,e,o);const u=c/s(q);return r(t,o,q,u)}function j(n,r){return y(k,r,n.start,n.end),t(k[0],r[0])&&t(k[1],r[1])?[p(r)]:[]}function x(n,r,e){return d(k,e,n,r),t(k[0],e[0])&&t(k[1],e[1])?[p(e)]:[]}function M(t,e){const s=t.start,o=t.end,c=e.start,u=e.end,i=n(q,o,s),f=n(U,u,c),a=m(i,f);if(Math.abs(a)<=v)return[];const p=n(k,s,c),h=m(f,p)/a,l=m(i,p)/a;if(h>=0){if(l>=0||1===e.type)return[r(w,s,i,h)]}else if(1===t.type&&(l>=0||1===e.type))return[r(w,s,i,h)];return[]}function g(t,e,s){const u=[],i=n(q,t.end,t.start),f=n(U,t.start,e),a=c(i),p=2*o(i,f),m=p*p-4*a*(c(f)-s*s);if(0===m){const n=-p/(2*a);(1===t.type||n>=0)&&u.push(r(w,t.start,i,n))}else if(m>0){const n=Math.sqrt(m),e=(-p+n)/(2*a);(1===t.type||e>=0)&&u.push(r(w,t.start,i,e));const s=(-p-n)/(2*a);(1===t.type||s>=0)&&u.push(r(k,t.start,i,s))}return u}const v=1e-6,q=a(),U=a(),k=a(),w=a();export{m as cross,x as intersectCircleAndPoint,j as intersectLineAndPoint,M as intersectLineAndRay,g as intersectLineLikeAndCircle,h as pointToLineDistance,l as projectPoint,d as projectPointToCircle,y as projectPointToLine,b as projectPointToRay};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import{deg2rad as i}from\"../../../../core/mathUtils.js\";const t=2,r=4,s=i(2),o=1.5;class c{constructor(){this.collisionRadius=5,this.fovUnfocusedArcWidth=r,this.fovFocusedArcWidth=t*this.fovUnfocusedArcWidth,this.scaleOrientSize=90,this.scaleOrientHandleRadius=.025,this.scaleOrientMinDistance=1,this.scaleOrientArrowTipLength=.3,this.scaleOrientArrowTipFocusMultiplier=t/1.5,this.observerSize=5,this.hoverTimeoutMilliseconds=1e3,this.viewAngleThreshold=10}getFovArcWidth(e){return e?this.fovFocusedArcWidth:this.fovUnfocusedArcWidth}getScaleOrientArrowTipLength(e){return this.scaleOrientArrowTipLength*(e?this.scaleOrientArrowTipFocusMultiplier:1)}}const n=new c;class h{constructor(){this.frameWidthNotSelected=.3,this.frameWidthSelected=1,this.frameColor=new e([255,255,255,.99]),this.observerPointConfiguration={size:6,pixelSnappingEnabled:!1,primitive:\"circle\",elevationInfo:{mode:\"absolute-height\",offset:0},outlineSize:0,color:e.toUnitRGBA(new e([3,252,111,1]))},this.shapeMaterialParameters={color:[.33,.33,.33,.25],renderOccluded:1,cullFace:2,writeDepth:!1}}}const l=new h;export{s as arcAnglePerSegment,o as creationVerticalOffset,n as viewshedToolManipulatorConfiguration,l as viewshedVisualizationConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{rad2deg as r,clamp as e}from\"../../../../core/mathUtils.js\";import{fromRotation as t}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as n}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{t as o,n as a,d as s,p as i,f as c,a as m,g as p,h as d}from\"../../../../chunks/vec32.js\";import{create as l}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getNormal as f,fromPositionAndNormal as u,create as g}from\"../../../../geometry/support/plane.js\";import{viewshedToolManipulatorConfiguration as h}from\"./ViewshedConfiguration.js\";import{calculateTranslateRotateFromBases as j,calculateInputRotationTransform as b}from\"../../interactive/manipulatorUtils.js\";import{screenToRenderPlane as x}from\"../../interactive/editingTools/dragEventPipeline3D.js\";import{headingTiltToDirectionUp as v}from\"../../support/cameraUtils.js\";import{createDirectionUp as S}from\"../../support/cameraUtilsInternal.js\";function R({tiltedUpVector:r,rightVector:e,observerRenderSpace:t},n){const o=j(r,e,t,n);return o[12]=0,o[13]=0,o[14]=0,o}function U(t,n,o,i){const j=l(),v=f(o.plane),S=E(n,v);let R;if(Math.abs(S)>h.viewAngleThreshold)R=t.next(x(n,o.plane));else{const r=u(i.targetRenderSpace,o.basis1,g()),s=a(D,o.basis1),f=a(M,o.basis2);R=t.next(x(n,r)).next(r=>{const t=r=>{const t=c(m(V,r,o.origin),f),n=Math.acos(e(t/i.farDistanceRenderSpace,-1,1)),a=Math.sin(n)*i.farDistanceRenderSpace;return p(l(),o.origin,p(l(),d(V,s,a),d(w,f,t)))},n=t(r.renderStart),a=t(r.renderEnd);return{...r,renderStart:n,renderEnd:a}})}return R.next(e=>{\"start\"===e.action&&s(j,e.renderStart);const t=r(b(j,e.renderEnd,o.origin,v));return{...e,deltaAngle:t}})}function E(e,t){const n=D;e.renderCoordsHelper.toRenderCoords(e.camera.position,n);const o=v(e,n,e.camera.heading,e.camera.tilt,S()).direction;return r(i(o,t))-90}function C(r,e,n,a){return t(A,n,a),o(r,e,A)}const D=l(),M=l(),V=l(),w=l(),A=n();export{R as getViewshedRotationMatrix,C as rotateBy,U as screenToCircleAngle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../../core/Accessor.js\";import{deg2rad as r}from\"../../../../core/mathUtils.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{create as s}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{a as n,n as p,i as a,u as c,g as l,h}from\"../../../../chunks/vec32.js\";import{create as d,fromValues as u,fromArray as f}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import v from\"../../../../geometry/Point.js\";import{rotateBy as g}from\"./viewshedToolUtils.js\";var S;let m=S=class extends t{constructor(e){super(e),this.observerRenderSpaceOverride=null,this.needUpdateByFeature=!1}get observer(){return this.viewshed.observer??new v}get effectiveObserverRenderSpace(){return this.observerRenderSpaceOverride??this.observerRenderSpace}get effectiveObserver(){return this.renderSpaceToPoint(this.effectiveObserverRenderSpace,this.observer.spatialReference)}get effectiveTargetRenderSpace(){return this._computeTargetRenderSpace(this.effectiveObserverRenderSpace)}get farDistance(){return this.viewshed.farDistance}get farDistanceRenderSpace(){return this.farDistance/this.metersPerUnit}get heading(){return this.viewshed.heading}get tilt(){return this.viewshed.tilt}get feature(){return this.viewshed.feature}get tiltParallelToSurface(){return this.tilt-90}get horizontalFieldOfView(){return this.viewshed.horizontalFieldOfView}get verticalFieldOfView(){return this.viewshed.verticalFieldOfView}get observerRenderSpace(){return this._pointToRenderSpace(this.observer,d())}get target(){const e=this.targetRenderSpace;return this.renderSpaceToPoint(e,this.observer.spatialReference)}get targetRenderSpace(){return this._computeTargetRenderSpace(this.observerRenderSpace)}get targetDirection(){const e=n(d(),this.targetRenderSpace,this.observerRenderSpace);return p(e,e)}get tiltedUpVector(){const e=g(d(),this.upVector,-r(this.tiltParallelToSurface),this.leftVector);return p(e,e)}get _basis(){return this.renderCoordsHelper.basisMatrixAtPosition(this.observerRenderSpace,s())}get upVector(){const e=this._basis;return u(e[8],e[9],e[10])}get northVector(){const e=this._basis;return u(e[4],e[5],e[6])}get leftVector(){const e=this.upVector,t=g(d(),this.northVector,-r(this.heading),e);return a(t,e,t)}get rightVector(){return c(d(),this.leftVector)}clone(){return new S({renderCoordsHelper:this.renderCoordsHelper,viewshed:this.viewshed.clone()})}get valid(){return this.viewshed.valid}get metersPerUnit(){return this.renderCoordsHelper.spatialReference.metersPerUnit}pointOnSphere(e,t,o){const{observerRenderSpace:i,targetRenderSpace:s}=this,p=n(R,s,i);return g(p,p,-r(t),this.leftVector),g(p,p,-r(e),this.tiltedUpVector),l(o,p,i)}cornerPoints(e){const t=this.horizontalFieldOfView/2,r=this.verticalFieldOfView/2;this.pointOnSphere(-t,r,e.topLeft),this.pointOnSphere(t,r,e.topRight),this.pointOnSphere(-t,-r,e.bottomLeft),this.pointOnSphere(t,-r,e.bottomRight)}arcCentersPoints(e){const t=this.horizontalFieldOfView/2,r=this.verticalFieldOfView/2;this.pointOnSphere(0,r,e.top),this.pointOnSphere(0,-r,e.bottom),this.pointOnSphere(-t,0,e.left),this.pointOnSphere(t,0,e.right)}parallelCenterPoints(e){const t=this.observerRenderSpace,o=this.farDistanceRenderSpace*Math.sin(r(this.verticalFieldOfView/2)),i=h(R,this.tiltedUpVector,o);l(e.top,t,i),n(e.bottom,t,i)}renderSpaceToPoint(e,t){const r=R;return this.renderCoordsHelper.fromRenderCoords(e,r,t),new v(r[0],r[1],r[2],t)}_pointToRenderSpace(e,t){const r=f(e.toArray());return this.renderCoordsHelper.toRenderCoords(r,e.spatialReference,t),t}_computeTargetRenderSpace(e){const{leftVector:t,northVector:o,upVector:i}=this,s=this.farDistanceRenderSpace,n=d();return h(n,o,s),g(n,n,-r(this.heading),i),g(n,n,-r(this.tiltParallelToSurface),t),l(n,e,n),n}};e([o()],m.prototype,\"renderCoordsHelper\",void 0),e([o()],m.prototype,\"viewshed\",void 0),e([o()],m.prototype,\"observerRenderSpaceOverride\",void 0),e([o()],m.prototype,\"needUpdateByFeature\",void 0),e([o()],m.prototype,\"observer\",null),e([o()],m.prototype,\"effectiveObserverRenderSpace\",null),e([o()],m.prototype,\"effectiveObserver\",null),e([o()],m.prototype,\"effectiveTargetRenderSpace\",null),e([o()],m.prototype,\"farDistance\",null),e([o()],m.prototype,\"farDistanceRenderSpace\",null),e([o()],m.prototype,\"heading\",null),e([o()],m.prototype,\"tilt\",null),e([o()],m.prototype,\"feature\",null),e([o()],m.prototype,\"tiltParallelToSurface\",null),e([o()],m.prototype,\"horizontalFieldOfView\",null),e([o()],m.prototype,\"verticalFieldOfView\",null),e([o()],m.prototype,\"observerRenderSpace\",null),e([o()],m.prototype,\"target\",null),e([o()],m.prototype,\"targetRenderSpace\",null),e([o()],m.prototype,\"targetDirection\",null),e([o()],m.prototype,\"tiltedUpVector\",null),e([o()],m.prototype,\"_basis\",null),e([o()],m.prototype,\"upVector\",null),e([o()],m.prototype,\"northVector\",null),e([o()],m.prototype,\"leftVector\",null),e([o()],m.prototype,\"rightVector\",null),e([o()],m.prototype,\"valid\",null),e([o()],m.prototype,\"metersPerUnit\",null),m=S=e([i(\"esri.views.3d.analysis.Viewshed.ViewshedComputedData\")],m);const R=d();export{m as ViewshedComputedData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport t from\"../../../../Color.js\";import r from\"../../../../core/Handles.js\";import{handlesGroup as e}from\"../../../../core/handleUtils.js\";import{deg2rad as a,clamp as i}from\"../../../../core/mathUtils.js\";import{destroyMaybe as o}from\"../../../../core/maybe.js\";import{watch as n,initial as s}from\"../../../../core/reactiveUtils.js\";import{fromYRotation as l,fromXRotation as c,fromScaling as u,fromZRotation as p,fromRotation as m,multiply as h}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as f}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{j as d,a as _,h as g}from\"../../../../chunks/vec32.js\";import{create as M,fromValues as b}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{f as v}from\"../../../../chunks/boundedPlane.js\";import{viewshedToolManipulatorConfiguration as j}from\"./ViewshedConfiguration.js\";import{getViewshedRotationMatrix as w,screenToCircleAngle as A}from\"./viewshedToolUtils.js\";import{Manipulator3D as V}from\"../../interactive/Manipulator3D.js\";import{RenderObject as O}from\"../../interactive/RenderObject.js\";import{InteractiveManipulation as E}from\"../../interactive/editingTools/manipulations/InteractiveManipulation.js\";import{createPolylineGeometry as y}from\"../../webgl-engine/lib/GeometryUtil.js\";import{assert as R}from\"../../webgl-engine/lib/Util.js\";import{RibbonLineMaterial as T}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";import{createManipulatorDragEventPipeline as U}from\"../../../interactive/dragEventPipeline.js\";class x extends E{constructor(t){super(),this._handles=new r,this._tool=t.tool,this._view=t.view,this._focusedArcMaterial=this._createArcMaterial(!0),this._unfocusedArcMaterial=this._createArcMaterial(!1),this._createManipulators(),this.forEachManipulator(t=>this._tool.manipulators.add(t))}destroy(){this._handles=o(this._handles),this.forEachManipulator(t=>{this._tool.manipulators.remove(t),t.destroy()}),this._tool=null,this._view=null,this._manipulators=null}createDragPipeline(t,r){const a=Object.values(this._manipulators);return e(a.map(({manipulator:e,side:a})=>U(e,(e,i,o,n,s)=>{const l=G(a,r),c=i.next(t=>({...t,manipulatorType:2,side:a})),u=A(c,this._view,l,r);t(e,u,o)})))}updateManipulatorsTransform(t){t.arcCentersPoints(H),this._forEachManipulatorInfo(r=>this._updateArcManipulatorTransform(r,t,H[r.side]))}updateManipulatorVisuals(t){this._forEachManipulatorInfo(r=>this._updateArcManipulatorVisuals(r,t))}_updateArcManipulatorVisuals({manipulator:t,side:r},e){const a=[];if(null!=e){const[i,o]=P(r,e,this._unfocusedArcMaterial);a.push(new O(i,1),new O(i.instantiate({material:this._focusedArcMaterial}),2)),t.collisionType={type:\"line\",paths:[o]}}t.renderObjects=a,t.radius=j.collisionRadius}_updateArcManipulatorTransform({manipulator:t,side:r},e,i){const o=e.horizontalFieldOfView,n=a(e.verticalFieldOfView/2),s=a(o/2),_=I(r);t.renderLocation=i;const g=f(),M=t=>{h(g,t,g)};M(l(k,a(-90))),_||M(c(k,n));const b=e.farDistanceRenderSpace;let v,j;M(u(k,d(L,b,b,b))),M(p(k,F(r))),M(w(e,k)),_?(v=s,j=e.tiltedUpVector):(j=e.rightVector,v=n),v*=\"right\"===r||\"bottom\"===r?-1:1;const A=m(k,v,j);null!=A&&M(A),t.modelTransform=g}_createManipulators(){const t=this._createArcManipulator(\"left\"),r=this._createArcManipulator(\"right\"),e=this._createArcManipulator(\"top\"),a=this._createArcManipulator(\"bottom\");this._manipulators={left:t,right:r,top:e,bottom:a};[[a.manipulator,e.manipulator],[t.manipulator,r.manipulator]].forEach(([t,r])=>{t.metadata={pairedManipulator:r},r.metadata={pairedManipulator:t}})}_createArcManipulator(t){const r=new V({view:this._view,autoScaleRenderObjects:!1,worldSized:!0}),e={manipulator:r,side:t};return this._updateArcManipulatorVisuals(e),this._handles.add(r.events.on([\"focus-changed\",\"grab-changed\"],t=>{const e=r.metadata?.pairedManipulator;null!=e&&(e.hovering!==r.hovering&&(e.hovering=r.hovering),e.grabbing!==r.grabbing&&(e.grabbing=r.grabbing))})),e}_createArcMaterial(r){const e=j.getFovArcWidth(r),a=new T({renderOccluded:4,isDecoration:!0,width:e},this._view.state.isGlobal);return this._handles.add(n(()=>t.toUnitRGBA(this._view.effectiveTheme.accentColor),t=>a.setParameters({color:t}),s)),a}forEachManipulator(t){Object.values(this._manipulators).forEach(({manipulator:r})=>t(r,2))}_forEachManipulatorInfo(t){Object.values(this._manipulators).forEach(r=>t(r))}get test(){return{manipulators:this._manipulators}}}function P(t,r,e){const{horizontalFieldOfView:o,verticalFieldOfView:n}=r,s=I(t),l=a(i((s?n:o)/2,0,15)),c=S(-l/2,l/2,s?1:Math.max(Math.sin(a(90-n/2)),.1));return[y(e,c),c]}function S(t,r,e,a=10){R(a>1,\"createArcPolylineGeometry() needs at least 2 for numVertices\");const i=r-t;if(i<=0||e<=0){const t=.01;return[b(0,0,t),b(0,0,-t)]}const o=[],n=i/a;for(let s=0;s<a;s++){let i=t+s*n;s===a-1&&(i=r);const l=Math.cos(i)*e,c=Math.sin(i)*e,u=b(l-e,0,c);o.push(u)}return o}function D(t){switch(t){case\"left\":return 0;case\"bottom\":return 1;case\"right\":return 2;case\"top\":return 3}}function F(t){return D(t)*z}function I(t){return\"left\"===t||\"right\"===t}function C(t){return\"left\"===t?\"right\":\"right\"===t?\"left\":\"top\"===t?\"bottom\":\"top\"}function G(t,{observerRenderSpace:r,targetRenderSpace:e,tiltedUpVector:a,rightVector:i,farDistanceRenderSpace:o}){const n=_(L,e,r),s=I(t)?i:a,l=g(B,s,o);return v(r,n,l)}const z=Math.PI/2,k=f(),L=M(),B=M(),H={top:M(),bottom:M(),left:M(),right:M()};export{x as ViewshedFieldOfViewManipulation,S as createArcPolylineVertices,C as flipSide,I as isSideHorizontal,F as sideToRad};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import t from\"../../../../core/Handles.js\";import{watch as r,initial as o}from\"../../../../core/reactiveUtils.js\";import{fromTranslation as i,mul as s,fromXRotation as a,fromYRotation as n}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as l}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{t as c}from\"../../../../chunks/vec32.js\";import{fromValues as m}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{displayFocusMultiplier as p}from\"../Slice/sliceToolConfig.js\";import{viewshedToolManipulatorConfiguration as f}from\"./ViewshedConfiguration.js\";import{Manipulator3D as h}from\"../../interactive/Manipulator3D.js\";import{RenderObject as d}from\"../../interactive/RenderObject.js\";import{createTubeGeometry as u,createExtrudedTriangle as j}from\"../../webgl-engine/lib/GeometryUtil.js\";import{ColorMaterial as g}from\"../../webgl-engine/materials/ColorMaterial.js\";class w extends h{constructor(e,r){super({view:e,autoScaleRenderObjects:!1,worldSized:!1,radius:f.collisionRadius}),this._handles=new t,this._setupManipulatorVisual(r)}destroy(){this._handles.remove(),super.destroy()}_setupManipulatorVisual(e){const t=this._createMaterial(),r=1,o=[m(0,0,0),m(0,0,r)],h=u(t,o,e,16,!1),j=u(t,o,e*p,16,!1),g=b(!1,t,e),w=b(!0,t,e),M=l();i(M,o[o.length-1]),s(M,M,a(v,Math.PI/2)),s(M,M,n(v,Math.PI/2)),g.transformation=M,w.transformation=M,this.renderObjects=[new d(h,1),new d(j,2),new d(g,1),new d(w,2)];const _=m(0,f.getScaleOrientArrowTipLength(!0),0),O=c(_,_,M),x=[...o,O];this.collisionType={type:\"line\",paths:[x]}}_createMaterial(){const t=new g({cullFace:2,renderOccluded:4,isDecoration:!0});return this._handles.add(r(()=>e.toUnitRGBA(this.view.effectiveTheme.accentColor),e=>t.setParameters({color:e}),o)),t}}function b(e,t,r){const o=f.getScaleOrientArrowTipLength(e);let i=2*r;e&&(i*=p);const s=o/2;return j(t,o,s,s,i,0)}const v=l();export{w as ViewshedArrowManipulator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Handles.js\";import{deg2rad as i}from\"../../../../core/mathUtils.js\";import{fromScaling as e,fromTranslation as a,fromZRotation as r,mul as o,fromYRotation as n,multiply as s}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as l}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{j as m,h as c,g as p,a as u,H as h,f as d,c as f,n as _}from\"../../../../chunks/vec32.js\";import{create as g}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{f as v}from\"../../../../chunks/boundedPlane.js\";import{fromValues as T}from\"../../../../geometry/support/ray.js\";import{displayFocusMultiplier as w}from\"../Slice/sliceToolConfig.js\";import{ViewshedArrowManipulator as j}from\"./ViewshedArrowManipulator.js\";import{viewshedToolManipulatorConfiguration as D}from\"./ViewshedConfiguration.js\";import{getViewshedRotationMatrix as H,screenToCircleAngle as x}from\"./viewshedToolUtils.js\";import{screenToRenderRay as S}from\"../../interactive/editingTools/dragEventPipeline3D.js\";import{discRadiusSmall as M,discRadius as P}from\"../../interactive/editingTools/manipulations/config.js\";import{InteractiveManipulation as R}from\"../../interactive/editingTools/manipulations/InteractiveManipulation.js\";import{createManipulatorDragEventPipeline as y,dragAtLocation as b}from\"../../../interactive/dragEventPipeline.js\";class V extends R{constructor(i){super(),this._handles=new t,this._tool=i.tool,this._view=i.view;const e=D.scaleOrientHandleRadius;this._manipulatorHeading=new j(this._view,e),this._manipulatorTilt=new j(this._view,e),this._manipulatorDistance=new j(this._view,e),this.forEachManipulator(t=>this._tool.manipulators.add(t))}destroy(){this._handles.destroy(),this.forEachManipulator(t=>{this._tool.manipulators.remove(t),t.destroy()}),this._manipulatorHeading=null,this._manipulatorTilt=null,this._manipulatorDistance=null,this._tool=null,this._view=null}createHeadingDragPipeline(t,e){return y(this._manipulatorHeading,(a,r,o,n,s)=>{const l=this._view,{tiltParallelToSurface:m,farDistanceRenderSpace:d,upVector:f,observerRenderSpace:_,targetRenderSpace:g,rightVector:T}=e,w=Math.sin(i(m))*d,j=p(L,_,c(O,f,w)),D=u(O,g,j),H=c(k,T,h(D)),S=v(j,D,H),M=x(r,l,S,e).next(t=>({...t,manipulatorType:3}));t(a,M,o)})}createTiltDragPipeline(t,i){return y(this._manipulatorTilt,(e,a,r,o,n)=>{const{observerRenderSpace:s,farDistanceRenderSpace:l,upVector:m,targetDirection:p}=i,u=d(p,m),h=f(L,p,m,-u);c(h,_(h,h),l);const g=c(O,m,l),T=v(s,h,g),w=x(a,this._view,T,i).next(t=>({...t,manipulatorType:3}));t(e,w,r)})}createDistanceDragPipeline(t,i){return y(this._manipulatorDistance,(e,a,r,o,n)=>{const s=T(i.observerRenderSpace,i.targetDirection),l=a.next(b(this._view,e.location)).next(S(this._view,s)).next(t=>({...t,manipulatorType:2}));t(e,l,r)})}updateManipulators(t){const{targetRenderSpace:i}=t;this._manipulatorHeading.renderLocation=i,this._manipulatorTilt.renderLocation=i,this._manipulatorDistance.renderLocation=i;const p=l(),u=t=>{s(p,t,p)},h=D.scaleOrientSize*(M/P);u(e(E,m(L,h,h,h))),u(H(t,E));const d=D.scaleOrientHandleRadius*w*h,f=c(L,t.targetDirection,d);u(a(E,f));const _=r(E,-C);o(_,_,n(I,-C)),this._manipulatorHeading.modelTransform=o(l(),p,_);const g=n(E,C);o(g,g,r(I,Math.PI)),this._manipulatorTilt.modelTransform=s(l(),p,g),this._manipulatorDistance.modelTransform=p}forEachManipulator(t){t(this._manipulatorHeading,3),t(this._manipulatorTilt,3),t(this._manipulatorDistance,2)}}const E=l(),I=l(),L=g(),O=g(),k=g(),C=Math.PI/2;export{V as ViewshedScaleOrientManipulation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as r}from\"tslib\";import e from\"../../../../Color.js\";import o from\"../../../../core/Handles.js\";import{watch as t,initial as i}from\"../../../../core/reactiveUtils.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import\"../../../../core/Warning.js\";import\"../../../../core/Error.js\";import{viewshedToolManipulatorConfiguration as c}from\"./ViewshedConfiguration.js\";import{Manipulator3D as m}from\"../../interactive/Manipulator3D.js\";import{createManipulatorMaterial as a}from\"../../interactive/manipulatorUtils.js\";import{RenderObject as n}from\"../../interactive/RenderObject.js\";import{createSphereGeometry as p}from\"../../webgl-engine/lib/GeometryUtil.js\";class l extends m{constructor(r,e){super({view:r,autoScaleRenderObjects:!1,worldSized:!1,radius:c.observerSize,interactive:!1}),this._handles=new o;const s=a(this._color);this.renderObjects=[new n(p(s,c.observerSize,32,32))],e.manipulators.add(this),this._handles.add([t(()=>this._color,r=>{s.setParameters({color:r})},i)])}destroy(){this._handles.remove(),super.destroy()}get _color(){return e.toUnitRGBA(this.view.effectiveTheme.accentColor)}}r([s()],l.prototype,\"_color\",null);export{l as ViewshedObserverManipulator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import i from\"../../../../core/Accessor.js\";import{isSome as t}from\"../../../../core/arrayUtils.js\";import{createTask as a}from\"../../../../core/asyncUtils.js\";import{cyclicalDegrees as o,Cyclical as n}from\"../../../../core/Cyclical.js\";import{handlesGroup as s}from\"../../../../core/handleUtils.js\";import\"../../../../core/has.js\";import{deg2rad as r}from\"../../../../core/mathUtils.js\";import{abortMaybe as l,destroyMaybe as p}from\"../../../../core/maybe.js\";import{after as h,throwIfAborted as u}from\"../../../../core/promiseUtils.js\";import{watch as d,syncAndInitial as c,initial as v}from\"../../../../core/reactiveUtils.js\";import{property as m}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/Logger.js\";import{subclass as f}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{a as g,H as M,f as b}from\"../../../../chunks/vec32.js\";import{create as _}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{tryProjectWithZConversion as w}from\"../../../../geometry/projectionUtils.js\";import{viewingModeFromString as O}from\"../../../ViewingMode.js\";import{viewshedToolManipulatorConfiguration as V}from\"./ViewshedConfiguration.js\";import{ViewshedFieldOfViewManipulation as y,isSideHorizontal as D,flipSide as T}from\"./ViewshedFieldOfViewManipulation.js\";import{ViewshedScaleOrientManipulation as H}from\"./ViewshedScaleOrientManipulation.js\";import{ViewshedObserverManipulator as j}from\"./viewshedToolManipulatorUtils.js\";import{discRadiusSmall as C}from\"../../interactive/editingTools/manipulations/config.js\";import{MoveManipulation as F}from\"../../interactive/editingTools/manipulations/MoveManipulation.js\";import{resetProperties as S,dragManipulatedObject as P}from\"../../../interactive/dragEventPipeline.js\";import{EditGeometryOperations as k}from\"../../../interactive/editGeometry/EditGeometryOperations.js\";const E=Symbol(\"dragHandles\"),x=Symbol(\"hideManipulators\"),A=Symbol(\"hideFoVManipulators\"),z=Symbol(\"hideObserverManipulator\");let U=class extends i{constructor(e){super(e),this._moveManipulation=null,this._observerManipulator=null,this._fieldOfViewManipulation=null,this._scaleOrientManipulation=null,this._forceHoveringTask=null,this._forceHoveringTestPromise=null,this._grabbing=!1,this.viewshedComputedData=null}initialize(){this._moveManipulation=this._createMoveManipulation(),this._fieldOfViewManipulation=new y({view:this.view,tool:this.parentTool}),this._scaleOrientManipulation=new H({view:this.view,tool:this.parentTool}),this._observerManipulator=new j(this.view,this.parentTool),this.addHandles([d(()=>this.viewshedComputedData?.observerRenderSpace,e=>{null!=e&&(this._moveManipulation.renderLocation=e,this._observerManipulator.renderLocation=e)},c),d(()=>this.viewshedComputedData?.heading,e=>{e&&(this._moveManipulation.angle=r(90-e))},v),d(()=>{const{viewshedComputedData:e}=this;return{viewshedComputedData:e,observer:e?.observer}},({viewshedComputedData:e,observer:i},a)=>{this._grabbing&&i!==a?.observer||(this.removeHandles(E),e?.valid&&this.addHandles([this._buildObserverDragPipeline(e),this._buildFOVDragPipeline(e),this._buildScaleOrientDragPipeline(e)].filter(t),E))},v),d(()=>{const e=this.viewshedComputedData;return e?.valid?{viewshedCompData:e,target:e.targetRenderSpace,hFOV:e.horizontalFieldOfView,vFOV:e.verticalFieldOfView}:null},e=>{null!=e&&this._fieldOfViewManipulation.updateManipulatorsTransform(e.viewshedCompData)},v),d(()=>{const e=this.viewshedComputedData;return e?.valid?{viewshedCompData:e,hFOV:e.horizontalFieldOfView,vFOV:e.verticalFieldOfView,tilt:e.tilt}:null},e=>{null!=e&&this._fieldOfViewManipulation.updateManipulatorVisuals(e.viewshedCompData)},v),d(()=>{const e=this.analysisViewData.visible&&(this.viewshedComputedData?.valid??!1),i=this.parentTool.selectedViewshedComputedData===this.viewshedComputedData;return{fovManipulationAvailable:e&&!this.parentTool.isPlacingTarget,nonFOVManipulationAvailable:e&&(!this.parentTool.creating||i)}},({fovManipulationAvailable:e,nonFOVManipulationAvailable:i})=>{this._moveManipulation.available=i,this._scaleOrientManipulation.available=i,this._observerManipulator.available=i,this._fieldOfViewManipulation.available=e},v),d(()=>{const e=this.viewshedComputedData;if(!e?.valid)return null;const{observer:i,target:t,verticalFieldOfView:a,horizontalFieldOfView:o}=e;return{viewshedCompData:e,observer:i,target:t,verticalFieldOfView:a,horizontalFieldOfView:o}},e=>{null!=e&&this._scaleOrientManipulation.updateManipulators(e.viewshedCompData)},v)]);const e=e=>{const i=this.analysisViewData;this.addHandles([e.events.on(\"focus-changed\",()=>{const e=this._someManipulatorHovering();e&&this.parentTool.subToolHandles.forEach(({subTool:e})=>{e._resetHoveringTask()}),this._someManipulatorSelected()||e||(this._forceHoveringTask=a(async e=>{await(this._forceHoveringTestPromise??h(V.hoverTimeoutMilliseconds,e)),u(e),this._forceHoveringTask=null,this._updateManipulatorVisibility()}))}),e.events.on(\"grab-changed\",t=>{this._grabbing=\"start\"===t.action,\"end\"===t.action&&i.tool?.updateInteractionVisualsVisibility(),this.parentTool.subToolHandles.forEach(({subTool:e})=>{e!==this&&e._setInteractive(!this._grabbing)}),this._setInteractive(i=>i.hasManipulator(e)||!this._grabbing)}),e.events.on(\"drag\",e=>{\"start\"===e.action&&i.tool?.updateInteractionVisualsVisibility()})])};this._forEachManipulator(e)}destroy(){this._forceHoveringTask=l(this._forceHoveringTask),this._moveManipulation=p(this._moveManipulation),this._fieldOfViewManipulation=p(this._fieldOfViewManipulation),this._scaleOrientManipulation=p(this._scaleOrientManipulation),this.parentTool.manipulators.remove(this._observerManipulator),this._observerManipulator=p(this._observerManipulator)}get viewshed(){return this.viewshedComputedData?.viewshed}get grabbing(){return this._grabbing}get observer(){return this.viewshed?.observer}set observer(e){const i=this.viewshed;null!=i&&(i.observer=e)}get discManipulator(){return this._moveManipulation.xyManipulation.discManipulator}get moveInteractionState(){const{dragging:e,grabbing:i}=this._moveManipulation;return{dragging:e,grabbing:i}}get scaleOrientInteractionState(){const{dragging:e,grabbing:i}=this._scaleOrientManipulation;return{dragging:e,grabbing:i}}_setInteractive(e){const i=\"boolean\"==typeof e;this._forEachManipulation(t=>t.interactive=i?e:e(t))}onManipulatorSelectionChanged(){if(this._updateManipulatorVisibility(),!this._someManipulatorSelected()){this.analysisViewData.selectedViewshed===this.viewshed&&(this.analysisViewData.selectedViewshed=null),this._resetHoveringTask()}}hasManipulator(e){let i=!1;return this._forEachManipulator(t=>{i=i||t===e}),i}_someManipulatorSelected(){return this._moveManipulation.selected||this._fieldOfViewManipulation.selected||this._scaleOrientManipulation.selected}_someManipulatorHovering(){return this._moveManipulation.hovering||this._fieldOfViewManipulation.hovering||this._scaleOrientManipulation.hovering}_createMoveManipulation(){return new F({view:this.view,tool:this.parentTool,snapToScene:!1,xyAvailable:!0,xyAxisAvailable:!0,zAvailable:!0,radius:C})}_buildObserverDragPipeline(e){const i={mode:\"absolute-height\",offset:0},t=e.observer;if(null==t)return null;const a=this.view.spatialReference;return this._moveManipulation.createDragPipeline((e,i,o,n,s)=>{n=n.next(S(this,[\"observer\"]));const r=w(t,a);if(null==r)return{steps:o,cancel:n};const l=k.fromGeometry(r,O(this.view.viewingMode));return{steps:o.next(P({operations:l})).next(e=>(this.observer=l.data.geometry,e)),cancel:n}},i,a,void 0)}_buildFOVDragPipeline(e){let i=0,t=0;return this._fieldOfViewManipulation.createDragPipeline((a,n,s)=>{if(null==e)return{steps:n,cancel:s};const r=e.viewshed;let l=null;s=s.next(S(r,[\"horizontalFieldOfView\",\"verticalFieldOfView\"]));return{steps:n.next(a=>{\"start\"===a.action&&(l=null,i=e.horizontalFieldOfView,t=e.verticalFieldOfView);const n=a.deltaAngle;if(null==l&&0!==n){const e=\"bottom\"===a.side||\"left\"===a.side?n>0:n<0;l=D(a.side)?0===i&&e||360===i&&!e:0===t&&e}const s=l?T(a.side):a.side;let p=0;switch(s){case\"left\":p=i/2-n;break;case\"right\":p=i/2+n;break;case\"top\":p=t+2*n;break;case\"bottom\":p=t-2*n}return D(s)?(p=o.normalize(p),p=p>270?0:p>180?180:p,r.horizontalFieldOfView=2*p):r.verticalFieldOfView=p,a}),cancel:s}},e)}_buildScaleOrientDragPipeline(e){let i=0,t=0;const a=(i,t)=>(a,o,n)=>{if(null==e)return{steps:o,cancel:n};const s=e.viewshed;return n=n.next(S(s,[i])),{steps:o=o.next(t(s,e)),cancel:n}};return s([this._scaleOrientManipulation.createHeadingDragPipeline(a(\"heading\",(i,a)=>a=>(\"start\"===a.action&&(t=e.heading),i.heading=o.normalize(t+a.deltaAngle),a)),e),this._scaleOrientManipulation.createTiltDragPipeline(a(\"tilt\",(t,a)=>a=>{\"start\"===a.action&&(i=e.tilt);let o=i+a.deltaAngle;return o<-90?o=180:o>270&&(o=0),t.tilt=R.clamp(o),a}),e),this._scaleOrientManipulation.createDistanceDragPipeline(a(\"farDistance\",(e,i)=>t=>{const a=g(I,t.renderEnd,i.observerRenderSpace),o=M(a)*i.metersPerUnit,n=b(a,i.targetDirection)<0?V.scaleOrientMinDistance:o;return e.farDistance=n,t}),e)])}_updateManipulatorVisibility(){const e=this._someManipulatorSelected(),i=null!=this._forceHoveringTask||this._someManipulatorHovering(),t=this._fieldOfViewManipulation.hovering,a=this.parentTool.creating;let o=[];const n=e=>{o.push(e.disableDisplay())};e||!a&&i?this.removeHandles(x):(this._scaleOrientManipulation.forEachManipulator(n),this._moveManipulation.forEachManipulator(n),this.addHandles(o,x),o=[]),e||!a&&i||a&&t?this.removeHandles(A):(this._fieldOfViewManipulation.forEachManipulator(n),this.addHandles(o,A)),e||!a?this.removeHandles(z):this.addHandles(this._observerManipulator.disableDisplay(),z)}_resetHoveringTask(){this._forceHoveringTask=l(this._forceHoveringTask),this._updateManipulatorVisibility()}_forEachManipulator(e){this._forEachManipulation(i=>{i.forEachManipulator(e)}),e(this._observerManipulator)}_forEachManipulation(e){e(this._moveManipulation),e(this._fieldOfViewManipulation),e(this._scaleOrientManipulation)}get test(){return{moveManipulation:this._moveManipulation,fieldOfViewManipulation:this._fieldOfViewManipulation,scaleOrientManipulation:this._scaleOrientManipulation,viewshedComputedData:this.viewshedComputedData,setHoveringTimeoutPromise:e=>{this._forceHoveringTestPromise=e}}}};e([m({constructOnly:!0})],U.prototype,\"analysis\",void 0),e([m({constructOnly:!0})],U.prototype,\"analysisViewData\",void 0),e([m({constructOnly:!0})],U.prototype,\"parentTool\",void 0),e([m({constructOnly:!0,nonNullable:!0})],U.prototype,\"view\",void 0),e([m()],U.prototype,\"viewshed\",null),e([m()],U.prototype,\"_grabbing\",void 0),e([m()],U.prototype,\"grabbing\",null),e([m()],U.prototype,\"viewshedComputedData\",void 0),e([m()],U.prototype,\"observer\",null),U=e([f(\"esri.views.3d.analysis.Viewshed.ViewshedSubTool\")],U);const I=_(),R=new n(0,180);export{U as ViewshedSubTool};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../../analysis/Viewshed.js\";import{makeHandle as i}from\"../../../../core/handleUtils.js\";import\"../../../../core/has.js\";import{mapCollection as s}from\"../../../../core/mapCollectionUtils.js\";import{rad2deg as a}from\"../../../../core/mathUtils.js\";import{destroyMaybe as o}from\"../../../../core/maybe.js\";import{when as n,watch as l,syncAndInitial as r,sync as d,initial as c}from\"../../../../core/reactiveUtils.js\";import{property as h}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as u}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{create as p}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{a as m,H as g,j as v,p as w,f as _}from\"../../../../chunks/vec32.js\";import{create as V}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import f from\"../../../../geometry/Point.js\";import{fromPositionAndNormal as b,create as y,projectPoint as S}from\"../../../../geometry/support/plane.js\";import{creationVerticalOffset as T}from\"./ViewshedConfiguration.js\";import{ViewshedSubTool as C}from\"./ViewshedSubTool.js\";import{Manipulator3D as D}from\"../../interactive/Manipulator3D.js\";import{Settings as M}from\"../../interactive/editingTools/settings.js\";import{ExtendedLineVisualElement as j}from\"../../interactive/visualElements/ExtendedLineVisualElement.js\";import{LaserlineVisualElement as H}from\"../../interactive/visualElements/LaserlineVisualElement.js\";import{toGraphic as I}from\"../../webgl-engine/lib/intersectorUtilsConversions.js\";import{AnalysisToolBase as P}from\"../../../interactive/AnalysisToolBase.js\";import{sketchKeys as E}from\"../../../interactive/keybindings.js\";import{newToolIntersector as L}from\"../../../interactive/ToolIntersector.js\";import{createScreenPointArrayFromEvent as k}from\"../../../support/screenUtils.js\";const R=Symbol(\"interactionVisuals\");let W=class extends P{constructor(e){super(e),this.removeIncompleteOnCancel=!1,this.automaticManipulatorSelection=!1,this._stagedViewshed=null,this._stagedViewshedComputedData=null,this._placementMode=B,this._creationState=!1,this._interactionVisualElements=null,this._settings=new M({getTheme:()=>this.view.effectiveTheme}),this._selectedManipulator=null}initialize(){this._intersector=L(this.view.state.viewingMode),this._createInteractionVisuals();const e=this.analysisViewData.viewshedComputedDataHandles;this.subToolHandles=s(()=>e,({viewshedComputedData:e})=>{const t=new C({analysis:this.analysis,analysisViewData:this.analysisViewData,parentTool:this,view:this.view,viewshedComputedData:e});return{subTool:t,remove:()=>{this.selectedViewshed===e.viewshed&&(this.selectedViewshed=null),t.destroy()}}}),this.addHandles([n(()=>this._valid,()=>this.finishToolCreation(),r),l(()=>this._stagedViewshed,e=>{const t=this.analysisViewData.viewshedComputedDataHandles;this._stagedViewshedComputedData=null!=e&&null!=t?this._findSubTool(e)?.viewshedComputedData:null},r),this.analysis.viewsheds.on(\"after-remove\",e=>{const t=this._stagedViewshed;null!=t&&e.item===t&&this.analysis.viewsheds.add(t)}),l(()=>this.firstGrabbedManipulator,e=>{if(null!=e){const t=this._findSubTool(e)?.viewshed;this.selectedViewshed=t,this._selectManipulator(e)}else this._selectedSubTool?.onManipulatorSelectionChanged()},d),l(()=>this.view.activeTool,e=>{e!==this&&null!=e&&(this.selectedViewshed=null)}),n(()=>{const e=this.selectedViewshedComputedData;return null==e?null:{subTool:this._selectedSubTool,observer:e.observerRenderSpace,target:e.targetRenderSpace}},e=>{const{subTool:t,observer:i,target:s}=e;t?.moveInteractionState.dragging?this._updateInteractionVisualsLocation(i,!0):t?.scaleOrientInteractionState.dragging&&this._updateInteractionVisualsLocation(s,!1)},c),l(()=>this.creating,()=>this.updateInteractionVisualsVisibility()),l(()=>this.selectedViewshed,e=>{const t=this._selectedManipulator,i=this._selectedSubTool;null==e?this._selectManipulator(null):null!=t&&i.hasManipulator(t)||this._selectManipulator(i.discManipulator)},c)])}destroy(){this.subToolHandles=o(this.subToolHandles),this.removeHandles(R)}onDeactivate(){this.removeStaged(),this._creationState=!1}get _valid(){return this.analysisViewData.viewshedComputedDataHandles?.some(e=>e.viewshedComputedData.valid)??!1}get cursor(){return this.creating?\"crosshair\":null}get _selectedSubTool(){return this._findSubTool(this.selectedViewshed)}_selectManipulator(e){const t=this._selectedManipulator;t!==e&&(this._selectedManipulator=e,null!=t&&(t.selected=!1),null!=e&&(e.selected=!0),this._findSubTool(t)?.onManipulatorSelectionChanged(),this._selectedSubTool?.onManipulatorSelectionChanged())}get selectedViewshed(){return this.analysisViewData.selectedViewshed}set selectedViewshed(e){this.analysisViewData.selectedViewshed=e}get selectedViewshedComputedData(){return this._selectedSubTool?.viewshedComputedData}get stagedViewshed(){return this._stagedViewshed}get grabbing(){return this.subToolHandles.some(({subTool:e})=>e.grabbing)}get creating(){return this._creationState&&this.active}get isPlacingTarget(){return\"placing-target\"===this._creationState}place(e){this.selectedViewshed=null,this._placementMode=e,this._creationState=\"placing-observer\",this._finishToolCreationIfValid()}onManipulatorSelectionChanged(){this.subToolHandles.forEach(e=>e.subTool.onManipulatorSelectionChanged())}onInputEvent(e){switch(e.type){case\"immediate-double-click\":this._doubleClickHandler(e);break;case\"pointer-move\":this._pointerMoveHandler(e);break;case\"key-down\":E.cancel===e.key?this._cancelKeyHandler(e):E.delete.includes(e.key)&&this._deleteKeyHandler();break;case\"hold\":this.updateInteractionVisualsVisibility(!0)}}onInputEventAfter(e){if(\"immediate-click\"===e.type)this._clickPlacementHandler(e)}onActivate(){this._placementMode=B}_clickPlacementHandler(e){if(!this.creating||this.hasFocusedManipulators)return;const i=this._intersectScreen(e,G);if(null!=i){if(\"placing-observer\"===this._creationState){i.mapPoint.z=(i.mapPoint.z??0)+T;const e=new t({observer:i.mapPoint.clone(),feature:i.feature});this.analysis.viewsheds.add(e),this._stagedViewshed=e,this._creationState=\"placing-target\",this._updateStagedViewshed(i.scenePoint)}else if(\"placing-target\"===this._creationState){this._updateStagedViewshed(i.scenePoint);const e=this._stagedViewshed;this._stagedViewshed=null,\"multiple\"===this._placementMode?this._creationState=\"placing-observer\":(this._creationState=!1,this._stagedViewshed=null,this._finishToolCreationIfValid(),this.view.activeTool=null),this.selectedViewshed=e}e.stopPropagation()}}_doubleClickHandler(e){this.creating&&(this.removeStaged(),this._creationState=!1,this.view.activeTool=null,e.stopPropagation())}_pointerMoveHandler(e){if(!this.creating)return;const t=this._intersectScreen(e,G);null!=t&&(this._updateInteractionVisualsLocation(t.scenePoint,!1),this._updateStagedViewshed(t.scenePoint))}_cancelKeyHandler(e){this.creating?this._onCancelWhileCreating(e):this.grabbing||(this.selectedViewshed=null,e.stopPropagation())}_onCancelWhileCreating(e){const t=this.removeStaged();this._finishToolCreationIfValid(),t?(this._creationState=\"placing-observer\",this.selectedViewshed=null,\"multiple\"===this._placementMode&&e.stopPropagation()):this._creationState=!1}_deleteKeyHandler(){this.creating&&(this.removeStaged(),this._creationState=\"placing-observer\"),null!=this.selectedViewshed&&this.analysis.viewsheds.remove(this.selectedViewshed)}_finishToolCreationIfValid(){this._valid&&this.finishToolCreation()}_updateStagedViewshed(e){const t=this._stagedViewshed,i=this._stagedViewshedComputedData;if(null==t||null==i)return;const{heading:s,tilt:a,farDistance:o}=x(this.view,i,e);t.farDistance=o,t.tilt=a,t.heading=s}removeStaged(){const e=this._stagedViewshed;return null!=e&&(this._stagedViewshed=null,this.analysis.viewsheds.remove(e),!0)}_intersectScreen(e,t){const i=k(e);this.view.sceneIntersectionHelper.intersectToolIntersectorScreen(i,this._intersector);const s=this._intersector.results.min,a=t.scenePoint;if(!s.getIntersectionPoint(a))return null;const o=t.mapPoint;return o.spatialReference=this.view.spatialReference,this.view.renderCoordsHelper.fromRenderCoords(a,o),null==o?null:(t.feature=I(s,this.view),t)}_createInteractionVisuals(){this.removeHandles(R);const e=this._settings.visualElements,t=new H({view:this.view,attached:!1,style:{glowWidth:e.heightPlane.glowWidth,innerWidth:e.heightPlane.innerWidth},isDecoration:!0}),s=new j({view:this.view,extensionType:e.zVerticalLine.extensionType,attached:!1,innerWidth:1,writeDepthEnabled:!1,renderOccluded:4,isDecoration:!0});this._interactionVisualElements={laserline:t,verticalLine:s},this.addHandles([l(()=>e.zVerticalLine,e=>e.apply(s),r),l(()=>e.heightPlane,e=>e.apply(t),r),i(()=>{t.destroy(),s.destroy(),this._interactionVisualElements=null})],R)}updateInteractionVisualsVisibility(e=!1){const t=this.creating,i=this.analysisViewData.visible,s=this._selectedSubTool,a=this.selectedViewshedComputedData,o=(e,t)=>{const i=this._interactionVisualElements;null!=i&&(i.verticalLine.attached=t,i.laserline.attached=e)};if(t)return void o(i,!1);if(null==s||null==a)return void o(!1,!1);const n=s.moveInteractionState,l=e?n.grabbing:n.dragging,r=s.scaleOrientInteractionState,d=e?r.grabbing:r.dragging,c=i&&(l||d);if(o(c,l),c){const e=l?a.observerRenderSpace:a.targetRenderSpace;this._updateInteractionVisualsLocation(e,l)}}_updateInteractionVisualsLocation(e,t){const i=this._interactionVisualElements;if(null==i)return;const{laserline:s,verticalLine:a}=i;s.heightManifoldTarget=e,s.intersectsWorldUpAtLocation=t?e:null,null!=e&&a.setStartEndFromWorldDownAtLocation(e)}_findSubTool(e){if(null==e)return null;const t=e instanceof D?t=>t.subTool.hasManipulator(e):t=>t.subTool.viewshed===e;return this.subToolHandles?.find(t)?.subTool}get test(){}};function x(e,t,i){const s=t.observerRenderSpace,o=m(O,i,s),n=g(o)*t.metersPerUnit,l=e.renderCoordsHelper.basisMatrixAtPosition(s,K),r=v(U,l[8],l[9],l[10]),d=b(s,r,F),c=S(d,i,A),h=m(c,c,s),u=(g(h)<1e-4?90:a(w(o,h)))*(_(r,o)<0?-1:1)+90,p=v(z,l[4],l[5],l[6]),V=a(w(p,h)),f=v(z,l[0],l[1],l[2]);return{heading:_(h,f)<0?360-V:V,tilt:u,farDistance:n}}e([h({constructOnly:!0})],W.prototype,\"view\",void 0),e([h()],W.prototype,\"analysisViewData\",void 0),e([h()],W.prototype,\"removeIncompleteOnCancel\",void 0),e([h()],W.prototype,\"automaticManipulatorSelection\",void 0),e([h({constructOnly:!0})],W.prototype,\"analysis\",void 0),e([h()],W.prototype,\"subToolHandles\",void 0),e([h()],W.prototype,\"_stagedViewshed\",void 0),e([h()],W.prototype,\"_stagedViewshedComputedData\",void 0),e([h()],W.prototype,\"_placementMode\",void 0),e([h()],W.prototype,\"_creationState\",void 0),e([h()],W.prototype,\"_valid\",null),e([h({readOnly:!0})],W.prototype,\"cursor\",null),e([h()],W.prototype,\"_selectedManipulator\",void 0),e([h()],W.prototype,\"_selectedSubTool\",null),e([h()],W.prototype,\"selectedViewshed\",null),e([h()],W.prototype,\"selectedViewshedComputedData\",null),e([h()],W.prototype,\"stagedViewshed\",null),e([h()],W.prototype,\"grabbing\",null),e([h()],W.prototype,\"creating\",null),e([h()],W.prototype,\"isPlacingTarget\",null),W=e([u(\"esri.views.3d.analysis.Viewshed.ViewshedTool\")],W);const O=V(),U=V(),A=V(),z=V(),K=p(),F=y(),G={mapPoint:new f,scenePoint:V(),feature:null},B=\"multiple\";export{W as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{deg2rad as t}from\"../../../../core/mathUtils.js\";import{fromScaling as e,mul as r,fromTranslation as s,fromRotation as o}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as i}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{j as a,d as n,t as l}from\"../../../../chunks/vec32.js\";import{fromValues as m,create as c}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{viewshedVisualizationConfiguration as f,arcAnglePerSegment as h}from\"./ViewshedConfiguration.js\";import{getViewshedRotationMatrix as p,rotateBy as u}from\"./viewshedToolUtils.js\";import{Object3DVisualElement as d}from\"../../interactive/visualElements/Object3DVisualElement.js\";import{Attribute as w}from\"../../webgl-engine/lib/Attribute.js\";import{Geometry as v}from\"../../webgl-engine/lib/Geometry.js\";import{ColorMaterial as j}from\"../../webgl-engine/materials/ColorMaterial.js\";class D extends d{constructor(t){super(t),this._material=null,this._viewshedComputedData=null,this._material=new j({...f.shapeMaterialParameters,isDecoration:this.isDecoration,writeDepth:!1}),this.applyProperties(t)}get viewshedComputedData(){return this._viewshedComputedData}set viewshedComputedData(t){this._viewshedComputedData=t,this.updateTransform()}updateTransform(){const t=this._viewshedComputedData;if(null==t)return;const o=i(),a=t.farDistanceRenderSpace;e(o,m(a,a,a)),p(t,M),r(o,M,o),s(M,this._viewshedComputedData.observerRenderSpace),r(o,M,o),this.transform=o}createExternalResources(){}destroyExternalResources(){}forEachMaterial(t){t(this._material)}createGeometries(t){const{_material:e,viewshedComputedData:r}=this;if(null==r||null==e||!r.valid)return;b(e,r).forEach(e=>t.addGeometry(e))}}function b(e,r){const{horizontalFieldOfView:s,verticalFieldOfView:i}=r,m=a(C,0,0,1),c=a(_,0,1,0),f=a(x,1,0,0);u(m,m,t(i/2),c),u(m,m,t(s/2),f);const p=t=>Math.ceil(Math.abs(t)/h)+1,d=t(s),j=n(E,f),D=p(d),b=g(-d/(D-1)),R=o(M,b,j),V=t(-i),G=p(V),O=g(V/(G-1)),T=n(_,c),F=o(y,t(s)/2,f);l(T,T,F);const N=y,P=[],S=n(x,m);for(let t=0;t<D;t++){o(N,O,T);for(let e=0;e<G;e++){const r=3*(e*D+t);P[r]=S[0],P[r+1]=S[1],P[r+2]=S[2],l(S,S,N)}l(T,T,R),l(m,m,R),n(S,m)}const U=D*G;P[3*U]=0,P[3*U+1]=0,P[3*U+2]=0;const k=[];for(let t=0;t<D-1;t++)for(let e=0;e<G-1;e++){const r=6*(e*(D-1)+t);k[r]=e*D+t,k[r+1]=(e+1)*D+t,k[r+2]=e*D+t+1,k[r+3]=e*D+t+1,k[r+4]=(e+1)*D+t,k[r+5]=(e+1)*D+t+1}const z=[k];if(360!==s&&0!==i){const t=[],e=[];for(let r=0;r<G-1;r++){const s=3*r;t[s]=U,t[s+1]=(r+1)*D,t[s+2]=r*D,e[s]=U,e[s+1]=r*D+D-1,e[s+2]=(r+1)*D+D-1}z.push(t,e)}if(180!==i&&0!==s){const t=[],e=[];for(let r=0;r<D-1;r++){const s=3*r;t[s]=U,t[s+1]=r,t[s+2]=r+1,e[s]=U,e[s+1]=r+(G-1)*D+1,e[s+2]=r+(G-1)*D}z.push(t,e)}return z.map(t=>{const r=[[\"position\",new w(P,t,3,!0)]];return new v(e,r)})}function g(t){return isNaN(t)?1:t}const C=c(),_=c(),x=c(),E=c(),M=i(),y=i();export{D as ViewshedShapeVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../../Color.js\";import i from\"../../../../core/Accessor.js\";import\"../../../../core/has.js\";import{equals as s}from\"../../../../core/lang.js\";import{deg2rad as o}from\"../../../../core/mathUtils.js\";import{destroyMaybe as r}from\"../../../../core/maybe.js\";import{watch as a,initial as l}from\"../../../../core/reactiveUtils.js\";import{property as n}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/Logger.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{fromRotation as h}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as m}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{t as d,j as u,a as p,H as _,n as V,h as f,p as v,u as w,d as E,g as b}from\"../../../../chunks/vec32.js\";import{create as g,clone as C}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{viewshedVisualizationConfiguration as L,arcAnglePerSegment as A}from\"./ViewshedConfiguration.js\";import{ViewshedShapeVisualElement as D}from\"./ViewshedShapeVisualElement.js\";import y from\"./ViewshedTool.js\";import{LineVisualElement as j}from\"../../interactive/visualElements/LineVisualElement.js\";import{PointVisualElement as F}from\"../../interactive/visualElements/PointVisualElement.js\";import{createStipplePatternSimple as R}from\"../../webgl-engine/materials/lineStippleUtils.js\";let S=class extends i{constructor(e){super(e),this.visible=!0,this._viewshedCorners={topLeft:g(),topRight:g(),bottomLeft:g(),bottomRight:g()},this._arcCenterPoints={top:g(),bottom:g(),left:g(),right:g()},this._parallelCenters={top:g(),bottom:g()}}initialize(){const e={view:this.view,isDecoration:!0},t={...e,color:this._color,renderOccluded:4},i={...t,stipplePattern:R(2)};this._observerVisualElement=new F({...e,...L.observerPointConfiguration}),this._shapeVisualElement=new D({...e,isDecoration:this.isDecoration}),this._frameLinesVisualElement=new j(t),this._leftArcVisualElement=new j(t),this._rightArcVisualElement=new j(t),this._topArcVisualElement=new j(t),this._bottomArcVisualElement=new j(t),this._centralLongitude=new j(i),this._centralLatitude=new j(i),this.addHandles([a(()=>{const e=this.viewshedComputedData;if(!e?.valid)return null;const t=this._viewshedCorners,i=this._arcCenterPoints,s=this._parallelCenters;return e.cornerPoints(t),e.arcCentersPoints(i),e.parallelCenterPoints(s),{viewshedComputedData:e,corners:t,arcCenters:i,parallelCenters:s,interactive:this.analysisViewData.interactive,selected:this._selected}},e=>{const t=null!=e;this._forEachVisualElement(e=>e.attached=t),t&&this._updateVisualElements(e)},{initial:!0,equals:s}),a(()=>{const{viewshedComputedData:e}=this,{horizontalFieldOfView:t,verticalFieldOfView:i}=e??{};return{viewshedComputedData:e,horizontalFieldOfView:t,verticalFieldOfView:i}},({viewshedComputedData:e})=>{const{_shapeVisualElement:t}=this;e!==t.viewshedComputedData&&(t.viewshedComputedData=e),this._shapeVisualElement.recreateGeometry()},l),a(()=>{const{interactive:e}=this.analysisViewData;return{visible:this.visible,selected:e&&this._selected,staged:e&&this._staged,horFovNot360:360!==this.viewshedComputedData?.horizontalFieldOfView}},({visible:e,selected:t,staged:i,horFovNot360:s})=>{const o=t||i;this._shapeVisualElement.visible=e,this._topArcVisualElement.visible=e,this._bottomArcVisualElement.visible=e,this._frameLinesVisualElement.visible=e&&s;const r=e&&(t||s);this._leftArcVisualElement.visible=r,this._rightArcVisualElement.visible=r,this._forEachLineVisualElement(e=>{e.width=o?L.frameWidthSelected:L.frameWidthNotSelected,e.renderOccluded=t?4:1}),[this._centralLatitude,this._centralLongitude].forEach(i=>{i.width=2*(o?L.frameWidthSelected:L.frameWidthNotSelected),i.visible=e&&t})},l),a(()=>{const{analysisViewData:{interactive:e,tool:t},_selected:i,visible:s}=this,o=this.view.activeTool,r=!t?.active&&o instanceof y&&o.creating;return{observerVisible:s&&!i&&(!e||(t?.creating??!1)||r),color:this._color}},({observerVisible:e,color:t})=>{this._observerVisualElement.visible=e,this._forEachLineVisualElement(e=>e.color=t)},l)])}get _color(){const{viewshedComputedData:e,_selected:i,analysisViewData:s}=this;if(null==e)return t.toUnitRGBA(L.frameColor);const o=s.tool?.active||s.interactive,r=e.viewshed===s.tool?.stagedViewshed,a=o&&(i||r)?this.view.effectiveTheme.accentColor:L.frameColor;return t.toUnitRGBA(a)}get _selected(){const{viewshedComputedData:e,analysisViewData:{selectedViewshedComputedData:t}}=this;return null!=e&&e===t}get _staged(){const{analysisViewData:{tool:e},viewshedComputedData:t}=this;return null!=e&&e.creating&&e.stagedViewshed===t?.viewshed}destroy(){this._observerVisualElement=r(this._observerVisualElement),this._shapeVisualElement=r(this._shapeVisualElement),this._frameLinesVisualElement=r(this._frameLinesVisualElement),this._leftArcVisualElement=r(this._leftArcVisualElement),this._rightArcVisualElement=r(this._rightArcVisualElement),this._topArcVisualElement=r(this._topArcVisualElement),this._bottomArcVisualElement=r(this._bottomArcVisualElement),this._centralLongitude=r(this._centralLongitude),this._centralLatitude=r(this._centralLatitude)}_forEachLineVisualElement(e){[this._frameLinesVisualElement,this._leftArcVisualElement,this._rightArcVisualElement,this._topArcVisualElement,this._bottomArcVisualElement,this._centralLatitude,this._centralLongitude].forEach(e)}_forEachVisualElement(e){this._forEachLineVisualElement(e),e(this._observerVisualElement),e(this._shapeVisualElement)}_updateVisualElements(e){const{viewshedComputedData:t,corners:i,arcCenters:s,parallelCenters:o}=e,r=C(t.observerRenderSpace);this._observerVisualElement.geometry=t.observer,this._shapeVisualElement.updateTransform(),this._updateFrameLines(r,i),this._updateFrameArcs(t,i,o),this._updateCentralHelperArcs(t,s)}_updateFrameLines(e,t){this._frameLinesVisualElement.geometry=[[e,t.topLeft],[e,t.topRight],[e,t.bottomLeft],[e,t.bottomRight]]}_updateFrameArcs(e,t,i){const{observerRenderSpace:s,rightVector:r,horizontalFieldOfView:a,tiltedUpVector:l}=e,n=o(a),c=g(),p=m();h(p,n/2,l),d(c,r,p),O(this._leftArcVisualElement,s,t.bottomLeft,t.topLeft,\"forward\",c),h(p,-n/2,l),u(c,0,0,0),d(c,r,p),O(this._rightArcVisualElement,s,t.bottomRight,t.topRight,\"forward\",c);const _=a>180?\"backward\":\"forward\";O(this._topArcVisualElement,i.top,t.topRight,t.topLeft,_,l),O(this._bottomArcVisualElement,i.bottom,t.bottomRight,t.bottomLeft,_,l)}_updateCentralHelperArcs(e,t){const i=e.observerRenderSpace,s=e.horizontalFieldOfView>=180?\"backward\":\"forward\";O(this._centralLatitude,i,t.right,t.left,s,e.tiltedUpVector),O(this._centralLongitude,i,t.top,t.bottom,\"forward\",e.leftVector)}get test(){}};function O(e,t,i,s,o,r,a=A){const l=g();p(l,i,t);const n=_(l),c=g();p(c,s,t),V(c,c),f(c,c,n);let u=v(l,c);const L=C(r);\"backward\"===o&&(w(L,L),u=-(2*Math.PI-u));const D=[],y=Math.ceil(Math.abs(u)/a),j=m();h(j,u/y,L);const F=g();E(F,l);const R=g();E(R,i);for(let h=0;h<y;h++){const e=g();E(e,R),d(F,F,j),b(R,t,F);const i=g();E(i,R),D.push([e,i])}e.geometry=D}e([n()],S.prototype,\"view\",void 0),e([n({constructOnly:!0})],S.prototype,\"isDecoration\",void 0),e([n()],S.prototype,\"analysisViewData\",void 0),e([n()],S.prototype,\"viewshedComputedData\",void 0),e([n()],S.prototype,\"visible\",void 0),e([n()],S.prototype,\"_color\",null),e([n()],S.prototype,\"_selected\",null),e([n()],S.prototype,\"_staged\",null),S=e([c(\"esri.views.3d.analysis.Viewshed.ViewshedSubVisualization\")],S);export{S as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as i}from\"tslib\";import s from\"../../../../core/Accessor.js\";import{destroyHandle as o}from\"../../../../core/handleUtils.js\";import\"../../../../core/has.js\";import{mapCollection as t}from\"../../../../core/mapCollectionUtils.js\";import{watch as e,initial as r}from\"../../../../core/reactiveUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import n from\"./ViewshedSubVisualization.js\";let c=class extends s{get visible(){return this.analysisViewData.visible}constructor(i){super(i)}initialize(){const i=this.analysisViewData,s=t(()=>this.analysisViewData.viewshedComputedDataHandles,({viewshedComputedData:s})=>{const o=new n({view:this.view,viewshedComputedData:s,analysisViewData:i,isDecoration:this.isDecoration});return{visualization:o,remove:()=>o.destroy()}});this._subVisualizations=s,this.addHandles([o(s),e(()=>this.visible,i=>this._subVisualizations.forEach(({visualization:s})=>s.visible=i),r)])}get test(){}};i([a({constructOnly:!0})],c.prototype,\"analysisViewData\",void 0),i([a({constructOnly:!0,nonNullable:!0})],c.prototype,\"view\",void 0),i([a({constructOnly:!0})],c.prototype,\"isDecoration\",void 0),i([a()],c.prototype,\"visible\",null),c=i([l(\"esri.views.3d.analysis.Viewshed.ViewshedVisualization\")],c);export{c as ViewshedVisualization};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as t}from\"tslib\";import{rad2deg as o,deg2rad as e}from\"../../../../core/mathUtils.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{mul as i,fromTranslation as n,fromScaling as a}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as c}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{create as l,fromArray as p}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import m from\"../../webgl/RenderCamera.js\";import{assert as h}from\"./Util.js\";let g=class extends m{constructor(){super(...arguments),this.sectionAngles=l()}get sectionAnglesDeg(){return p(this.sectionAngles.map(t=>o(t)))}set sectionAnglesDeg(t){this.sectionAngles=p(t.map(t=>e(t)))}get projectionMatrix(){return i(c(),this.sectionMatrix,this._projectionMatrixInternal)}get sectionMatrix(){const t=this.sectionAngles[0],o=this.sectionAngles[1],e=this.sectionAngles[2],s=this.sectionAngles[3];h(t<=o),h(e<=s);const r=2*Math.tan(this.fovX/2),l=2*Math.tan(this.fovY/2),p=Math.tan(t),m=Math.tan(o),g=Math.tan(e),f=m-p,M=Math.tan(s)-g,j=r/f,u=l/M,A=-(p+f/2)/r*2,x=-(g+M/2)/l*2,b=c();n(b,[A,x,0]);const d=c();a(d,[j,u,1]);const v=c();return i(v,d,b)}get _sectionRatioX(){const t=Math.tan(this.sectionAngles[0]),o=Math.tan(this.sectionAngles[1]),e=2*Math.tan(this.fovX/2);return Math.min(1,(o-t)/e)}setViewport(t,o){const e=o*this._sectionRatioX;return this.viewport=[t[0],t[1],e,o],e}};t([s()],g.prototype,\"sectionAngles\",void 0),t([s()],g.prototype,\"sectionAnglesDeg\",null),t([s()],g.prototype,\"projectionMatrix\",null),t([s()],g.prototype,\"sectionMatrix\",null),t([s()],g.prototype,\"_sectionRatioX\",null),g=t([r(\"esri.views.3d.webgl-engine.lib.ViewshedFaceCamera\")],g);export{g as ViewshedFaceCamera};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{clamp as t}from\"../../../../core/mathUtils.js\";import{releaseMaybe as e}from\"../../../../core/maybe.js\";import{fromRotation as i}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as s}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{a as r,g as a,u as o,t as h}from\"../../../../chunks/vec32.js\";import{create as c}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{applyTextureResizeModulo as n}from\"./textureUtils.js\";import{ViewshedFaceCamera as l}from\"./ViewshedFaceCamera.js\";import{DepthStencilAttachment as u,SizedDepthFormat as m}from\"../../../webgl/enums.js\";import{isSizedDepthStencilFormat as f}from\"../../../webgl/textureUtils.js\";class d{constructor(){this.textureSizeQuality=1,this.textureSizeModHighQuality=1.3,this.textureSizeModLowQuality=.9,this.textureSizeMultiple=128,this.toleranceSides=5,this.toleranceBottomTop=10}textureSizeModifier(t){const e=t?this.textureSizeModHighQuality:this.textureSizeModLowQuality;return this.textureSizeQuality*e}textureResizeModulo(t){return Math.ceil(t/this.textureSizeMultiple)*this.textureSizeMultiple}}const p=[\"front\",\"left\",\"right\",\"back\",\"top\",\"bottom\"];function g(t){return![\"top\",\"bottom\"].includes(t)}class _{constructor(t){this._fbos=t,this._faces={},this._width=0,this._height=0,this.settings=new d,this._maxTextureSize=Math.min(has(\"esri-mobile\")?4096:16384,t.rctx.parameters.maxTextureSize)}get depthTexture(){return this._handle?.getTexture(u)}get ready(){return null!=this.depthTexture&&0!==this._width&&0!==this._height}get nearFar(){const t=this.faces;return 0===t.length?null:t[0].nearFar}get numActiveFaces(){const t=this._faces;let e=0;return Object.keys(t).forEach(i=>{t[i]&&(e+=1)}),e}get faces(){const t=this._faces,e=[];for(const i of p){const s=t[i];s&&e.push(s)}return e}get atlasRegions(){return this.faces.map(t=>[t.x/this._width,(t.x+t.width)/this._width,t.y/this._height,(t.y+t.height)/this._height])}get viewshedProjectionMatrices(){return this.faces.map(t=>t.projectionMatrix)}get viewshedViewMatrices(){return this.faces.map(t=>t.viewMatrix)}_setupFaceCamera(e,n,u,m){const{effectiveObserverRenderSpace:f,tiltedUpVector:d,targetRenderSpace:p,farDistanceRenderSpace:_,horizontalFieldOfView:x,verticalFieldOfView:w}=n,b=c();r(b,p,f);const M=c(),S=c(),F=(t,e)=>{const r=c(),o=s();return i(o,t,e),h(r,b,o),a(r,f,r),r};let z,T=d;const v=Math.min(90,x),O=Math.min(90,Math.max(0,(x-90)/2));let j=-45,B=45,y=-45,k=45;if(g(e)){const e=e=>t(e,-45,45);y=e(-w/2)-this.settings.toleranceBottomTop,k=e(+w/2)+this.settings.toleranceBottomTop}switch(e){case\"front\":z=p,j=-v/2,B=v/2;break;case\"left\":z=F(Math.PI/2,d),j=45-O;break;case\"right\":z=F(-Math.PI/2,d),B=-45+O;break;case\"top\":z=a(M,f,d),T=o(S,b);break;case\"bottom\":z=r(M,f,d),T=b;break;case\"back\":z=F(Math.PI,d)}const V=new l({center:z,eye:f,up:T,far:_});V.sectionAnglesDeg=[j-this.settings.toleranceSides,B+this.settings.toleranceSides,y,k],V.fovY=Math.PI/2;const P=V.setViewport(u,m);return this._faces[e]=V,P}isActive(t){return this._computeActiveFaces(t).size>0}_computeActiveFaces(t){const e=new Set,{horizontalFieldOfView:i,verticalFieldOfView:s}=t,r=-s/2,a=s/2;return 0===i||0===s||(r<=45&&a>=-45&&e.add(\"front\"),i>90&&(e.add(\"left\"),e.add(\"right\")),i>270&&e.add(\"back\"),a>45-this.settings.toleranceBottomTop&&e.add(\"top\"),r<-45+this.settings.toleranceBottomTop&&e.add(\"bottom\")),e}_computeBaseTextureSize({pixelRatio:t,fullWidth:e,fullHeight:i},s,r,a){const o=s/t,h=this.settings.textureSizeModifier(r);return n(Math.max(e,i)*o*h,this._maxTextureSize/a)}_ensureFBO(t){const e=this._width,i=this._height,s=this._handle?.fbo;s&&s.width===e&&s.height===i&&t===f(s.depthStencilTexture?.descriptor?.internalFormat??m.DEPTH_COMPONENT16)||(this._handle?.release(),this._handle=this._allocateFBO(t))}_allocateFBO(t){const{_width:e,_height:i}=this,s=t?13:12,r=this._fbos.acquire(e,i,\"viewshed shadow map\",s);return r.getTexture(u)?.setShadowFiltering(!1),r}clearFBO(t){const e=this._fbos.rctx;this._ensureFBO(t),e.bindFramebuffer(this._handle?.fbo),e.setClearColor(1,1,1,1),e.clear(16640)}dispose(){this._debugFBO||(this._handle=e(this._handle))}start(t,e,i,s,r=!1){this._faces={};const a=this._computeActiveFaces(e),o=a.size;if(0===o)return!1;const h=this._computeBaseTextureSize(t,s,i,o);let c=0,n=0,l=0;return p.filter(t=>a.has(t)).forEach(t=>{const i=x(t,o);i>n&&(l=Math.max(l,c),c=0),n=i;const s=i*h;c+=this._setupFaceCamera(t,e,[c,s],h)}),l=Math.max(l,c),this._width=this.settings.textureResizeModulo(l),this._height=w(o)*h,this.clearFBO(r),!0}finish(){}get test(){}}function x(t,e){if(e<4)return 0;const i=\"front\"===t||\"left\"===t;return 4===e?i?0:1:i||\"right\"===t?0:1}function w(t){return t<4?1:2}export{_ as ViewshedShadowMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../core/shaderTechnique/ShaderTechnique.js\";import{Pos2Locations as o}from\"../lib/DefaultVertexBufferLayouts.js\";import{a as i}from\"../../../../chunks/Viewshed.glsl.js\";import{makePipelineState as s,unpremultipliedAlphaToPremultipliedAlpha as t,defaultColorWrite as l}from\"../../../webgl/renderState.js\";class a extends r{constructor(r,s){super(r,s,new e(i,()=>import(\"./Viewshed.glsl.js\")),o)}initializePipeline(){return s({colorWrite:l,blending:t})}}export{a as ViewshedTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import s from\"../../../../core/Collection.js\";import{deg2rad as t}from\"../../../../core/mathUtils.js\";import{disposeMaybe as r}from\"../../../../core/maybe.js\";import{watch as i,when as o,initial as a,sync as n}from\"../../../../core/reactiveUtils.js\";import{property as h}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as d}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{translate as c,fromTranslation as p,scale as w,mul as l}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as m}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{a as u,k as f}from\"../../../../chunks/vec32.js\";import{create as v,fromValues as _}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{j as V}from\"../../../../chunks/sphere.js\";import{InternalRenderCategory as g}from\"../../webgl.js\";import M from\"../../webgl/RenderNode.js\";import{ViewshedShadowMap as b}from\"./ViewshedShadowMap.js\";import{V as S}from\"../../../../chunks/Viewshed.glsl.js\";import{ViewshedTechnique as y}from\"../shaders/ViewshedTechnique.js\";let j=class extends M{get shadowMap(){return this._shadowMap}get hasViewsheds(){return this._viewsheds.length>0}get _contentPixelRatio(){return this.view.state.contentPixelRatio}get _viewshedsInView(){return this._viewsheds.items.filter(e=>x(this.view,e))}constructor(e){super(e),this.isDecoration=!1,this._passParameters=new S,this._viewsheds=new s,this._shadowMap=null,this.consumes={required:[g.VIEWSHED,\"normals\"]},this.produces=g.VIEWSHED,this.requireGeometryDepth=!0}initialize(){this._shadowMap=new b(this.fboCache),this.addHandles([i(()=>this.view.resolutionScale,e=>{const s=this._shadowMap;s&&(s.settings.textureSizeQuality=e)},a),o(()=>!this.hasViewsheds,()=>this._shadowMap?.dispose()),i(()=>this._viewshedsInView.map(e=>[e.observerRenderSpace,e.heading,e.tilt,e.farDistance,e.horizontalFieldOfView,e.verticalFieldOfView]),()=>this.requestRender(1),n)])}destroy(){this._shadowMap=r(this._shadowMap)}precompile(){if(this.hasViewsheds){this.techniques.precompile(y);for(const e of this._viewshedsInView)if(this._shadowMap?.isActive(e))return void this.view.stage.renderer.precompileViewshedShadowMap()}}render(e){const s=this.bindParameters,t=this.renderingContext,r=e.find(({name:e})=>e===g.VIEWSHED);if(!this.hasViewsheds||!s.depth||this.isDecoration&&!s.decorations)return r;this._passParameters.shadowMap=this._shadowMap??this._passParameters.shadowMap,this._passParameters.normals=e.find(({name:e})=>\"normals\"===e)?.getTexture();const i=this.techniques.get(y);if(!i?.compiled)return this.requestRender(1),r;const o=this.view.stage.renderer.isFeatureEnabled(7);for(const a of this._viewshedsInView){if(!this._renderShadowCubeMap(s,a,o)||!this._shadowMap?.ready)continue;const e=this._setupViewshedParameters(a,s.camera);t.bindTechnique(i,s,e),t.bindFramebuffer(r.fbo),t.screen.draw()}return this.shadowMap?.dispose(),r}updateViewsheds(e){const s=this._viewsheds,{removes:t,adds:r}=e;if(t&&(Array.isArray(t)?s.removeMany(t):s.remove(t)),r)if(Array.isArray(r)){const e=r.filter(e=>!s.includes(e));s.addMany(e)}else s.includes(r)||s.add(r)}_renderShadowCubeMap(e,s,t){const r=this._shadowMap;if(!r)return!1;const i=this.view.basemapTerrain.hasStencilEnabledExtents,o=r.start(e.camera,s,t,this._contentPixelRatio,i);return o&&r.faces.forEach(e=>this.view.stage.renderer.renderViewshedShadowMap(e)),r.finish(),o}_setupViewshedParameters(e,s){const r=this._shadowMap;if(!r)return this._passParameters;const i=this._passParameters,o=e.effectiveObserverRenderSpace;i.localOrigin=o,i.observerOffset=u(E,e.observerRenderSpace,e.effectiveObserverRenderSpace),i.fovs=[t(e.horizontalFieldOfView),t(e.verticalFieldOfView)],i.headingAndTilt=[t(e.heading),t(e.tiltParallelToSurface)],i.upVector=e.tiltedUpVector;const a=R(e.targetRenderSpace,o);i.targetVector=a;const n=new Array,h=new Array;for(let t=0;t<r.numActiveFaces;t++)c(I,r.viewshedViewMatrices[t],o),n.push(...I),P(r.viewshedProjectionMatrices[t],I,D),h.push(...D);return i.viewMatrices=n,i.projectionMatrices=h,i.volumeOffset=this.selectedViewshed?.()===e.viewshed?A(e,this.view,s.eye):0,i}get test(){return{viewsheds:this._viewsheds,shadowMap:this._shadowMap,viewshedsInView:this._viewshedsInView}}};function R(e,s){const t=v();return u(t,e,s)}function P(e,s,t){const r=_(.5,.5,.5);return p(t,r),w(t,t,r),l(t,t,e),l(t,t,s),t}function x(e,s){const t=V(s.observerRenderSpace,s.farDistanceRenderSpace);return!!e.ready&&e.frustum.intersectsSphere(t)}function A(e,s,t){if(null==e)return 0;const{observerRenderSpace:r,targetRenderSpace:i}=e,o=f(t,r)>f(t,i)?e.observer:e.target;return s.pixelSizeAt(o)}e([h()],j.prototype,\"selectedViewshed\",void 0),e([h()],j.prototype,\"isDecoration\",void 0),e([h()],j.prototype,\"shadowMap\",null),e([h()],j.prototype,\"hasViewsheds\",null),e([h()],j.prototype,\"_contentPixelRatio\",null),e([h()],j.prototype,\"_viewshedsInView\",null),e([h()],j.prototype,\"consumes\",void 0),e([h()],j.prototype,\"produces\",void 0),j=e([d(\"esri.views.3d.webgl-engine.lib.Viewshed\")],j);const E=v(),I=m(),D=m();export{j as Viewshed,A as computeOffsetScale};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{getFeatureId as t,updatePointsFromFeatureReference as s}from\"../../../analysis/featureReferenceUtils.js\";import\"../../../core/has.js\";import i from\"../../../core/Logger.js\";import{mapCollection as r}from\"../../../core/mapCollectionUtils.js\";import{abortMaybe as o,destroyMaybe as a}from\"../../../core/maybe.js\";import{watch as d,initial as n,when as l,syncAndInitial as h}from\"../../../core/reactiveUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/RandomLCG.js\";import{subclass as c}from\"../../../core/accessorSupport/decorators/subclass.js\";import{d as u,q as m}from\"../../../chunks/vec32.js\";import{create as v}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{canProjectWithoutEngine as w,isLoaded as f,projectOrLoad as V}from\"../../../geometry/projectionUtils.js\";import{projectBoundingRect as y}from\"../../../geometry/projection/projectBoundingRect.js\";import{empty as _,containsPoint as g}from\"../../../geometry/support/aaBoundingRect.js\";import{AnalysisView3D as j}from\"./AnalysisView3D.js\";import{logFailedGeometryProjectionError as R}from\"./support/projectionUtils.js\";import{ViewshedComputedData as b}from\"./Viewshed/ViewshedComputedData.js\";import D from\"./Viewshed/ViewshedTool.js\";import{ViewshedVisualization as C}from\"./Viewshed/ViewshedVisualization.js\";import{Intersector as F}from\"../webgl-engine/lib/Intersector.js\";import{Viewshed as H}from\"../webgl-engine/lib/Viewshed.js\";import{connectAnalysisViewToTool as O,removeAnalysisViewTool as U,startPlaceOperation as S}from\"../../analysis/analysisViewUtils.js\";let A=class extends j{constructor(e){super(e),this.type=\"viewshed-view-3d\",this.analysis=null,this.tool=null,this._selectedViewshed=null,this.viewshedComputedDataHandles=null,this.userOperation=null,this._viewshedRenderNode=null,this._intersector=null}get visible(){return super.visible}set visible(e){super.visible=e}get interactive(){return super.interactive}set interactive(e){super.interactive=e}get selectedViewshed(){return this._selectedViewshed}set selectedViewshed(e){this._unselectOtherViewsheds(e),this._selectedViewshed=e}get selectedViewshedComputedData(){return this.tool?.selectedViewshedComputedData}get _isDecoration(){return!this.parent}initialize(){const e=this.view;this._viewshedRenderNode=new H({view:e,selectedViewshed:()=>this.selectedViewshed??this.tool?.stagedViewshed,isDecoration:this._isDecoration}),this._intersector=new F(this.view.state.viewingMode),this._intersector.options.hud=!1,this._intersector.options.store=0,this.viewshedComputedDataHandles=r(()=>this.analysis.viewsheds,t=>{const s=new b({renderCoordsHelper:e.renderCoordsHelper,viewshed:t}),r=Symbol();return this.addHandles([d(()=>({valid:s.valid,canProject:w(s.observer?.spatialReference,this.view.spatialReference)||f()}),({valid:e,canProject:t},r)=>{this.visible&&(e&&t?this._addViewshedsToRenderer(s):r?.valid&&r?.canProject&&this._removeViewshedsFromRenderer(s),t||R(this.analysis,s.observer.spatialReference,i.getLogger(this)))},n),...this._createFeatureReferenceHandles(s)],r),{viewshedComputedData:s,remove:()=>{this.removeHandles(r),this._removeViewshedsFromRenderer(s),s.destroy()}}}),this._visualization=new C({view:e,analysisViewData:this,isDecoration:this._isDecoration}),this.addHandles([d(()=>this.visible,e=>{const t=this.viewshedComputedDataHandles;if(null==t)return;e||(this.selectedViewshed=null);const s=t.map(e=>e.viewshedComputedData).filter(e=>e.valid).toArray();e?this._addViewshedsToRenderer(s):this._removeViewshedsFromRenderer(s)}),d(()=>e.renderCoordsHelper,e=>{this.viewshedComputedDataHandles?.forEach(({viewshedComputedData:t})=>t.renderCoordsHelper=e)}),O(this,D),l(()=>this.interactive,()=>{this._unselectOtherViewsheds(this.selectedViewshed)},h)])}destroy(){this.userOperation=o(this.userOperation),U(this),this._visualization=a(this._visualization);const e=this.viewshedComputedDataHandles;null!=e&&this._removeViewshedsFromRenderer(e.map(e=>e.viewshedComputedData).toArray())}_createFeatureReferenceHandles(e){const{view:t}=this;return[d(()=>[t.state.camera,t.slice.plane,e.viewshed.observer,e.targetRenderSpace,e.verticalFieldOfView,e.horizontalFieldOfView,e.feature],()=>{this._updateObserverFromFeature(t,e)},n),this._createElevationUpdateHandle(e),l(()=>e.needUpdateByFeature,()=>{this._updateObserverFromFeature(t,e),e.needUpdateByFeature=!1})]}_createElevationUpdateHandle(e){const t=(s,i)=>{const{view:r}=this,{observer:o}=e;if(null==o)return;const a=V(o,r.spatialReference);if(null!=a.pending)return void a.pending.finally(()=>t(s,i));const d=a.geometry;null!=d&&(y(s,i,z,r.spatialReference),g(z,[d.x,d.y])&&(e.needUpdateByFeature=!0))};return this.view.elevationProvider.on(\"elevation-change\",({extent:e,spatialReference:s})=>t(e,s))}async createViewsheds(e){await S(this,{placementOptions:e,onToolActivated:e=>e.place(\"multiple\")})}place(e){return S(this,{placementOptions:e,onToolActivated:e=>e.place(\"single\")})}_addViewshedsToRenderer(e){this._viewshedRenderNode.updateViewsheds({adds:e})}_removeViewshedsFromRenderer(e){this._viewshedRenderNode.updateViewsheds({removes:e})}_updateObserverFromFeature(e,i){const r=i.observerRenderSpace,o=i.targetRenderSpace,a=u(v(),r),d={observer:r,observerSurfaceNormal:null,observerAdjusted:a,observerFeatureId:t(i.feature),target:o,targetSurfaceNormal:null,targetAdjusted:u(v(),o),targetFeatureId:null};s(e,this._intersector,d,e=>Math.min(e,.05*i.farDistanceRenderSpace)),i.observerRenderSpaceOverride=m(a,r)?null:a}_unselectOtherViewsheds(e){if(null!=e)for(const t of this.view.tools.items)t!==this.tool&&t instanceof D&&(t.analysisViewData.selectedViewshed=null)}get test(){}};e([p({readOnly:!0})],A.prototype,\"type\",void 0),e([p({constructOnly:!0,nonNullable:!0})],A.prototype,\"analysis\",void 0),e([p()],A.prototype,\"tool\",void 0),e([p()],A.prototype,\"_selectedViewshed\",void 0),e([p()],A.prototype,\"selectedViewshed\",null),e([p()],A.prototype,\"selectedViewshedComputedData\",null),e([p()],A.prototype,\"viewshedComputedDataHandles\",void 0),e([p()],A.prototype,\"userOperation\",void 0),e([p()],A.prototype,\"_visualization\",void 0),e([p()],A.prototype,\"_viewshedRenderNode\",void 0),A=e([c(\"esri.views.3d.analysis.ViewshedAnalysisView3D\")],A);const N=A,z=_();export{N as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{deg2rad as o}from\"../../../../core/mathUtils.js\";const t=has(\"mac\")?\"Meta\":\"Control\",r=\"Shift\",s=2,a=1.15,c=1.15,m=2500,h=.02,e=Math.cos(o(45)),i=Math.cos(o(5)),f=.95,p=.3,M=2,j=1,l=3,n=11,x=22.5,C=40,S=48,U=2.25,b=4,d=1,g=.3,k=6,q=4,u=1600,v=.4;export{s as displayFocusMultiplier,t as forceHorizontalModifier,r as forceVerticalModifier,h as initialDepthOffsetFrac,v as initialPlaneHalfSizeViewProportion,u as planeMinBasisScreenLen2,j as planeOutlineWidth,M as planePreviewOutlineWidth,m as pointerMoveTimerMs,f as previewFadeDotThreshold,p as previewFadeDurationSeconds,k as resizeHandleCornerInputRadius,b as resizeHandleCornerWidth,q as resizeHandleEdgeInputRadius,g as resizeHandleEdgePaddingFrac,d as resizeHandleEdgeWidth,S as shiftRestartArrowLength,U as shiftRestartArrowOutlineWidth,C as shiftRestartOffsetDistance,c as shiftRestartTipFocusMultiplier,x as shiftRestartTipLength,n as shiftRestartTipRadius,a as shiftRestartTubeFocusMultiplier,l as shiftRestartTubeRadius,i as smallAngleDotThreshold,e as verticalDotThreshold};\n"],"names":["e","o","s","r","i","constructor","super","initialize","this","addHandles","analysisViewData","visible","t","deactivate","onDeactivate","created","analysis","clear","resetCreated","_set","m","interactive","f","view","n","tool","tools","add","v","p","remove","y","a","_a$abortOptions","userOperation","async","_a$shouldRejectOnCanc","promise","catch","abort","activeTool","c","_t$tool","active","u","signal","shouldRejectOnCancel","l","_a$onToolActivated","onToolActivated","call","aborted","abortOptions","finally","d","clone","placementOptions","valid","equals","x","arguments","shadowMap","depthTexture","nearFar","numActiveFaces","atlasRegions","targetVector","upVector","fovs","headingAndTilt","observerOffset","projectionMatrices","flat","viewMatrices","volumeOffset","V","fragment","include","uniforms","_e$depth","depth","attachment","camera","inverseProjectionMatrix","_ref","b","viewInverseTransposeMatrix","_e$shadowMap$nearFar","h","g","w","normals","constants","code","_templateObject","_taggedTemplateLiteral","main","_templateObject2","M","Object","freeze","defineProperty","__proto__","ViewshedPassParameters","build","Symbol","toStringTag","value","localOrigin","viewMatrix","observer","farDistance","heading","tilt","horizontalFieldOfView","verticalFieldOfView","feature","type","json","write","isRequired","prototype","Number","nonNullable","range","min","normalize","max","readOnly","read","layer","id","objectId","objectIdField","attributes","uid","concat","writer","_e$layer","layerId","target","String","origins","ObjectId","clonable","I","_R","_w","sceneIntersectionHelper","observerFeatureId","targetFeatureId","options","store","intersectToolIntersectorRay","F","N","R","results","all","distanceInRenderSpace","j","observerAdjusted","T","targetAdjusted","getIntersectionPoint","observerSurfaceNormal","getTransformedNormal","targetSurfaceNormal","Math","excludeLabels","parent","_userInteractive","_interactiveViewModelCount","updating","_this$parent","suspended","_overrideIfSome","forceInteractive","constructOnly","Boolean","intersect","intersectDraped","length","undefined","q","k","start","end","U","abs","push","sqrt","collisionRadius","fovUnfocusedArcWidth","fovFocusedArcWidth","scaleOrientSize","scaleOrientHandleRadius","scaleOrientMinDistance","scaleOrientArrowTipLength","scaleOrientArrowTipFocusMultiplier","observerSize","hoverTimeoutMilliseconds","viewAngleThreshold","getFovArcWidth","getScaleOrientArrowTipLength","frameWidthNotSelected","frameWidthSelected","frameColor","observerPointConfiguration","size","pixelSnappingEnabled","primitive","elevationInfo","mode","offset","outlineSize","color","toUnitRGBA","shapeMaterialParameters","renderOccluded","cullFace","writeDepth","tiltedUpVector","rightVector","observerRenderSpace","plane","S","D","renderCoordsHelper","toRenderCoords","position","direction","E","next","targetRenderSpace","basis1","basis2","origin","acos","farDistanceRenderSpace","sin","renderStart","renderEnd","_objectSpread","action","deltaAngle","C","A","observerRenderSpaceOverride","needUpdateByFeature","_this$viewshed$observ","viewshed","effectiveObserverRenderSpace","_this$observerRenderS","effectiveObserver","renderSpaceToPoint","spatialReference","effectiveTargetRenderSpace","_computeTargetRenderSpace","metersPerUnit","tiltParallelToSurface","_pointToRenderSpace","targetDirection","leftVector","_basis","basisMatrixAtPosition","northVector","pointOnSphere","cornerPoints","topLeft","topRight","bottomLeft","bottomRight","arcCentersPoints","top","bottom","left","right","parallelCenterPoints","fromRenderCoords","toArray","_handles","_tool","_view","_focusedArcMaterial","_createArcMaterial","_unfocusedArcMaterial","_createManipulators","forEachManipulator","manipulators","destroy","_manipulators","createDragPipeline","values","map","manipulator","side","_ref6","_","L","B","G","manipulatorType","updateManipulatorsTransform","H","_forEachManipulatorInfo","_updateArcManipulatorTransform","updateManipulatorVisuals","_updateArcManipulatorVisuals","_ref2","cos","P","O","instantiate","material","collisionType","paths","renderObjects","radius","_ref3","renderLocation","z","modelTransform","_createArcManipulator","forEach","_ref4","metadata","pairedManipulator","autoScaleRenderObjects","worldSized","events","on","_r$metadata","hovering","grabbing","isDecoration","width","state","isGlobal","effectiveTheme","accentColor","setParameters","_ref5","test","PI","_setupManipulatorVisual","_createMaterial","transformation","_manipulatorHeading","_manipulatorTilt","_manipulatorDistance","createHeadingDragPipeline","createTiltDragPipeline","createDistanceDragPipeline","location","updateManipulators","_color","_moveManipulation","_observerManipulator","_fieldOfViewManipulation","_scaleOrientManipulation","_forceHoveringTask","_forceHoveringTestPromise","_grabbing","viewshedComputedData","_createMoveManipulation","parentTool","_this$viewshedCompute","_this$viewshedCompute2","angle","removeHandles","_buildObserverDragPipeline","_buildFOVDragPipeline","_buildScaleOrientDragPipeline","filter","viewshedCompData","hFOV","vFOV","_this$viewshedCompute3","_this$viewshedCompute4","selectedViewshedComputedData","fovManipulationAvailable","isPlacingTarget","nonFOVManipulationAvailable","creating","available","_forEachManipulator","_someManipulatorHovering","subToolHandles","subTool","_resetHoveringTask","_someManipulatorSelected","_this$_forceHoveringT","_updateManipulatorVisibility","_i$tool","updateInteractionVisualsVisibility","_setInteractive","hasManipulator","_i$tool2","_this$viewshedCompute5","_this$viewshed","discManipulator","xyManipulation","moveInteractionState","dragging","scaleOrientInteractionState","_forEachManipulation","onManipulatorSelectionChanged","selectedViewshed","selected","snapToScene","xyAvailable","xyAxisAvailable","zAvailable","steps","cancel","fromGeometry","viewingMode","operations","data","geometry","clamp","disableDisplay","moveManipulation","fieldOfViewManipulation","scaleOrientManipulation","setHoveringTimeoutPromise","W","removeIncompleteOnCancel","automaticManipulatorSelection","_stagedViewshed","_stagedViewshedComputedData","_placementMode","_creationState","_interactionVisualElements","_settings","getTheme","_selectedManipulator","_intersector","_createInteractionVisuals","viewshedComputedDataHandles","_valid","finishToolCreation","_this$_findSubTool","_findSubTool","viewsheds","item","firstGrabbedManipulator","_this$_selectedSubToo","_this$_findSubTool2","_selectManipulator","_selectedSubTool","_updateInteractionVisualsLocation","removeStaged","_this$analysisViewDat","_this$analysisViewDat2","some","cursor","_this$_findSubTool3","_this$_selectedSubToo2","_this$_selectedSubToo3","stagedViewshed","place","_finishToolCreationIfValid","onInputEvent","_doubleClickHandler","_pointerMoveHandler","key","_cancelKeyHandler","delete","includes","_deleteKeyHandler","onInputEventAfter","_clickPlacementHandler","onActivate","hasFocusedManipulators","_intersectScreen","_i$mapPoint$z","mapPoint","_updateStagedViewshed","scenePoint","stopPropagation","_onCancelWhileCreating","K","intersectToolIntersectorScreen","visualElements","attached","style","glowWidth","heightPlane","innerWidth","extensionType","zVerticalLine","writeDepthEnabled","laserline","verticalLine","apply","heightManifoldTarget","intersectsWorldUpAtLocation","setStartEndFromWorldDownAtLocation","_this$subToolHandles","find","_material","_viewshedComputedData","applyProperties","updateTransform","transform","createExternalResources","destroyExternalResources","forEachMaterial","createGeometries","ceil","addGeometry","isNaN","_viewshedCorners","_arcCenterPoints","_parallelCenters","stipplePattern","_observerVisualElement","_shapeVisualElement","_frameLinesVisualElement","_leftArcVisualElement","_rightArcVisualElement","_topArcVisualElement","_bottomArcVisualElement","_centralLongitude","_centralLatitude","corners","arcCenters","parallelCenters","_selected","_forEachVisualElement","_updateVisualElements","initial","recreateGeometry","staged","_staged","horFovNot360","_forEachLineVisualElement","_t$creating","observerVisible","_s$tool","_s$tool2","_updateFrameLines","_updateFrameArcs","_updateCentralHelperArcs","visualization","_subVisualizations","sectionAngles","sectionAnglesDeg","projectionMatrix","sectionMatrix","_projectionMatrixInternal","tan","fovX","fovY","_sectionRatioX","setViewport","viewport","textureSizeQuality","textureSizeModHighQuality","textureSizeModLowQuality","textureSizeMultiple","toleranceSides","toleranceBottomTop","textureSizeModifier","textureResizeModulo","_fbos","_faces","_width","_height","settings","_maxTextureSize","has","rctx","parameters","maxTextureSize","_this$_handle","_handle","getTexture","ready","faces","keys","height","viewshedProjectionMatrices","viewshedViewMatrices","_setupFaceCamera","center","eye","up","far","isActive","_computeActiveFaces","Set","_computeBaseTextureSize","pixelRatio","fullWidth","fullHeight","_ensureFBO","_this$_handle2","_s$depthStencilTextur","_s$depthStencilTextur2","_this$_handle3","fbo","depthStencilTexture","descriptor","internalFormat","DEPTH_COMPONENT16","release","_allocateFBO","_r$getTexture","acquire","setShadowFiltering","clearFBO","_this$_handle4","bindFramebuffer","setClearColor","dispose","_debugFBO","finish","initializePipeline","colorWrite","blending","_shadowMap","hasViewsheds","_viewsheds","_contentPixelRatio","contentPixelRatio","_viewshedsInView","items","frustum","intersectsSphere","_passParameters","consumes","required","VIEWSHED","produces","requireGeometryDepth","fboCache","resolutionScale","_this$_shadowMap","requestRender","precompile","techniques","_this$_shadowMap2","stage","renderer","precompileViewshedShadowMap","render","_this$_shadowMap3","_e$find","_this$shadowMap","bindParameters","renderingContext","name","decorations","get","compiled","isFeatureEnabled","_this$_shadowMap4","_renderShadowCubeMap","_setupViewshedParameters","bindTechnique","screen","draw","updateViewsheds","removes","adds","Array","isArray","removeMany","addMany","basemapTerrain","hasStencilEnabledExtents","renderViewshedShadowMap","_this$selectedViewshe","pixelSizeAt","viewshedsInView","_selectedViewshed","_viewshedRenderNode","_unselectOtherViewsheds","_this$tool","_isDecoration","_this$tool2","hud","_s$observer","canProject","_addViewshedsToRenderer","_removeViewshedsFromRenderer","getLogger","_createFeatureReferenceHandles","_visualization","slice","_updateObserverFromFeature","_createElevationUpdateHandle","pending","elevationProvider","extent","createViewsheds"],"sourceRoot":""}