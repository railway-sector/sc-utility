"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[27040,92278],{27040:(e,t,n)=>{n.r(t),n.d(t,{createMesh:()=>u});var r=n(50076),a=n(25213),o=n(45308),s=n(42294),i=n(14894),l=n(56623),c=n(45136),d=n(95799);function u(e){var t,n;const s=new d.O,u=null!==(t=e.spatialReference)&&void 0!==t?t:e.layerView.view.spatialReference;return s.externalSources.add({extent:null!==(n=e.extent)&&void 0!==n?n:f(e,u),source:{type:"loadable",load:t=>async function(e,t){let{layerView:n,nodeIndex:a,featureIndex:s}=t;const i=n.getNodeComponentHandle(a);if(null===i||void 0===i||!i.intersectionGeometry)throw new r.A("i3s-layer-view-geometry-missing","Cannot load mesh because scene layer view data is no longer available.");const d={indices:null,data:null,stride:0,startIndex:0,endIndex:0};i.intersectionGeometry.getComponentPositions(s,d);const{indices:u,data:f,stride:p,startIndex:w,endIndex:x}=d,y=new Float64Array(3*(x-w));let m=0;for(let r=w;r<x;r+=3){const e=p*u[r],t=p*u[r+1],n=p*u[r+2];y[m++]=f[e],y[m++]=f[e+1],y[m++]=f[e+2],y[m++]=f[t],y[m++]=f[t+1],y[m++]=f[t+2],y[m++]=f[n],y[m++]=f[n+1],y[m++]=f[n+2]}const v=i.transform;(0,c.b)(y,y,v.rotationScale),(0,c.a)(y,y,v.position),(0,o.projectBuffer)(y,n.view.renderSpatialReference,0,y,e.spatialReference,0),e.vertexAttributes=new l.H({position:y})}(t,e)}}),new a.default({metadata:s,vertexSpace:new i.A,spatialReference:u})}function f(e,t){let{layerView:n,nodeIndex:r,featureIndex:a}=e;const i=n.getAABB(r,a);if(!i)return null;const l=n.view.spatialReference;return l.equals(t)||(0,o.projectBuffer)(i,l,0,i,t,0),(0,s.w1)(i,t)}},92278:(e,t,n)=>{n.d(t,{processQueryGeometries:()=>i});var r=n(13312),a=n(19902),o=n(77725),s=n(27040);function i(e,t){const n=new Array,i=r.A.fromJSON(t.spatialReference);for(const r of t.features){const t=r.metadata,o=(0,a.rS)(r.geometry);if(!t||!o){n.push(null);continue}o.spatialReference=i;const l=o.extent,c=(0,s.createMesh)({layerView:e,nodeIndex:t.meta.node.index,featureIndex:t.index,extent:l,spatialReference:i});n.push(c),r.geometry=null}const l=o.A.fromJSON(t);for(let r=0;r<l.features.length;r++){const e=l.features[r],t=n[r];e.geometry=t}return l}}}]);
//# sourceMappingURL=92278.7328d291.chunk.js.map