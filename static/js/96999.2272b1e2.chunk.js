"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[96999],{14471:(t,e,i)=>{i.d(e,{P:()=>n,q:()=>s});var a=i(17046);function s(t,e,i){const s=(i,a)=>{e({action:i,object:t,dxScreen:a.screenDeltaX,dyScreen:a.screenDeltaY})};return i((e,i,n)=>(i.next(t=>("start"===t.action&&s("start",t),t)).next((0,a.Wp)(t)).next(t=>{switch(t.action){case"start":case"update":(t.translationX||t.translationY||t.translationZ)&&s("update",t);break;case"end":s("end",t)}return t}),{steps:i,cancel:n=n.next((0,a.dp)(t)).next(t=>(s("end",{screenDeltaX:0,screenDeltaY:0}),t))}))}function n(t){if(null==(null===t||void 0===t?void 0:t.axis))return 1;const{mapStart:e,mapEnd:i,axis:a}=t,s=[i.x-e.x,i.y-e.y];return s[0]*a[0]+s[1]*a[1]>0?1:-1}},14835:(t,e,i)=>{i.d(e,{w:()=>z});var a=i(53986),s=i(35143),n=i(69539),r=i(91967),o=i(59784),l=i(46053),c=(i(81806),i(76460),i(47249),i(85842)),h=i(75655),u=i(45463),p=i(35925);const d=["colors"],_=["colors"],f=["colors"],g=["colors"],M=["colors"],v=["colors"],A=.3;function m(t,e){e&&Object.assign(t,e)}class w{constructor(t){this.height=90,this.coneHeight=40,this.coneWidth=23,this.width=3,this.renderOccluded=u.m$.Opaque,this.color=t.accent}}class y{constructor(t){let{colors:e}=t,i=(0,a.A)(t,d);this.size=11,this.outlineSize=1,this.collisionPadding=9,this.color=e.accent,this.outlineColor=e.outline,this.renderOccluded=u.m$.Opaque,this.hoverOutlineColor=e.selectedOutline,m(this,i)}applyColor(t){this._apply(this.color,t)}applyOutline(t){this._apply(this.outlineColor,t)}applyHoverOutline(t){this._apply(this.hoverOutlineColor,t)}_apply(t,e){e.setParameters({color:(0,o.QP)(t),renderOccluded:this.renderOccluded})}}class T{constructor(t){let{colors:e}=t,i=(0,a.A)(t,_);this.size=40,this.height=.2,this.offset=.25,this.collisionPadding=2,this.renderOccluded=u.m$.Transparent,this.minSquaredEdgeLength=900,this.color=(0,o._L)(e.accent,.5),this.hoverColor=e.accent,m(this,i)}applyColor(t){this._apply(this.color,t)}applyHover(t){this._apply(this.hoverColor,t)}_apply(t,e){e.setParameters({color:(0,o.QP)(t),renderOccluded:this.renderOccluded})}}class x{constructor(t){this.vertex=new y({colors:t,color:t.accent,outlineColor:t.outline}),this.edge=new y({colors:t,color:(0,o.Vl)((0,o._L)(t.accent,2/3),.5),outlineColor:(0,o._L)(t.outline,.5),size:8,collisionPadding:8}),this.selected=new y({colors:t,color:t.selected,outlineColor:t.outline}),this.edgeOffset=new T({colors:t})}}class E{constructor(t){let{colors:e}=t,i=(0,a.A)(t,f);this.width=1.5,this.stipplePattern=(0,p.wk)(3.3),this.falloff=0,this.innerWidth=1.5,this.renderOccluded=u.m$.OccludeAndTransparent,this.color=e.selected,this.stippleOffColor=e.outline,this.innerColor=e.selected,m(this,i)}apply(t){t.color=(0,o.QP)(this.color),t.width=this.width,t.stipplePattern=this.stipplePattern,t.stippleOffColor=(0,o.QP)(this.stippleOffColor),t.falloff=this.falloff,t.innerWidth=this.innerWidth,t.innerColor=(0,o.QP)(this.innerColor),t.renderOccluded=this.renderOccluded}}class S{constructor(t){let{colors:e}=t,i=(0,a.A)(t,g);this.size=4,this.outlineSize=1,this.shape="square",this.color=e.selected,this.outlineColor=e.outline,m(this,i)}apply(t){t.color=(0,o.QP)(this.color),t.size=this.size,t.outlineSize=this.outlineSize,t.outlineColor=(0,o.QP)(this.outlineColor),t.primitive=this.shape}}class O{constructor(t){let{colors:e}=t,i=(0,a.A)(t,M);this.innerWidth=1,this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=A,this.globalAlphaContrastBoost=1.5,this.radius=3,this.innerColor=e.selected,this.glowColor=e.accent,this.heightFillColor=e.accent,m(this,i)}apply(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i={glowColor:n.A.toUnitRGB(this.glowColor),glowFalloff:this.glowFalloff,glowWidth:this.glowWidth,innerColor:n.A.toUnitRGB(this.innerColor),innerWidth:this.innerWidth,globalAlpha:this.globalAlpha*e*this.glowColor.a,globalAlphaContrastBoost:this.globalAlphaContrastBoost,intersectsLineRadius:this.radius};"style"in t?t.style=i:t.laserlineStyle=i}}class b{constructor(t){this.outline=new E({colors:t,color:t.stippleOff,renderOccluded:u.m$.OccludeAndTransparentStencil,stippleOffColor:t.stippleOn,innerWidth:0}),this.staged=new E({colors:t,color:t.stippleOn,renderOccluded:u.m$.OccludeAndTransparentStencil,innerColor:t.stagedSolid,stippleOffColor:t.stippleOff}),this.shadowStyle=new O({colors:t,globalAlpha:A,glowColor:t.accent,glowFalloff:8,glowWidth:8,innerColor:t.selected,innerWidth:1})}}class C{constructor(t){this.outline=new S({colors:t,color:t.selected,outlineColor:t.outline,outlineSize:1,shape:"circle",size:4}),this.shadowStyle=new O({colors:t,globalAlpha:A,glowColor:t.accent,glowFalloff:1.5,glowWidth:6,innerColor:t.selected,innerWidth:1,radius:2})}}class P extends E{constructor(t){let{colors:e}=t,i=(0,a.A)(t,v);super({colors:e}),this.extensionType=h.A.GROUND_RAY,m(this,i)}}class D{constructor(t){this.laserlineAlphaMultiplier=1.5,this.heightPlaneAngleCutoff=20,this.lineObjects=new b(t),this.pointObjects=new C(t),this.heightPlane=new O({colors:t,globalAlpha:A,glowColor:t.accent,glowFalloff:8,glowWidth:8,innerColor:t.selected,innerWidth:1}),this.heightBox=new O({colors:t,globalAlpha:A,glowColor:t.accent,glowFalloff:8,glowWidth:8,innerColor:t.selected,innerWidth:0,heightFillColor:t.accent}),this.zVerticalLine=new P({colors:t,color:(0,o._L)(t.accent,.5),falloff:2,innerColor:(0,o._L)(t.selected,0),renderOccluded:u.m$.OccludeAndTransparent,stipplePattern:null,width:5,extensionType:h.A.GROUND_RAY})}}let z=class extends r.A{constructor(t){super(t)}get colors(){const t=this.getTheme().accentColor,e=t.a;return{accent:t,contrast:(0,o.bJ)(t),selected:n.A.fromArray([255,255,255,e]),selectedOutline:n.A.fromArray([255,255,255,e]),staged:n.A.fromArray([12,207,255,e]),stagedSolid:n.A.fromArray([12,207,255,1]),outline:n.A.fromArray([0,0,0,.5*e]),stippleOn:n.A.fromArray([255,255,255,1]),stippleOff:n.A.fromArray([0,0,0,.5])}}get visualElements(){return new D(this.colors)}get manipulators(){return new x(this.colors)}get zManipulator(){return new w(this.colors)}};(0,s._)([(0,l.MZ)()],z.prototype,"colors",null),(0,s._)([(0,l.MZ)()],z.prototype,"visualElements",null),(0,s._)([(0,l.MZ)()],z.prototype,"manipulators",null),(0,s._)([(0,l.MZ)()],z.prototype,"zManipulator",null),(0,s._)([(0,l.MZ)()],z.prototype,"getTheme",void 0),z=(0,s._)([(0,c.$)("esri.views.3d.interactive.editingTools.settings")],z)},19112:(t,e,i)=>{var a;i.d(e,{r:()=>a}),function(t){t[t.TRANSLATE_Z=0]="TRANSLATE_Z",t[t.TRANSLATE_XY=1]="TRANSLATE_XY",t[t.SCALE=2]="SCALE",t[t.ROTATE=3]="ROTATE",t[t.SCALE_ROTATE=4]="SCALE_ROTATE"}(a||(a={}))},36452:(t,e,i)=>{i.d(e,{A:()=>s});var a=i(60428);class s extends a.c{constructor(){super(...arguments),this._interactive=!0}get interactive(){return this._interactive}set interactive(t){this._interactive!==t&&(this._interactive=t),this._updateManipulatorInteractivity()}_updateManipulatorInteractivity(){const t=!this.grabbing&&this._interactive;this.forEachManipulator(e=>{e.interactive=t||e.grabbing})}}},46947:(t,e,i)=>{i.d(e,{$s:()=>f,Cq:()=>u,D7:()=>T,Dh:()=>x,Ej:()=>O,Gz:()=>s,HJ:()=>c,Je:()=>h,M1:()=>y,Ov:()=>E,P3:()=>g,Tq:()=>r,V1:()=>S,Vj:()=>M,Wv:()=>n,_L:()=>m,cg:()=>A,cy:()=>o,gB:()=>d,jR:()=>v,my:()=>l,nI:()=>p,qf:()=>_,vo:()=>w,zT:()=>b,zu:()=>a});const a=128,s=70,n=80,r=.02,o=54,l=100,c=Math.ceil(s/3*2),h=160,u=.5,p=24,d=9,_=h+30,f=h+53,g=60,M=23,v=5*Math.PI/12,A=1*Math.PI/3,m=10,w=.2,y=30,T=53,x=.2,E=.3,S=200,O=3,b=1e6},60428:(t,e,i)=>{i.d(e,{c:()=>s});var a=i(56121);class s{constructor(){this._available=!0}set location(t){this._forEachManipulator3D(e=>e.location=t)}set elevationAlignedLocation(t){this._forEachManipulator3D(e=>e.elevationAlignedLocation=t)}set elevationInfo(t){this._forEachManipulator3D(e=>e.elevationInfo=t)}get renderLocation(){let t;return this._forEachManipulator3D(e=>{t||(t=e.renderLocation)}),t}set renderLocation(t){this._forEachManipulator3D(e=>e.renderLocation=t)}get available(){return this._available}set available(t){this._available=t,this._forEachManipulator3D(e=>e.available=t)}get hovering(){return this.someManipulator(t=>t.hovering)}get grabbing(){return this.someManipulator(t=>t.grabbing)}get dragging(){return this.someManipulator(t=>t.dragging)}get selected(){return this.someManipulator(t=>t.selected)}hasManipulator(t){return this.someManipulator(e=>e===t)}someManipulator(t){let e=!1;return this.forEachManipulator(i=>{!e&&t(i)&&(e=!0)}),e}_forEachManipulator3D(t){this.forEachManipulator((e,i)=>{e instanceof a.q&&t(e,i)})}}},96999:(t,e,i)=>{i.d(e,{K:()=>Z,v:()=>B});var a=i(88321),s=i(54901),n=i(81806),r=i(68134),o=i(19112),l=i(46947),c=i(36452),h=i(89379),u=i(69539),p=i(54099),d=i(30726),_=i(34761),f=i(13191),g=i(20664),M=i(9392),v=i(75762),A=i(56121),m=i(91175),w=i(7947),y=i(60428),T=i(14471),x=i(83490),E=i(62577),S=i(45463),O=i(76956),b=i(17046),C=i(76336);class P extends y.c{constructor(t){super(),this._handles=new a.A,this._arrowManipulatorInfos=new Array,this._angle=0,this._scale=1,this._radius=l.Gz,this._updateAfterDrag=!1,this.events=new p.A,this._tool=t.tool,this._view=t.view,this._opaqueMaterial=this._createMaterial(),this._transparentMaterial=this._createMaterial(.5),null!=t.radius&&(this._radius=t.radius),this._createManipulators(),this.forEachManipulator(t=>this._tool.manipulators.add(t))}set orthogonalAvailable(t){this._arrowManipulatorInfos.length>=3&&(this._arrowManipulatorInfos[1].manipulator.available=t,this._arrowManipulatorInfos[3].manipulator.available=t)}destroy(){this._handles=(0,d.pR)(this._handles),this.forEachManipulator(t=>{this._tool.manipulators.remove(t),t.destroy()}),this._tool=null,this._view=null,this._arrowManipulatorInfos.length=0}forEachManipulator(t){for(const{manipulator:e}of this._arrowManipulatorInfos)t(e,o.r.TRANSLATE_XY)}createManipulatedObjectDragPipeline(t,e,i){if(!e.operations)return(0,s.hA)();const a=e.operations.data.spatialReference,n=e.graphic;return(0,T.q)(e,i,i=>this.createDragPipeline((e,a,s,n,r)=>(({steps:a,cancel:s}=t(e,a,s,n,r)),i(e,a,s)),e.elevationInfo,a,n))}createDragPipeline(t,e,i,a){return(0,s.vE)(this._arrowManipulatorInfos.map((s,n)=>{let{manipulator:r}=s;return(0,b.Xt)(r,(s,r,l,c,u)=>{const p=r.next(t=>(0,h.A)((0,h.A)({},t),{},{manipulatorType:o.r.TRANSLATE_XY})).next((0,b.Tp)(this._view,s.elevationAlignedLocation)).next((0,w.PW)(this._view,s.elevationAlignedLocation,e,i,a)).next((0,b.an)(s.location,this.angle+(n+1)*Math.PI*.5)).next((0,b.sO)());t(s,p,l,c,u)})}))}get angle(){return this._angle}set angle(t){this._angle=t,this.dragging?this._updateAfterDrag=!0:this._updateManipulatorTransform()}get displayScale(){return this._scale}set displayScale(t){this._scale=t,this._updateManipulatorTransform()}get radius(){return this._radius}set radius(t){this._radius!==t&&(this._radius=t,this._updateManipulators())}_updateManipulators(){for(let t=0;t<this._arrowManipulatorInfos.length;t++)this._updateArrowManipulator(this._arrowManipulatorInfos[t],t);this._updateManipulatorTransform()}_updateArrowManipulator(t,e){let{manipulator:i,transform:a}=t;const s=this._radius/l.Gz,n=l.cy*s,r=n*Math.sqrt(3)/2,o=(0,E._B)(this._opaqueMaterial,r,n/2,n/2,l.Tq);(0,E.xh)(o,(0,_.kN)(v.Rc.get(),(0,g.i)(v.rq.get(),0,-r/3,0))),i.renderObjects=[new m.M(o,C.p7.Focused),new m.M(o.instantiate({material:this._transparentMaterial}),C.p7.Unfocused)],i.radius=r/3*2*1.2;const c=(0,_.N9)(v.Rc.get(),e*Math.PI/2),h=(0,_.kN)(v.Rc.get(),(0,g.i)(v.rq.get(),0,l.my*s,0));(0,_.lw)(a,c,h)}_createManipulators(){for(let t=0;t<4;t++){const e=this._createArrowManipulator(t);this._arrowManipulatorInfos.push(e)}this._updateManipulatorTransform()}_updateManipulatorTransform(){const t=this.angle,e=(0,_.$0)(v.Rc.get(),t,(0,M.fA)(0,0,1));if(null==e)return;const i=(0,_.CV)(v.Rc.get(),(0,g.i)(v.rq.get(),this.displayScale,this.displayScale,this.displayScale)),a=(0,_.lw)(v.Rc.get(),i,e);for(const s of this._arrowManipulatorInfos){const t=(0,_.lw)(v.Rc.get(),a,s.transform);s.manipulator.modelTransform=t}}_createArrowManipulator(t){const e=new A.q({view:this._view,autoScaleRenderObjects:!1,worldOriented:!0,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:(0,M.fA)(0,0,1)}}),i={manipulator:e,transform:(0,f.vt)()};return this._updateArrowManipulator(i,t),this._handles.add(e.events.on("drag",t=>{this._updateAfterDrag&&"end"===t.action&&!this.dragging&&(this._updateManipulatorTransform(),this._updateAfterDrag=!1)})),i}_createMaterial(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=new O.v({cullFace:x.s2.Back,renderOccluded:S.m$.Transparent,isDecoration:!0});return this._handles.add((0,r.wB)(()=>u.A.toUnitRGBA(this._view.effectiveTheme.accentColor),i=>{i[3]*=t,e.setParameters({color:i})},r.Vh)),e}get test(){}}var D=i(12482);class z{constructor(){this._view=null,this._elevationInfo=null,this._lastDragEvent=null,this._next=null,this._enabled=!1}get enabled(){return this._enabled}set enabled(t){if(this._enabled!==t&&null!=this._lastDragEvent&&null!=this._next){const e=this._lastDragEvent.mapEnd,i=this._snap(this._lastDragEvent.screenEnd);if(null!=i){const a={action:"update",mapStart:this._lastDragEvent.mapStart,mapEnd:!0===t?i:e,screenStart:this._lastDragEvent.screenEnd,screenEnd:this._lastDragEvent.screenEnd};this._next.execute(a)}}this._enabled=t}_snap(t){const e=null!=this._view?this._view.toMap(t,{exclude:[]}):null;return null!=e&&null!=this._view&&(e.z=(0,D.id)(e,this._view,this._elevationInfo)),e}createDragEventPipelineStep(t,e){this._view=t,this._elevationInfo=e,this._lastDragEvent=null;const i=new b.rh;return this._next=i,[t=>{if(this._lastDragEvent="end"!==t.action?(0,h.A)({},t):null,this._enabled){const e=this._snap(t.screenEnd);return null!=e?{action:t.action,mapStart:t.mapStart,mapEnd:e,screenStart:t.screenStart,screenEnd:t.screenEnd}:null}return{action:t.action,mapStart:t.mapStart,mapEnd:t.mapEnd,screenStart:t.screenStart,screenEnd:t.screenEnd}},i]}}class R extends y.c{constructor(t){super(),this._handles=new a.A,this._snapToScene=new z,this._scale=1,this._radius=l.Gz,this._view=t.view,this._tool=t.tool,this._discMaterial=this._createMaterial(),this._discMaterialTransparent=this._createMaterial(.5),null!=t.snapToScene&&(this.snapToScene=t.snapToScene),null!=t.radius&&(this._radius=t.radius),this._createManipulator(),this.forEachManipulator(t=>this._tool.manipulators.add(t))}destroy(){this._handles=(0,d.pR)(this._handles),this.forEachManipulator(t=>{this._tool.manipulators.remove(t),t.destroy()}),this._tool=null,this._view=null,this._manipulator=null}forEachManipulator(t){t(this._manipulator,o.r.TRANSLATE_XY)}get displayScale(){return this._scale}set displayScale(t){this._scale=t,this._updateManipulatorTransform()}get snapToScene(){return this._snapToScene.enabled}set snapToScene(t){this._snapToScene.enabled=t}get radius(){return this._radius}set radius(t){t!==this._radius&&(this._radius=t,this._updateManipulator())}get discManipulator(){return this._manipulator}createManipulatedObjectDragPipeline(t,e,i){if(!e.operations)return(0,s.hA)();const a=e.graphic,n=e.elevationInfo,r=e.operations.data.spatialReference;return(0,T.q)(e,i,e=>this.createDragPipeline((i,a,s,n,r)=>(({steps:a,cancel:s}=t(i,a,s,n,r)),e(i,a,s)),n,r,a))}createDragPipeline(t,e,i,a){const s=this._view;return(0,b.Xt)(this._manipulator,(n,r,l,c,u)=>{const p=r.next((0,b.Tp)(s,n.elevationAlignedLocation)).next((0,w.PW)(s,n.elevationAlignedLocation,e,i,a)).next(...this._snapToScene.createDragEventPipelineStep(s,e)).next(t=>(0,h.A)((0,h.A)({},t),{},{manipulatorType:o.r.TRANSLATE_XY})).next((0,b.sO)());t(n,p,l,c,u)})}_updateManipulatorTransform(){const t=(0,_.CV)(v.Rc.get(),(0,g.i)(v.rq.get(),this.displayScale,this.displayScale,this.displayScale));this._manipulator.modelTransform=t}_createManipulator(){const t=this._view;this._manipulator=new A.q({view:t,worldSized:!1,autoScaleRenderObjects:!1,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:(0,M.fA)(0,0,1)},worldOriented:!0}),this._updateManipulator()}_updateManipulator(){const t=(0,E.nW)(this._discMaterial,l.Tq,1,l.zu,(0,M.fA)(0,0,1),(0,M.fA)(0,0,0));t.transformation=(0,_.CV)((0,f.vt)(),(0,M.fA)(this._radius,this._radius,this._radius)),this._manipulator.renderObjects=[new m.M(t,C.p7.Focused),new m.M(t.instantiate({material:this._discMaterialTransparent}),C.p7.Unfocused)],this._manipulator.radius=l.Wv*(this._radius/l.Gz)}_createMaterial(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=new O.v({cullFace:x.s2.Back,renderOccluded:S.m$.Transparent,isDecoration:!0});return this._handles.add((0,r.wB)(()=>u.A.toUnitRGBA(this._view.effectiveTheme.accentColor),i=>{i[3]*=t,e.setParameters({color:i})},r.Vh)),e}get test(){}}var L=i(59784),I=i(15941),X=i(38317),W=i(14835);class q extends y.c{constructor(t){super(),this._radius=l.Gz,this.events=new p.A,this._tool=t.tool,this._view=t.view;const e=new W.w({getTheme:()=>this._view.effectiveTheme});this._settings=e,null!=t.radius&&(this._radius=t.radius);const i=this._view.effectiveTheme.accentColor;this._materials={materialUnfocused:(0,X.UM)(F(i,1,.25),S.m$.Occlude),materialFocused:(0,X.UM)(F(i,1,0),S.m$.Occlude),materialOccludedUnfocused:(0,X.UM)(F(i,.7,0),e.zManipulator.renderOccluded),materialOccludedFocused:(0,X.UM)(F(i,.85,0),e.zManipulator.renderOccluded)},this._themeHandle=(0,r.wB)(()=>this._view.effectiveTheme.accentColor,t=>{const e=F(t,1,.25),i=F(t,1,0),a=F(t,.7,0),s=F(t,.85,0),{materialUnfocused:n,materialFocused:r,materialOccludedUnfocused:o,materialOccludedFocused:l}=this._materials;n.setParameters({color:e}),r.setParameters({color:i}),o.setParameters({color:a}),l.setParameters({color:s})}),this._createManipulator(),this.forEachManipulator(t=>this._tool.manipulators.add(t))}destroy(){this._themeHandle=(0,d.xt)(this._themeHandle),this._manipulator.applyObjectTransform=N,this.forEachManipulator(t=>{this._tool.manipulators.remove(t),t.destroy()})}forEachManipulator(t){t(this._manipulator,o.r.TRANSLATE_Z)}createManipulatedObjectDragPipeline(t,e,i){if(!e.operations)return(0,s.hA)();const a=e.operations.data.spatialReference;return(0,T.q)(e,i,e=>this.createDragPipeline((i,a,s,n,r)=>(({steps:a,cancel:s}=t(i,a,s,n,r)),e(i,a,s)),a))}createDragPipeline(t,e){const i=this._view;return(0,b.Xt)(this._manipulator,(a,s,n,r,l)=>{const c=s.next(t=>(0,h.A)((0,h.A)({},t),{},{manipulatorType:o.r.TRANSLATE_Z})).next((0,w.iv)(i,a.renderLocation,e)).next((0,b.sO)());t(a,c,n,r,l)})}get radius(){return this._radius}set radius(t){t!==this._radius&&(this._radius=t,this._updateManipulator())}_updateManipulator(){const t=this._settings,e=this._radius/l.Gz,i=t.zManipulator.height*e,a=t.zManipulator.coneHeight*e,s=t.zManipulator.coneWidth*e,n=t.zManipulator.width*e,r=[(0,M.fA)(0,0,0),(0,M.fA)(0,0,i)],o=[(0,M.fA)(0,0,0),(0,M.fA)(0,0,i+a)],c=(()=>{const t=(0,f.vt)();return(0,_.Tl)(t,t,[0,0,i]),(0,_.eL)(t,t,Math.PI/2),t})(),{materialUnfocused:h,materialFocused:u,materialOccludedUnfocused:p,materialOccludedFocused:d}=this._materials,g=(0,E.Nb)(h,r,n/2,16,!1),v=(0,E.EE)(h,a,s/2,16,!1);v.transformation=c,this._manipulator.renderObjects=[new m.M(v,C.p7.Unfocused),new m.M(g,C.p7.Unfocused),new m.M(v.instantiate({material:u}),C.p7.Focused),new m.M(g.instantiate({material:u}),C.p7.Focused),new m.M(v.instantiate({material:p}),C.p7.Unfocused),new m.M(g.instantiate({material:p}),C.p7.Unfocused),new m.M(v.instantiate({material:d}),C.p7.Focused),new m.M(g.instantiate({material:d}),C.p7.Focused)],this._manipulator.radius=n/2+2,this._manipulator.collisionType={type:"line",paths:[o]}}_createManipulator(){const t=this._view,e=new A.q({view:t,autoScaleRenderObjects:!1,worldSized:!1,selectable:!1,cursor:"ns-resize",elevationInfo:this.elevationInfo,worldOriented:!0,collisionPriority:1.6});e.applyObjectTransform=e=>{const i=t.state.camera,a=U;t.renderCoordsHelper.toRenderCoords(this._manipulator.elevationAlignedLocation,a);const s=(0,g.F)(i.eye,a),n=i.computeRenderPixelSizeAtDist(s),r=(0,g.d)(Y,a,i.eye);(0,g.n)(r,r);const o=j;t.renderCoordsHelper.worldUpAtPosition(U,o);const c=Math.abs((0,g.e)(r,o)),h=(0,g.h)(Y,r,o),u=(0,g.h)(Y,h,o),p=(0,I.qE)(c,.01,1),d=1-Math.sqrt(1-p*p)/p/i.fullWidth,_=this._settings,f=this._radius/l.Gz,M=_.zManipulator.width*f;(0,g.g)(u,(0,g.n)(u,u),(1/d-1)*s+n*M),e[12]-=Y[0],e[13]-=Y[1],e[14]-=Y[2]},this._manipulator=e,this._updateManipulator()}get test(){}}function F(t,e,i){const a=(0,L.e$)(t,i);return a.a*=e,u.A.toUnitRGBA(a)}const U=(0,M.vt)(),Y=(0,M.vt)(),j=(0,M.vt)(),N=()=>{};class B extends c.A{constructor(t){super(),this._handles=new a.A;const{tool:e,view:i,snapToScene:s,radius:n}=t;this._view=i,this.xyManipulation=new R({tool:e,view:i,snapToScene:s,radius:n}),this.xyAxisManipulation=new P({tool:e,view:i,radius:n}),this.zManipulation=new q({tool:e,view:i,radius:n}),this.xyManipulation.available=t.xyAvailable,this.xyAxisManipulation.available=t.xyAxisAvailable,this.zManipulation.available=t.zAvailable,this._autoHideXYAxis(),this.forEachManipulator(t=>this._handles.add(t.events.on("grab-changed",()=>this._updateManipulatorInteractivity())))}destroy(){this._handles.destroy(),this.xyManipulation.destroy(),this.xyAxisManipulation.destroy(),this.zManipulation.destroy()}createManipulatedObjectDragPipeline(t,e,i){return(0,s.vE)([this.xyManipulation.createManipulatedObjectDragPipeline((e,i,a,s,n)=>t(Z.XY,e,i,a,s,n),e,i),this.xyAxisManipulation.createManipulatedObjectDragPipeline((e,i,a,s,n)=>t(Z.XY_AXIS,e,i,a,s,n),e,i),this.zManipulation.createManipulatedObjectDragPipeline((e,i,a,s,n)=>t(Z.Z,e,i,a,s,n),e,i)])}createDragPipeline(t,e,i,a){return(0,s.vE)([this.xyManipulation.createDragPipeline((e,i,a,s,n)=>t(Z.XY,e,i,a,s,n),e,i,a),this.xyAxisManipulation.createDragPipeline((e,i,a,s,n)=>t(Z.XY_AXIS,e,i,a,s,n),e,i,a),this.zManipulation.createDragPipeline((e,i,a,s,n)=>t(Z.Z,e,i,a,s,n),i)])}set snapToScene(t){this.xyManipulation.snapToScene=t}set angle(t){this.xyAxisManipulation.angle=t}set radius(t){this.xyAxisManipulation.radius=t,this.xyManipulation.radius=t,this.zManipulation.radius=t}set displayScale(t){this.xyManipulation.displayScale=t,this.xyAxisManipulation.displayScale=t}forEachManipulator(t){this.xyManipulation.forEachManipulator(e=>t(e,o.r.TRANSLATE_XY)),this.xyAxisManipulation.forEachManipulator(e=>t(e,o.r.TRANSLATE_XY)),this.zManipulation.forEachManipulator(e=>t(e,o.r.TRANSLATE_Z))}get _xyAxisVisible(){const t=this.xyManipulation.someManipulator(t=>t.focused)||this.xyAxisManipulation.someManipulator(t=>t.focused);return this._view.inputManager&&"touch"===this._view.inputManager.latestPointerType||t}_autoHideXYAxis(){const t=this.xyAxisManipulation,e=this.xyManipulation;if((0,n.A)("esri-mobile"))return;const i=[];e.forEachManipulator(t=>i.push(t)),t.forEachManipulator(t=>i.push(t));const a=()=>{const e=[];this._xyAxisVisible||t.forEachManipulator(t=>e.push(t.disableDisplay())),this._handles.remove(G),this._handles.add(e,G)};for(const s of i)this._handles.add(s.events.on("focus-changed",a));this._view.inputManager&&this._handles.add((0,r.z7)(()=>{var t;return null===(t=this._view.inputManager)||void 0===t?void 0:t.latestPointerType},a)),a()}static radiusForSymbol(t){const e=null!=t&&"point-3d"===t.type&&t.symbolLayers;return e&&e.some(t=>"icon"===t.type)?l.HJ:l.Gz}}const G="disable-xy-axis-display";var Z,$;($=Z||(Z={}))[$.XY=0]="XY",$[$.XY_AXIS=1]="XY_AXIS",$[$.Z=2]="Z"}}]);
//# sourceMappingURL=96999.2272b1e2.chunk.js.map