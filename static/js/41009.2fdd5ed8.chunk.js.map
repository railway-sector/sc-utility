{"version":3,"file":"static/js/41009.2fdd5ed8.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/LineMarkerMaterial.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultLayouts.js","../node_modules/@arcgis/core/chunks/LineMarker.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{isColorOrColorEmission as e}from\"../core/shaderLibrary/ShaderOutput.js\";import{ReloadableShaderModule as i}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as t,depthOnlyOutputBuffersOr as r}from\"../core/shaderTechnique/ShaderTechnique.js\";import{depthWrite as l,oitDepthTest as n,blending as s,getDrawBuffers as o}from\"../lib/OrderIndependentTransparency.js\";import{RenderSlot as p}from\"../lib/RenderSlot.js\";import{stencilToolMaskBaseParams as c,stencilBaseAllZerosParams as u,stencilWriteMaskOn as a,stencilToolTransparentOccluderParams as d,depthCompareAlways as T,stencilToolMaskOccluderParams as h,stencilWriteMaskOff as m,depthCompareLess as P}from\"../lib/StencilUtils.js\";import{VertexAttribute as E}from\"../lib/VertexAttribute.js\";import{L as O}from\"../../../../chunks/LineMarker.glsl.js\";import{LineMarkerSpace as R}from\"./LineMarkerTechniqueConfiguration.js\";import{makePipelineState as f,defaultColorWrite as _,unpremultipliedAlphaToPremultipliedAlpha as A}from\"../../../webgl/renderState.js\";class S extends t{constructor(e,t){super(e,t,new i(O,(()=>import(\"./LineMarker.glsl.js\"))),W)}_makePipelineState(i,t){const{output:p,oitPass:d,space:T,hasOccludees:h}=i;return f({blending:e(p)?s(d):null,depthTest:T===R.Draped?null:{func:n(d)},depthWrite:l(i),drawBuffers:r(p,o(d,p)),colorWrite:_,stencilWrite:h?a:null,stencilTest:h?t?c:u:null,polygonOffset:{factor:0,units:-10}})}initializePipeline(e){return e.occluder?(this._occluderPipelineTransparent=f({blending:A,depthTest:T,depthWrite:null,colorWrite:_,stencilWrite:null,stencilTest:d}),this._occluderPipelineOpaque=f({blending:A,depthTest:T,depthWrite:null,colorWrite:_,stencilWrite:m,stencilTest:h}),this._occluderPipelineMaskWrite=f({blending:null,depthTest:P,depthWrite:null,colorWrite:null,stencilWrite:a,stencilTest:c})):this._occluderPipelineTransparent=this._occluderPipelineOpaque=this._occluderPipelineMaskWrite=null,this._occludeePipelineState=this._makePipelineState(e,!0),this._makePipelineState(e,!1)}getPipeline(e,i){return e?this._occludeePipelineState:i===p.TRANSPARENT_OCCLUDER_MATERIAL?this._occluderPipelineTransparent??super.getPipeline():i===p.OCCLUDER_MATERIAL?this._occluderPipelineOpaque??super.getPipeline():this._occluderPipelineMaskWrite??super.getPipeline()}}const W=new Map([[E.POSITION,0],[E.PREVIOUSDELTA,1],[E.UV0,2],[E.COLOR,3],[E.COLORFEATUREATTRIBUTE,3],[E.OPACITYFEATUREATTRIBUTE,4],[E.SIZE,5],[E.SIZEFEATUREATTRIBUTE,5],[E.NORMAL,6]]);export{S as LineMarkerTechnique,W as vertexAttributeLocations};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{i as e,G as t,t as r}from\"../../../../chunks/vec32.js\";import{create as i}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{makeFloat16Array as a}from\"../../../../geometry/support/float16.js\";import{newLayout as s}from\"../../support/buffer/InterleavedLayout.js\";import{isColor as n,isDepth as o,isColorHighlightOrDepth as h,isColorOrColorEmission as c,ShaderOutput as p}from\"../core/shaderLibrary/ShaderOutput.js\";import l from\"../lib/GLMaterial.js\";import{Material as m,RenderOccludedFlag as u}from\"../lib/Material.js\";import{RenderSlot as T}from\"../lib/RenderSlot.js\";import{VertexAttribute as f}from\"../lib/VertexAttribute.js\";import{VisualVariablePassParameters as d}from\"./VisualVariablePassParameters.js\";import{writeDeltaF16Vector as E}from\"./internal/bufferWriterUtils.js\";import{vertexAttributeLocations as A,LineMarkerTechnique as _}from\"../shaders/LineMarkerTechnique.js\";import{LineMarkerTechniqueConfiguration as v,LineMarkerSpace as g,LineMarkerAnchor as S}from\"../shaders/LineMarkerTechniqueConfiguration.js\";import{CapType as O}from\"../shaders/RibbonLineTechniqueConfiguration.js\";import{alphaCutoff as R}from\"../../../../webscene/support/AlphaCutoff.js\";class I extends m{constructor(e){super(e,C),this._configuration=new v,this.vertexAttributeLocations=A,this.produces=new Map([[T.OPAQUE_MATERIAL,e=>e===p.Highlight||n(e)&&this.parameters.renderOccluded===u.OccludeAndTransparentStencil],[T.OPAQUE_MATERIAL_WITHOUT_NORMALS,e=>o(e)],[T.OCCLUDER_MATERIAL,e=>h(e)&&this.parameters.renderOccluded===u.OccludeAndTransparentStencil],[T.TRANSPARENT_OCCLUDER_MATERIAL,e=>h(e)&&this.parameters.renderOccluded===u.OccludeAndTransparentStencil],[T.TRANSPARENT_MATERIAL,e=>n(e)&&this.parameters.writeDepth],[T.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>n(e)&&!this.parameters.writeDepth],[T.DRAPED_MATERIAL,e=>c(e)||e===p.Highlight]]),this.intersectDraped=void 0,this._layout=this.createLayout()}getConfiguration(e,t){return super.getConfiguration(e,t,this._configuration),this._configuration.space=t.slot===T.DRAPED_MATERIAL?g.Draped:this.parameters.worldSpace?g.World:g.Screen,this._configuration.hideOnShortSegments=this.parameters.hideOnShortSegments,this._configuration.hasCap=this.parameters.cap!==O.BUTT,this._configuration.anchor=this.parameters.anchor,this._configuration.hasTip=this.parameters.hasTip,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasOccludees=t.hasOccludees,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.vvOpacity=!!this.parameters.vvOpacity,this._configuration.occluder=this.parameters.renderOccluded===u.OccludeAndTransparentStencil,this._configuration.oitPass=t.oitPass,this._configuration.terrainDepthTest=t.terrainDepthTest&&c(e),this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration}get visible(){return this.parameters.color[3]>=R}intersect(){}createLayout(){const e=s().vec3f(f.POSITION).vec4f16(f.PREVIOUSDELTA).vec2f16(f.UV0);return this.parameters.vvColor?e.f32(f.COLORFEATUREATTRIBUTE):e.vec4u8(f.COLOR,{glNormalized:!0}),this.parameters.vvOpacity&&e.f32(f.OPACITYFEATUREATTRIBUTE),this.parameters.vvSize?e.f32(f.SIZEFEATUREATTRIBUTE):e.f16(f.SIZE),this.parameters.worldSpace&&e.vec3f16(f.NORMAL),e}createBufferWriter(){return new P(this._layout,this.parameters)}createGLMaterial(e){return new L(e)}}class L extends l{dispose(){super.dispose(),this._markerTextures.release(this._markerPrimitive),this._markerPrimitive=null}beginSlot(e){const t=this._material.parameters.markerPrimitive;return t!==this._markerPrimitive&&(this._material.setParameters({markerTexture:this._markerTextures.swap(t,this._markerPrimitive)}),this._markerPrimitive=t),this.getTechnique(_,e)}}class C extends d{constructor(){super(...arguments),this.width=0,this.color=[1,1,1,1],this.markerPrimitive=\"arrow\",this.placement=\"end\",this.cap=O.BUTT,this.anchor=S.Center,this.hasTip=!1,this.worldSpace=!1,this.hideOnShortSegments=!1,this.writeDepth=!0,this.hasSlicePlane=!1,this.vvFastUpdate=!1,this.markerTexture=null}}class P{constructor(e,t){this.vertexBufferLayout=e,this._parameters=t}elementCount(){return\"begin-end\"===this._parameters.placement?12:6}write(i,s,n,o,h,c){const p=n.get(f.POSITION).data,l=p.length/3;let m=[1,0,0];const u=n.get(f.NORMAL);this._parameters.worldSpace&&null!=u&&(m=u.data);let T=1,d=0;this._parameters.vvSize?d=n.get(f.SIZEFEATUREATTRIBUTE).data[0]:n.has(f.SIZE)&&(T=n.get(f.SIZE).data[0]);let A=[1,1,1,1],_=0;this._parameters.vvColor?_=n.get(f.COLORFEATUREATTRIBUTE).data[0]:n.has(f.COLOR)&&(A=n.get(f.COLOR).data);let v=0;this._parameters.vvOpacity&&(v=n.get(f.OPACITYFEATUREATTRIBUTE).data[0]);const g=new Float32Array(h.buffer),S=a(h.buffer),O=new Uint8Array(h.buffer);let R=c*(this.vertexBufferLayout.stride/4);const I=g.BYTES_PER_ELEMENT/S.BYTES_PER_ELEMENT,L=4/I,C=(e,t,r,i)=>{g[R++]=e[0],g[R++]=e[1],g[R++]=e[2],E(t,e,S,R*I),R+=L;let a=R*I;if(S[a++]=r[0],S[a++]=r[1],R=Math.ceil(a/I),this._parameters.vvColor)g[R++]=_;else{const e=Math.min(4*i,A.length-4),t=4*R++;O[t]=255*A[e],O[t+1]=255*A[e+1],O[t+2]=255*A[e+2],O[t+3]=255*A[e+3]}this._parameters.vvOpacity&&(g[R++]=v),a=R*I,this._parameters.vvSize?(g[R++]=d,a+=2):S[a++]=T,this._parameters.worldSpace&&(S[a++]=m[0],S[a++]=m[1],S[a++]=m[2]),R=Math.ceil(a/I)};let P;!function(e){e[e.ASCENDING=1]=\"ASCENDING\",e[e.DESCENDING=-1]=\"DESCENDING\"}(P||(P={}));const b=(a,s)=>{const n=e(D,p[3*a],p[3*a+1],p[3*a+2]),o=N;let h=a+s;do{e(o,p[3*h],p[3*h+1],p[3*h+2]),h+=s}while(t(n,o)&&h>=0&&h<l);i&&(r(n,n,i),r(o,o,i)),C(n,o,[-1,-1],a),C(n,o,[1,-1],a),C(n,o,[1,1],a),C(n,o,[-1,-1],a),C(n,o,[1,1],a),C(n,o,[-1,1],a)},U=this._parameters.placement;return\"begin\"!==U&&\"begin-end\"!==U||b(0,P.ASCENDING),\"end\"!==U&&\"begin-end\"!==U||b(l-1,P.DESCENDING),null}}const D=i(),N=i();export{I as LineMarkerMaterial,C as Parameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{newLayout as e}from\"../../support/buffer/InterleavedLayout.js\";import{VertexAttribute as O}from\"../lib/VertexAttribute.js\";const I=e().vec3f(O.POSITION),c=e().vec3f(O.POSITION).vec2f16(O.UV0),f=e().vec3f(O.POSITION).vec4u8(O.COLOR),v=e().vec3f(O.POSITION).vec2f16(O.UV0).vec4u8(O.OLIDCOLOR),t=e().vec3f(O.POSITION).vec2f(O.UV0),r=e().vec3f(O.POSITION).vec2f(O.UV0).vec4u8(O.OLIDCOLOR);export{f as PositionColorLayout,I as PositionLayout,c as PositionUvLayout,v as PositionUvOlidLayout,t as PositionUvf32Layout,r as PositionUvf32OlidLayout};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{markerTextureSize as e,markerSymbolSize as r,markerTipThicknessFactor as i}from\"../views/3d/support/engineContent/marker.js\";import{SliceDraw as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{RibbonVertexPosition as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js\";import{OutputHighlight as a}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";import{MarkerSizing as n}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl.js\";import{terrainDepthTest as s}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js\";import{ColorConversion as l}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{RgbaFloatEncoding as c}from\"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";import{addProjViewLocalOrigin as p,addViewNormal as d,addPixelRatio as v}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float2BindUniform as m}from\"../views/3d/webgl-engine/core/shaderModules/Float2BindUniform.js\";import{Float4BindUniform as h}from\"../views/3d/webgl-engine/core/shaderModules/Float4BindUniform.js\";import{Float4PassUniform as f}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatBindUniform as g}from\"../views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js\";import{glsl as u,If as w}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Matrix4BindUniform as S}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4BindUniform.js\";import{Texture2DPassUniform as b}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{VertexAttribute as y}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";import{LineMarkerSpace as x,LineMarkerAnchor as P}from\"../views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js\";import{outputColorHighlightOID as z}from\"../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js\";import{ShaderBuilder as j}from\"../views/webgl/ShaderBuilder.js\";function L(L){const k=new j,{space:M,anchor:D,hasTip:C}=L,$=M===x.World;k.include(t,L),k.include(n,L),k.include(s,L);const{vertex:O,fragment:T,varyings:W}=k;T.include(c),p(O,L),k.attributes.add(y.POSITION,\"vec3\"),k.attributes.add(y.PREVIOUSDELTA,\"vec4\"),k.attributes.add(y.UV0,\"vec2\"),W.add(\"vColor\",\"vec4\"),W.add(\"vpos\",\"vec3\",{invariant:!0}),W.add(\"vUV\",\"vec2\"),W.add(\"vSize\",\"float\"),C&&W.add(\"vLineWidth\",\"float\"),O.uniforms.add(new m(\"nearFar\",(({camera:e})=>e.nearFar)),new h(\"viewport\",(({camera:e})=>e.fullViewport))).code.add(u`vec4 projectAndScale(vec4 pos) {\nvec4 posNdc = proj * pos;\nposNdc.xy *= viewport.zw / posNdc.w;\nreturn posNdc;\n}`),O.code.add(u`void clip(vec4 pos, inout vec4 prev) {\nfloat vnp = nearFar[0] * 0.99;\nif (prev.z > -nearFar[0]) {\nfloat interpolation = (-vnp - pos.z) / (prev.z - pos.z);\nprev = mix(pos, prev, interpolation);\n}\n}`),$?(k.attributes.add(y.NORMAL,\"vec3\"),d(O),O.constants.add(\"tiltThreshold\",\"float\",.7),O.code.add(u`vec3 perpendicular(vec3 v) {\nvec3 n = (viewNormal * vec4(normal.xyz, 1.0)).xyz;\nvec3 n2 = cross(v, n);\nvec3 forward = vec3(0.0, 0.0, 1.0);\nfloat tiltDot = dot(forward, n);\nreturn abs(tiltDot) < tiltThreshold ? n : n2;\n}`)):O.code.add(u`vec2 perpendicular(vec2 v) {\nreturn vec2(v.y, -v.x);\n}`);const U=$?\"vec3\":\"vec2\";return O.code.add(u`\n      ${U} normalizedSegment(${U} pos, ${U} prev) {\n        ${U} segment = pos - prev;\n        float segmentLen = length(segment);\n\n        // normalize or zero if too short\n        return (segmentLen > 0.001) ? segment / segmentLen : ${$?\"vec3(0.0, 0.0, 0.0)\":\"vec2(0.0, 0.0)\"};\n      }\n\n      ${U} displace(${U} pos, ${U} prev, float displacementLen) {\n        ${U} segment = normalizedSegment(pos, prev);\n\n        ${U} displacementDirU = perpendicular(segment);\n        ${U} displacementDirV = segment;\n\n        ${D===P.Tip?\"pos -= 0.5 * displacementLen * displacementDirV;\":\"\"}\n\n        return pos + displacementLen * (uv0.x * displacementDirU + uv0.y * displacementDirV);\n      }\n    `),M===x.Screen&&(O.uniforms.add(new S(\"inverseProjectionMatrix\",(({camera:e})=>e.inverseProjectionMatrix))),O.code.add(u`vec3 inverseProject(vec4 posScreen) {\nposScreen.xy = (posScreen.xy / viewport.zw) * posScreen.w;\nreturn (inverseProjectionMatrix * posScreen).xyz;\n}`),O.code.add(u`bool rayIntersectPlane(vec3 rayDir, vec3 planeOrigin, vec3 planeNormal, out vec3 intersection) {\nfloat cos = dot(rayDir, planeNormal);\nfloat t = dot(planeOrigin, planeNormal) / cos;\nintersection = t * rayDir;\nreturn abs(cos) > 0.001 && t > 0.0;\n}`),O.uniforms.add(new g(\"perScreenPixelRatio\",(({camera:e})=>e.perScreenPixelRatio))),O.code.add(u`\n      vec4 toFront(vec4 displacedPosScreen, vec3 posLeft, vec3 posRight, vec3 prev, float lineWidth) {\n        // Project displaced position back to camera space\n        vec3 displacedPos = inverseProject(displacedPosScreen);\n\n        // Calculate the plane that we want the marker to lie in. Note that this will always be an approximation since ribbon lines are generally\n        // not planar and we do not know the actual position of the displaced prev vertices (they are offset in screen space, too).\n        vec3 planeNormal = normalize(cross(posLeft - posRight, posLeft - prev));\n        vec3 planeOrigin = posLeft;\n\n        ${w(L.hasCap,\"if(prev.z > posLeft.z) {\\n                vec2 diff = posLeft.xy - posRight.xy;\\n                planeOrigin.xy += perpendicular(diff) / 2.0;\\n             }\")};\n\n        // Move the plane towards the camera by a margin dependent on the line width (approximated in world space). This tolerance corrects for the\n        // non-planarity in most cases, but sharp joins can place the prev vertices at arbitrary positions so markers can still clip.\n        float offset = lineWidth * perScreenPixelRatio;\n        planeOrigin *= (1.0 - offset);\n\n        // Intersect camera ray with the plane and make sure it is within clip space\n        vec3 rayDir = normalize(displacedPos);\n        vec3 intersection;\n        if (rayIntersectPlane(rayDir, planeOrigin, planeNormal, intersection) && intersection.z < -nearFar[0] && intersection.z > -nearFar[1]) {\n          return vec4(intersection.xyz, 1.0);\n        }\n\n        // Fallback: use depth of pos or prev, whichever is closer to the camera\n        float minDepth = planeOrigin.z > prev.z ? length(planeOrigin) : length(prev);\n        displacedPos *= minDepth / length(displacedPos);\n        return vec4(displacedPos.xyz, 1.0);\n      }\n  `)),v(O),O.main.add(u`\n    // Check for special value of uv0.y which is used by the Renderer when graphics\n    // are removed before the VBO is recompacted. If this is the case, then we just\n    // project outside of clip space.\n    if (uv0.y == 0.0) {\n      // Project out of clip space\n      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n    }\n    else {\n      float lineWidth = getLineWidth();\n      float screenMarkerSize = getScreenMarkerSize();\n\n      vec4 pos  = view * vec4(position, 1.0);\n      vec4 prev = view * vec4(position + previousDelta.xyz * previousDelta.w, 1.0);\n      clip(pos, prev);\n\n      ${$?u`${w(L.hideOnShortSegments,u`\n                if (areWorldMarkersHidden(pos, prev)) {\n                  // Project out of clip space\n                  gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n                  return;\n                }`)}\n            pos.xyz = displace(pos.xyz, prev.xyz, getWorldMarkerSize(pos));\n            vec4 displacedPosScreen = projectAndScale(pos);`:u`\n            vec4 posScreen = projectAndScale(pos);\n            vec4 prevScreen = projectAndScale(prev);\n            vec4 displacedPosScreen = posScreen;\n\n            displacedPosScreen.xy = displace(posScreen.xy, prevScreen.xy, screenMarkerSize);\n            ${w(M===x.Screen,u`\n                vec2 displacementDirU = perpendicular(normalizedSegment(posScreen.xy, prevScreen.xy));\n\n                // We need three points of the ribbon line in camera space to calculate the plane it lies in\n                // Note that we approximate the third point, since we have no information about the join around prev\n                vec3 lineRight = inverseProject(posScreen + lineWidth * vec4(displacementDirU.xy, 0.0, 0.0));\n                vec3 lineLeft = pos.xyz + (pos.xyz - lineRight);\n\n                pos = toFront(displacedPosScreen, lineLeft, lineRight, prev.xyz, lineWidth);\n                displacedPosScreen = projectAndScale(pos);`)}`}\n      forwardViewPosDepth(pos.xyz);\n      // Convert back into NDC\n      displacedPosScreen.xy = (displacedPosScreen.xy / viewport.zw) * displacedPosScreen.w;\n\n      // Convert texture coordinate into [0,1]\n      vUV = (uv0 + 1.0) / 2.0;\n      ${w(!$,\"vUV *= displacedPosScreen.w;\")}\n      ${w(C,\"vLineWidth = lineWidth;\")}\n\n      vSize = screenMarkerSize;\n      vColor = getColor();\n\n      // Use camera space for slicing\n      vpos = pos.xyz;\n\n      gl_Position = displacedPosScreen;\n    }`),T.include(o,L),k.include(z,L),T.include(l),T.uniforms.add(new f(\"intrinsicColor\",(({color:e})=>e)),new b(\"tex\",(({markerTexture:e})=>e))).constants.add(\"texelSize\",\"float\",1/e).code.add(u`float markerAlpha(vec2 samplePos) {\nsamplePos += vec2(0.5, -0.5) * texelSize;\nfloat sdf = rgbaTofloat(texture(tex, samplePos)) - 0.5;\nfloat distance = sdf * vSize;\ndistance -= 0.5;\nreturn clamp(0.5 - distance, 0.0, 1.0);\n}`),C&&T.constants.add(\"relativeMarkerSize\",\"float\",r/e).constants.add(\"relativeTipLineWidth\",\"float\",i).code.add(u`\n    float tipAlpha(vec2 samplePos) {\n      // Convert coordinates s.t. they are in pixels and relative to the tip of an arrow marker\n      samplePos -= vec2(0.5, 0.5 + 0.5 * relativeMarkerSize);\n      samplePos *= vSize;\n\n      float halfMarkerSize = 0.5 * relativeMarkerSize * vSize;\n      float halfTipLineWidth = 0.5 * max(1.0, relativeTipLineWidth * vLineWidth);\n\n      ${w($,\"halfTipLineWidth *= fwidth(samplePos.y);\")}\n\n      float distance = max(abs(samplePos.x) - halfMarkerSize, abs(samplePos.y) - halfTipLineWidth);\n      return clamp(0.5 - distance, 0.0, 1.0);\n    }\n  `),k.include(a,L),T.main.add(u`\n    discardBySlice(vpos);\n    discardByTerrainDepth();\n\n    vec4 finalColor = intrinsicColor * vColor;\n\n    // Cancel out perspective correct interpolation if in screen space or draped\n    vec2 samplePos = vUV ${w(!$,\"* gl_FragCoord.w\")};\n    finalColor.a *= ${C?\"max(markerAlpha(samplePos), tipAlpha(samplePos))\":\"markerAlpha(samplePos)\"};\n    outputColorHighlightOID(finalColor, vpos, finalColor.rgb);`),k}const k=Object.freeze(Object.defineProperty({__proto__:null,build:L},Symbol.toStringTag,{value:\"Module\"}));export{k as L,L as b};\n"],"names":["S","t","constructor","e","super","i","O","W","_makePipelineState","output","p","oitPass","d","space","T","hasOccludees","h","f","blending","s","depthTest","R","Draped","func","n","depthWrite","l","drawBuffers","r","o","colorWrite","_","stencilWrite","a","stencilTest","c","u","polygonOffset","factor","units","initializePipeline","occluder","this","_occluderPipelineTransparent","A","_occluderPipelineOpaque","m","_occluderPipelineMaskWrite","P","_occludeePipelineState","getPipeline","_this$_occluderPipeli","_this$_occluderPipeli2","_this$_occluderPipeli3","TRANSPARENT_OCCLUDER_MATERIAL","OCCLUDER_MATERIAL","Map","E","POSITION","PREVIOUSDELTA","UV0","COLOR","COLORFEATUREATTRIBUTE","OPACITYFEATUREATTRIBUTE","SIZE","SIZEFEATUREATTRIBUTE","NORMAL","I","C","_configuration","v","vertexAttributeLocations","produces","OPAQUE_MATERIAL","Highlight","parameters","renderOccluded","OccludeAndTransparentStencil","OPAQUE_MATERIAL_WITHOUT_NORMALS","TRANSPARENT_MATERIAL","writeDepth","TRANSPARENT_MATERIAL_WITHOUT_DEPTH","DRAPED_MATERIAL","intersectDraped","_layout","createLayout","getConfiguration","slot","g","worldSpace","World","Screen","hideOnShortSegments","hasCap","cap","BUTT","anchor","hasTip","hasSlicePlane","vvSize","vvColor","vvOpacity","terrainDepthTest","cullAboveTerrain","visible","color","intersect","vec3f","vec4f16","vec2f16","f32","vec4u8","glNormalized","f16","vec3f16","createBufferWriter","createGLMaterial","L","dispose","_markerTextures","release","_markerPrimitive","beginSlot","_material","markerPrimitive","setParameters","markerTexture","swap","getTechnique","arguments","width","placement","Center","vvFastUpdate","vertexBufferLayout","_parameters","elementCount","write","get","data","length","has","Float32Array","buffer","Uint8Array","stride","BYTES_PER_ELEMENT","Math","ceil","min","ASCENDING","DESCENDING","b","D","N","U","OLIDCOLOR","vec2f","k","j","M","$","x","include","vertex","fragment","varyings","attributes","add","y","invariant","uniforms","_ref","camera","nearFar","_ref2","fullViewport","code","_templateObject","_taggedTemplateLiteral","_templateObject2","constants","_templateObject3","_templateObject4","_templateObject5","Tip","_ref3","inverseProjectionMatrix","_templateObject6","_templateObject7","_ref4","perScreenPixelRatio","_templateObject8","w","main","_templateObject9","_templateObject0","_templateObject1","_templateObject10","_templateObject11","z","_ref5","_ref6","_templateObject12","_templateObject13","_templateObject14","Object","freeze","defineProperty","__proto__","build","Symbol","toStringTag","value"],"sourceRoot":""}