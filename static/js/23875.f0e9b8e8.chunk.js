"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[23875],{2052:(e,t,i)=>{i.d(t,{i:()=>l});class l{constructor(e,t,i,l){this._hasNoDataValues=null,this._minValue=null,this._maxValue=null,"pixelData"in e?(this.values=e.pixelData,this.width=e.width,this.height=e.height,this.noDataValue=e.noDataValue):(this.values=e,this.width=t,this.height=i,this.noDataValue=l)}get hasNoDataValues(){if(null==this._hasNoDataValues){const e=this.noDataValue;this._hasNoDataValues=this.values.includes(e)}return this._hasNoDataValues}get minValue(){return this._ensureBounds(),this._minValue}get maxValue(){return this._ensureBounds(),this._maxValue}get usedMemory(){return this.values.byteLength+256}_ensureBounds(){if(null!=this._minValue)return;const{noDataValue:e,values:t}=this;let i=1/0,l=-1/0,a=!0;for(const r of t)r===e?this._hasNoDataValues=!0:(i=r<i?r:i,l=r>l?r:l,a=!1);a?(this._minValue=0,this._maxValue=0):(this._minValue=i,this._maxValue=l>-3e38?l:0)}}},23875:(e,t,i)=>{i.r(t),i.d(t,{default:()=>T});var l=i(89379),a=i(6326),r=i(3825),s=i(50076),o=i(30726),n=i(77717),c=i(50346),h=i(90534),u=i(46053),p=(i(81806),i(76460),i(47249),i(28379)),d=i(87990),v=i(91605),y=i(25515),m=i(76328),g=i(19502),f=i(11270),w=i(94729),C=i(95363),b=i(2052),D=i(60883);let M=class extends((0,m.f)((0,g.b)((0,f.q)((0,w.A)((0,n.P)(y.A)))))){constructor(){super(...arguments),this.capabilities={operations:{supportsTileMap:!1}},this.copyright=null,this.heightModelInfo=null,this.path=null,this.minScale=void 0,this.maxScale=void 0,this.opacity=1,this.operationalLayerType="ArcGISTiledElevationServiceLayer",this.sourceJSON=null,this.type="elevation",this.url=null,this.version=null,this._lercDecoder=(0,D.b)()}normalizeCtorArgs(e,t){return"string"==typeof e?(0,l.A)({url:e},t):e}destroy(){this._lercDecoder=(0,o.Gz)(this._lercDecoder)}readCapabilities(e,t){const i=t.capabilities&&t.capabilities.split(",").map(e=>e.toLowerCase().trim());return i?{operations:{supportsTileMap:i.includes("tilemap")}}:{operations:{supportsTileMap:!1}}}readVersion(e,t){let i=t.currentVersion;return i||(i=9.3),i}load(e){const t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:e=>{if(e.typeKeywords)for(let t=0;t<e.typeKeywords.length;t++)if("elevation 3d layer"===e.typeKeywords[t].toLowerCase())return!0;throw new s.A("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}},e).catch(c.QP).then(()=>this._fetchImageService(t))),Promise.resolve(this)}fetchTile(e,t,i,l){const a=null===l||void 0===l?void 0:l.signal,s={responseType:"array-buffer",signal:a},o={noDataValue:null===l||void 0===l?void 0:l.noDataValue,returnFileInfo:!0};return this.load().then(()=>this._fetchTileAvailability(e,t,i,l)).then(()=>(0,r.A)(this.getTileUrl(e,t,i),s)).then(e=>this._lercDecoder.decode(e.data,o,a)).then(e=>new b.i(e))}getTileUrl(e,t,i){const a=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,r=(0,h.x0)((0,l.A)((0,l.A)({},this.parsedUrl.query),{},{blankTile:!a&&null}));return"".concat(this.parsedUrl.path,"/tile/").concat(e,"/").concat(t,"/").concat(i).concat(r?"?"+r:"")}async queryElevation(e,t){const{query:l}=await Promise.resolve().then(i.bind(i,80527));return(0,c.Te)(t),l(this,e,t)}async createElevationSampler(e,t){const{createSampler:l}=await Promise.resolve().then(i.bind(i,80527));return(0,c.Te)(t),l(this,e,t)}_fetchTileAvailability(e,t,i,l){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,t,i,l):Promise.resolve("unknown")}async _fetchImageService(e){var t;if(this.sourceJSON)return this.sourceJSON;const i={query:(0,l.A)({f:"json"},this.parsedUrl.query),responseType:"json",signal:e},a=await(0,r.A)(this.parsedUrl.path,i);a.ssl&&(this.url=null===(t=this.url)||void 0===t?void 0:t.replace(/^http:/i,"https:")),this.sourceJSON=a.data,this.read(a.data,{origin:"service",url:this.parsedUrl})}get hasOverriddenFetchTile(){return!this.fetchTile[S]}};(0,a.Cg)([(0,u.MZ)({readOnly:!0})],M.prototype,"capabilities",void 0),(0,a.Cg)([(0,p.w)("service","capabilities",["capabilities"])],M.prototype,"readCapabilities",null),(0,a.Cg)([(0,u.MZ)({json:{read:{source:"copyrightText"}}})],M.prototype,"copyright",void 0),(0,a.Cg)([(0,u.MZ)({readOnly:!0,type:v.A})],M.prototype,"heightModelInfo",void 0),(0,a.Cg)([(0,u.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],M.prototype,"path",void 0),(0,a.Cg)([(0,u.MZ)({type:["show","hide"]})],M.prototype,"listMode",void 0),(0,a.Cg)([(0,u.MZ)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}},readOnly:!0})],M.prototype,"minScale",void 0),(0,a.Cg)([(0,u.MZ)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}},readOnly:!0})],M.prototype,"maxScale",void 0),(0,a.Cg)([(0,u.MZ)({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],M.prototype,"opacity",void 0),(0,a.Cg)([(0,u.MZ)({type:["ArcGISTiledElevationServiceLayer"]})],M.prototype,"operationalLayerType",void 0),(0,a.Cg)([(0,u.MZ)()],M.prototype,"sourceJSON",void 0),(0,a.Cg)([(0,u.MZ)({json:{read:!1},value:"elevation",readOnly:!0})],M.prototype,"type",void 0),(0,a.Cg)([(0,u.MZ)(C.OZ)],M.prototype,"url",void 0),(0,a.Cg)([(0,u.MZ)()],M.prototype,"version",void 0),(0,a.Cg)([(0,p.w)("version",["currentVersion"])],M.prototype,"readVersion",null),M=(0,a.Cg)([(0,d.$)("esri.layers.ElevationLayer")],M);const S=Symbol("default-fetch-tile");M.prototype.fetchTile[S]=!0;const T=M},44067:(e,t,i)=>{i.d(t,{A:()=>r});var l=i(50076),a=i(50346);class r{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.lods[e.lods.length-1].level;this.tileInfo=e,this.minLOD=t,this.maxLOD=i,e.lodAt(t)||(this.minLOD=e.lods[0].level),e.lodAt(i)||(this.maxLOD=e.lods[e.lods.length-1].level)}get effectiveMinLOD(){var e;return null!==(e=this.minLOD)&&void 0!==e?e:this.tileInfo.lods[0].level}get effectiveMaxLOD(){var e;return null!==(e=this.maxLOD)&&void 0!==e?e:this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(e,t,i){var l;const a=null===(l=this.tileInfo)||void 0===l?void 0:l.lodAt(e);return!a||e<this.minLOD||e>this.maxLOD?"unavailable":a.cols&&a.rows?i>=a.cols[0]&&i<=a.cols[1]&&t>=a.rows[0]&&t<=a.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(e,t,i,r){await(0,a.NO)(r);const s=this.getAvailability(e,t,i);if("unavailable"===s)throw new l.A("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:i});return s}async fetchAvailabilityUpsample(e,t,i,l,r){await(0,a.NO)(r),l.level=e,l.row=t,l.col=i;const s=this.tileInfo;return s.updateTileInfo(l),this.fetchAvailability(e,t,i,r).catch(e=>{if((0,a.zf)(e))throw e;if(s.upsampleTile(l))return this.fetchAvailabilityUpsample(l.level,l.row,l.col,l,r);throw e})}}},60883:(e,t,i)=>{i.d(t,{b:()=>s});var l=i(12016);class a extends l.B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super("LercWorker","_decode",{_decode:e=>[e.buffer]},e,{strategy:"dedicated"}),this.schedule=e,this.ref=0}decode(e,t,i){return e&&0!==e.byteLength?this.invoke({buffer:e,options:t},i):Promise.resolve(null)}release(){--this.ref<=0&&(r.forEach((e,t)=>{e===this&&r.delete(t)}),this.destroy())}}const r=new Map;function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=r.get(e);return t||(null!=e?(t=new a(t=>e.immediate.schedule(t)),r.set(e,t)):(t=new a,r.set(null,t))),++t.ref,t}},76328:(e,t,i)=>{i.d(t,{f:()=>u});var l=i(6326),a=i(46053),r=(i(81806),i(76460),i(47249),i(28379)),s=i(87990),o=i(13312),n=i(88235),c=i(44067),h=i(82356);const u=e=>{const t=e;let i=class extends t{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){var e,t;null===(e=this.tilemapCache)||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e)}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,t,i){var l;const a=null===(l=t.capabilities)||void 0===l?void 0:l.includes("Tilemap");let{minLOD:r,maxLOD:s,minScale:o,maxScale:u}=t;if(null==r&&null==s&&(0!==o||0!==u)){const e=e=>Math.round(1e4*e)/1e4;o=e(o||t.tileInfo.lods[0].scale),u=e(u||t.tileInfo.lods[t.tileInfo.lods.length-1].scale);for(const i of t.tileInfo.lods){const t=e(i.scale);r=t>=o?i.level:r,s=t>=u?i.level:s}}if(a)return new h.d({layer:this,minLOD:r,maxLOD:s});if(t.tileInfo){const e=new n.A;return e.read(t.tileInfo,i),new c.A(e,r,s)}return null}};return(0,l.Cg)([(0,a.MZ)({json:{read:{source:"copyrightText"}}})],i.prototype,"copyright",void 0),(0,l.Cg)([(0,a.MZ)()],i.prototype,"minScale",void 0),(0,l.Cg)([(0,r.w)("service","minScale")],i.prototype,"readMinScale",null),(0,l.Cg)([(0,a.MZ)()],i.prototype,"maxScale",void 0),(0,l.Cg)([(0,r.w)("service","maxScale")],i.prototype,"readMaxScale",null),(0,l.Cg)([(0,a.MZ)({type:o.A})],i.prototype,"spatialReference",void 0),(0,l.Cg)([(0,a.MZ)({readOnly:!0})],i.prototype,"supportsBlankTile",null),(0,l.Cg)([(0,a.MZ)({type:n.A})],i.prototype,"tileInfo",void 0),(0,l.Cg)([(0,a.MZ)()],i.prototype,"tilemapCache",void 0),(0,l.Cg)([(0,r.w)("service","tilemapCache",["capabilities","tileInfo"])],i.prototype,"readTilemapCache",null),(0,l.Cg)([(0,a.MZ)()],i.prototype,"version",void 0),i=(0,l.Cg)([(0,s.$)("esri.layers.mixins.ArcGISCachedService")],i),i}}}]);
//# sourceMappingURL=23875.f0e9b8e8.chunk.js.map