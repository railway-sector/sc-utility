"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[8775,13537,96141],{7150:(e,t,n)=>{n.d(t,{K:()=>c});var r=n(15941),o=n(68930),i=n(20664),s=n(9392);const a=-1;function c(e,t,n){const r=e.vertices.position,o=e.vertices.componentIndex,s=g.position0,c=g.position1,u=g.faceNormal0,f=g.faceNormal1,{edges:p,normals:y}=l(e),v=p.length/4,w=t.allocate(v);let S=0;const _=v,A=null===n||void 0===n?void 0:n.allocate(_);let O=0,E=0,L=0;h.length=0;for(let a=0;a<v;++a){const e=4*a;r.getVec(p.data[e],s),r.getVec(p.data[e+1],c);const t=h.pushNew();t.index=4*a,t.length=(0,i.j)(s,c)}h.sort((e,t)=>t.length-e.length);const C=new Array,b=new Array;h.forAll(e=>{let{length:l,index:h}=e;const v=p.data[h],_=p.data[h+1],M=p.data[h+2],k=p.data[h+3],T=k===a;if(r.getVec(v,s),r.getVec(_,c),T){const e=3*M;(0,i.i)(u,y.data[e],y.data[e+1],y.data[e+2]),(0,i.c)(f,u),g.componentIndex=o.get(v),g.cosAngle=(0,i.e)(u,f)}else{let e=3*M;if((0,i.i)(u,y.data[e],y.data[e+1],y.data[e+2]),e=3*k,(0,i.i)(f,y.data[e],y.data[e+1],y.data[e+2]),g.componentIndex=o.get(v),g.cosAngle=(0,i.e)(u,f),function(e,t){return e.cosAngle>t}(g,I))return;g.cosAngle<-.9999&&(0,i.c)(f,u)}E+=l,L++,T||function(e,t){return e.cosAngle<t}(g,N)?(t.write(w,S++,g),C.push(l)):d(g,m)&&(A&&n&&n.write(A,O++,g),b.push(l))});const M=new Float32Array(C.reverse()),k=new Float32Array(b.reverse()),T=A&&n?{instancesData:A.slice(0,O),lodInfo:{lengths:k}}:void 0;return{regular:{instancesData:w.slice(0,S),lodInfo:{lengths:M}},silhouette:T,averageEdgeLength:E/L}}function d(e,t){const n=(0,r.XM)(e.cosAngle);return(0,i.E)(v,e.position1,e.position0),n*((0,i.e)((0,i.h)(y,e.faceNormal0,e.faceNormal1),v)>0?-1:1)>t}function l(e){const t=e.faces.length/3,n=e.faces,r=e.neighbors,o=e.vertices.position;f.length=p.length=0;for(let s=0;s<t;s++){const e=3*s,t=r[e],c=r[e+1],d=r[e+2],l=n[e],u=n[e+1],h=n[e+2];o.getVec(l,w),o.getVec(u,S),o.getVec(h,_),(0,i.d)(S,S,w),(0,i.d)(_,_,w),(0,i.h)(w,S,_),(0,i.n)(w,w),p.pushArray(w),(t===a||l<u)&&(f.push(l),f.push(u),f.push(s),f.push(t)),(c===a||u<h)&&(f.push(u),f.push(h),f.push(s),f.push(c)),(d===a||h<l)&&(f.push(h),f.push(l),f.push(s),f.push(d))}return{edges:f,normals:p}}class u{constructor(){this.index=0,this.length=0}}const h=new o.A({allocator:e=>e||new u,deallocator:null}),f=new o.A({deallocator:null}),p=new o.A({deallocator:null}),g=new class{constructor(){this.position0=(0,s.vt)(),this.position1=(0,s.vt)(),this.faceNormal0=(0,s.vt)(),this.faceNormal1=(0,s.vt)(),this.componentIndex=0,this.cosAngle=0}},y=(0,s.vt)(),v=(0,s.vt)(),w=(0,s.vt)(),S=(0,s.vt)(),_=(0,s.vt)(),m=(0,r.kU)(4),I=Math.cos(m),A=(0,r.kU)(35),N=Math.cos(A)},8775:(e,t,n)=>{n.d(t,{o6:()=>l,extractComponentsEdgeLocationsLayout:()=>y,hx:()=>u,Jb:()=>g});var r=n(77176);function o(e,t,n){const r=t/3,o=new Uint32Array(n+1),i=new Uint32Array(n+1),s=(e,t)=>{e<t?o[e+1]++:i[t+1]++};for(let v=0;v<r;v++){const t=e[3*v],n=e[3*v+1],r=e[3*v+2];s(t,n),s(n,r),s(r,t)}let a=0,c=0;for(let v=0;v<n;v++){const e=o[v+1],t=i[v+1];o[v+1]=a,i[v+1]=c,a+=e,c+=t}const d=new Uint32Array(6*r),l=o[n],u=(e,t,n)=>{if(e<t){const r=o[e+1]++;d[2*r]=t,d[2*r+1]=n}else{const r=i[t+1]++;d[2*l+2*r]=e,d[2*l+2*r+1]=n}};for(let v=0;v<r;v++){const t=e[3*v],n=e[3*v+1],r=e[3*v+2];u(t,n,v),u(n,r,v),u(r,t,v)}const h=(e,t)=>{const n=2*e,r=t-e;for(let o=1;o<r;o++){const e=d[n+2*o],t=d[n+2*o+1];let r=o-1;for(;r>=0&&d[n+2*r]>e;r--)d[n+2*r+2]=d[n+2*r],d[n+2*r+3]=d[n+2*r+1];d[n+2*r+2]=e,d[n+2*r+3]=t}};for(let v=0;v<n;v++)h(o[v],o[v+1]),h(l+i[v],l+i[v+1]);const f=new Int32Array(3*r),p=(t,n)=>t===e[3*n]?0:t===e[3*n+1]?1:t===e[3*n+2]?2:-1,g=(e,t)=>{const n=p(e,t);f[3*t+n]=-1},y=(e,t,n,r)=>{const o=p(e,t);f[3*t+o]=r;const i=p(n,r);f[3*r+i]=t};for(let v=0;v<n;v++){let e=o[v];const t=o[v+1];let n=i[v];const r=i[v+1];for(;e<t&&n<r;){const t=d[2*e],r=d[2*l+2*n];t===r?(y(v,d[2*e+1],r,d[2*l+2*n+1]),e++,n++):t<r?(g(v,d[2*e+1]),e++):(g(r,d[2*l+2*n+1]),n++)}for(;e<t;)g(v,d[2*e+1]),e++;for(;n<r;)g(d[2*l+2*n],d[2*l+2*n+1]),n++}return f}var i=n(48549),s=n(66470),a=n(96141),c=n(69413),d=n(7150);function l(e){const t=u(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return f.updateSettings(e.writerSettings),p.updateSettings(e.writerSettings),(0,d.K)(t,f,p)}function u(e,t,n,i){if(t){const t=o(n,i,e.count);return new h(n,i,t,e)}const s=(0,r.b)(e.buffer,e.stride/4,{originalIndices:n}),c=o(s.indices,i,s.uniqueCount);return{faces:s.indices,facesLength:s.indices.length,neighbors:c,vertices:a.EdgeInputBufferLayout.createView(s.buffer)}}class h{constructor(e,t,n,r){this.faces=e,this.facesLength=t,this.neighbors=n,this.vertices=r}}const f=new c.T,p=new c.k,g=(0,i.BP)().vec3f(s.r.POSITION0).vec3f(s.r.POSITION1),y=(0,i.BP)().vec3f(s.r.POSITION0).vec3f(s.r.POSITION1).u16(s.r.COMPONENTINDEX)},12580:(e,t,n)=>{n.d(t,{L:()=>o,s:()=>i});var r=n(48549);function o(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:new r.l5(e.layout)}}function i(e){return new r.q3(e.layout).createView(e.buffer)}},13537:(e,t,n)=>{n.r(t),n.d(t,{SceneLayerSnappingSource:()=>N});var r=n(35143),o=n(91967),i=n(18690),s=n(50346),a=n(46053),c=(n(81806),n(76460),n(85842)),d=n(54901),l=n(30726),u=(n(47249),n(19451)),h=n(74527),f=n(9392),p=n(12016),g=n(78315),y=n(23862),v=n(9876),w=n(72317);let S=class extends o.A{constructor(e){super(e),this.availability=0,this._ids=new Set}destroy(){this._workerHandle.destroy(),this._workerHandle=null}initialize(){this._workerHandle=new _(this.schedule,{fetchAllEdgeLocations:(e,t)=>this._fetchAllEdgeLocations(e,t)})}async fetchCandidates(e,t){const n=e.coordinateHelper,{point:r}=e,o=m;this.renderCoordsHelper.toRenderCoords(r,n.spatialReference,o);const i=e.distance,s="number"==typeof i?i:i.distance,a=await this._workerHandle.invoke({bounds:(0,g.f)(o[0],o[1],o[2],s),returnEdge:e.returnEdge,returnVertex:"none"!==e.vertexMode},t);return a.candidates.sort((e,t)=>e.distance-t.distance),a.candidates.map(e=>this._convertCandidate(n,e))}async add(e,t){this._ids.add(e.id),await this._workerHandle.invokeMethod("add",e,t)}async remove(e,t){this._ids.delete(e.id),await this._workerHandle.invokeMethod("remove",e,t)}_convertCandidate(e,t){switch(t.type){case"edge":return new v.z({objectId:t.objectId,targetPoint:(0,y.de)(this._convertRenderCoordinate(e,t.target)),edgeStart:this._convertRenderCoordinate(e,t.start),edgeEnd:this._convertRenderCoordinate(e,t.end),isDraped:!1});case"vertex":return new w.C({objectId:t.objectId,targetPoint:(0,y.de)(this._convertRenderCoordinate(e,t.target)),isDraped:!1})}}_convertRenderCoordinate(e,t){let{spatialReference:n}=e;const r=(0,f.vt)();return this.renderCoordsHelper.fromRenderCoords(t,r,n),(0,y._7)(r)}async _fetchAllEdgeLocations(e,t){const n=[],r=[];for(const{id:o,uid:i}of e.components)this._ids.has(o)&&n.push((async()=>{const e=await this.fetchEdgeLocations(o,t.signal),n=e.locations.buffer;return r.push(n),{id:o,uid:i,objectIds:e.objectIds,locations:n,origin:e.origin,type:e.type}})());return{result:{components:(await Promise.all(n)).filter(e=>{let{id:t}=e;return this._ids.has(t)})},transferList:r}}};(0,r._)([(0,a.MZ)({constructOnly:!0})],S.prototype,"renderCoordsHelper",void 0),(0,r._)([(0,a.MZ)({constructOnly:!0})],S.prototype,"fetchEdgeLocations",void 0),(0,r._)([(0,a.MZ)({constructOnly:!0})],S.prototype,"schedule",void 0),(0,r._)([(0,a.MZ)({readOnly:!0})],S.prototype,"availability",void 0),S=(0,r._)([(0,c.$)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorkerHandle")],S);class _ extends p.B{constructor(e,t){super("SceneLayerSnappingSourceWorker","fetchCandidates",{},e,{strategy:"dedicated",client:t})}}const m=(0,f.vt)();let I=class extends o.A{get updating(){return this._updatingHandles.updating}constructor(e){super(e),this.availability=1,this._updatingHandles=new u.U,this._abortController=new AbortController}destroy(){this._tracker=(0,l.xt)(this._tracker),this._abortController=(0,l.DC)(this._abortController),this._updatingHandles.destroy()}initialize(){const{view:e}=this,t=e.resourceController;this._edgeWorker=new h.U(A(t)),this._workerHandle=new S({renderCoordsHelper:this.view.renderCoordsHelper,schedule:A(t),fetchEdgeLocations:async(e,t)=>{if(null==this._tracker)throw new Error("tracker-not-initialized");return this._tracker.fetchEdgeLocations(e,this._edgeWorker,t)}}),this._updatingHandles.addPromise(this._setupLayerView()),this.addHandles([(0,d.DQ)(this._workerHandle),(0,d.DQ)(this._edgeWorker)])}async fetchCandidates(e,t){return this._workerHandle.fetchCandidates(e,t)}refresh(){}async _setupLayerView(){var e;if(this.destroyed)return;const t=null===(e=this._abortController)||void 0===e?void 0:e.signal,n=await this.getLayerView();null==n||(0,s.G4)(t)||(this._tracker=n.trackSnappingSources({add:(e,n)=>{this._updatingHandles.addPromise(this._workerHandle.add({id:e,bounds:n},t))},remove:e=>{this._updatingHandles.addPromise(this._workerHandle.remove({id:e},t))}}))}};function A(e){return t=>e.immediate.schedule(t)}(0,r._)([(0,a.MZ)({constructOnly:!0})],I.prototype,"getLayerView",void 0),(0,r._)([(0,a.MZ)({constructOnly:!0})],I.prototype,"view",void 0),(0,r._)([(0,a.MZ)({readOnly:!0})],I.prototype,"updating",null),(0,r._)([(0,a.MZ)({readOnly:!0})],I.prototype,"availability",void 0),I=(0,r._)([(0,c.$)("esri.views.interactive.snapping.featureSources.I3SSnappingSource")],I);let N=class extends o.A{get updating(){return this._i3sSources.some(e=>e.updating)}constructor(e){super(e),this.availability=1,this._i3sSources=[]}destroy(){this._i3sSources.forEach(e=>e.destroy()),this._i3sSources.length=0}initialize(){const{view:e}=this,t=this.layerSource.layer;this._i3sSources="building-scene"===t.type?this._getBuildingSceneI3SSources(e,t):[this._getSceneLayerI3SSource(e,t)]}async fetchCandidates(e,t){const n=await Promise.all(this._i3sSources.map(n=>n.fetchCandidates(e,t)));return(0,s.Te)(t),n.flat()}refresh(){this._i3sSources.forEach(e=>e.refresh())}_getBuildingSceneI3SSources(e,t){return t.allSublayers.toArray().map(n=>"building-component"===n.type?new I({getLayerView:async()=>(await e.whenLayerView(t)).whenSublayerView(n),view:e}):null).filter(i.Ru)}_getSceneLayerI3SSource(e,t){return new I({getLayerView:async()=>{const n=await e.whenLayerView(t);return"scene-layer-graphics-3d"===n.type?void 0:n},view:e})}};(0,r._)([(0,a.MZ)({constructOnly:!0})],N.prototype,"layerSource",void 0),(0,r._)([(0,a.MZ)({constructOnly:!0})],N.prototype,"view",void 0),(0,r._)([(0,a.MZ)({readOnly:!0})],N.prototype,"updating",null),(0,r._)([(0,a.MZ)({readOnly:!0})],N.prototype,"availability",void 0),N=(0,r._)([(0,c.$)("esri.views.interactive.snapping.featureSources.SceneLayerSnappingSource")],N)},23241:(e,t,n)=>{n.d(t,{_:()=>i});var r=n(20664),o=n(64753);class i extends o.m{constructor(e,t,n){super(t,n),this.point=e}equals(e){return e instanceof i&&(0,r.q)(this.point,e.point)}}},69413:(e,t,n)=>{n.d(t,{T:()=>S,k:()=>_});var r,o,i=n(47249),s=n(20664),a=n(9392),c=n(57481),d=n(25672),l=n(96141);class u{updateSettings(e){this.settings=e,this._edgeHashFunction=e.reducedPrecision?y:g}write(e,t,n){I.seed=this._edgeHashFunction(n);const r=I.getIntRange(0,255),o=I.getIntRange(0,this.settings.variants-1),i=I.getFloat(),s=255*(.5*function(e,t){return Math.abs(e)**t*Math.sign(e)}(-(1-Math.min(i/.7,1))+Math.max(0,i-.7)/(1-.7),1.2)+.5);e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex),e.variantOffset.set(t,r),e.variantStroke.set(t,o),e.variantExtension.set(t,s)}}const h=new Float32Array(6),f=new Uint32Array(h.buffer),p=new Uint32Array(1);function g(e){return h[0]=e.position0[0],h[1]=e.position0[1],h[2]=e.position0[2],h[3]=e.position1[0],h[4]=e.position1[1],h[5]=e.position1[2],p[0]=31*(31*(31*(31*(31*(166811+f[0])+f[1])+f[2])+f[3])+f[4])+f[5],p[0]}function y(e){const t=h;t[0]=w(e.position0[0]),t[1]=w(e.position0[1]),t[2]=w(e.position0[2]),t[3]=w(e.position1[0]),t[4]=w(e.position1[1]),t[5]=w(e.position1[2]),p[0]=5381;for(let n=0;n<f.length;n++)p[0]=31*p[0]+f[n];return p[0]}const v=1e4;function w(e){return Math.round(e*v)/v}class S{constructor(){this._commonWriter=new u}updateSettings(e){this._commonWriter.updateSettings(e)}allocate(e){return l.gr.createBuffer(e)}write(e,t,n){this._commonWriter.write(e,t,n),(0,s.f)(m,n.faceNormal0,n.faceNormal1),(0,s.n)(m,m);const{typedBuffer:r,typedBufferStride:o}=e.normalCompressed;(0,d.aT)(r,t,m[0],m[1],m[2],o)}}(r=S).Layout=l.gr,r.glLayout=(0,c.U)(l.gr,1);class _{constructor(){this._commonWriter=new u}updateSettings(e){this._commonWriter.updateSettings(e)}allocate(e){return l.In.createBuffer(e)}write(e,t,n){this._commonWriter.write(e,t,n);{const{typedBuffer:r,typedBufferStride:o}=e.normalCompressed;(0,d.aT)(r,t,n.faceNormal0[0],n.faceNormal0[1],n.faceNormal0[2],o)}{const{typedBuffer:r,typedBufferStride:o}=e.normal2Compressed;(0,d.aT)(r,t,n.faceNormal1[0],n.faceNormal1[1],n.faceNormal1[2],o)}}}(o=_).Layout=l.In,o.glLayout=(0,c.U)(l.In,1);const m=(0,a.vt)(),I=new i.A},72317:(e,t,n)=>{n.d(t,{C:()=>a});var r=n(89379),o=n(75543),i=n(61751),s=n(23241);class a extends i.w{constructor(e){super((0,r.A)((0,r.A)({},e),{},{constraint:new o.i7(e.targetPoint)}))}get hints(){return[new s._(this.targetPoint,this.isDraped,this.domain)]}}},74527:(e,t,n)=>{n.d(t,{U:()=>a});var r=n(78393),o=n(12016),i=n(12580),s=n(8775);class a extends o.B{constructor(e){super("EdgeProcessingWorker","extract",{extract:e=>[e.dataBuffer],extractComponentsEdgeLocations:e=>[e.dataBuffer],extractEdgeLocations:e=>[e.dataBuffer]},e)}async process(e,t,n){return n?(0,s.o6)(e):function(e){return{regular:{instancesData:(0,i.s)(e.regular.instancesData),lodInfo:{lengths:new Float32Array(e.regular.lodInfo.lengths)}},silhouette:{instancesData:(0,i.s)(e.silhouette.instancesData),lodInfo:{lengths:new Float32Array(e.silhouette.lodInfo.lengths)}},averageEdgeLength:e.averageEdgeLength}}(await this.invoke(new c(e),t))}async extractEdgeLocations(e,t){const n=await this.invokeMethod("extractEdgeLocations",new c(e),t);return(0,i.s)(n)}async extractComponentsEdgeLocations(e,t){const n=await this.invokeMethod("extractComponentsEdgeLocations",new c(e),t);return(0,i.s)(n)}}class c{constructor(e){this.dataBuffer=e.data.buffer,this.writerSettings=e.writerSettings,this.skipDeduplicate=e.skipDeduplicate,this.indices=(0,r.iu)(e.indices)?e.indices.buffer:e.indices,this.indicesType=(0,r.iu)(e.indices)?(0,r.XJ)(e.indices)?"Uint32Array":"Uint16Array":"Array",this.indicesLength=e.indicesLength}}},77176:(e,t,n)=>{n.d(t,{b:()=>i});var r=n(15941),o=n(38496);function i(e,t,n){var i;const l=Array.isArray(e),u=l?e.length/t:e.byteLength/(4*t),h=l?e:new Uint32Array(e,0,u*t),f=null!==(i=null===n||void 0===n?void 0:n.minReduction)&&void 0!==i?i:0,p=(null===n||void 0===n?void 0:n.originalIndices)||null,g=p?p.length:0,y=(null===n||void 0===n?void 0:n.componentOffsets)||null;let v=0;if(y)for(let r=0;r<y.length-1;r++){const e=y[r+1]-y[r];e>v&&(v=e)}else v=u;const w=Math.floor(1.1*v)+1;(null==d||d.length<2*w)&&(d=new Uint32Array((0,r.cU)(2*w)));for(let r=0;r<2*w;r++)d[r]=0;let S=0;const _=!!y&&!!p,m=_?g:u;let I=(0,o.my)(u);const A=new Uint32Array(g),N=1.96;let O=0!==f?Math.ceil(4*N*N/(f*f)*f*(1-f)):m,E=1,L=y?y[1]:m;for(let r=0;r<m;r++){if(r===O){const e=1-S/r;if(e+N*Math.sqrt(e*(1-e)/r)<f)return null;O*=2}if(r===L){for(let e=0;e<2*w;e++)d[e]=0;if(p)for(let e=y[E-1];e<y[E];e++)A[e]=I[p[e]];L=y[++E]}const e=_?p[r]:r,n=e*t,o=c(h,n,t);let i=o%w,a=S;for(;0!==d[2*i+1];){if(d[2*i]===o){const e=d[2*i+1]-1;if(s(h,n,e*t,t)){a=I[e];break}}i++,i>=w&&(i-=w)}a===S&&(d[2*i]=o,d[2*i+1]=e+1,S++),I[e]=a}if(0!==f&&1-S/u<f)return null;if(_){for(let e=y[E-1];e<A.length;e++)A[e]=I[p[e]];I=(0,o.uW)(A)}const C=l?new Array(S):new Uint32Array(S*t);S=0;for(let r=0;r<m;r++)I[r]===S&&(a(h,(_?p[r]:r)*t,C,S*t,t),S++);if(p&&!_){const e=new Uint32Array(g);for(let t=0;t<e.length;t++)e[t]=I[p[t]];I=(0,o.uW)(e)}return{buffer:Array.isArray(C)?C:C.buffer,indices:I,uniqueCount:S}}function s(e,t,n,r){for(let o=0;o<r;o++)if(e[t+o]!==e[n+o])return!1;return!0}function a(e,t,n,r,o){for(let i=0;i<o;i++)n[r+i]=e[t+i]}function c(e,t,n){let r=0;for(let o=0;o<n;o++)r=e[t+o]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let d=null},96141:(e,t,n)=>{n.d(t,{EdgeInputBufferLayout:()=>s,In:()=>l,gr:()=>d,vG:()=>u,vJ:()=>a,wO:()=>c});var r=n(57481),o=n(48549),i=n(66470);const s=(0,o.BP)().vec3f(i.r.POSITION).u16(i.r.COMPONENTINDEX).freeze(),a=(0,o.BP)().vec2u8(i.r.SIDENESS).freeze(),c=(0,r.U)(a),d=(0,o.BP)().vec3f(i.r.POSITION0).vec3f(i.r.POSITION1).vec2i16(i.r.NORMALCOMPRESSED).u16(i.r.COMPONENTINDEX).u8(i.r.VARIANTOFFSET,{glNormalized:!0}).u8(i.r.VARIANTSTROKE).u8(i.r.VARIANTEXTENSION,{glNormalized:!0}).freeze(),l=(0,o.BP)().vec3f(i.r.POSITION0).vec3f(i.r.POSITION1).vec2i16(i.r.NORMALCOMPRESSED).vec2i16(i.r.NORMAL2COMPRESSED).u16(i.r.COMPONENTINDEX).u8(i.r.VARIANTOFFSET,{glNormalized:!0}).u8(i.r.VARIANTSTROKE).u8(i.r.VARIANTEXTENSION,{glNormalized:!0}).freeze(),u=new Map([[i.r.POSITION0,0],[i.r.POSITION1,1],[i.r.COMPONENTINDEX,2],[i.r.VARIANTOFFSET,3],[i.r.VARIANTSTROKE,4],[i.r.VARIANTEXTENSION,5],[i.r.NORMALCOMPRESSED,6],[i.r.NORMAL2COMPRESSED,7],[i.r.SIDENESS,8]])}}]);
//# sourceMappingURL=13537.e21366c6.chunk.js.map