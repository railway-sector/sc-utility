"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[2259,96141],{2259:(t,e,n)=>{n.d(e,{o6:()=>b,extractComponentsEdgeLocationsLayout:()=>_,hx:()=>I,Jb:()=>N});var o=n(77176);function r(t,e,n){const o=e/3,r=new Uint32Array(n+1),i=new Uint32Array(n+1),s=(t,e)=>{t<e?r[t+1]++:i[e+1]++};for(let v=0;v<o;v++){const e=t[3*v],n=t[3*v+1],o=t[3*v+2];s(e,n),s(n,o),s(o,e)}let c=0,a=0;for(let v=0;v<n;v++){const t=r[v+1],e=i[v+1];r[v+1]=c,i[v+1]=a,c+=t,a+=e}const f=new Uint32Array(6*o),l=r[n],u=(t,e,n)=>{if(t<e){const o=r[t+1]++;f[2*o]=e,f[2*o+1]=n}else{const o=i[e+1]++;f[2*l+2*o]=t,f[2*l+2*o+1]=n}};for(let v=0;v<o;v++){const e=t[3*v],n=t[3*v+1],o=t[3*v+2];u(e,n,v),u(n,o,v),u(o,e,v)}const d=(t,e)=>{const n=2*t,o=e-t;for(let r=1;r<o;r++){const t=f[n+2*r],e=f[n+2*r+1];let o=r-1;for(;o>=0&&f[n+2*o]>t;o--)f[n+2*o+2]=f[n+2*o],f[n+2*o+3]=f[n+2*o+1];f[n+2*o+2]=t,f[n+2*o+3]=e}};for(let v=0;v<n;v++)d(r[v],r[v+1]),d(l+i[v],l+i[v+1]);const p=new Int32Array(3*o),m=(e,n)=>e===t[3*n]?0:e===t[3*n+1]?1:e===t[3*n+2]?2:-1,g=(t,e)=>{const n=m(t,e);p[3*e+n]=-1},h=(t,e,n,o)=>{const r=m(t,e);p[3*e+r]=o;const i=m(n,o);p[3*o+i]=e};for(let v=0;v<n;v++){let t=r[v];const e=r[v+1];let n=i[v];const o=i[v+1];for(;t<e&&n<o;){const e=f[2*t],o=f[2*l+2*n];e===o?(h(v,f[2*t+1],o,f[2*l+2*n+1]),t++,n++):e<o?(g(v,f[2*t+1]),t++):(g(o,f[2*l+2*n+1]),n++)}for(;t<e;)g(v,f[2*t+1]),t++;for(;n<o;)g(f[2*l+2*n],f[2*l+2*n+1]),n++}return p}var i=n(48549),s=n(96141),c=n(47249),a=n(20664),f=n(9392),l=n(25672);class u{updateSettings(t){this.settings=t,this._edgeHashFunction=t.reducedPrecision?h:g}write(t,e,n){A.seed=this._edgeHashFunction(n);const o=A.getIntRange(0,255),r=A.getIntRange(0,this.settings.variants-1),i=A.getFloat(),s=255*(.5*function(t,e){return Math.abs(t)**e*Math.sign(t)}(-(1-Math.min(i/.7,1))+Math.max(0,i-.7)/(1-.7),1.2)+.5);t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex),t.variantOffset.set(e,o),t.variantStroke.set(e,r),t.variantExtension.set(e,s)}}const d=new Float32Array(6),p=new Uint32Array(d.buffer),m=new Uint32Array(1);function g(t){return d[0]=t.position0[0],d[1]=t.position0[1],d[2]=t.position0[2],d[3]=t.position1[0],d[4]=t.position1[1],d[5]=t.position1[2],m[0]=31*(31*(31*(31*(31*(166811+p[0])+p[1])+p[2])+p[3])+p[4])+p[5],m[0]}function h(t){const e=d;e[0]=w(t.position0[0]),e[1]=w(t.position0[1]),e[2]=w(t.position0[2]),e[3]=w(t.position1[0]),e[4]=w(t.position1[1]),e[5]=w(t.position1[2]),m[0]=5381;for(let n=0;n<p.length;n++)m[0]=31*m[0]+p[n];return m[0]}const v=1e4;function w(t){return Math.round(t*v)/v}const y=(0,f.vt)(),A=new c.A;var B=n(7150);function b(t){const e=I(t.data,t.skipDeduplicate,t.indices,t.indicesLength);return U.updateSettings(t.writerSettings),x.updateSettings(t.writerSettings),(0,B.K)(e,U,x)}function I(t,e,n,i){if(e){const e=r(n,i,t.count);return new S(n,i,e,t)}const c=(0,o.b)(t.buffer,t.stride/4,{originalIndices:n}),a=r(c.indices,i,c.uniqueCount);return{faces:c.indices,facesLength:c.indices.length,neighbors:a,vertices:s.EdgeInputBufferLayout.createView(c.buffer)}}class S{constructor(t,e,n,o){this.faces=t,this.facesLength=e,this.neighbors=n,this.vertices=o}}const U=new class{constructor(){this._commonWriter=new u}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return s.gr.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n),(0,a.g)(y,n.faceNormal0,n.faceNormal1),(0,a.n)(y,y);const{typedBuffer:o,typedBufferStride:r}=t.normalCompressed;(0,l.aT)(o,e,y[0],y[1],y[2],r)}},x=new class{constructor(){this._commonWriter=new u}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return s.In.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n);{const{typedBuffer:o,typedBufferStride:r}=t.normalCompressed;(0,l.aT)(o,e,n.faceNormal0[0],n.faceNormal0[1],n.faceNormal0[2],r)}{const{typedBuffer:o,typedBufferStride:r}=t.normal2Compressed;(0,l.aT)(o,e,n.faceNormal1[0],n.faceNormal1[1],n.faceNormal1[2],r)}}},N=(0,i.BP)().vec3f("position0").vec3f("position1"),_=(0,i.BP)().vec3f("position0").vec3f("position1").u16("componentIndex")},77176:(t,e,n)=>{n.d(e,{b:()=>i});var o=n(15941),r=n(38496);function i(t,e,n){var i;const l=Array.isArray(t),u=l?t.length/e:t.byteLength/(4*e),d=l?t:new Uint32Array(t,0,u*e),p=null!==(i=null===n||void 0===n?void 0:n.minReduction)&&void 0!==i?i:0,m=(null===n||void 0===n?void 0:n.originalIndices)||null,g=m?m.length:0,h=(null===n||void 0===n?void 0:n.componentOffsets)||null;let v=0;if(h)for(let o=0;o<h.length-1;o++){const t=h[o+1]-h[o];t>v&&(v=t)}else v=u;const w=Math.floor(1.1*v)+1;(null==f||f.length<2*w)&&(f=new Uint32Array((0,o.cU)(2*w)));for(let o=0;o<2*w;o++)f[o]=0;let y=0;const A=!!h&&!!m,B=A?g:u;let b=(0,r.my)(u);const I=new Uint32Array(g),S=1.96;let U=0!==p?Math.ceil(4*S*S/(p*p)*p*(1-p)):B,x=1,N=h?h[1]:B;for(let o=0;o<B;o++){if(o===U){const t=1-y/o;if(t+S*Math.sqrt(t*(1-t)/o)<p)return null;U*=2}if(o===N){for(let t=0;t<2*w;t++)f[t]=0;if(m)for(let t=h[x-1];t<h[x];t++)I[t]=b[m[t]];N=h[++x]}const t=A?m[o]:o,n=t*e,r=a(d,n,e);let i=r%w,c=y;for(;0!==f[2*i+1];){if(f[2*i]===r){const t=f[2*i+1]-1;if(s(d,n,t*e,e)){c=b[t];break}}i++,i>=w&&(i-=w)}c===y&&(f[2*i]=r,f[2*i+1]=t+1,y++),b[t]=c}if(0!==p&&1-y/u<p)return null;if(A){for(let t=h[x-1];t<I.length;t++)I[t]=b[m[t]];b=(0,r.uW)(I)}const _=l?new Array(y):new Uint32Array(y*e);y=0;for(let o=0;o<B;o++)b[o]===y&&(c(d,(A?m[o]:o)*e,_,y*e,e),y++);if(m&&!A){const t=new Uint32Array(g);for(let e=0;e<t.length;e++)t[e]=b[m[e]];b=(0,r.uW)(t)}return{buffer:Array.isArray(_)?_:_.buffer,indices:b,uniqueCount:y}}function s(t,e,n,o){for(let r=0;r<o;r++)if(t[e+r]!==t[n+r])return!1;return!0}function c(t,e,n,o,r){for(let i=0;i<r;i++)n[o+i]=t[e+i]}function a(t,e,n){let o=0;for(let r=0;r<n;r++)o=t[e+r]+o|0,o=o+(o<<11)+(o>>>2)|0;return o>>>0}let f=null},96141:(t,e,n)=>{n.d(e,{EdgeInputBufferLayout:()=>s,In:()=>l,g6:()=>p,gr:()=>f,kU:()=>m,lX:()=>u,pz:()=>d,vJ:()=>c,wO:()=>a});var o=n(57481),r=n(48549),i=n(75757);const s=(0,r.BP)().vec3f("position").u16("componentIndex").freeze(),c=(0,r.BP)().vec2u8("sideness").freeze(),a=(0,o.U)(c),f=(0,r.BP)().vec3f("position0").vec3f("position1").vec2i16("normalCompressed").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).freeze(),l=(0,r.BP)().vec3f("position0").vec3f("position1").vec2i16("normalCompressed").vec2i16("normal2Compressed").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).freeze(),u=(0,o.U)(f,1),d=(0,o.U)(l,1),p=(0,i._u)([a,u]),m=(0,i._u)([a,d])}}]);
//# sourceMappingURL=2259.c9a801b6.chunk.js.map