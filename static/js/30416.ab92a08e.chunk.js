"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[30416],{29201:(e,t,i)=>{i.d(t,{I:()=>P,a:()=>_,b:()=>x});var r,s,o=i(57528),n=i(26917),a=i(59395),c=i(90080),l=i(94192),p=i(80883),u=i(3799),d=i(21390),h=i(86955),v=i(70367),f=i(91911),g=i(31432),m=i(2687);class _ extends g.Y{}function x(e){const t=new m.N5,{vertex:i,fragment:g,varyings:_}=t,{output:x,perspectiveInterpolation:P}=e;return(0,u.NB)(i,e),t.include(a.d),t.include(l.Z,e),t.fragment.include(n.HQ,e),t.include(c.g,e),t.include(f.z,e),t.attributes.add("position","vec3"),t.attributes.add("uv0","vec2"),P&&t.attributes.add("perspectiveDivide","float"),i.main.add((0,h.H)(r||(r=(0,o.A)(["\n    vpos = position;\n    forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);\n    vTexCoord = uv0;\n    gl_Position = transformPosition(proj, view, vpos);\n    ",""])),(0,h.If)(P,"gl_Position *= perspectiveDivide;"))),_.add("vpos","vec3",{invariant:!0}),_.add("vTexCoord","vec2"),g.include(p.a),g.uniforms.add(new d.m("opacity",e=>e.opacity),new v.N("tex",e=>e.glTexture)).main.add((0,h.H)(s||(s=(0,o.A)(["\n    discardBySlice(vpos);\n    discardByTerrainDepth();\n    ","\n    vec4 finalColor = texture(tex, vTexCoord) * opacity;\n    outputColorHighlightOID(finalColor, vpos, finalColor.rgb);"])),(0,h.If)(10===x,"fragColor = vec4(0, 0, 0, 1); return;"))),t}const P=Object.freeze(Object.defineProperty({__proto__:null,ImageMaterialPassParameters:_,build:x},Symbol.toStringTag,{value:"Module"}))},30416:(e,t,i)=>{i.d(t,{r:()=>D});var r=i(89379),s=i(88105),o=i(34981),n=i(59696),a=i(34812),c=i(45463),l=i(60322),p=i(86994),u=i(82809),d=i(63928),h=i(52757),v=i(16506),f=i(59246),g=i(96643),m=i(86401),_=i(29201),x=i(57162);class P extends f.w{constructor(e,t){super(e,t,new v.$(_.I,()=>i.e(48391).then(i.bind(i,48391))),w(t).locations)}_getPipelineState(e,t){const{oitPass:i,output:r,hasOccludees:s,cullFace:n}=e;return(0,x.Ey)({blending:(0,o.RN)(r)?(0,l.Yf)(i,!0):null,culling:(0,x.Xt)(n),depthTest:{func:(0,l.K_)(i)},depthWrite:(0,l.z5)(e),drawBuffers:(0,l.m6)(i,r),colorWrite:x.kn,stencilWrite:s?g.v0:null,stencilTest:s?t?g.a9:g.qh:null,polygonOffset:(0,l.mE)(e)})}initializePipeline(e){return this._occludeePipeline=this._getPipelineState(e,!0),this._getPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}function w(e){let t=m.l5;return e.perspectiveInterpolation&&(t=t.clone().f32("perspectiveDivide")),t}var y=i(6326),C=i(6485),b=i(92656);class T extends b.E{constructor(e){super(),this.draped=e,this.cullFace=0,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.perspectiveInterpolation=!0,this.textureCoordinateType=0,this.emissionSource=0,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.olidColorInstanced=!1,this.snowCover=!1}}(0,y.Cg)([(0,C.W)({count:3})],T.prototype,"cullFace",void 0),(0,y.Cg)([(0,C.W)()],T.prototype,"enableOffset",void 0),(0,y.Cg)([(0,C.W)()],T.prototype,"writeDepth",void 0),(0,y.Cg)([(0,C.W)()],T.prototype,"hasOccludees",void 0),(0,y.Cg)([(0,C.W)()],T.prototype,"terrainDepthTest",void 0),(0,y.Cg)([(0,C.W)()],T.prototype,"cullAboveTerrain",void 0),(0,y.Cg)([(0,C.W)()],T.prototype,"perspectiveInterpolation",void 0);class D extends d.W{constructor(e){super(e,W),this.supportsEdges=!0,this.produces=new Map([[2,e=>(0,o.CL)(e)],[4,e=>(0,o._o)(e)&&this.parameters.writeDepth],[8,e=>(0,o._o)(e)&&!this.parameters.writeDepth],[18,e=>(0,o._o)(e)||(0,o.CL)(e)]]),this._configuration=new T(e.draped)}dispose(){this.setParameters({texture:void 0})}getConfiguration(e,t){return super.getConfiguration(e,t,this._configuration),this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=t.hasOccludees,this._configuration.oitPass=t.oitPass,this._configuration.enableOffset=t.camera.relativeElevation<l.xt,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}get visible(){return!0}createGLMaterial(e){return new I(e)}createBufferWriter(){return new O(w(this.parameters))}}class I extends n.A{constructor(e){super((0,r.A)((0,r.A)({},e),e.material.parameters)),this.parameters=e;const t=this._material.parameters.texture;(0,a.y)(t)&&e.textures.updater.add(t)}dispose(){this.parameters.textures.updater.remove(this._material.parameters.texture)}beginSlot(e){return this.getTechnique(P,e)}}class O extends u.Z{write(e,t,i,r,o,n){for(const a of this.layout.fields.keys()){const r=i.get(a);if(r)if("perspectiveDivide"===a){(0,p.vA)(1===r.size);const e=o.getField(a,s.Y$);e&&(0,h.uO)(r,e,n)}else(0,h.Ap)(a,r,e,t,o,n)}return null}}class W extends c.q{constructor(e,t){super(),this.texture=e,this.draped=t,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=0,this.opacity=1,this.perspectiveInterpolation=!1}get glTexture(){return this.texture.glTexture}}},63928:(e,t,i)=>{i.d(t,{W:()=>o});var r=i(45463),s=i(48168);class o extends r.i{intersect(e,t,i,r,o,n){return(0,s.Uy)(e,i,r,o,void 0,n)}intersectDraped(e,t,i,r){return(0,s.gz)(i[0],i[1],e,r)}}},86401:(e,t,i)=>{i.d(t,{Ci:()=>s,KL:()=>a,dB:()=>n,l5:()=>o,wB:()=>c});var r=i(48549);const s=(0,r.BP)().vec3f("position").freeze(),o=(0,r.BP)().vec3f("position").vec2f16("uv0").freeze(),n=(0,r.BP)().vec3f("position").vec4u8("color").freeze(),a=(0,r.BP)().vec3f("position").vec2f("uv0").freeze(),c=(0,r.BP)().vec3f("position").vec2f("uv0").vec4u8("olidColor").freeze()}}]);
//# sourceMappingURL=30416.ab92a08e.chunk.js.map