{"version":3,"file":"static/js/15477.a80abd51.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/graphics/GraphicsProcessor.js","../node_modules/@arcgis/core/views/3d/layers/GraphicsView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../Graphic.js\";import e from\"../../../../core/Accessor.js\";import{makeHandle as r}from\"../../../../core/handleUtils.js\";import{destroyMaybe as s}from\"../../../../core/maybe.js\";import{isAbortError as n}from\"../../../../core/promiseUtils.js\";import{watch as o,sync as a,syncAndInitial as p}from\"../../../../core/reactiveUtils.js\";import{property as l}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{diff as h}from\"../../../../core/accessorSupport/diffUtils.js\";import{UpdatingHandles as u}from\"../../../../core/support/UpdatingHandles.js\";import d from\"../../../../layers/Layer.js\";import{hydrateGraphic as y}from\"../../../../layers/graphics/hydratedFeatures.js\";import{getRenderingInfo as g,getRenderingInfoAsync as m}from\"../../../../renderers/support/renderingInfoUtils.js\";import f from\"../../../../rest/support/Query.js\";import{DrapeSourceType as b}from\"../interfaces.js\";import{suspendResumeExtentOptimism as C}from\"./constants.js\";import{Graphics3DCore as w}from\"./Graphics3DCore.js\";import{Graphics3DElevationAlignment as j}from\"./Graphics3DElevationAlignment.js\";import{Graphics3DFrustumVisibility as V}from\"./Graphics3DFrustumVisibility.js\";import{Graphics3DObjectStates as v}from\"./Graphics3DObjectStates.js\";import{Graphics3DScaleVisibility as G}from\"./Graphics3DScaleVisibility.js\";import{enlargeExtent as S}from\"./graphicUtils.js\";import{normalizeHighlightTargetExceptQuery as E}from\"../support/highlightUtils.js\";import{UpdatePolicy as O}from\"../../webgl-engine/lib/UpdatePolicy.js\";import{hasLayerBasedScaleVisibility as _}from\"../../../support/layerViewUtils.js\";let x=class extends e{constructor(i){super(i),this.drapeSourcePriorityOffset=0,this.type=\"graphics-3d\",this.graphicsCore=null,this.drapeSourceType=b.Features,this.scaleVisibilityEnabled=!1,this.frustumVisibilityEnabled=!1,this._suspendResumeExtent=null,this._updatingHandles=new u}initialize(){const{layer:i}=this,t=\"effectiveScaleRange\"in i?i:null,e=!_()&&this.scaleVisibilityEnabled&&null!=t,r=new w({owner:this,layer:this.owner.layer,preferredUpdatePolicy:O.SYNC,graphicSymbolSupported:!0,componentFactories:{elevationAlignment:(i,t)=>new j({graphicsCoreOwner:this,graphicsCore:i,queryGraphicUIDsInExtent:t,elevationProvider:this.view.elevationProvider}),scaleVisibility:e?(i,e)=>new G({graphicsCoreOwner:this,layer:t,queryGraphicUIDsInExtent:e,graphicsCore:i,basemapTerrain:this.owner.view.basemapTerrain}):null,objectStates:i=>new v(i)}});if(this._set(\"graphicsCore\",r),this.frustumVisibilityEnabled&&this._set(\"frustumVisibility\",new V({graphicsCoreOwner:this})),\"fullOpacity\"in this.owner){const i=this.owner;this._updatingHandles.add((()=>i.fullOpacity),(()=>this.graphicsCore.opacityChange()))}if(\"elevationInfo\"in i){const t=i;this._updatingHandles.add((()=>t.elevationInfo),((i,t)=>{h(i,t)&&this._updatingHandles.addPromise(this.graphicsCore.elevationInfoChange())}))}this._set(\"initializePromise\",this._initializeAsync()),this._updatingHandles.addPromise(this.initializePromise)}async _initializeAsync(){try{await this.graphicsCore.initializePromise}catch(i){if(n(i))return;throw i}this.destroyed||(this.addHandles(o((()=>this.view.clippingArea),(()=>this._updateClippingExtent()),a)),this._updateClippingExtent(),this._setupSuspendResumeExtent(),this.graphicsCore.startCreateGraphics())}destroy(){this._updatingHandles.destroy(),this._set(\"frustumVisibility\",s(this.frustumVisibility)),this._set(\"graphicsCore\",s(this.graphicsCore))}get layer(){return this.owner.layer}get layerViewUid(){return this.owner.uid}get view(){return this.owner.view}get scaleVisibility(){return this.graphicsCore?.scaleVisibility}get elevationAlignment(){return this.graphicsCore?.elevationAlignment}get scaleVisibilitySuspended(){return!(null==this.scaleVisibility||!this.scaleVisibility.suspended)}get frustumVisibilitySuspended(){return null!=this.frustumVisibility&&this.frustumVisibility.suspended}get suspended(){return this.owner.suspended??!1}get updating(){return!!(this.graphicsCore?.updating||null!=this.scaleVisibility&&this.scaleVisibility.updating||null!=this.frustumVisibility&&this.frustumVisibility.updating||this._updatingHandles.updating)}get graphics3DGraphics(){return this.graphicsCore?.graphics3DGraphics}get graphics3DGraphicsByObjectID(){return this.graphicsCore?.graphics3DGraphicsByObjectID}get loadedGraphics(){return this.owner.loadedGraphics}get fullOpacity(){return this.owner.fullOpacity??1}get slicePlaneEnabled(){return this.owner.slicePlaneEnabled}get updatePolicy(){return this.owner.updatePolicy}notifyGraphicGeometryChanged(i){this.graphicsCore.notifyGraphicGeometryChanged(i)}notifyGraphicVisibilityChanged(i){this.graphicsCore.notifyGraphicVisibilityChanged(i)}notifyContentGeometryUpdate(){this.owner.notifyContentGeometryUpdate?.()}getRenderingInfo(i,t,e){const r=g(i,{renderer:t,arcade:e});if(r?.color){const i=r.color;i[0]=i[0]/255,i[1]=i[1]/255,i[2]=i[2]/255}return r}getRenderingInfoAsync(i,t,e,r){return m(i,{renderer:t,arcade:e,...r})}getHit(i){if(this.owner.loadedGraphics){const t=this.owner.loadedGraphics.find((t=>t.uid===i));if(t){const i=this.layer instanceof d?this.layer:null,e=y(t,i);return{type:\"graphic\",graphic:e,layer:e.layer}}}return null}whenGraphicBounds(i,t){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(i,t):Promise.reject()}computeAttachmentOrigin(i,t){return this.graphicsCore?this.graphicsCore.computeAttachmentOrigin(i,t):null}getSymbolLayerSize(i,t){return this.graphicsCore?this.graphicsCore.getSymbolLayerSize(i,t):null}maskOccludee(i){const t=this.graphicsCore?.objectStates;if(!t)return r();const{set:e,handle:s}=t.acquireOccludeeSet(null);return t.setUid(e,i.uid),s}highlight(i,e){const r=this.graphicsCore?.objectStates;if(!r)return P;if(i instanceof f)return P;const s=E(i);if(0===s.length)return P;if(s[0]instanceof t){const i=s.map((i=>i.uid)),{set:t,handle:n}=r.acquireHighlightSet(e,null);return r.setUids(t,i),n}if(\"number\"==typeof s[0]){const i=s,{set:t,handle:n}=r.acquireHighlightSet(e,null);return r.setObjectIds(t,i),n}return P}_setupSuspendResumeExtent(){const{scaleVisibility:i,frustumVisibility:t}=this;if(null==i&&null==t)return;const e=({computedExtent:e,extentPadding:r})=>{this._suspendResumeExtent=S(e,this._suspendResumeExtent,C,r),null!=i&&i.setExtent(this._suspendResumeExtent),null!=t&&t.setExtent(this._suspendResumeExtent)};this.addHandles(o((()=>({computedExtent:this.graphicsCore?.computedExtent,extentPadding:this.graphicsCore?.extentPadding})),(i=>e(i)),p))}_updateClippingExtent(){const i=this.view.clippingArea;this.graphicsCore.setClippingExtent(i,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()}};i([l()],x.prototype,\"drapeSourcePriorityOffset\",void 0),i([l()],x.prototype,\"type\",void 0),i([l({constructOnly:!0})],x.prototype,\"owner\",void 0),i([l()],x.prototype,\"layer\",null),i([l()],x.prototype,\"layerViewUid\",null),i([l()],x.prototype,\"view\",null),i([l({constructOnly:!0})],x.prototype,\"graphicsCore\",void 0),i([l()],x.prototype,\"scaleVisibility\",null),i([l({constructOnly:!0})],x.prototype,\"frustumVisibility\",void 0),i([l()],x.prototype,\"elevationAlignment\",null),i([l()],x.prototype,\"scaleVisibilitySuspended\",null),i([l({readOnly:!0})],x.prototype,\"frustumVisibilitySuspended\",null),i([l()],x.prototype,\"suspended\",null),i([l({readOnly:!0})],x.prototype,\"updating\",null),i([l()],x.prototype,\"loadedGraphics\",null),i([l()],x.prototype,\"fullOpacity\",null),i([l()],x.prototype,\"slicePlaneEnabled\",null),i([l()],x.prototype,\"drapeSourceType\",void 0),i([l()],x.prototype,\"updatePolicy\",null),i([l({constructOnly:!0})],x.prototype,\"scaleVisibilityEnabled\",void 0),i([l({constructOnly:!0})],x.prototype,\"frustumVisibilityEnabled\",void 0),i([l()],x.prototype,\"initializePromise\",void 0),x=i([c(\"esri.views.3d.layers.graphics.GraphicsProcessor\")],x);const P=r();export{x as GraphicsProcessor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Accessor.js\";import s from\"../../../core/Identifiable.js\";import{destroyMaybe as o}from\"../../../core/maybe.js\";import{property as t}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{GraphicsProcessor as p}from\"./graphics/GraphicsProcessor.js\";import{defaultHighlightName as c}from\"../../support/HighlightDefaults.js\";let a=class extends(s.IdentifiableMixin(e)){constructor(r){super(r),this.drapeSourcePriorityOffset=0,this.processor=null,this.slicePlaneEnabled=!1,this.layer=new h,this.suspended=!1}initialize(){this._set(\"processor\",new p({owner:this,drapeSourcePriorityOffset:this.drapeSourcePriorityOffset}))}destroy(){this._set(\"processor\",o(this.processor))}get loadedGraphics(){return this.getGraphics()}get updating(){return!!this.processor?.updating}get symbolUpdateType(){return this.processor.graphicsCore.symbolUpdateType}getHit(r){return this.processor.getHit(r)}whenGraphicBounds(r,e){return this.processor.whenGraphicBounds(r,e)}graphicChanged(r){this.processor.graphicsCore.graphicUpdateHandler(r)}get updatePolicy(){return this.processor.graphicsCore.effectiveUpdatePolicy}async queryGraphics(){return this.loadedGraphics}highlight(r,e){return this.processor.highlight(r,e?.name??c)}maskOccludee(r){return this.processor.maskOccludee(r)}get test(){return{graphics3DProcessor:this.processor}}};r([t({constructOnly:!0})],a.prototype,\"view\",void 0),r([t({constructOnly:!0})],a.prototype,\"getGraphics\",void 0),r([t()],a.prototype,\"loadedGraphics\",null),r([t()],a.prototype,\"drapeSourcePriorityOffset\",void 0),r([t({readOnly:!0})],a.prototype,\"updating\",null),r([t()],a.prototype,\"processor\",void 0),r([t({type:Boolean})],a.prototype,\"slicePlaneEnabled\",void 0),r([t()],a.prototype,\"layer\",void 0),r([t()],a.prototype,\"suspended\",void 0),a=r([i(\"esri.views.3d.layers.GraphicsView3D\")],a);class h extends s{constructor(){super(),this.type=\"graphics-view-3d-dummy\",this.id=this.uid}}const d=a;export{d as default};\n"],"names":["x","e","constructor","i","super","this","drapeSourcePriorityOffset","type","graphicsCore","drapeSourceType","b","Features","scaleVisibilityEnabled","frustumVisibilityEnabled","_suspendResumeExtent","_updatingHandles","u","initialize","layer","t","_","r","w","owner","preferredUpdatePolicy","O","SYNC","graphicSymbolSupported","componentFactories","elevationAlignment","j","graphicsCoreOwner","queryGraphicUIDsInExtent","elevationProvider","view","scaleVisibility","G","basemapTerrain","objectStates","v","_set","V","add","fullOpacity","opacityChange","elevationInfo","h","addPromise","elevationInfoChange","_initializeAsync","initializePromise","n","destroyed","addHandles","o","clippingArea","_updateClippingExtent","a","_setupSuspendResumeExtent","startCreateGraphics","destroy","s","frustumVisibility","layerViewUid","uid","_this$graphicsCore","_this$graphicsCore2","scaleVisibilitySuspended","suspended","frustumVisibilitySuspended","_this$owner$suspended","updating","_this$graphicsCore3","graphics3DGraphics","_this$graphicsCore4","graphics3DGraphicsByObjectID","_this$graphicsCore5","loadedGraphics","_this$owner$fullOpaci","slicePlaneEnabled","updatePolicy","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","notifyContentGeometryUpdate","_this$owner$notifyCon","_this$owner","call","getRenderingInfo","g","renderer","arcade","color","getRenderingInfoAsync","m","_objectSpread","getHit","find","d","y","graphic","whenGraphicBounds","Promise","reject","computeAttachmentOrigin","getSymbolLayerSize","maskOccludee","_this$graphicsCore6","set","handle","acquireOccludeeSet","setUid","highlight","_this$graphicsCore7","P","f","E","length","map","acquireHighlightSet","setUids","setObjectIds","_ref","computedExtent","extentPadding","S","C","setExtent","_this$graphicsCore8","_this$graphicsCore9","p","setClippingExtent","spatialReference","recreateAllGraphics","l","prototype","constructOnly","readOnly","c","IdentifiableMixin","processor","getGraphics","_this$processor","symbolUpdateType","graphicChanged","graphicUpdateHandler","effectiveUpdatePolicy","queryGraphics","_e$name","name","test","graphics3DProcessor","Boolean","id"],"sourceRoot":""}