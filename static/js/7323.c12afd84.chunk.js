"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[7323,37040],{420:(e,t,r)=>{r.d(t,{x:()=>s});var n=r(78393),o=r(38496),i=r(93345);function s(e,t){switch(t){case i.WR.TRIANGLES:return function(e){return"number"==typeof e?(0,o.tM)(e):(0,n.mg)(e)?new Uint16Array(e):e}(e);case i.WR.TRIANGLE_STRIP:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return[];const r=t-2,n=(0,o.my)(3*r);if("number"==typeof e){let e=0;for(let t=0;t<r;t+=1)t%2==0?(n[e++]=t,n[e++]=t+1,n[e++]=t+2):(n[e++]=t+1,n[e++]=t,n[e++]=t+2)}else{let t=0;for(let o=0;o<r;o+=1)o%2==0?(n[t++]=e[o],n[t++]=e[o+1],n[t++]=e[o+2]):(n[t++]=e[o+1],n[t++]=e[o],n[t++]=e[o+2])}return n}(e);case i.WR.TRIANGLE_FAN:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);const r=t-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof e){let e=0;for(let t=0;t<r;++t)n[e++]=0,n[e++]=t+1,n[e++]=t+2;return n}const o=e[0];let i=e[1],s=0;for(let l=0;l<r;++l){const t=e[l+2];n[s++]=o,n[s++]=i,n[s++]=t,i=t}return n}(e)}}},7323:(e,t,r)=>{r.d(t,{fetch:()=>O});var n=r(89379),o=r(99746),i=r(93795),s=r(15941),l=r(86300),u=r(44680),a=r(34761),c=r(13191),f=r(72745),d=r(20664),m=r(9392),p=r(42294),h=r(75002),g=r(88105),x=r(45136),y=r(10947),v=r(52007),T=r(11109),b=r(420),B=r(37040),w=r(54439);class R{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class S{constructor(e,t,r){this.name=e,this.lodThreshold=t,this.pivotOffset=r,this.stageResources=new R,this.numberOfVertices=0}}var M=r(14766),A=r(50468),E=r(17345),I=r(96897),L=r(61895),U=r(78992);async function O(e,t){var u;const R=function(e){const t=e.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);return t?{fileType:"gltf",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null}:e.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:e,specifiedLodIndex:null}:{fileType:"unknown",url:e,specifiedLodIndex:null}}((0,i.EM)(e));if("wosr"===R.fileType){const e=await(t.cache?t.cache.loadWOSR(R.url,t):(0,M.Hh)(R.url,t)),{engineResources:r,referenceBoundingBox:n}=(0,M.FJ)(e,t);return{lods:r,referenceBoundingBox:n,isEsriSymbolResource:!1,isWosr:!0}}let O;if(t.cache)O=await t.cache.loadGLTF(R.url,t,!!t.usePBR);else{const{loadGLTF:e}=await r.e(43822).then(r.bind(r,43822));O=await e(new T.R(t.streamDataRequester),R.url,t,t.usePBR)}const F=null===(u=O.model.meta)||void 0===u?void 0:u.ESRI_proxyEllipsoid,P=O.meta.isEsriSymbolResource&&null!=F&&"EsriRealisticTreesStyle"===O.meta.ESRI_webstyle;P&&!O.customMeta.esriTreeRendering&&(O.customMeta.esriTreeRendering=!0,function(e,t){for(let r=0;r<e.model.lods.length;++r){const n=e.model.lods[r];for(const i of n.parts){const n=i.attributes.normal;if(null==n)return;const s=i.attributes.position,l=s.count,u=(0,m.vt)(),f=(0,m.vt)(),p=(0,m.vt)(),h=new Float32Array(4*l),x=new Float32Array(3*l),y=(0,a.B8)((0,c.vt)(),i.transform);let v=0,T=0;for(let a=0;a<l;a++){s.getVec(a,f),n.getVec(a,u),(0,d.t)(f,f,i.transform),(0,d.e)(p,f,t.center),(0,d.D)(p,p,t.radius);const l=p[2],c=(0,d.b)(p),m=Math.min(.45+.55*c*c,1)**o.Tf;(0,d.D)(p,p,t.radius),null!==y&&(0,d.t)(p,p,y),(0,d.n)(p,p),r+1!==e.model.lods.length&&e.model.lods.length>1&&(0,d.l)(p,p,u,l>-1?.2:Math.min(-4*l-3.8,1)),x[v]=p[0],x[v+1]=p[1],x[v+2]=p[2],v+=3,h[T]=m,h[T+1]=m,h[T+2]=m,h[T+3]=1,T+=4}i.attributes.normal=new g.xs(x.buffer),i.attributes.color=new g.Eq(h.buffer)}}}(O,F));const V=!!t.usePBR,C=O.meta.isEsriSymbolResource?{usePBR:V,isSchematic:!1,treeRendering:P,mrrFactors:U.SY}:{usePBR:V,isSchematic:!1,treeRendering:!1,mrrFactors:U.mb},G=(0,n.A)((0,n.A)({},t.materialParameters),{},{treeRendering:P}),{engineResources:k,referenceBoundingBox:j}=function(e,t,r,i,u,a){const c=e.model,d=new Array,m=new Map,T=new Map,R=c.lods.length,M=(0,p.Ie)();return c.lods.forEach((e,O)=>{const F=!0===i.skipHighLods&&(R>1&&0===O||R>3&&1===O)||!1===i.skipHighLods&&null!=u&&O!==u;if(F&&0!==O)return;const P=new S(e.name,e.lodThreshold,[0,0,0]);e.parts.forEach(e=>{const u=F?new L.$U({},i):function(e,t,r,i,s,l,u,a,c){const d=e.materials.get(t.material);if(null==d)return null;const{normal:m,color:p,texCoord0:h,tangent:g}=t.attributes,x=t.material+(m?"_normal":"")+(p?"_color":"")+(h?"_texCoord0":"")+(g?"_tangent":""),y=null!=t.attributes.texCoord0,v=null!=t.attributes.normal,T=function(e){switch(e){case"BLEND":return 0;case"MASK":return 2;case"OPAQUE":case null:case void 0:return 1}}(d.alphaMode);if(!l.has(x)){var b,R;if(y){const t=function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!=t&&!u.has(t)){const i=e.textures.get(t);if(i){const e=i.data,s=r&&!(0,B.x3)(e)?a.compressionOptions:void 0;u.set(t,new I.g((0,B.x3)(e)?e.data:e,(0,n.A)((0,n.A)({},i.parameters),{},{preMultiplyAlpha:!(0,B.x3)(e)&&o,encoding:(0,B.x3)(e)?e.encoding:void 0,compressionOptions:s})))}}},r=1!==T&&!c;t(d.colorTexture,r,1!==T),t(d.normalTexture),t(d.occlusionTexture,!0),t(d.emissiveTexture),t(d.metallicRoughnessTexture,!0)}const r=(0,o.xV)(d.color[0]),m=(0,o.xV)(d.color[1]),p=(0,o.xV)(d.color[2]),h=null!=d.colorTexture&&y?u.get(d.colorTexture):null,g=(0,U.Jr)(d),S=null!=(null===(b=d.normalTextureTransform)||void 0===b?void 0:b.scale)?null===(R=d.normalTextureTransform)||void 0===R?void 0:R.scale:f.Un;l.set(x,new L.$U((0,n.A)((0,n.A)({},i),{},{customDepthTest:1,textureAlphaMode:T,textureAlphaCutoff:d.alphaCutoff,diffuse:[r,m,p],ambient:[r,m,p],opacity:"OPAQUE"===d.alphaMode?1:d.opacity,doubleSided:d.doubleSided,doubleSidedType:"winding-order",cullFace:d.doubleSided?0:2,hasVertexColors:!!t.attributes.color,hasVertexTangents:!!t.attributes.tangent,normalType:v?0:2,castShadows:!0,receiveShadows:d.receiveShadows,receiveAmbientOcclusion:d.receiveAmbientOcclusion,textureId:null!=h?h.id:void 0,colorMixMode:d.colorMixMode,normalTextureId:null!=d.normalTexture&&y?u.get(d.normalTexture).id:void 0,textureAlphaPremultiplied:null!=h&&!!h.parameters.preMultiplyAlpha,occlusionTextureId:null!=d.occlusionTexture&&y?u.get(d.occlusionTexture).id:void 0,emissiveTextureId:null!=d.emissiveTexture&&y?u.get(d.emissiveTexture).id:void 0,metallicRoughnessTextureId:null!=d.metallicRoughnessTexture&&y?u.get(d.metallicRoughnessTexture).id:void 0,emissiveBaseColor:[d.emissiveFactor[0],d.emissiveFactor[1],d.emissiveFactor[2]],mrrFactors:g?U.Bt:[d.metallicFactor,d.roughnessFactor,i.mrrFactors[2]],isSchematic:g,colorTextureTransformMatrix:(0,w.G)(d.colorTextureTransform),normalTextureTransformMatrix:(0,w.G)(d.normalTextureTransform),scale:[S[0],S[1]],occlusionTextureTransformMatrix:(0,w.G)(d.occlusionTextureTransform),emissiveTextureTransformMatrix:(0,w.G)(d.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:(0,w.G)(d.metallicRoughnessTextureTransform)},s),a))}const S=l.get(x);if(r.stageResources.materials.push(S),y){const e=e=>{null!=e&&r.stageResources.textures.push(u.get(e))};e(d.colorTexture),e(d.normalTexture),e(d.occlusionTexture),e(d.emissiveTexture),e(d.metallicRoughnessTexture)}return S}(c,e,P,t,r,m,T,i,a),{geometry:d,vertexCount:R}=function(e,t){const r=e.attributes.position.count,n=(0,b.x)(e.indices||r,e.primitiveType),o=(0,h.oe)(3*r),{typedBuffer:i,typedBufferStride:u}=e.attributes.position;(0,x.t)(o,i,e.transform,3,u);const a=[["position",new A.n(o,n,3,!0)]];if(null!=e.attributes.normal){const t=(0,h.oe)(3*r),{typedBuffer:o,typedBufferStride:i}=e.attributes.normal;(0,l.Ge)(_,e.transform),(0,x.b)(t,o,_,3,i),(0,s.or)(_)&&(0,x.n)(t,t),a.push(["normal",new A.n(t,n,3,!0)])}if(null!=e.attributes.tangent){const t=(0,h.oe)(4*r),{typedBuffer:o,typedBufferStride:i}=e.attributes.tangent;(0,l.z0)(_,e.transform),(0,y.t)(t,o,_,4,i),(0,s.or)(_)&&(0,x.n)(t,t,4),a.push(["tangent",new A.n(t,n,4,!0)])}if(null!=e.attributes.texCoord0){const t=(0,h.oe)(2*r),{typedBuffer:o,typedBufferStride:i}=e.attributes.texCoord0;(0,v.a)(t,o,2,i),a.push(["uv0",new A.n(t,n,2,!0)])}const c=e.attributes.color;if(null!=c){const t=new Uint8Array(4*r);4===c.elementCount?c instanceof g.Eq?(0,y.b)(t,c,1,255):(c instanceof g.XP||c instanceof g.Uz)&&(0,y.b)(t,c,1/255,255):(t.fill(255),c instanceof g.xs?(0,x.f)(t,c.typedBuffer,1,255,4,c.typedBufferStride):(e.attributes.color instanceof g.eI||e.attributes.color instanceof g.nS)&&(0,x.f)(t,c.typedBuffer,1/255,255,4,e.attributes.color.typedBufferStride)),a.push(["color",new A.n(t,n,4,!0)])}return{geometry:new E.V(t,a),vertexCount:r}}(e,null!==u&&void 0!==u?u:new L.$U({},i)),S=d.boundingInfo;null!=S&&0===O&&((0,p.iT)(M,S.bbMin),(0,p.iT)(M,S.bbMax)),null!=u&&(P.stageResources.geometries.push(d),P.numberOfVertices+=R)}),F||d.push(P)}),{engineResources:d,referenceBoundingBox:M}}(O,C,G,t,R.specifiedLodIndex,P);return{lods:k,referenceBoundingBox:j,isEsriSymbolResource:O.meta.isEsriSymbolResource,isWosr:!1}}const _=(0,u.vt)()},10947:(e,t,r)=>{r.d(t,{a:()=>i,b:()=>c,l:()=>a,n:()=>l,t:()=>s});var n=r(99746),o=(r(81806),r(76460));function i(e,t,r){s(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function s(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(e.length/n!==t.length/o)return;const i=e.length/n,s=r[0],l=r[1],u=r[2],a=r[3],c=r[4],f=r[5],d=r[6],m=r[7],p=r[8];let h=0,g=0;for(let x=0;x<i;x++){const r=t[h],i=t[h+1],x=t[h+2],y=t[h+3];e[g]=s*r+a*i+d*x,e[g+1]=l*r+c*i+m*x,e[g+2]=u*r+f*i+p*x,e[g+3]=y,h+=o,g+=n}}function l(e,t){const r=Math.min(e.count,t.count),n=e.typedBuffer,o=e.typedBufferStride,i=t.typedBuffer,s=t.typedBufferStride;for(let l=0;l<r;l++){const e=l*o,t=l*s,r=i[t],u=i[t+1],a=i[t+2],c=r*r+u*u+a*a;if(c>0){const t=1/Math.sqrt(c);n[e]=t*r,n[e+1]=t*u,n[e+2]=t*a}}}function u(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;const o=Math.min(e.length/n,t.count),i=t.typedBuffer,s=t.typedBufferStride;let l=0,u=0;for(let a=0;a<o;a++)e[u]=r*i[l],e[u+1]=r*i[l+1],e[u+2]=r*i[l+2],e[u+3]=r*i[l+3],l+=s,u+=n}function a(e,t,r,n){c(e.typedBuffer,t,r,n,e.typedBufferStride)}function c(e,t,r,o){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;const s=Math.min(e.length/i,t.count),l=t.typedBuffer,u=t.typedBufferStride;let a=0,c=0;const f=1/n.Tf;for(let n=0;n<s;n++)e[c]=o*(r*l[a])**f,e[c+1]=o*(r*l[a+1])**f,e[c+2]=o*(r*l[a+2])**f,e[c+3]=o*r*l[a+3],a+=u,c+=i}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:c,linearToSRGBView:a,normalize:l,scale:u,scaleView:function(e,t,r){u(e.typedBuffer,t,r,e.typedBufferStride)},transformMat3:s,transformMat3View:i,transformMat4:function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;if(e.length/n!==t.length/i)return void o.A.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const s=e.length/n,l=r[0],u=r[1],a=r[2],c=r[3],f=r[4],d=r[5],m=r[6],p=r[7],h=r[8],g=r[9],x=r[10],y=r[11],v=r[12],T=r[13],b=r[14],B=r[15];let w=0,R=0;for(let o=0;o<s;o++){const r=t[w],o=t[w+1],s=t[w+2],S=t[w+3];e[R]=l*r+f*o+h*s+v*S,e[R+1]=u*r+d*o+g*s+T*S,e[R+2]=a*r+m*o+x*s+b*S,e[R+3]=c*r+p*o+y*s+B*S,w+=i,R+=n}},transformMat4View:function(e,t,r){if(e.count!==t.count)return;const n=e.count,o=r[0],i=r[1],s=r[2],l=r[3],u=r[4],a=r[5],c=r[6],f=r[7],d=r[8],m=r[9],p=r[10],h=r[11],g=r[12],x=r[13],y=r[14],v=r[15],T=e.typedBuffer,b=e.typedBufferStride,B=t.typedBuffer,w=t.typedBufferStride;for(let R=0;R<n;R++){const e=R*b,t=R*w,r=B[t],n=B[t+1],S=B[t+2],M=B[t+3];T[e]=o*r+u*n+d*S+g*M,T[e+1]=i*r+a*n+m*S+x*M,T[e+2]=s*r+c*n+p*S+y*M,T[e+3]=l*r+f*n+h*S+v*M}}},Symbol.toStringTag,{value:"Module"}))},37040:(e,t,r)=>{r.d(t,{KB:()=>s,Xi:()=>o,pn:()=>l,x3:()=>i});var n=r(81806);class o{constructor(e){this.data=e,this.type="encoded-mesh-texture",this.encoding="image/ktx2"}}function i(e){return"encoded-mesh-texture"===(null===e||void 0===e?void 0:e.type)}async function s(e){const t=new Blob([e]),r=await t.text();return JSON.parse(r)}async function l(e,t){if("image/ktx2"===t)return new o(e);const r=new Blob([e],{type:t});let i=URL.createObjectURL(r);switch(t){case"image/jpeg":i+="#.jpg";break;case"image/png":i+="#.png"}const s=new Image;if((0,n.A)("esri-iPhone"))return new Promise((e,t)=>{const r=()=>{o(),e(s)},n=e=>{o(),t(e)},o=()=>{URL.revokeObjectURL(i),s.removeEventListener("load",r),s.removeEventListener("error",n)};s.addEventListener("load",r),s.addEventListener("error",n),s.src=i});try{s.src=i,await s.decode()}catch(l){console.warn("Failed decoding HTMLImageElement")}return URL.revokeObjectURL(i),s}},52007:(e,t,r)=>{r.d(t,{a:()=>i,f:()=>s,n:()=>o});var n=r(78393);function o(e,t){i(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function i(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;const i=t.length/2;let s=0,l=0;if(!(0,n.iu)(t)||(0,n.dk)(t)){for(let n=0;n<i;++n)e[s]=t[l],e[s+1]=t[l+1],s+=r,l+=o;return}const u=(0,n.a3)(t);if((0,n.JI)(t))for(let n=0;n<i;++n)e[s]=Math.max(t[l]/u,-1),e[s+1]=Math.max(t[l+1]/u,-1),s+=r,l+=o;else for(let n=0;n<i;++n)e[s]=t[l]/u,e[s+1]=t[l+1]/u,s+=r,l+=o}function s(e,t,r,n){var o,i;const s=e.typedBuffer,l=e.typedBufferStride,u=null!==(o=null===n||void 0===n?void 0:n.count)&&void 0!==o?o:e.count;let a=(null!==(i=null===n||void 0===n?void 0:n.dstIndex)&&void 0!==i?i:0)*l;for(let c=0;c<u;++c)s[a]=t,s[a+1]=r,a+=l}Object.freeze(Object.defineProperty({__proto__:null,fill:s,normalizeIntegerBuffer:i,normalizeIntegerBufferView:o},Symbol.toStringTag,{value:"Module"}))},54439:(e,t,r)=>{r.d(t,{G:()=>s});var n=r(44680),o=r(59422),i=r(86300);function s(e){if(null==e)return null;const t=null!=e.offset?e.offset:o.uY,r=null!=e.rotation?e.rotation:0,s=null!=e.scale?e.scale:o.Un,l=(0,n.fA)(1,0,0,0,1,0,t[0],t[1],1),u=(0,n.fA)(Math.cos(r),-Math.sin(r),0,Math.sin(r),Math.cos(r),0,0,0,1),a=(0,n.fA)(s[0],0,0,0,s[1],0,0,0,1),c=(0,n.vt)();return(0,i.lw)(c,u,a),(0,i.lw)(c,l,c),c}}}]);
//# sourceMappingURL=7323.c12afd84.chunk.js.map