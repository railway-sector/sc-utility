"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[67352],{67352:(t,e,i)=>{i.r(e),i.d(e,{default:()=>te});var n=i(6326),s=(i(81806),i(30726)),a=i(46053),r=i(76460),o=(i(47249),i(87990)),l=i(19747),u=i(2522),d=i(91967),h=i(24648),c=i(68134),g=i(31633),p=i(17430),v=i(29772);let _=class extends d.A{constructor(t){super(t)}initialize(){this.addHandles([(0,c.wB)(()=>({viewData:this.viewData,startPoint:this.analysis.startPoint}),t=>{let{viewData:e,startPoint:i}=t;e.elevationAlignedStartPoint=this._applyProjectionAndElevationAlignment(i)},c.pc),(0,c.wB)(()=>({viewData:this.viewData,endPoint:this.analysis.endPoint}),t=>{let{viewData:e,endPoint:i}=t;e.elevationAlignedEndPoint=this._applyProjectionAndElevationAlignment(i)},c.pc),(0,c.wB)(()=>({result:this._computedResult,viewData:this.viewData}),t=>{let{result:e,viewData:i}=t;i.result=e},c.pc)])}_applyProjectionAndElevationAlignment(t){if(null==t)return t;const{spatialReference:e,elevationProvider:i}=this.view,n=(0,p.B)(t,e,i);return null!==n&&void 0!==n?n:((0,p.V)(this.analysis,t.spatialReference,r.A.getLogger(this)),null)}get _computedResult(){const{elevationAlignedStartPoint:t,elevationAlignedEndPoint:e,measurementMode:i,unit:n}=this.viewData;if(null==t||null==e)return null;const s=(0,v.NH)(t,e),a=this.geodesicLengthMeasurementUtils.geodesicDistanceBetweenPoints(t,e);if(null==s)return null;let r,o;switch(i){case 0:o=null!=a?"geodesic":"euclidean",r=null!==a&&void 0!==a?a:s.horizontal;break;case 2:if(null==a)return null;o="geodesic",r=a;break;case 1:o="euclidean",r=s.horizontal}let l=s.direct,u=s.vertical;const d=(0,g.Vs)(l.value,l.unit,n),c=(0,g.Vs)(r.value,r.unit,n),p=(0,g.jE)(u.value,u.unit,n);return l=(0,h.kM)(l,d),r=(0,h.kM)(r,c),u=(0,h.kM)(u,p),{mode:o,directDistance:l,horizontalDistance:r,verticalDistance:u}}};(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],_.prototype,"view",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],_.prototype,"analysis",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],_.prototype,"viewData",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],_.prototype,"geodesicLengthMeasurementUtils",void 0),(0,n.Cg)([(0,a.MZ)()],_.prototype,"_computedResult",null),_=(0,n.Cg)([(0,o.$)("esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementController")],_);var m=i(89379),y=(i(11265),i(59784)),w=i(15941),C=i(11113),b=i(76931),M=i(19555),P=i(20664),L=i(9392),f=i(4244),V=i(66747),S=i(7256),A=i(88321),E=i(13191),O=i(43047),D=i(55855),z=i(75762),Z=i(32314),x=i(5101),R=i(71372),H=i(72017),T=i(34981),G=i(59696),k=i(45463),B=i(48549),j=i(16506),Q=i(59246),W=i(60322),I=i(90806),U=i(93345),q=i(57162);class N extends Q.w{constructor(t,e){super(t,e,new j.$(I.M,()=>i.e(59492).then(i.bind(i,59492))),F.locations),this.primitiveType=U.WR.TRIANGLE_STRIP}initializePipeline(t){return(0,q.Ey)({blending:t.transparent?(0,W.Yf)(t.oitPass):null,polygonOffset:t.polygonOffsetEnabled?{factor:0,units:-4}:null,depthTest:{func:513},depthWrite:q.Uy,colorWrite:q.kn})}}const F=(0,B.BP)().vec3f("position").vec3f("normal").vec2f("uv0").f32("length");var J=i(6485),$=i(92656);class X extends $.E{constructor(){super(...arguments),this.polygonOffsetEnabled=!1,this.transparent=!1}}(0,n.Cg)([(0,J.W)()],X.prototype,"polygonOffsetEnabled",void 0),(0,n.Cg)([(0,J.W)()],X.prototype,"transparent",void 0);var Y=i(75569);class K extends k.i{constructor(t){super(t,et),this._configuration=new X,this.intersectDraped=void 0,this.produces=new Map([[2,t=>!this._transparent&&(0,T.RN)(t)],[8,t=>this._transparent&&(0,T.RN)(t)]])}getConfiguration(t,e){return super.getConfiguration(t,e,this._configuration),this._configuration.polygonOffsetEnabled=this.parameters.polygonOffset,this._configuration.transparent=this._transparent,this._configuration.oitPass=e.oitPass,this._configuration}get visible(){const{outlineColor:t,stripeEvenColor:e,stripeOddColor:i}=this.parameters;return t[3]>=Y.Q||e[3]>=Y.Q||i[3]>=Y.Q}intersect(){}createGLMaterial(t){return new tt(t)}createBufferWriter(){return new ot}get _transparent(){const{parameters:t}=this;return t.outlineColor[3]<1||t.stripeEvenColor[3]<1||t.stripeOddColor[3]<1}}class tt extends G.A{beginSlot(t){return this.getTechnique(N,t)}}class et extends k.q{constructor(){super(...arguments),this.width=32,this.outlineSize=.2,this.outlineColor=(0,D.fA)(1,.5,0,1),this.stripeEvenColor=(0,D.fA)(1,1,1,1),this.stripeOddColor=(0,D.fA)(1,.5,0,1),this.stripeLength=1,this.polygonOffset=!1}}const it=(0,L.vt)(),nt=(0,L.vt)(),st=(0,L.vt)(),at=(0,L.vt)(),rt=(0,L.vt)();class ot{constructor(){this.layout=F}elementCount(t){return 2*(t.get("position").indices.length/2+1)}write(t,e,i,n,s,a){const{data:r,indices:o}=i.get("position"),l=i.get("normal").data,u=r.length/3;o&&o.length!==2*(u-1)&&console.warn("MeasurementArrowMaterial does not support indices");const d=it,h=nt,c=st,g=at,p=rt,v=s.position,_=s.normal,m=s.uv0;let y=0;for(let C=0;C<u;++C){const i=3*C;if((0,P.j)(d,r[i],r[i+1],r[i+2]),C<u-1){const t=3*(C+1);(0,P.j)(h,r[t],r[t+1],r[t+2]),(0,P.j)(p,l[t],l[t+1],l[t+2]),(0,P.n)(p,p),(0,P.e)(c,h,d),(0,P.n)(c,c),(0,P.i)(g,p,c),(0,P.n)(g,g)}const n=(0,P.k)(d,h);t&&e&&((0,P.t)(d,d,t),(0,P.t)(h,h,t),(0,P.t)(g,g,e));const s=a+2*C,o=s+1;v.setVec(s,d),v.setVec(o,d),_.setVec(s,g),_.setVec(o,g),m.set(s,0,y),m.set(s,1,-1),m.set(o,0,y),m.set(o,1,1),C<u-1&&(y+=n)}const w=s.length;for(let C=0;C<2*u;++C)w.set(a+C,y);return null}}class lt extends Z.X{constructor(t){super(t),this._arrowWidth=16,this._arrowSubdivisions=128,this._origin=(0,L.vt)(),this._originTransform=(0,E.vt)(),this._arrowCenter=(0,L.vt)(),this._renderOccluded=4,this._geometry=null,this._stripeLength=1,this._stripesEnabled=!0,this._color=(0,D.vt)(),this._contrastColor=(0,D.vt)(),this.applyProperties(t)}get renderOccluded(){return this._renderOccluded}set renderOccluded(t){var e;t!==this._renderOccluded&&(this._renderOccluded=t,null===(e=this._arrowMaterial)||void 0===e||e.setParameters({renderOccluded:t}))}get geometry(){return this._geometry}set geometry(t){this._geometry=t,this._geometryChanged()}get stripeLength(){return this._stripeLength}set stripeLength(t){this._stripeLength=t,this.attached&&this._arrowMaterial.setParameters({stripeLength:this._stripeLength})}get stripesEnabled(){return this._stripesEnabled}set stripesEnabled(t){if(this._stripesEnabled=t,this.attached){const t=this._stripesEnabled?this._contrastColor:this._color;this._arrowMaterial.setParameters({stripeEvenColor:t})}}get color(){return this._color}set color(t){(0,y.we)(t,this._color)||((0,O.d)(this._color,t),this._updateArrowColor())}get contrastColor(){return this._contrastColor}set contrastColor(t){(0,y.we)(t,this._color)||((0,O.d)(this._contrastColor,t),this._updateArrowColor())}createExternalResources(){const t=this._color,e=this._contrastColor,i=this._stripesEnabled?e:t;this._arrowMaterial=new K({outlineColor:t,stripeEvenColor:i,stripeOddColor:t,renderOccluded:this.renderOccluded,polygonOffset:!0,isDecoration:this.isDecoration}),this._handles=new A.A,this._handles.add((0,c.wB)(()=>this.view.state.camera,()=>{this._viewChanged()}))}destroyExternalResources(){this._arrowMaterial=null,this._handles=(0,s.pR)(this._handles)}forEachMaterial(t){t(this._arrowMaterial)}createGeometries(t){var e;if(null==(null===(e=this._geometry)||void 0===e?void 0:e.startRenderSpace)||null==this._geometry.endRenderSpace)return;const i=this._createArrowGeometry(this._geometry.startRenderSpace,this._geometry.endRenderSpace,this._origin,this._geometry);i.transformation=this._originTransform,t.addGeometry(i),this._viewChanged()}_createArrowGeometry(t,e,i,n){const s=this.view,a=s.renderCoordsHelper,r=[],o=[],l=(t,e)=>{const n=z.rq.get();(0,P.e)(n,t,i),r.push(n),o.push(e)};if("euclidean"===n.type){n.eval(.5,this._arrowCenter);const i=z.rq.get();if(a.worldUpAtPosition(this._arrowCenter,i),function(t,e,i){const n=(0,P.a)(ut,e,t),s=(0,P.i)(ut,n,i);return 0===(0,P.H)(s)}(t,e,i)){const{heading:e,tilt:n}=s.camera,{direction:a}=(0,x.ZC)(s,t,e,n,dt);(0,P.d)(i,a)}l(t,i),l(e,i)}else{n.eval(.5,this._arrowCenter);const t=this._arrowSubdivisions+1&-2;for(let e=0;e<t;++e){const i=e/(t-1),s=z.rq.get(),r=z.rq.get();n.eval(i,s),a.worldUpAtPosition(s,r),l(s,r)}}return(0,H.Z8)(this._arrowMaterial,r,o)}_geometryChanged(){this.recreateGeometry()}_viewChanged(){if(this.view.ready&&this.attached&&null!=this._geometry){const t=this.view.state.camera.computeScreenPixelSizeAt(this._arrowCenter);this._arrowMaterial.setParameters({width:this._arrowWidth*t})}}_updateArrowColor(){if(!this.attached)return;const t=this._color,e=this._contrastColor,i=this._stripesEnabled?e:t,n=t,s=t;this._arrowMaterial.setParameters({stripeEvenColor:i,outlineColor:n,stripeOddColor:s})}}const ut=(0,L.vt)(),dt=(0,R.NP)();var ht=i(47996),ct=i(25191),gt=i(35925),pt=i(90659),vt=i(38042),_t=i(63860);let mt=class extends d.A{get _parameters(){const t=this.view.effectiveTheme,{accentColor:e,textColor:i}=t,n=(0,y.QP)(e),s=(0,y.f6)(e,.75),a=(0,y.QP)((0,y.bJ)(e)),r=(0,y.bJ)(i,160);return{accentColor:n,contrastColor:a,translucentAccentColor:s,triangleLineWidth:3,geodesicProjectionLineWidth:2,guideLineWidth:2,guideStippleLengthPixels:3,directLabelFontSize:16,horizontalLabelFontSize:12,verticalLabelFontSize:12,textColor:i,textBackgroundColor:(0,y._L)(r,.6),textCalloutColor:(0,y._L)(r,.5)}}get visible(){return this.analysisView.visible}get viewMode(){const{elevationAlignedStartPoint:t,elevationAlignedEndPoint:e}=this.analysisView;if(null==t||null==e||t.equals(e))return 0;const i=this.analysisView.result;if(null==i)return 1;if("geodesic"===this.actualVisualizedMeasurement)return this._requiresGeodesicGuideAt(this._startPosition)||this._requiresGeodesicGuideAt(this._endPosition)?3:1;const{verticalDistance:n,horizontalDistance:s}=i,a=(0,h.kM)(n,"meters").value,r=(0,h.kM)(s,"meters").value;return Math.min(a/r,r/a)<this.triangleCollapseRatioThreshold?1:2}get actualVisualizedMeasurement(){const{measurementMode:t,result:e}=this.analysisView;switch(t){case 0:return null!=e&&(0,h.kM)(e.horizontalDistance,"meters").value>pt.U7?"geodesic":"euclidean";case 1:return"euclidean";case 2:return"geodesic"}}get allowVisualElementsOrientationChange(){return null==this._triangleOrientationOverride}set allowVisualElementsOrientationChange(t){null==this._triangleOrientationOverride!==t&&(null==this._triangleOrientationOverride?this._triangleOrientationOverride=this._actualVisualElementsOrientation:this._triangleOrientationOverride=null)}get labels(){return"geodesic"===this.actualVisualizedMeasurement?{direct:null,horizontal:this._segmentLabel,vertical:this._verticalLabel}:{direct:this._segmentLabel,horizontal:this._horizontalLabel,vertical:this._verticalLabel}}constructor(t){super(t),this._segmentVisualElement=null,this._triangleVisualElement=null,this._rightAngleQuad=null,this._projectedGeodesicLine=null,this._geodesicStartHint=null,this._geodesicEndHint=null,this._segmentLabel=null,this._verticalLabel=null,this._horizontalLabel=null,this._startPosition=(0,L.vt)(),this._endPosition=(0,L.vt)(),this._cornerPosition=(0,L.vt)(),this._startPositionAtSeaLevel=(0,L.vt)(),this._endPositionAtSeaLevel=(0,L.vt)(),this._triangleOrientationOverride=null,this.messages=null,this.loadingMessages=!0,this.visualElementOrientation=0,this.triangleCollapseRatioThreshold=.03}initialize(){const t={attached:!0,view:this.view,isDecoration:!0},{guideLineWidth:e,guideStippleLengthPixels:i,triangleLineWidth:n,geodesicProjectionLineWidth:s,directLabelFontSize:a,verticalLabelFontSize:r,horizontalLabelFontSize:o}=this._parameters;this._segmentVisualElement=new lt((0,m.A)((0,m.A)({},t),{},{geometry:null,renderOccluded:4})),this._triangleVisualElement=new S.t((0,m.A)((0,m.A)({},t),{},{width:n,renderOccluded:4})),this._rightAngleQuad=new ht.n((0,m.A)((0,m.A)({},t),{},{renderOccluded:4}));const l=(0,m.A)((0,m.A)({},t),{},{polygonOffset:!0,renderOccluded:4});this._projectedGeodesicLine=new S.t((0,m.A)((0,m.A)({},l),{},{width:s,stipplePattern:(0,gt.wk)(i)})),this._geodesicStartHint=new S.t((0,m.A)((0,m.A)({},l),{},{width:e,stipplePattern:(0,gt.wk)(i)})),this._geodesicEndHint=new S.t((0,m.A)((0,m.A)({},l),{},{width:e,stipplePattern:(0,gt.wk)(i)})),this._segmentLabel=new V.N((0,m.A)((0,m.A)({},t),{},{fontSize:a})),this._verticalLabel=new V.N((0,m.A)((0,m.A)({},t),{},{fontSize:r})),this._horizontalLabel=new V.N((0,m.A)((0,m.A)({},t),{},{fontSize:o})),this.addHandles([(0,c.wB)(()=>{const{elevationAlignedStartPoint:t,elevationAlignedEndPoint:e}=this.analysisView,i=this.view;return{view:i,camera:i.state.camera,viewMode:this.viewMode,elevationAlignedStartPoint:t,elevationAlignedEndPoint:e,orientation:this._actualVisualElementsOrientation,visualizedMeasurement:this.actualVisualizedMeasurement,stripeLength:this._measurementArrowStripeLength}},t=>this._updateGeometryAndViewMode(t),c.pc),(0,c.wB)(()=>({visible:this.visible,viewMode:this.viewMode}),t=>this._updateVisualElementVisibility(t),c.pc),(0,c.wB)(()=>({text:this._labelsText,visualizedMeasurement:this.actualVisualizedMeasurement}),t=>this._updateLabelText(t),c.pc),(0,c.wB)(()=>({visible:this.visible,viewMode:this.viewMode}),t=>this._updateLabelVisibility(t),c.pc),(0,c.wB)(()=>this._measurementArrowStripeLength,t=>this._updateSegmentStripeLength(t),c.pc),(0,vt.oQ)(()=>this._updateMessageBundle()),(0,c.wB)(()=>this._parameters,t=>{let{textBackgroundColor:e,textCalloutColor:i,textColor:n,translucentAccentColor:s,accentColor:a,contrastColor:r}=t;const{_segmentLabel:o,_verticalLabel:l,_horizontalLabel:u,_triangleVisualElement:d,_rightAngleQuad:h,_projectedGeodesicLine:c,_geodesicStartHint:g,_geodesicEndHint:p,_segmentVisualElement:v}=this;o.backgroundColor=e,o.calloutColor=i,o.textColor=n,l.backgroundColor=e,l.calloutColor=i,l.textColor=n,u.backgroundColor=e,u.calloutColor=i,u.textColor=n,d.color=s,h.color=s,c.color=s,g.color=s,p.color=s,v.color=a,v.contrastColor=r},c.Vh)]),this._updateMessageBundle()}destroy(){this._segmentVisualElement=(0,s.pR)(this._segmentVisualElement),this._triangleVisualElement=(0,s.pR)(this._triangleVisualElement),this._rightAngleQuad=(0,s.pR)(this._rightAngleQuad),this._projectedGeodesicLine=(0,s.pR)(this._projectedGeodesicLine),this._geodesicStartHint=(0,s.pR)(this._geodesicStartHint),this._geodesicEndHint=(0,s.pR)(this._geodesicEndHint),this._segmentLabel=(0,s.pR)(this._segmentLabel),this._verticalLabel=(0,s.pR)(this._verticalLabel),this._horizontalLabel=(0,s.pR)(this._horizontalLabel),this.set("view",null)}_updateVisualElementVisibility(t){let{visible:e,viewMode:i}=t;if(this._segmentVisualElement.visible=!1,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1,e)switch(i){case 0:break;case 1:this._segmentVisualElement.visible=!0;break;case 2:this._segmentVisualElement.visible=!0,this._triangleVisualElement.visible=!0,this._rightAngleQuad.visible=!0;break;case 3:this._segmentVisualElement.visible=!0,this._projectedGeodesicLine.visible=!0,this._geodesicStartHint.visible=!0,this._geodesicEndHint.visible=!0}}_updateGeometryAndViewMode(t){let{view:e,camera:i,viewMode:n,elevationAlignedStartPoint:s,elevationAlignedEndPoint:a,orientation:r,visualizedMeasurement:o,stripeLength:l}=t;const u=e.renderCoordsHelper;if(null==u||null==s||null==a||s.equals(a))return;let d=this._startPosition,h=this._endPosition;u.toRenderCoords(s,d),u.toRenderCoords(a,h);const c=1===r?1:-1,g=c*(u.getAltitude(h)-u.getAltitude(d));g<0&&(d=this._endPosition,h=this._startPosition);const p="geodesic"===o?new ct.J(this._startPosition,this._endPosition,u.spatialReference):new ct.C(this._startPosition,this._endPosition);switch(this._segmentVisualElement.geometry=p,this._updateSegmentStripeLength(l),n){case 1:this._updateSegment(p,r);break;case 2:this._updateSegmentAndTriangle({view:e,camera:i,segment:p,orientation:r,startPosition:d,endPosition:h,deltaSign:c,altitudeDelta:g});break;case 3:this._updateSegmentAndProjection({view:e,orientation:r,startPosition:d,endPosition:h})}}_updateSegment(t,e){this._segmentLabel.anchor=1===e?"top":"bottom",this._segmentLabel.geometry={type:"segment",segment:t,sampleLocation:"center"}}_updateSegmentAndTriangle(t){let{view:{renderCoordsHelper:e},camera:i,segment:n,orientation:s,startPosition:a,endPosition:r,deltaSign:o,altitudeDelta:l}=t;const u=this._cornerPosition;e.worldUpAtPosition(a,u),(0,P.h)(u,u,o*Math.abs(l)),(0,P.g)(u,u,a),this._triangleVisualElement.geometry=[[[a[0],a[1],a[2]],[u[0],u[1],u[2]],[r[0],r[1],r[2]]]],this._rightAngleQuad.geometry={previous:a,center:u,next:r};const d=new ct.C(a,u),h=new ct.C(u,r),c=function(t,e,i,n,s){const a=(0,f.Q)(t,i,s,bt),r=(0,f.Q)(t,e,s,Mt);if(null==a||null==r)return null;const o=s.projectToRenderScreen(i,wt),l=s.projectToRenderScreen(e,Ct),u={segment:"bottom",horizontal:"top",vertical:null==o||null==l||o[0]<l[0]?"left":"right"};if((0,M.Om)(a,r)>=yt){const t=Math.sign(a[1])===Math.sign(r[1]);u.segment=t?(0,V.R)(u.vertical):u.vertical}else{const t=Pt;(0,f.Q)(i,e,s,t),(0,M.Om)(t,r)>=yt&&(u.segment=Math.sign(t[0])===Math.sign(r[0])?(0,V.R)(u.horizontal):u.horizontal)}if(2===n){const t=t=>"top"===t?"bottom":"top";u.segment=t(u.segment),u.horizontal=t(u.horizontal),u.vertical=t(u.vertical)}return u}(a,r,u,s,i);c&&(this._segmentLabel.anchor=c.segment,this._segmentLabel.geometry={type:"segment",segment:n,sampleLocation:"center"},this._verticalLabel.geometry={type:"segment",segment:d,sampleLocation:"center"},this._verticalLabel.anchor=c.vertical,this._horizontalLabel.geometry={type:"segment",segment:h,sampleLocation:"center"},this._horizontalLabel.anchor=c.horizontal)}_updateSegmentAndProjection(t){let{view:{renderCoordsHelper:e},orientation:i,startPosition:n,endPosition:s}=t;e.setAltitude(this._startPositionAtSeaLevel,0,n),e.setAltitude(this._endPositionAtSeaLevel,0,s);const a=new ct.J(this._startPositionAtSeaLevel,this._endPositionAtSeaLevel,e.spatialReference);this._projectedGeodesicLine.setGeometryFromSegment(a),this._geodesicStartHint.setGeometryFromSegment(new ct.C(this._startPositionAtSeaLevel,n)),this._geodesicEndHint.setGeometryFromSegment(new ct.C(this._endPositionAtSeaLevel,s)),this._segmentLabel.geometry={type:"segment",segment:a,sampleLocation:"center"},this._segmentLabel.anchor=1===i?"top":"bottom"}_updateLabelText(t){let{text:e,visualizedMeasurement:i}=t;null!=e?(this._segmentLabel.text="euclidean"===i?e.directDistance:e.horizontalDistance,this._horizontalLabel.text=e.horizontalDistance,this._verticalLabel.text=e.verticalDistance):(this._segmentLabel.text=null,this._horizontalLabel.text=null,this._verticalLabel.text=null),this.notifyChange("labels")}_updateLabelVisibility(t){let{visible:e,viewMode:i}=t;const n=this._segmentLabel,s=this._horizontalLabel,a=this._verticalLabel;if(n.visible=!1,s.visible=!1,a.visible=!1,e)switch(i){case 1:case 3:n.visible=!0;break;case 2:n.visible=!0,s.visible=!0,a.visible=!0}}get _labelsText(){if(this.destroyed)return null;const t=this.messages,e=this.analysisView.result;if(null==e||null==t)return null;const{directDistance:i,horizontalDistance:n,verticalDistance:s}=e,a=this.analysisView.unit,r=t=>(0,m.A)({directDistance:"",horizontalDistance:"",verticalDistance:""},t);switch(a){case"metric":return r({directDistance:i&&(0,C.Ee)(t,i),horizontalDistance:n&&(0,C.Ee)(t,n),verticalDistance:s&&(0,C.W4)(t,s)});case"imperial":return r({directDistance:i&&(0,C.tr)(t,i),horizontalDistance:n&&(0,C.tr)(t,n),verticalDistance:s&&(0,C.t_)(t,s)});default:return r({directDistance:i&&(0,C.zJ)(t,i,a),horizontalDistance:n&&(0,C.zJ)(t,n,a),verticalDistance:s&&(0,C.zJ)(t,s,a)})}}_updateSegmentStripeLength(t){const e=this._segmentVisualElement;null!=t?(e.stripeLength=t,e.stripesEnabled=!0):e.stripesEnabled=!1}get _actualVisualElementsOrientation(){if(null!=this._triangleOrientationOverride)return this._triangleOrientationOverride;const t=this.visualElementOrientation;return 0===t?this.view.state.camera.aboveGround?1:2:t}_requiresGeodesicGuideAt(t){const e=this.view;if(null===e||void 0===e||!e.state)return!1;const i=e.state.camera,n=e.renderCoordsHelper;if(!n)return!1;const s=i.computeScreenPixelSizeAt(t);return n.getAltitude(t)/s>=10}get _measurementArrowStripeLength(){const{result:t,unit:e}=this.analysisView;if(null==t)return null;let i=null;const n=t.directDistance;switch(e){case"metric":i=n&&(0,h.kM)(n,"meters");break;case"imperial":i=n&&(0,h.kM)(n,(0,g.OU)(n.value,n.unit));break;default:i=n&&(0,h.kM)(n,e)}return null==i?null:(0,w.Vr)(i.value/30)*(0,g.oU)(1,i.unit,"meters")}_updateMessageBundle(){this.loadingMessages=!0,(0,_t.ud)("esri/core/t9n/Units").then(t=>{this.messages=t}).finally(()=>{this.loadingMessages=!1})}get testData(){}};(0,n.Cg)([(0,a.MZ)()],mt.prototype,"_parameters",null),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"_triangleOrientationOverride",void 0),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"messages",void 0),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"view",void 0),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"analysis",void 0),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"analysisView",void 0),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"loadingMessages",void 0),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"visible",null),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"viewMode",null),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"actualVisualizedMeasurement",null),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"visualElementOrientation",void 0),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"triangleCollapseRatioThreshold",void 0),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"allowVisualElementsOrientationChange",null),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"labels",null),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"_labelsText",null),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"_actualVisualElementsOrientation",null),(0,n.Cg)([(0,a.MZ)()],mt.prototype,"_measurementArrowStripeLength",null),mt=(0,n.Cg)([(0,o.$)("esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementVisualization")],mt);const yt=Math.cos((0,w.kU)(12)),wt=(0,b.r_)(),Ct=(0,b.r_)(),bt=(0,b.QG)(),Mt=(0,b.QG)(),Pt=(0,b.QG)();var Lt=i(56002),ft=i(19451),Vt=i(19247),St=i(32535),At=i(77515),Et=i(70836),Ot=i(7947),Dt=i(69539),zt=i(44230),Zt=i(56121),xt=i(38317),Rt=i(91175),Ht=i(1307);let Tt=class extends d.A{constructor(t){super(t),this.cursorPoint=null,this._visible=!1,this._laserLine=null,this.laserLineEnabled=!0,this._lastDraggedHandle=null}initialize(){this._laserLine=new Ht.o({view:this.view,attached:!0,isDecoration:!0}),this._updateVisibility(this._visible),this._connectToAnalysisView(),this.addHandles((0,c.wB)(()=>this._params,t=>{let{laserLineGlowColor:e,laserLineInnerColor:i,laserLineGlobalAlpha:n}=t;const s=this._laserLine,a=s.style;s.style=(0,m.A)((0,m.A)({},a),{},{innerColor:i,glowColor:e,globalAlpha:n})}))}destroy(){this._laserLine=(0,s.pR)(this._laserLine)}get _params(){const{accentColor:t}=this.view.effectiveTheme;return{laserLineGlowColor:Dt.A.toUnitRGB(t),laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:Dt.A.toUnitRGB((0,y.bJ)(t)),laserLineInnerWidth:.75,laserLineGlobalAlpha:.75*t.a,handleColor:(0,y.f6)(t,.5),handleRadius:5}}get visible(){return this._visible}set visible(t){t?this.show():this.hide()}get testData(){}get _cursorPosition(){const t=(0,L.vt)(),e=this.cursorPoint;return e&&this.view.renderCoordsHelper.toRenderCoords(e,t),t}get _startPosition(){const t=(0,L.vt)(),e=this.analysis.startPoint;return e&&this.view.renderCoordsHelper.toRenderCoords(e,t),t}get _endPosition(){const t=(0,L.vt)(),e=this.analysis.endPoint;return e&&this.view.renderCoordsHelper.toRenderCoords(e,t),t}get _laserLineParams(){const t=this._focusPosition,{active:e,lineState:i}=this.toolState,n=this.analysisViewData,s=this.laserLineEnabled&&!!t&&"measured"!==i&&e;if(!s||!this.visible||null==n||n.destroyed)return{heightManifoldTarget:null,pointDistanceLine:null,lineVerticalPlaneSegment:null};const a=n.actualVisualizedMeasurement,r="local"!==this.view.viewingMode&&s&&!!this.analysis.startPoint&&"geodesic"===a,o=s&&2===n.viewMode;return{heightManifoldTarget:"euclidean"===a?t:null,pointDistanceLine:r?this._pointDistanceLine:null,lineVerticalPlaneSegment:o?(0,zt.Cr)(this._startPosition,this._endPosition):null}}get _focusPosition(){const{lineState:t}=this.toolState,e=this.analysisViewData,i=null!=e&&!e.destroyed&&1===e.measurementMode&&1===e.viewMode;switch(t){case"drawing":return i?this._startPosition:this.analysis.endPoint?this._endPosition:this._startPosition;case"editing":return i?"start"===this._lastDraggedHandle?this._endPosition:this._startPosition:"start"===this._lastDraggedHandle?this._startPosition:this._endPosition;default:return null!=this.cursorPoint?this._cursorPosition:null}}get _pointDistanceLine(){return{origin:"drawing"===this.toolState.lineState||"end"===this._lastDraggedHandle?this._startPosition:this._endPosition,target:this._focusPosition}}createManipulators(){const t=this._params,{view:e}=this,i=()=>{const i=(0,xt.UM)(t.handleColor),n=[new Rt.M((0,H.CM)(i,1,32,32))],s=new Zt.q({view:e,renderObjects:n});return s.available=!1,s.radius=t.handleRadius,[s,i]},[n,s]=i(),[a,r]=i(),o=new Zt.q({view:this.view,available:!1,interactive:!1});null!=this.analysis.startPoint&&(n.location=this.analysis.startPoint,n.available=!0),null!=this.analysis.endPoint&&(a.location=this.analysis.endPoint,a.available=!0);const l=()=>{let t=this._lastDraggedHandle;n.grabbing&&!a.grabbing&&(t="start"),a.grabbing&&!n.grabbing&&(t="end"),n.grabbing||a.grabbing||(t=null),this._lastDraggedHandle=t},u=n.events.on("grab-changed",l),d=a.events.on("grab-changed",l);return this.addHandles([u,d,(0,c.wB)(()=>(0,y.pf)(this._params.handleColor),t=>{s.setParameters({color:t}),r.setParameters({color:t})},{equals:y.we})],"manipulators"),{start:n,end:a,cursor:o}}show(){this.destroyed||this._visible||this._updateVisibility(!0)}hide(){!this.destroyed&&this._visible&&this._updateVisibility(!1)}_connectToAnalysisView(){this.removeHandles("analysis-view"),this.addHandles([(0,c.wB)(()=>{var t;return null===(t=this.analysisViewData)||void 0===t?void 0:t.destroyed},t=>{t&&this.removeHandles("analysis-view")},c.Vh),(0,c.wB)(()=>["measured"===this.toolState.lineState,this.analysisViewData],t=>{let[e,i]=t;null==i||i.destroyed||(i.allowVisualElementsOrientationChange=!e)},c.Vh),(0,c.wB)(()=>this._laserLineParams,t=>{const e=this._laserLine;e.heightManifoldTarget=t.heightManifoldTarget,e.pointDistanceLine=t.pointDistanceLine,e.lineVerticalPlaneSegment=t.lineVerticalPlaneSegment},c.Vh)],"analysis-view")}_updateVisibility(t){this.initialized&&(this._visible=t,t&&(this._laserLine.style={innerColor:this._params.laserLineInnerColor,innerWidth:this._params.laserLineInnerWidth,glowColor:this._params.laserLineGlowColor,glowWidth:this._params.laserLineGlowWidth,glowFalloff:this._params.laserLineGlowFalloff,globalAlpha:this._params.laserLineGlobalAlpha}),this._laserLine.visible=t)}};(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],Tt.prototype,"view",void 0),(0,n.Cg)([(0,a.MZ)()],Tt.prototype,"_params",null),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],Tt.prototype,"analysis",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],Tt.prototype,"analysisViewData",void 0),(0,n.Cg)([(0,a.MZ)()],Tt.prototype,"cursorPoint",void 0),(0,n.Cg)([(0,a.MZ)()],Tt.prototype,"toolState",void 0),(0,n.Cg)([(0,a.MZ)()],Tt.prototype,"visible",null),(0,n.Cg)([(0,a.MZ)()],Tt.prototype,"testData",null),(0,n.Cg)([(0,a.MZ)()],Tt.prototype,"_visible",void 0),(0,n.Cg)([(0,a.MZ)()],Tt.prototype,"_laserLine",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],Tt.prototype,"laserLineEnabled",void 0),(0,n.Cg)([(0,a.MZ)()],Tt.prototype,"_cursorPosition",null),(0,n.Cg)([(0,a.MZ)()],Tt.prototype,"_startPosition",null),(0,n.Cg)([(0,a.MZ)()],Tt.prototype,"_endPosition",null),(0,n.Cg)([(0,a.MZ)()],Tt.prototype,"_lastDraggedHandle",void 0),(0,n.Cg)([(0,a.MZ)()],Tt.prototype,"_laserLineParams",null),(0,n.Cg)([(0,a.MZ)()],Tt.prototype,"_focusPosition",null),(0,n.Cg)([(0,a.MZ)()],Tt.prototype,"_pointDistanceLine",null),Tt=(0,n.Cg)([(0,o.$)("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DView")],Tt);var Gt=i(80935),kt=i(5109),Bt=i(89238),jt=i(17046),Qt=i(974),Wt=i(56497),It=i(13284),Ut=i(61237),qt=i(75218),Nt=i(70330),Ft=i(11500);let Jt=class extends kt.k{constructor(t){super(t),this._updatingHandles=new ft.U,this._snappingManagerResult=null,this._emulatedDrag=null,this.lineState="initial",this.removeIncompleteOnCancel=!1,this.startPointSurfaceLocation=null,this.endPointSurfaceLocation=null,this.cursorPointSurfaceLocation=null,this.startManipulator=null,this.endManipulator=null,this.cursorManipulator=null,this._getSnappingContext=(0,Lt.B)(t=>new It.e({elevationInfo:{mode:"absolute-height",offset:0},pointer:t,editGeometryOperations:new Wt.p(new Qt.ZE("point",(0,Bt.BV)(!0,!1,this.view.spatialReference)),this.view.state.viewingMode),visualizer:new Et.s}))}initialize(){const{view:t,analysis:e,analysisViewData:i,visible:n}=this;this.measurementView=new Tt({toolState:this,view:t,analysis:e,analysisViewData:i,visible:n});const{start:s,end:a,cursor:r}=this.measurementView.createManipulators(),o=(t,e,i)=>{const n=(0,jt.Xt)(t,(t,n,s,a)=>{const r=(0,Ot.z7)(t),o=this._ensureSnappingManager(),l=this._getSnappingContext(a),u=this._updatingHandles,{lineState:d}=this;s=s.next(r).next((0,jt.VG)(this,[i,e])).next(i=>{if("cursorPoint"!==e){const i=this.analysis[e];null!=i&&(t.location=i)}return i});const h=(0,Ot.xk)(this.view);let c=n.next(r).next(t=>{const n=h(t);return n||"drawing"!==this.lineState&&"initial"!==this.lineState||(this[e]=null,this[i]=null),n});if("touch"!==a||"editing"===d){const{snappingStep:t,cancelSnapping:e}=(0,Ut.L)({snappingManager:o,snappingContext:l,updatingHandles:u});s=s.next(e),c=c.next(...t)}c.next(t=>"start"!==t.action?t:null).next(n=>{const s=(0,St.EL)(n.mapEnd,new Vt.A);this[e]=s,t.location=s,this[i]=this._surfaceLocation(s,n.surfaceType)})});return"cursorPoint"===e?[n]:[n,t.events.on("grab-changed",()=>{const t=s.grabbing||a.grabbing;this.lineState=t?"editing":"measured"}),(0,c.wB)(()=>this.analysis[e],e=>{e&&(t.location=e)})]};this.startManipulator=s,this.endManipulator=a,this.cursorManipulator=r,this.manipulators.add(s),this.manipulators.add(a),this.manipulators.add(r),this.addHandles([...o(s,"startPoint","startPointSurfaceLocation"),...o(a,"endPoint","endPointSurfaceLocation"),...o(r,"cursorPoint","cursorPointSurfaceLocation"),(0,c.z7)(()=>"measured"===this.state,()=>{this.finishToolCreation(),this.active&&(this.view.activeTool=null)},c.pc),(0,c.wB)(()=>({startPointAvailable:null!=this.startPoint,endPointAvailable:null!=this.endPoint}),t=>{let{startPointAvailable:e,endPointAvailable:i}=t;this.startManipulator.available=e,this.endManipulator.available=i},c.pc)]),(0,Nt.BY)(this)}destroy(){this._updatingHandles=(0,s.pR)(this._updatingHandles),this.measurementView=(0,s.pR)(this.measurementView)}get _snappingManager(){var t;return null===(t=this._snappingManagerResult)||void 0===t?void 0:t.snappingManager}_ensureSnappingManager(){if(null==this._snappingManagerResult){const t=(0,qt.X)(this.view);this._snappingManagerResult=t,this.addHandles(t)}return this._snappingManagerResult.snappingManager}get state(){const{analysis:t}=this;if(null==t.startPoint&&null==t.endPoint)return"ready";const{lineState:e}=this;return this.validMeasurement&&"editing"!==e&&"drawing"!==e?"measured":"measuring"}get cursor(){return!this.active||"ready"!==this.state&&"measured"===this.lineState?null:"crosshair"}get startPoint(){return this.analysis.startPoint}set startPoint(t){this.analysis.startPoint=t}get endPoint(){return this.analysis.endPoint}set endPoint(t){this.analysis.endPoint=t}get cursorPoint(){return this.measurementView.cursorPoint}set cursorPoint(t){this.measurementView.cursorPoint=t}get snappingOptions(){var t;return null===(t=this._snappingManager)||void 0===t?void 0:t.options}get validMeasurement(){return null!=this.analysis.startPoint&&null!=this.analysis.endPoint}get updating(){var t;return this._updatingHandles.updating||!(null===(t=this._snappingManager)||void 0===t||!t.updating)}resetCreated(){super.resetCreated(),this.lineState="initial",this.cursorPoint=null,"measured"===this.state&&this.finishToolCreation()}onShow(){this.measurementView.show()}onHide(){this.measurementView.hide()}onDeactivate(){var t;null!==(t=this._emulatedDrag)&&void 0!==t&&t.cancel(),this._emulatedDrag=null}onInputEvent(t){switch(t.type){case"immediate-click":this._handleImmediateClick(t);break;case"pointer-move":this._handlePointerMove(t)}}_handlePointerMove(t){var e,i;if(!this.active||this.view.navigating)return;const{pointerType:n}=t;if("mouse"!==n)return;const s=(0,Ft.ZV)(t),{lineState:a,cursorManipulator:r,endManipulator:o}=this;let l=!1;null==this.cursorPoint&&(null!==(e=this._emulatedDrag)&&void 0!==e&&e.cancel(),this._emulatedDrag=$t(r,n,s),l=!0),"initial"===a&&(null!==(i=this._emulatedDrag)&&void 0!==i&&i.update(s),l=!0),"drawing"===a&&(o.events.emit("drag",{action:"update",start:s,screenPoint:s}),l=!0),l&&t.stopPropagation()}_handleImmediateClick(t){var e,i,n,s;if(!this.active||!(0,At.s7)(t))return;const a=(0,Ft.ZV)(t),{pointerType:r}=t,{cursorManipulator:o,startManipulator:l,endManipulator:u,lineState:d}=this;let h=!1;switch(null==this.cursorPoint&&(null!==(e=this._emulatedDrag)&&void 0!==e&&e.cancel(),this._emulatedDrag=$t(o,r,a)),d){case"initial":if(null!==(i=this._emulatedDrag)&&void 0!==i&&i.update(a),null!=this.cursorPoint){var c;null!==(c=this._emulatedDrag)&&void 0!==c&&c.end(a),this._emulatedDrag=null,this.endPoint=null;const{cursorPoint:t}=this;this.startPoint=t,this.startPointSurfaceLocation=this.cursorPointSurfaceLocation,l.location=t,l.interactive=!1,u.interactive=!1,this.lineState="drawing",this._emulatedDrag=$t(u,r,a),h=!0}break;case"drawing":null!==(n=this._emulatedDrag)&&void 0!==n&&n.update(a),null!=this.endPoint&&(null!==(s=this._emulatedDrag)&&void 0!==s&&s.end(a),this._emulatedDrag=null,l.interactive=!0,u.interactive=!0,this.lineState="measured",h=!0)}h&&t.stopPropagation()}_surfaceLocation(t,e){var i;return 0===e?"on-the-surface":(null!==(i=t.z)&&void 0!==i?i:0)>=this._getElevation(t)?"above-the-surface":"below-the-surface"}_getElevation(t){var e;return this.view.basemapTerrain.ready&&null!==(e=(0,Gt.R1)(this.view.elevationProvider,t))&&void 0!==e?e:0}get test(){}};function $t(t,e,i){return t.events.emit("drag",{action:"start",pointerType:e,start:i,screenPoint:i}),{update:e=>t.events.emit("drag",{action:"update",start:e,screenPoint:e}),end:e=>t.events.emit("drag",{action:"end",start:e,screenPoint:e}),cancel:()=>t.events.emit("drag",{action:"cancel"})}}(0,n.Cg)([(0,a.MZ)()],Jt.prototype,"_snappingManagerResult",void 0),(0,n.Cg)([(0,a.MZ)()],Jt.prototype,"_snappingManager",null),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Jt.prototype,"state",null),(0,n.Cg)([(0,a.MZ)()],Jt.prototype,"lineState",void 0),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Jt.prototype,"cursor",null),(0,n.Cg)([(0,a.MZ)()],Jt.prototype,"startPoint",null),(0,n.Cg)([(0,a.MZ)()],Jt.prototype,"endPoint",null),(0,n.Cg)([(0,a.MZ)()],Jt.prototype,"cursorPoint",null),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],Jt.prototype,"analysis",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],Jt.prototype,"analysisViewData",void 0),(0,n.Cg)([(0,a.MZ)()],Jt.prototype,"measurementView",void 0),(0,n.Cg)([(0,a.MZ)()],Jt.prototype,"removeIncompleteOnCancel",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],Jt.prototype,"view",void 0),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Jt.prototype,"validMeasurement",null),(0,n.Cg)([(0,a.MZ)({value:null})],Jt.prototype,"startPointSurfaceLocation",void 0),(0,n.Cg)([(0,a.MZ)({value:null})],Jt.prototype,"endPointSurfaceLocation",void 0),(0,n.Cg)([(0,a.MZ)({value:null})],Jt.prototype,"cursorPointSurfaceLocation",void 0),(0,n.Cg)([(0,a.MZ)()],Jt.prototype,"updating",null),Jt=(0,n.Cg)([(0,o.$)("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DTool")],Jt);var Xt=i(10260),Yt=i(23739);let Kt=class extends u.P{constructor(t){super(t),this.type="direct-line-measurement-view-3d",this.analysis=null,this.tool=null,this.result=null,this.measurementMode=0,this.elevationAlignedStartPoint=null,this.elevationAlignedEndPoint=null,this.userOperation=null}initialize(){const{analysis:t,view:e}=this;this._analysisVisualization=new mt({view:e,analysis:t,analysisView:this}),this.addResolvingPromise((0,Yt.V)().then(i=>{this.destroyed||(this._analysisController=new _({view:e,analysis:t,viewData:this,geodesicLengthMeasurementUtils:i}))})),this.addHandles((0,Xt.Hd)(this,Jt))}destroy(){(0,Xt.aS)(this),this.userOperation=(0,s.DC)(this.userOperation),this._analysisController=(0,s.pR)(this._analysisController),this._analysisVisualization=(0,s.pR)(this._analysisVisualization)}get updating(){var t;return!(null===(t=this._analysisVisualization)||void 0===t||!t.loadingMessages)}get visible(){return super.visible}set visible(t){super.visible=t}get interactive(){return super.interactive}set interactive(t){super.interactive=t}get viewMode(){return this._analysisVisualization.viewMode}get actualVisualizedMeasurement(){return this._analysisVisualization.actualVisualizedMeasurement}get visualElementOrientation(){return this._analysisVisualization.visualElementOrientation}set visualElementOrientation(t){this._analysisVisualization.visualElementOrientation=t}get allowVisualElementsOrientationChange(){return this._analysisVisualization.allowVisualElementsOrientationChange}set allowVisualElementsOrientationChange(t){this._analysisVisualization.allowVisualElementsOrientationChange=t}get triangleCollapseRatioThreshold(){return this._analysisVisualization.triangleCollapseRatioThreshold}set triangleCollapseRatioThreshold(t){this._analysisVisualization.triangleCollapseRatioThreshold=t}get directLabelText(){var t,e;return null!==(t=null===(e=this._analysisVisualization.labels.direct)||void 0===e?void 0:e.text)&&void 0!==t?t:""}get horizontalLabelText(){var t,e;return null!==(t=null===(e=this._analysisVisualization.labels.horizontal)||void 0===e?void 0:e.text)&&void 0!==t?t:""}get verticalLabelText(){var t,e;return null!==(t=null===(e=this._analysisVisualization.labels.vertical)||void 0===e?void 0:e.text)&&void 0!==t?t:""}get unit(){var t;return null!==(t=this.analysis.unit)&&void 0!==t?t:(0,l.c)(this.view)}get testData(){}place(t){return(0,Xt.ZX)(this,{placementOptions:t})}};(0,n.Cg)([(0,a.MZ)()],Kt.prototype,"_analysisVisualization",void 0),(0,n.Cg)([(0,a.MZ)()],Kt.prototype,"_analysisController",void 0),(0,n.Cg)([(0,a.MZ)()],Kt.prototype,"updating",null),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Kt.prototype,"type",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0,nonNullable:!0})],Kt.prototype,"analysis",void 0),(0,n.Cg)([(0,a.MZ)()],Kt.prototype,"tool",void 0),(0,n.Cg)([(0,a.MZ)()],Kt.prototype,"result",void 0),(0,n.Cg)([(0,a.MZ)()],Kt.prototype,"measurementMode",void 0),(0,n.Cg)([(0,a.MZ)()],Kt.prototype,"elevationAlignedStartPoint",void 0),(0,n.Cg)([(0,a.MZ)()],Kt.prototype,"elevationAlignedEndPoint",void 0),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Kt.prototype,"viewMode",null),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Kt.prototype,"actualVisualizedMeasurement",null),(0,n.Cg)([(0,a.MZ)()],Kt.prototype,"visualElementOrientation",null),(0,n.Cg)([(0,a.MZ)()],Kt.prototype,"allowVisualElementsOrientationChange",null),(0,n.Cg)([(0,a.MZ)()],Kt.prototype,"triangleCollapseRatioThreshold",null),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Kt.prototype,"directLabelText",null),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Kt.prototype,"horizontalLabelText",null),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Kt.prototype,"verticalLabelText",null),(0,n.Cg)([(0,a.MZ)()],Kt.prototype,"unit",null),(0,n.Cg)([(0,a.MZ)()],Kt.prototype,"userOperation",void 0),Kt=(0,n.Cg)([(0,o.$)("esri.views.3d.analysis.DirectLineMeasurementAnalysisView3D")],Kt);const te=Kt},90806:(t,e,i)=>{i.d(e,{M:()=>p,b:()=>g});var n,s,a,r=i(57528),o=i(3799),l=i(58350),u=i(21390),d=i(86955),h=i(2687),c=i(75569);function g(t){const e=new h.N5,{vertex:i,fragment:g}=e;(0,o.NB)(i,t),i.uniforms.add(new u.m("width",t=>t.width)),e.attributes.add("position","vec3"),e.attributes.add("normal","vec3"),e.attributes.add("uv0","vec2"),e.attributes.add("length","float"),e.varyings.add("vtc","vec2"),e.varyings.add("vlength","float"),e.varyings.add("vradius","float"),i.main.add((0,d.H)(n||(n=(0,r.A)(["vec3 bitangent = normal;\nvtc = uv0;\nvlength = length;\nvradius = 0.5 * width;\nvec4 pos = view * vec4(position + vradius * bitangent * uv0.y, 1.0);\ngl_Position = proj * pos;"])))),g.uniforms.add(new u.m("outlineSize",t=>t.outlineSize),new l.E("outlineColor",t=>t.outlineColor),new u.m("stripeLength",t=>t.stripeLength),new l.E("stripeEvenColor",t=>t.stripeEvenColor),new l.E("stripeOddColor",t=>t.stripeOddColor));const p=1/Math.sqrt(2);return g.code.add((0,d.H)(s||(s=(0,r.A)(["\n    const float INV_SQRT2 = ",";\n\n    vec4 arrowColor(vec2 tc, float len) {\n      float d = INV_SQRT2 * (tc.x - abs(tc.y));\n      d = min(d, INV_SQRT2 * (len - tc.x - abs(tc.y)));\n      d = min(d, 1.0 - abs(tc.y));\n\n      if (d < 0.0) {\n        return vec4(0.0);\n      }\n      if (d < outlineSize) {\n        return outlineColor;\n      }\n      return fract(0.5 / stripeLength * tc.x * vradius) >= 0.5 ? stripeOddColor : stripeEvenColor;\n    }"])),d.H.float(p))),g.main.add((0,d.H)(a||(a=(0,r.A)(["\n    vec2 ntc = vec2(vtc.x / vradius, vtc.y);\n    vec4 color = arrowColor(ntc, vlength / vradius);\n    if (color.a < ",") {\n      discard;\n    }\n    fragColor = color;"])),d.H.float(c.Q))),e}const p=Object.freeze(Object.defineProperty({__proto__:null,build:g},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=67352.93658b5f.chunk.js.map