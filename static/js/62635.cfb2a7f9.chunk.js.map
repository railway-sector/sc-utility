{"version":3,"file":"static/js/62635.cfb2a7f9.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/analysis/featureReferenceUtils.js","../node_modules/@arcgis/core/analysis/LineOfSightAnalysisTarget.js","../node_modules/@arcgis/core/analysis/LineOfSightAnalysis.js","../node_modules/@arcgis/core/layers/LineOfSightLayer.js","../node_modules/@arcgis/core/analysis/LineOfSightAnalysisObserver.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{a as e,l as t,b as r}from\"../chunks/vec32.js\";import{create as n}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as l,fromPoints as o}from\"../geometry/support/ray.js\";import{StoreResults as i}from\"../views/3d/webgl-engine/lib/IntersectorInterfaces.js\";import{toGraphic as u,hasLod as s,getIntersectedFeatureBSRadius as a}from\"../views/3d/webgl-engine/lib/intersectorUtilsConversions.js\";function c(e,t){return d(e)===d(t)}function d(e){if(null==e)return null;const t=null!=e.layer?e.layer.id:\"\";let r=null;return r=null!=e.objectId?e.objectId:null!=e.layer&&\"objectIdField\"in e.layer&&null!=e.layer.objectIdField&&null!=e.attributes?e.attributes[e.layer.objectIdField]:e.uid,null==r?null:`o-${t}-${r}`}const b={json:{write:{writer:f,target:{\"feature.layerId\":{type:[Number,String],isRequired:!0},\"feature.objectId\":{type:[Number,String],isRequired:!0}}},origins:{\"web-scene\":{read:I}}}};function f(e,t){null!=e?.layer?.objectIdField&&null!=e.attributes&&(t.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})}function I(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:\"ObjectId\"},attributes:{ObjectId:e.objectId}}}function m(l,s,a,c){const{sceneIntersectionHelper:b}=l,{observer:f,observerFeatureId:I,targetFeatureId:m,target:g}=a;if(null==I&&null==m)return;c||(c=e=>e),e(p,f,g);const v=t(p),S=1;r(p,f,p,S/v);const F=o(p,g,y);s.options.store=i.ALL,b.intersectToolIntersectorRay(F,s);let N=null,w=null,R=null,A=null;for(const e of s.results.all){const t=u(e,l);if(null==t||null==e.distanceInRenderSpace)continue;const r=d(t);null!=r&&(null!=I&&r===I&&(N??=c(j(e,l,v)),e.distanceInRenderSpace-S<N&&(R=e)),null!=m&&r===m&&(w??=c(j(e,l,v)),null==A&&e.distanceInRenderSpace-S<v&&v-e.distanceInRenderSpace+S<w&&(A=e)))}const{observerAdjusted:T,targetAdjusted:h}=a;R?.getIntersectionPoint(T)?a.observerSurfaceNormal=R.getTransformedNormal(n()):a.observerSurfaceNormal=null,A?.getIntersectionPoint(h)?a.targetSurfaceNormal=A.getTransformedNormal(n()):a.targetSurfaceNormal=null}function j(e,t,r){if(s(e)){const n=a(e,t);if(null!=n)return Math.min(n*g,r)}return 1e-5*r}const g=.05,y=l(),p=n();export{c as featureReferenceEquals,b as featureReferenceProperty,d as getFeatureId,m as updatePointsFromFeatureReference};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import{featureReferenceEquals as r,featureReferenceProperty as e}from\"./featureReferenceUtils.js\";import t from\"../core/Clonable.js\";import s from\"../core/JSONSupport.js\";import{equalsMaybe as i}from\"../core/maybe.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import{persistable as a}from\"../core/accessorSupport/decorators/persistable.js\";import m from\"../geometry/Point.js\";import c from\"../symbols/support/ElevationInfo.js\";let l=class extends(s.JSONSupportMixin(t)){constructor(o){super(o),this.position=null,this.elevationInfo=null,this.feature=null}equals(o){return i(this.position,o.position)&&i(this.elevationInfo,o.elevationInfo)&&r(this.feature,o.feature)}};o([p({type:m,json:{write:!0,origins:{\"web-scene\":{write:{isRequired:!0}}}}}),a()],l.prototype,\"position\",void 0),o([p({type:c}),a()],l.prototype,\"elevationInfo\",void 0),o([p(e)],l.prototype,\"feature\",void 0),l=o([n(\"esri.analysis.LineOfSightAnalysisTarget\")],l);export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import e from\"./Analysis.js\";import r from\"./LineOfSightAnalysisObserver.js\";import o from\"./LineOfSightAnalysisTarget.js\";import{equals as s}from\"../core/arrayUtils.js\";import i from\"../core/Collection.js\";import{referenceSetter as n,castForReferenceSetter as l}from\"../core/collectionUtils.js\";import{equalsMaybe as p}from\"../core/maybe.js\";import{watch as a,syncAndInitial as u}from\"../core/reactiveUtils.js\";import{property as c}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{subclass as m}from\"../core/accessorSupport/decorators/subclass.js\";import{projectOrLoad as g}from\"../geometry/projectionUtils.js\";import{fromValues as f,expandWithVec3 as h,toExtent as y}from\"../geometry/support/aaBoundingBox.js\";import{getGeometryEffectiveElevationMode as v}from\"../support/elevationInfoUtils.js\";const d=i.ofType(o);let j=class extends e{constructor(t){super(t),this.type=\"line-of-sight\",this.observer=null,this.extent=null}initialize(){this.addHandles(a((()=>this._computeExtent()),(t=>{null==t?.pending&&this._set(\"extent\",null!=t?t.extent:null)}),u))}get targets(){return this._get(\"targets\")||new d}set targets(t){this._set(\"targets\",n(t,this.targets,d))}get spatialReference(){return null!=this.observer?.position?this.observer.position.spatialReference:null}get valid(){return null!=this.observer?.position}async waitComputeExtent(){const t=this._computeExtent();return null!=t?t.pending:Promise.resolve()}_computeExtent(){const t=this.spatialReference;if(null==this.observer?.position||null==t)return null;const e=t=>\"absolute-height\"===v(t.position,t.elevationInfo),r=this.observer.position,o=f(r.x,r.y,r.z,r.x,r.y,r.z);for(const i of this.targets)if(null!=i.position){const e=g(i.position,t);if(null!=e.pending)return{pending:e.pending,extent:null};if(null!=e.geometry){const{x:t,y:r,z:s}=e.geometry;h(o,[t,r,s])}}const s=y(o,t);return e(this.observer)&&this.targets.every(e)||(s.zmin=void 0,s.zmax=void 0),{pending:null,extent:s}}clear(){this.observer=null,this.targets.removeAll()}equals(t){return this===t||super.equals(t)&&p(this.observer,t.observer)&&s(this.targets.toArray(),t.targets.toArray(),((t,e)=>t.equals(e)))}};t([c({type:[\"line-of-sight\"]})],j.prototype,\"type\",void 0),t([c({type:r,json:{read:!0,write:!0}})],j.prototype,\"observer\",void 0),t([c({cast:l,type:d,nonNullable:!0,json:{read:!0,write:!0}})],j.prototype,\"targets\",null),t([c({value:null,readOnly:!0})],j.prototype,\"extent\",void 0),t([c()],j.prototype,\"spatialReference\",null),t([c({readOnly:!0})],j.prototype,\"valid\",null),j=t([m(\"esri.analysis.LineOfSightAnalysis\")],j);export{j as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../analysis/LineOfSightAnalysis.js\";import s from\"../analysis/LineOfSightAnalysisObserver.js\";import r from\"../analysis/LineOfSightAnalysisTarget.js\";import i from\"../core/Collection.js\";import{referenceSetter as o}from\"../core/collectionUtils.js\";import{MultiOriginJSONMixin as a}from\"../core/MultiOriginJSONSupport.js\";import{watch as n,syncAndInitial as l}from\"../core/reactiveUtils.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as y}from\"../core/accessorSupport/decorators/subclass.js\";import c from\"./Layer.js\";import{OperationalLayer as h}from\"./mixins/OperationalLayer.js\";const u=i.ofType(r);let d=class extends(h(a(c))){constructor(e){super(e),this.type=\"line-of-sight\",this.operationalLayerType=\"LineOfSightLayer\",this.analysis=new t,this.opacity=1}initialize(){this.addHandles(n((()=>this.analysis),((e,t)=>{null!=t&&t.parent===this&&(t.parent=null),null!=e&&(e.parent=this)}),l))}async load(){return null!=this.analysis&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){return this.analysis?.observer}set observer(e){const{analysis:t}=this;t&&(t.observer=e)}get targets(){return null!=this.analysis?this.analysis.targets:new i}set targets(e){o(e,this.analysis?.targets)}get fullExtent(){return null!=this.analysis?this.analysis.extent:null}get spatialReference(){return null!=this.analysis?this.analysis.spatialReference:null}releaseAnalysis(e){this.analysis===e&&(this.analysis=new t)}};e([p({json:{read:!1},readOnly:!0})],d.prototype,\"type\",void 0),e([p({type:[\"LineOfSightLayer\"]})],d.prototype,\"operationalLayerType\",void 0),e([p({type:s,json:{read:!0,write:{isRequired:!0,ignoreOrigin:!0}}})],d.prototype,\"observer\",null),e([p({type:u,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],d.prototype,\"targets\",null),e([p({type:t,nonNullable:!0,json:{read:!1,write:!1}})],d.prototype,\"analysis\",void 0),e([p({readOnly:!0})],d.prototype,\"fullExtent\",null),e([p({readOnly:!0})],d.prototype,\"spatialReference\",null),e([p({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-document\":{read:!1,write:!1}}}})],d.prototype,\"opacity\",void 0),e([p({type:[\"show\",\"hide\"]})],d.prototype,\"listMode\",void 0),d=e([y(\"esri.layers.LineOfSightLayer\")],d);const m=d;export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import{featureReferenceEquals as r,featureReferenceProperty as e}from\"./featureReferenceUtils.js\";import t from\"../core/Accessor.js\";import s from\"../core/Clonable.js\";import i from\"../core/JSONSupport.js\";import{equalsMaybe as p}from\"../core/maybe.js\";import{property as n}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";import{persistable as m}from\"../core/accessorSupport/decorators/persistable.js\";import c from\"../geometry/Point.js\";import l from\"../symbols/support/ElevationInfo.js\";let f=class extends(i.JSONSupportMixin(s.ClonableMixin(t))){constructor(o){super(o),this.position=null,this.elevationInfo=null,this.feature=null}equals(o){return p(this.position,o.position)&&p(this.elevationInfo,o.elevationInfo)&&r(this.feature,o.feature)}};o([n({type:c,json:{write:{isRequired:!0}}})],f.prototype,\"position\",void 0),o([n({type:l}),m()],f.prototype,\"elevationInfo\",void 0),o([n(e)],f.prototype,\"feature\",void 0),f=o([a(\"esri.analysis.LineOfSightAnalysisObserver\")],f);const u=f;export{u as default};\n"],"names":["c","e","t","d","layer","id","r","objectId","objectIdField","attributes","uid","concat","b","json","write","writer","_e$layer","feature","layerId","target","type","Number","String","isRequired","origins","read","ObjectId","m","l","s","a","_R","_A","sceneIntersectionHelper","observer","f","observerFeatureId","I","targetFeatureId","g","p","v","F","o","y","options","store","i","ALL","intersectToolIntersectorRay","N","w","R","A","results","all","u","distanceInRenderSpace","j","observerAdjusted","T","targetAdjusted","h","getIntersectionPoint","observerSurfaceNormal","getTransformedNormal","n","targetSurfaceNormal","Math","min","JSONSupportMixin","constructor","super","this","position","elevationInfo","equals","prototype","ofType","extent","initialize","addHandles","_computeExtent","pending","_set","targets","_get","spatialReference","_this$observer","valid","_this$observer2","waitComputeExtent","Promise","resolve","_this$observer3","x","z","geometry","every","zmin","zmax","clear","removeAll","toArray","cast","nonNullable","value","readOnly","operationalLayerType","analysis","opacity","parent","load","addResolvingPromise","_this$analysis","_this$analysis2","fullExtent","releaseAnalysis","ignoreOrigin","service","ClonableMixin"],"sourceRoot":""}