{"version":3,"file":"static/js/62635.51bf75de.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/analysis/featureReferenceUtils.js","../node_modules/@arcgis/core/analysis/LineOfSightAnalysisTarget.js","../node_modules/@arcgis/core/analysis/LineOfSightAnalysis.js","../node_modules/@arcgis/core/layers/LineOfSightLayer.js","../node_modules/@arcgis/core/analysis/LineOfSightAnalysisObserver.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{a as e,b as t,c as r}from\"../chunks/vec32.js\";import{create as n}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as l,fromPoints as o}from\"../geometry/support/ray.js\";import{toGraphic as u,hasLod as i,getIntersectedFeatureBSRadius as a}from\"../views/3d/webgl-engine/lib/intersectorUtilsConversions.js\";function c(e,t){return s(e)===s(t)}function s(e){if(null==e)return null;const t=null!=e.layer?e.layer.id:\"\";let r=null;return r=null!=e.objectId?e.objectId:null!=e.layer&&\"objectIdField\"in e.layer&&null!=e.layer.objectIdField&&null!=e.attributes?e.attributes[e.layer.objectIdField]:e.uid,null==r?null:`o-${t}-${r}`}const d={json:{write:{writer:b,target:{\"feature.layerId\":{type:[Number,String],isRequired:!0},\"feature.objectId\":{type:[Number,String],isRequired:!0}}},origins:{\"web-scene\":{read:f}}},clonable:\"reference\"};function b(e,t){null!=e?.layer?.objectIdField&&null!=e.attributes&&(t.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})}function f(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:\"ObjectId\"},attributes:{ObjectId:e.objectId}}}function I(l,i,a,c){const{sceneIntersectionHelper:d}=l,{observer:b,observerFeatureId:f,targetFeatureId:I,target:m}=a;if(null==f&&null==I)return;c||(c=e=>e),e(g,b,m);const p=t(g),S=1;r(g,b,g,S/p);const v=o(g,m,y);i.options.store=2,d.intersectToolIntersectorRay(v,i);let F=null,N=null,R=null,w=null;for(const e of i.results.all){const t=u(e,l);if(null==t||null==e.distanceInRenderSpace)continue;const r=s(t);null!=r&&(null!=f&&r===f&&(F??=c(j(e,l,p)),e.distanceInRenderSpace-S<F&&(R=e)),null!=I&&r===I&&(N??=c(j(e,l,p)),null==w&&e.distanceInRenderSpace-S<p&&p-e.distanceInRenderSpace+S<N&&(w=e)))}const{observerAdjusted:T,targetAdjusted:h}=a;R?.getIntersectionPoint(T)?a.observerSurfaceNormal=R.getTransformedNormal(n()):a.observerSurfaceNormal=null,w?.getIntersectionPoint(h)?a.targetSurfaceNormal=w.getTransformedNormal(n()):a.targetSurfaceNormal=null}function j(e,t,r){if(i(e)){const n=a(e,t);if(null!=n)return Math.min(n*m,r)}return 1e-5*r}const m=.05,y=l(),g=n();export{c as featureReferenceEquals,d as featureReferenceProperty,s as getFeatureId,I as updatePointsFromFeatureReference};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as o}from\"tslib\";import{featureReferenceEquals as r,featureReferenceProperty as e}from\"./featureReferenceUtils.js\";import{Clonable as t}from\"../core/Clonable.js\";import{JSONSupportMixin as s}from\"../core/JSONSupport.js\";import{equalsMaybe as i}from\"../core/maybe.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";import{persistable as n}from\"../core/accessorSupport/decorators/persistable.js\";import m from\"../geometry/Point.js\";import c from\"../symbols/support/ElevationInfo.js\";let l=class extends(s(t)){constructor(o){super(o),this.position=null,this.elevationInfo=null,this.feature=null}equals(o){return i(this.position,o.position)&&i(this.elevationInfo,o.elevationInfo)&&r(this.feature,o.feature)}};o([p({type:m,json:{write:!0,origins:{\"web-scene\":{write:{isRequired:!0}}}}}),n()],l.prototype,\"position\",void 0),o([p({type:c}),n()],l.prototype,\"elevationInfo\",void 0),o([p(e)],l.prototype,\"feature\",void 0),l=o([a(\"esri.analysis.LineOfSightAnalysisTarget\")],l);export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as t}from\"tslib\";import e from\"./Analysis.js\";import r from\"./LineOfSightAnalysisObserver.js\";import o from\"./LineOfSightAnalysisTarget.js\";import{equals as s}from\"../core/arrayUtils.js\";import i from\"../core/Collection.js\";import{referenceSetter as n,castForReferenceSetter as l}from\"../core/collectionUtils.js\";import{equalsMaybe as p}from\"../core/maybe.js\";import{watch as a,syncAndInitial as u}from\"../core/reactiveUtils.js\";import{property as m}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{subclass as c}from\"../core/accessorSupport/decorators/subclass.js\";import{projectOrLoad as g}from\"../geometry/projectionUtils.js\";import{fromValues as f,expandWithVec3 as y,toExtent as h}from\"../geometry/support/aaBoundingBox.js\";import{getGeometryEffectiveElevationMode as v}from\"../support/elevationInfoUtils.js\";const d=i.ofType(o);let j=class extends e{constructor(t){super(t),this.type=\"line-of-sight\",this.observer=null,this.extent=null}initialize(){this.addHandles(a(()=>this._computeExtent(),t=>{null==t?.pending&&this._set(\"extent\",null!=t?t.extent:null)},u))}get targets(){return this._get(\"targets\")||new d}set targets(t){this._set(\"targets\",n(t,this.targets,d))}get spatialReference(){return null!=this.observer?.position?this.observer.position.spatialReference:null}get valid(){return null!=this.observer?.position}async waitComputeExtent(){const t=this._computeExtent();return null!=t?t.pending:Promise.resolve()}_computeExtent(){const t=this.spatialReference;if(null==this.observer?.position||null==t)return null;const e=t=>\"absolute-height\"===v(t.position,t.elevationInfo),r=this.observer.position,o=f(r.x,r.y,r.z,r.x,r.y,r.z);for(const i of this.targets)if(null!=i.position){const e=g(i.position,t);if(null!=e.pending)return{pending:e.pending,extent:null};if(null!=e.geometry){const{x:t,y:r,z:s}=e.geometry;y(o,[t,r,s])}}const s=h(o,t);return e(this.observer)&&this.targets.every(e)||(s.zmin=void 0,s.zmax=void 0),{pending:null,extent:s}}clear(){this.observer=null,this.targets.removeAll()}equals(t){return this===t||super.equals(t)&&p(this.observer,t.observer)&&s(this.targets.toArray(),t.targets.toArray(),(t,e)=>t.equals(e))}};t([m({type:[\"line-of-sight\"]})],j.prototype,\"type\",void 0),t([m({type:r,json:{read:!0,write:!0}})],j.prototype,\"observer\",void 0),t([m({cast:l,type:d,nonNullable:!0,json:{read:!0,write:!0}})],j.prototype,\"targets\",null),t([m({value:null,readOnly:!0})],j.prototype,\"extent\",void 0),t([m()],j.prototype,\"spatialReference\",null),t([m({readOnly:!0})],j.prototype,\"valid\",null),j=t([c(\"esri.analysis.LineOfSightAnalysis\")],j);export{j as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../analysis/LineOfSightAnalysis.js\";import s from\"../analysis/LineOfSightAnalysisObserver.js\";import r from\"../analysis/LineOfSightAnalysisTarget.js\";import i from\"../core/Collection.js\";import{referenceSetter as o}from\"../core/collectionUtils.js\";import{MultiOriginJSONMixin as a}from\"../core/MultiOriginJSONSupport.js\";import{watch as n,syncAndInitial as l}from\"../core/reactiveUtils.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as y}from\"../core/accessorSupport/decorators/subclass.js\";import c from\"./Layer.js\";import{OperationalLayer as d}from\"./mixins/OperationalLayer.js\";const h=i.ofType(r);let m=class extends(d(a(c))){constructor(e){super(e),this.type=\"line-of-sight\",this.operationalLayerType=\"LineOfSightLayer\",this.analysis=new t,this.opacity=1}initialize(){this.addHandles(n(()=>this.analysis,(e,t)=>{null!=t&&t.parent===this&&(t.parent=null),null!=e&&(e.parent=this)},l))}async load(){return null!=this.analysis&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){return this.analysis?.observer}set observer(e){const{analysis:t}=this;t&&(t.observer=e)}get targets(){return null!=this.analysis?this.analysis.targets:new i}set targets(e){o(e,this.analysis?.targets)}get fullExtent(){return null!=this.analysis?this.analysis.extent:null}get spatialReference(){return null!=this.analysis?this.analysis.spatialReference:null}releaseAnalysis(e){this.analysis===e&&(this.analysis=new t)}};e([p({json:{read:!1},readOnly:!0})],m.prototype,\"type\",void 0),e([p({type:[\"LineOfSightLayer\"]})],m.prototype,\"operationalLayerType\",void 0),e([p({type:s,json:{read:!0,write:{isRequired:!0,ignoreOrigin:!0}}})],m.prototype,\"observer\",null),e([p({type:h,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],m.prototype,\"targets\",null),e([p({type:t,nonNullable:!0,json:{read:!1,write:!1}})],m.prototype,\"analysis\",void 0),e([p({readOnly:!0})],m.prototype,\"fullExtent\",null),e([p({readOnly:!0})],m.prototype,\"spatialReference\",null),e([p({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-document\":{read:!1,write:!1}}}})],m.prototype,\"opacity\",void 0),e([p({type:[\"show\",\"hide\"]})],m.prototype,\"listMode\",void 0),m=e([y(\"esri.layers.LineOfSightLayer\")],m);const u=m;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as o}from\"tslib\";import{featureReferenceEquals as r,featureReferenceProperty as e}from\"./featureReferenceUtils.js\";import t from\"../core/Accessor.js\";import{ClonableMixin as s}from\"../core/Clonable.js\";import{JSONSupportMixin as i}from\"../core/JSONSupport.js\";import{equalsMaybe as p}from\"../core/maybe.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as m}from\"../core/accessorSupport/decorators/subclass.js\";import{persistable as n}from\"../core/accessorSupport/decorators/persistable.js\";import c from\"../geometry/Point.js\";import f from\"../symbols/support/ElevationInfo.js\";let l=class extends(i(s(t))){constructor(o){super(o),this.position=null,this.elevationInfo=null,this.feature=null}equals(o){return p(this.position,o.position)&&p(this.elevationInfo,o.elevationInfo)&&r(this.feature,o.feature)}};o([a({type:c,json:{write:{isRequired:!0}}})],l.prototype,\"position\",void 0),o([a({type:f}),n()],l.prototype,\"elevationInfo\",void 0),o([a(e)],l.prototype,\"feature\",void 0),l=o([m(\"esri.analysis.LineOfSightAnalysisObserver\")],l);const u=l;export{u as default};\n"],"names":["c","e","t","s","layer","id","r","objectId","objectIdField","attributes","uid","concat","d","json","write","writer","_e$layer","feature","layerId","target","type","Number","String","isRequired","origins","read","ObjectId","clonable","I","l","i","a","_R","_w","sceneIntersectionHelper","observer","b","observerFeatureId","f","targetFeatureId","m","g","p","v","o","y","options","store","intersectToolIntersectorRay","F","N","R","w","results","all","u","distanceInRenderSpace","j","observerAdjusted","T","targetAdjusted","h","getIntersectionPoint","observerSurfaceNormal","getTransformedNormal","n","targetSurfaceNormal","Math","min","constructor","super","this","position","elevationInfo","equals","prototype","ofType","extent","initialize","addHandles","_computeExtent","pending","_set","targets","_get","spatialReference","_this$observer","valid","_this$observer2","waitComputeExtent","Promise","resolve","_this$observer3","x","z","geometry","every","zmin","zmax","clear","removeAll","toArray","cast","nonNullable","value","readOnly","operationalLayerType","analysis","opacity","parent","load","addResolvingPromise","_this$analysis","_this$analysis2","fullExtent","releaseAnalysis","ignoreOrigin","service"],"sourceRoot":""}