{"version":3,"file":"static/js/1307.7d752677.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathData.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlineTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathTechniqueConfiguration.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlineTechniqueConfiguration.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserLineRenderer.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/LaserlineVisualElement.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElement.js","../node_modules/@arcgis/core/chunks/Laserlines.glsl.js","../node_modules/@arcgis/core/chunks/LaserlinePath.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{j as e,e as t}from\"../../../../../chunks/vec32.js\";import{create as r}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{newDoubleArray as s}from\"../../../../../geometry/support/DoubleArray.js\";import{glLayout as o}from\"../../../support/buffer/glUtil.js\";import{newLayout as i}from\"../../../support/buffer/InterleavedLayout.js\";import{VertexArrayObject as f}from\"../../lib/VertexArrayObject.js\";import{PrimitiveType as n}from\"../../../../webgl/enums.js\";import{VertexBuffer as u}from\"../../../../webgl/VertexBuffer.js\";class a{constructor(e){this._renderCoordsHelper=e,this._origin=r(),this._dirty=!1,this._count=0}set vertices(e){const t=s(3*e.length);let r=0;for(const s of e)t[r++]=s[0],t[r++]=s[1],t[r++]=s[2];this.buffers=[t]}set buffers(t){if(this._buffers=t,this._buffers.length>0){const t=this._buffers[0],r=3*Math.floor(t.length/3/2);e(this._origin,t[r],t[r+1],t[r+2])}else e(this._origin,0,0,0);this._dirty=!0}get origin(){return this._origin}draw(e){const t=this._ensureVAO(e);null!=t&&(e.bindVAO(t),e.drawArrays(n.TRIANGLES,0,this._count))}dispose(){null!=this._vao&&this._vao.dispose()}get _layout(){return 1===this._renderCoordsHelper.viewingMode?_:d}_ensureVAO(e){return null==this._buffers?null:(this._vao??=this._createVAO(e,this._buffers),this._ensureVertexData(this._vao,this._buffers),this._vao)}_createVAO(e,t){const r=this._createDataBuffer(t);return this._dirty=!1,new f(e,new u(e,o(this._layout),r))}_ensureVertexData(e,t){if(!this._dirty)return;const r=this._createDataBuffer(t);e.buffer()?.setData(r),this._dirty=!1}_createDataBuffer(r){const s=r.reduce((e,t)=>e+l(t),0);this._count=s;const o=this._layout.createBuffer(s),i=this._origin;let f=0,n=0;const u=\"startUp\"in o?this._setUpVectors.bind(this,o):void 0;for(const a of r){for(let r=0;r<a.length;r+=3){const s=e(h,a[r],a[r+1],a[r+2]);0===r?n=this._renderCoordsHelper.getAltitude(s):this._renderCoordsHelper.setAltitude(s,n);const l=f+2*r;u?.(r,l,a,s);const c=t(h,s,i);if(r<a.length-3){for(let e=0;e<6;e++)o.start.setVec(l+e,c);o.extrude.setValues(l,0,-1),o.extrude.setValues(l+1,1,-1),o.extrude.setValues(l+2,1,1),o.extrude.setValues(l+3,0,-1),o.extrude.setValues(l+4,1,1),o.extrude.setValues(l+5,0,1)}if(r>0)for(let e=-6;e<0;e++)o.end.setVec(l+e,c)}f+=l(a)}return o.buffer}_setUpVectors(e,t,r,s,o){const i=this._renderCoordsHelper.worldUpAtPosition(o,c);if(t<s.length-3)for(let f=0;f<6;f++)e.startUp.setVec(r+f,i);if(t>0)for(let f=-6;f<0;f++)e.endUp.setVec(r+f,i)}}function l(e){return 3*(2*(e.length/3-1))}const c=r(),h=r(),_=i().vec3f(\"start\").vec3f(\"end\").vec2f(\"extrude\").vec3f(\"startUp\").vec3f(\"endUp\"),d=i().vec3f(\"start\").vec3f(\"end\").vec2f(\"extrude\");export{a as LaserlinePathData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{deg2rad as e}from\"../../../../../core/mathUtils.js\";import{fromValues as t,create as s}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as r}from\"../../../../../geometry/support/lineSegment.js\";import{ReloadableShaderModule as i}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as o}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{Pos2Locations as l}from\"../../lib/DefaultVertexBufferLayouts.js\";import{L as a}from\"../../../../../chunks/Laserlines.glsl.js\";import{NoParameters as n}from\"../../../../webgl/NoParameters.js\";class h extends n{constructor(){super(...arguments),this.innerColor=t(1,1,1),this.innerWidth=1,this.glowColor=t(1,.5,0),this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=.75,this.globalAlphaContrastBoost=2,this.angleCutoff=e(6),this.pointDistanceOrigin=s(),this.pointDistanceTarget=s(),this.lineVerticalPlaneSegment=r(),this.intersectsLineSegment=r(),this.intersectsLineRadius=3,this.heightManifoldTarget=s(),this.lineStartWorld=s(),this.lineEndWorld=s()}}class m extends o{constructor(e,t){super(e,t,new i(a,()=>import(\"../../shaders/Laserlines.glsl.js\")),l)}}export{h as LaserlinePassParameters,m as LaserlineTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{ReloadableShaderModule as r}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as s}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{LaserlinePassParameters as o}from\"./LaserlineTechnique.js\";import{L as t}from\"../../../../../chunks/LaserlinePath.glsl.js\";class a extends o{constructor(){super(...arguments),this.origin=e()}}class i extends s{constructor(e,s){super(e,s,new r(t,()=>import(\"../../shaders/LaserlinePath.glsl.js\")),n)}}const n=new Map([[\"start\",0],[\"end\",1],[\"extrude\",2],[\"startUp\",3],[\"endUp\",4]]);export{a as LaserlinePathPassParameters,i as LaserlinePathTechnique,n as vertexAttributeLocations};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as o}from\"tslib\";import{ShaderTechniqueConfiguration as r,parameter as t}from\"../../core/shaderTechnique/ShaderTechniqueConfiguration.js\";class e extends r{constructor(){super(...arguments),this.contrastControlEnabled=!1,this.spherical=!1}}o([t()],e.prototype,\"contrastControlEnabled\",void 0),o([t()],e.prototype,\"spherical\",void 0);export{e as LaserlinePathTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{parameter as i}from\"../../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{LaserlinePathTechniqueConfiguration as t}from\"./LaserlinePathTechniqueConfiguration.js\";class n extends t{constructor(){super(...arguments),this.heightManifoldEnabled=!1,this.pointDistanceEnabled=!1,this.lineVerticalPlaneEnabled=!1,this.intersectsLineEnabled=!1}}e([i()],n.prototype,\"heightManifoldEnabled\",void 0),e([i()],n.prototype,\"pointDistanceEnabled\",void 0),e([i()],n.prototype,\"lineVerticalPlaneEnabled\",void 0),e([i()],n.prototype,\"intersectsLineEnabled\",void 0);export{n as LaserlineTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import\"../../../../../core/has.js\";import{disposeMaybe as t}from\"../../../../../core/maybe.js\";import{property as i}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as n}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{d as s,g as r}from\"../../../../../chunks/vec32.js\";import{fromRay as a,create as o,getStart as l,getEnd as h}from\"../../../../../geometry/support/clipRay.js\";import{intersectClipRay as c}from\"../../../../../geometry/support/frustum.js\";import{copy as d}from\"../../../../../geometry/support/lineSegment.js\";import{wrap as p}from\"../../../../../geometry/support/ray.js\";import{InternalRenderCategory as u}from\"../../../webgl.js\";import m from\"../../../webgl/RenderNode.js\";import{Blit as g}from\"../blit/Blit.js\";import{LaserlinePathData as _}from\"./LaserlinePathData.js\";import{LaserlinePathPassParameters as b,LaserlinePathTechnique as f}from\"./LaserlinePathTechnique.js\";import{LaserlinePathTechniqueConfiguration as P}from\"./LaserlinePathTechniqueConfiguration.js\";import{LaserlineTechnique as E}from\"./LaserlineTechnique.js\";import{LaserlineTechniqueConfiguration as q}from\"./LaserlineTechniqueConfiguration.js\";import{updateParameters as L}from\"../../materials/internal/MaterialUtil.js\";let V=class extends m{constructor(e){super(e),this.isDecoration=!0,this.produces=u.LASERLINES,this.consumes={required:[u.LASERLINES,\"normals\"]},this.requireGeometryDepth=!0,this._configuration=new q,this._pathTechniqueConfiguration=new P,this._heightManifoldEnabled=!1,this._pointDistanceEnabled=!1,this._lineVerticalPlaneEnabled=!1,this._intersectsLineEnabled=!1,this._intersectsLineInfinite=!1,this._pathVerticalPlaneEnabled=!1,this._passParameters=new b;const t=e.view.stage.renderView.techniques,i=new P;i.contrastControlEnabled=e.contrastControlEnabled,t.precompile(f,i)}initialize(){this._passParameters.renderCoordsHelper=this.view.renderCoordsHelper,this._pathTechniqueConfiguration.spherical=1===this.view.state.viewingMode,this._pathTechniqueConfiguration.contrastControlEnabled=this.contrastControlEnabled,this._techniques.precompile(f,this._pathTechniqueConfiguration),this._blit=new g(this._techniques,2)}destroy(){this._pathVerticalPlaneData=t(this._pathVerticalPlaneData),this._blit=null}get _techniques(){return this.view.stage.renderView.techniques}get heightManifoldEnabled(){return this._heightManifoldEnabled}set heightManifoldEnabled(e){this._heightManifoldEnabled!==e&&(this._heightManifoldEnabled=e,this.requestRender(1))}get heightManifoldTarget(){return this._passParameters.heightManifoldTarget}set heightManifoldTarget(e){s(this._passParameters.heightManifoldTarget,e),this.requestRender(1)}get pointDistanceEnabled(){return this._pointDistanceEnabled}set pointDistanceEnabled(e){e!==this._pointDistanceEnabled&&(this._pointDistanceEnabled=e,this.requestRender(1))}get pointDistanceTarget(){return this._passParameters.pointDistanceTarget}set pointDistanceTarget(e){s(this._passParameters.pointDistanceTarget,e),this.requestRender(1)}get pointDistanceOrigin(){return this._passParameters.pointDistanceOrigin}set pointDistanceOrigin(e){s(this._passParameters.pointDistanceOrigin,e),this.requestRender(1)}get lineVerticalPlaneEnabled(){return this._lineVerticalPlaneEnabled}set lineVerticalPlaneEnabled(e){e!==this._lineVerticalPlaneEnabled&&(this._lineVerticalPlaneEnabled=e,this.requestRender(1))}get lineVerticalPlaneSegment(){return this._passParameters.lineVerticalPlaneSegment}set lineVerticalPlaneSegment(e){d(e,this._passParameters.lineVerticalPlaneSegment),this.requestRender(1)}get intersectsLineEnabled(){return this._intersectsLineEnabled}set intersectsLineEnabled(e){e!==this._intersectsLineEnabled&&(this._intersectsLineEnabled=e,this.requestRender(1))}get intersectsLineSegment(){return this._passParameters.intersectsLineSegment}set intersectsLineSegment(e){d(e,this._passParameters.intersectsLineSegment),this.requestRender(1)}get intersectsLineInfinite(){return this._intersectsLineInfinite}set intersectsLineInfinite(e){e!==this._intersectsLineInfinite&&(this._intersectsLineInfinite=e,this.requestRender(1))}get pathVerticalPlaneEnabled(){return this._pathVerticalPlaneEnabled}set pathVerticalPlaneEnabled(e){e!==this._pathVerticalPlaneEnabled&&(this._pathVerticalPlaneEnabled=e,null!=this._pathVerticalPlaneData&&this.requestRender(1))}set pathVerticalPlaneVertices(e){null==this._pathVerticalPlaneData&&(this._pathVerticalPlaneData=new _(this._passParameters.renderCoordsHelper)),this._pathVerticalPlaneData.vertices=e,this.pathVerticalPlaneEnabled&&this.requestRender(1)}set pathVerticalPlaneBuffers(e){null==this._pathVerticalPlaneData&&(this._pathVerticalPlaneData=new _(this._passParameters.renderCoordsHelper)),this._pathVerticalPlaneData.buffers=e,this.pathVerticalPlaneEnabled&&this.requestRender(1)}setParameters(e){L(this._passParameters,e)&&this.requestRender(1)}precompile(){this._acquireTechnique()}render(e){const t=e.find(({name:e})=>e===this.produces);if(this.isDecoration&&!this.bindParameters.decorations||null==this._blit)return t;const i=this.renderingContext,n=e.find(({name:e})=>\"normals\"===e);this._passParameters.normals=n?.getTexture();const s=()=>{(this.heightManifoldEnabled||this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled)&&this._renderUnified(),this.pathVerticalPlaneEnabled&&this._renderPath()};if(!this.contrastControlEnabled)return i.bindFramebuffer(t.fbo),s(),t;this._passParameters.colors=t.getTexture();const r=this.fboCache.acquire(t.fbo.width,t.fbo.height,\"laser lines\");return i.bindFramebuffer(r.fbo),i.setClearColor(0,0,0,0),i.clear(16640),s(),i.unbindTexture(t.getTexture()),this._blit.blend(i,r,t,this.bindParameters)||this.requestRender(1),r.release(),t}_acquireTechnique(){return this._configuration.heightManifoldEnabled=this.heightManifoldEnabled,this._configuration.lineVerticalPlaneEnabled=this.lineVerticalPlaneEnabled,this._configuration.pointDistanceEnabled=this.pointDistanceEnabled,this._configuration.intersectsLineEnabled=this.intersectsLineEnabled,this._configuration.contrastControlEnabled=this.contrastControlEnabled,this._configuration.spherical=1===this.view.state.viewingMode,this._techniques.get(E,this._configuration)}_renderUnified(){if(!this._updatePassParameters())return;const e=this._acquireTechnique();if(e.compiled){const t=this.renderingContext;t.bindTechnique(e,this.bindParameters,this._passParameters),t.screen.draw()}else this.requestRender(1)}_renderPath(){if(null==this._pathVerticalPlaneData)return;const e=this._techniques.get(f,this._pathTechniqueConfiguration);if(e.compiled){const t=this.renderingContext;this._passParameters.origin=this._pathVerticalPlaneData.origin,t.bindTechnique(e,this.bindParameters,this._passParameters),this._pathVerticalPlaneData.draw(t)}else this.requestRender(1)}_updatePassParameters(){if(!this._intersectsLineEnabled)return!0;const e=this.bindParameters.camera,t=this._passParameters;if(this._intersectsLineInfinite){if(a(p(t.intersectsLineSegment.origin,t.intersectsLineSegment.vector),D),D.c0=-Number.MAX_VALUE,!c(e.frustum,D))return!1;l(D,t.lineStartWorld),h(D,t.lineEndWorld)}else s(t.lineStartWorld,t.intersectsLineSegment.origin),r(t.lineEndWorld,t.intersectsLineSegment.origin,t.intersectsLineSegment.vector);return!0}get test(){}};e([i({constructOnly:!0})],V.prototype,\"contrastControlEnabled\",void 0),e([i()],V.prototype,\"isDecoration\",void 0),e([i()],V.prototype,\"produces\",void 0),e([i()],V.prototype,\"consumes\",void 0),V=e([n(\"esri.views.3d.webgl-engine.effects.laserlines.LaserLineRenderer\")],V);const D=o();export{V as LaserLineRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{d as e}from\"../../../../chunks/vec32.js\";import{create as t,clone as i}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as n,fromValues as s,copy as r}from\"../../../../geometry/support/lineSegment.js\";import{VisualElement as l}from\"./VisualElement.js\";import{LaserLineRenderer as a}from\"../../webgl-engine/effects/laserlines/LaserLineRenderer.js\";import{d as h}from\"../../../../chunks/Laserlines.glsl.js\";class c extends l{constructor(e){super(e),this._angleCutoff=h,this._style={},this._heightManifoldTarget=t(),this._heightManifoldEnabled=!1,this._intersectsLine=n(),this._intersectsLineEnabled=!1,this._intersectsLineInfinite=!1,this._lineVerticalPlaneSegment=null,this._pathVerticalPlaneBuffers=null,this._pointDistanceLine=null,this.applyProperties(e)}get testData(){}createResources(){this._ensureRenderer()}destroyResources(){this._disposeRenderer()}updateVisibility(){this._syncRenderer(),this._syncHeightManifold(),this._syncIntersectsLine(),this._syncPathVerticalPlane(),this._syncLineVerticalPlane(),this._syncPointDistance()}get angleCutoff(){return this._angleCutoff}set angleCutoff(e){this._angleCutoff!==e&&(this._angleCutoff=e,this._syncAngleCutoff())}get style(){return this._style}set style(e){this._style=e,this._syncStyle()}get heightManifoldTarget(){return this._heightManifoldEnabled?this._heightManifoldTarget:null}set heightManifoldTarget(t){null!=t?(e(this._heightManifoldTarget,t),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1,this._syncRenderer(),this._syncHeightManifold()}set intersectsWorldUpAtLocation(e){if(null==e)return void(this.intersectsLine=null);const t=this.view.renderCoordsHelper.worldUpAtPosition(e,_);this.intersectsLine=s(e,t),this.intersectsLineInfinite=!0}get intersectsLine(){return this._intersectsLineEnabled?this._intersectsLine:null}set intersectsLine(e){null!=e?(r(e,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1,this._syncIntersectsLine(),this._syncRenderer()}get intersectsLineInfinite(){return this._intersectsLineInfinite}set intersectsLineInfinite(e){this._intersectsLineInfinite=e,this._syncIntersectsLineInfinite()}get lineVerticalPlaneSegment(){return this._lineVerticalPlaneSegment}set lineVerticalPlaneSegment(e){this._lineVerticalPlaneSegment=null!=e?r(e):null,this._syncLineVerticalPlane(),this._syncRenderer()}get pathVerticalPlane(){return this._pathVerticalPlaneBuffers}set pathVerticalPlane(e){this._pathVerticalPlaneBuffers=e,this._syncPathVerticalPlane(),this._syncLineVerticalPlane(),this._syncPointDistance(),this._syncRenderer()}get pointDistanceLine(){return this._pointDistanceLine}set pointDistanceLine(e){this._pointDistanceLine=null!=e?{origin:i(e.origin),target:e.target?i(e.target):null}:null,this._syncPointDistance(),this._syncRenderer()}get isDecoration(){return this._isDecoration}set isDecoration(e){this._isDecoration=e,this._renderer&&(this._renderer.isDecoration=e)}_syncRenderer(){this.attached&&this.visible&&(this._intersectsLineEnabled||this._heightManifoldEnabled||null!=this._pointDistanceLine||null!=this._pathVerticalPlaneBuffers)?this._ensureRenderer():this._disposeRenderer()}_ensureRenderer(){null==this._renderer&&(this._renderer=new a({view:this.view,contrastControlEnabled:!0,isDecoration:this.isDecoration}),this._syncStyle(),this._syncHeightManifold(),this._syncIntersectsLine(),this._syncIntersectsLineInfinite(),this._syncPathVerticalPlane(),this._syncLineVerticalPlane(),this._syncPointDistance(),this._syncAngleCutoff())}_syncStyle(){null!=this._renderer&&this._renderer.setParameters(this._style)}_syncAngleCutoff(){this._renderer?.setParameters({angleCutoff:this._angleCutoff})}_syncHeightManifold(){null!=this._renderer&&(this._renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this._renderer.heightManifoldTarget=this._heightManifoldTarget))}_syncIntersectsLine(){null!=this._renderer&&(this._renderer.intersectsLineEnabled=this._intersectsLineEnabled&&this.visible,this._intersectsLineEnabled&&(this._renderer.intersectsLineSegment=this._intersectsLine))}_syncIntersectsLineInfinite(){null!=this._renderer&&(this._renderer.intersectsLineInfinite=this._intersectsLineInfinite)}_syncPathVerticalPlane(){null!=this._renderer&&(this._renderer.pathVerticalPlaneEnabled=null!=this._pathVerticalPlaneBuffers&&this.visible,null!=this._pathVerticalPlaneBuffers&&(this._renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))}_syncLineVerticalPlane(){null!=this._renderer&&(this._renderer.lineVerticalPlaneEnabled=null!=this._lineVerticalPlaneSegment&&this.visible,null!=this._lineVerticalPlaneSegment&&(this._renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))}_syncPointDistance(){if(null==this._renderer)return;const e=this._pointDistanceLine,t=null!=e;this._renderer.pointDistanceEnabled=t&&null!=e.target&&this.visible,t&&(this._renderer.pointDistanceOrigin=e.origin,null!=e.target&&(this._renderer.pointDistanceTarget=e.target))}_disposeRenderer(){null!=this._renderer&&this.view.stage&&(this._renderer.destroy(),this._renderer=null)}forEachMaterial(){}}const _=t();export{c as LaserlineVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{ReadDepth as o}from\"./output/ReadDepth.glsl.js\";import{BlendColorsPremultiplied as e}from\"./util/BlendColorsPremultiplied.glsl.js\";import{CameraSpace as l}from\"./util/CameraSpace.glsl.js\";import{Float3PassUniform as t}from\"../shaderModules/Float3PassUniform.js\";import{FloatPassUniform as r}from\"../shaderModules/FloatPassUniform.js\";import{glsl as a}from\"../shaderModules/glsl.js\";import{Texture2DBindUniform as n}from\"../shaderModules/Texture2DBindUniform.js\";import{Texture2DPassUniform as i}from\"../shaderModules/Texture2DPassUniform.js\";function p(p,d){const s=p.fragment;s.include(o),p.include(l),s.include(e),s.uniforms.add(new r(\"globalAlpha\",o=>o.globalAlpha),new t(\"glowColor\",o=>o.glowColor),new r(\"glowWidth\",(o,e)=>o.glowWidth*e.camera.pixelRatio),new r(\"glowFalloff\",o=>o.glowFalloff),new t(\"innerColor\",o=>o.innerColor),new r(\"innerWidth\",(o,e)=>o.innerWidth*e.camera.pixelRatio),new n(\"depthMap\",o=>o.depth?.attachment),new i(\"normalMap\",o=>o.normals)),s.code.add(a`vec4 premultipliedColor(vec3 rgb, float alpha) {\nreturn vec4(rgb * alpha, alpha);\n}`),s.code.add(a`vec4 laserlineProfile(float dist) {\nif (dist > glowWidth) {\nreturn vec4(0.0);\n}\nfloat innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));\nfloat glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);\nreturn blendColorsPremultiplied(\npremultipliedColor(innerColor, innerAlpha),\npremultipliedColor(glowColor, glowAlpha)\n);\n}`),s.code.add(a`bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float angleCutoffAdjust, out float depthDiscontinuityAlpha) {\nfloat depth = depthFromTexture(depthMap, uv);\nif (depth == 1.0) {\nreturn false;\n}\nfloat linearDepth = linearizeDepth(depth);\npos = reconstructPosition(gl_FragCoord.xy, linearDepth);\nfloat minStep = 6e-8;\nfloat depthStep = clamp(depth + minStep, 0.0, 1.0);\nfloat linearDepthStep = linearizeDepth(depthStep);\nfloat depthError = abs(linearDepthStep - linearDepth);\nvec3 normalReconstructed = normalize(cross(dFdx(pos), dFdy(pos)));\nvec3 normalFromTexture = normalize(texture(normalMap, uv).xyz * 2.0 - 1.0);\nfloat blendFactor = smoothstep(0.15, 0.2, depthError);\nnormal = normalize(mix(normalReconstructed, normalFromTexture, blendFactor));\nangleCutoffAdjust = mix(0.0, 0.004, blendFactor);\nfloat ddepth = fwidth(linearDepth);\ndepthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / linearDepth);\nreturn true;\n}`),d.contrastControlEnabled?s.uniforms.add(new i(\"frameColor\",(o,e)=>o.colors),new r(\"globalAlphaContrastBoost\",o=>o.globalAlphaContrastBoost)).code.add(a`float rgbToLuminance(vec3 color) {\nreturn dot(vec3(0.2126, 0.7152, 0.0722), color);\n}\nvec4 laserlineOutput(vec4 color) {\nfloat backgroundLuminance = rgbToLuminance(texture(frameColor, uv).rgb);\nfloat alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);\nreturn color * alpha;\n}`):s.code.add(a`vec4 laserlineOutput(vec4 color) {\nreturn color * globalAlpha;\n}`)}export{p as Laserline};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{watch as e}from\"../../../../core/reactiveUtils.js\";class t{get isDecoration(){return this._isDecoration}set isDecoration(e){this._isDecoration=e,this.forEachMaterial(t=>t?.setParameters({isDecoration:e}))}constructor(t){this._isDecoration=!1,this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=t.view,this._handle=e(()=>t.view.ready,e=>{this._resourcesCreated&&(e?this._createResources():this._destroyResources())})}applyProperties(e){let t=!1;for(const s in e)s in this&&(\"attached\"===s?t=!!e[s]:this[s]=e[s]);this.attached=t}destroy(){this.attached=!1,this._handle.remove()}get attached(){return this._attached}set attached(e){e!==this._attached&&this.view.stage&&(this._attached=e,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources(),this.onAttachedChange(e))}onAttachedChange(e){}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this.attached&&this.updateVisibility(e))}_createResources(){this.createResources(),this._resourcesCreated=!0,this.updateVisibility(this.visible)}_destroyResources(){this.destroyResources(),this._resourcesCreated=!1}}export{t as VisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{deg2rad as e}from\"../core/mathUtils.js\";import{set as i}from\"../core/libs/gl-matrix-2/math/vec2.js\";import{create as t}from\"../core/libs/gl-matrix-2/factories/vec2f64.js\";import{t as n,e as a,n as o,b as r,k as l,d as s,i as c,g as d}from\"./vec32.js\";import{create as f}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{t as p}from\"./vec42.js\";import{create as g}from\"../core/libs/gl-matrix-2/factories/vec4f64.js\";import{pointAt as h}from\"../geometry/support/lineSegment.js\";import{fromPositionAndNormal as m,create as u}from\"../geometry/support/plane.js\";import{y as w,e as x,c as b}from\"./sphere.js\";import{Laserline as v}from\"../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl.js\";import{ScreenSpacePass as P}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{Float2PassUniform as D}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{Float3BindUniform as M}from\"../views/3d/webgl-engine/core/shaderModules/Float3BindUniform.js\";import{Float3PassUniform as S}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{Float4PassUniform as C}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatBindUniform as L}from\"../views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js\";import{FloatPassUniform as A}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as j}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{ShaderBuilder as V}from\"../views/webgl/ShaderBuilder.js\";const y=e(6);function O(e){const i=new V;i.include(P),i.include(v,e);const t=i.fragment;if(e.lineVerticalPlaneEnabled||e.heightManifoldEnabled)if(t.uniforms.add(new A(\"maxPixelDistance\",(i,t)=>e.heightManifoldEnabled?2*t.camera.computeScreenPixelSizeAt(i.heightManifoldTarget):2*t.camera.computeScreenPixelSizeAt(i.lineVerticalPlaneSegment.origin))),t.code.add(j`float planeDistancePixels(vec4 plane, vec3 pos) {\nfloat dist = dot(plane.xyz, pos) + plane.w;\nfloat width = fwidth(dist);\ndist /= min(width, maxPixelDistance);\nreturn abs(dist);\n}`),e.spherical){const e=(e,i,t)=>n(e,i.heightManifoldTarget,t.camera.viewMatrix),i=(e,i)=>n(e,[0,0,0],i.camera.viewMatrix);t.uniforms.add(new C(\"heightManifoldOrigin\",(t,n)=>(e(G,t,n),i(_,n),a(_,_,G),o(W,_),W[3]=r(_),W)),new M(\"globalOrigin\",e=>i(G,e)),new A(\"cosSphericalAngleThreshold\",(e,i)=>1-Math.max(2,l(i.camera.eye,e.heightManifoldTarget)*i.camera.perRenderPixelRatio)/r(e.heightManifoldTarget))),t.code.add(j`float globeDistancePixels(float posInGlobalOriginLength) {\nfloat dist = abs(posInGlobalOriginLength - heightManifoldOrigin.w);\nfloat width = fwidth(dist);\ndist /= min(width, maxPixelDistance);\nreturn abs(dist);\n}\nfloat heightManifoldDistancePixels(vec4 heightPlane, vec3 pos) {\nvec3 posInGlobalOriginNorm = normalize(globalOrigin - pos);\nfloat cosAngle = dot(posInGlobalOriginNorm, heightManifoldOrigin.xyz);\nvec3 posInGlobalOrigin = globalOrigin - pos;\nfloat posInGlobalOriginLength = length(posInGlobalOrigin);\nfloat sphericalDistance = globeDistancePixels(posInGlobalOriginLength);\nfloat planarDistance = planeDistancePixels(heightPlane, pos);\nreturn cosAngle < cosSphericalAngleThreshold ? sphericalDistance : planarDistance;\n}`)}else t.code.add(j`float heightManifoldDistancePixels(vec4 heightPlane, vec3 pos) {\nreturn planeDistancePixels(heightPlane, pos);\n}`);if(e.pointDistanceEnabled&&(t.uniforms.add(new A(\"maxPixelDistance\",(e,i)=>2*i.camera.computeScreenPixelSizeAt(e.pointDistanceTarget))),t.code.add(j`float sphereDistancePixels(vec4 sphere, vec3 pos) {\nfloat dist = distance(sphere.xyz, pos) - sphere.w;\nfloat width = fwidth(dist);\ndist /= min(width, maxPixelDistance);\nreturn abs(dist);\n}`)),e.intersectsLineEnabled&&t.uniforms.add(new L(\"perScreenPixelRatio\",e=>e.camera.perScreenPixelRatio)).code.add(j`float lineDistancePixels(vec3 start, vec3 dir, float radius, vec3 pos) {\nfloat dist = length(cross(dir, pos - start)) / (length(pos) * perScreenPixelRatio);\nreturn abs(dist) - radius;\n}`),(e.lineVerticalPlaneEnabled||e.intersectsLineEnabled)&&t.code.add(j`bool pointIsWithinLine(vec3 pos, vec3 start, vec3 end) {\nvec3 dir = end - start;\nfloat t2 = dot(dir, pos - start);\nfloat l2 = dot(dir, dir);\nreturn t2 >= 0.0 && t2 <= l2;\n}`),t.main.add(j`vec3 pos;\nvec3 normal;\nfloat angleCutoffAdjust;\nfloat depthDiscontinuityAlpha;\nif (!laserlineReconstructFromDepth(pos, normal, angleCutoffAdjust, depthDiscontinuityAlpha)) {\nfragColor = vec4(0.0);\nreturn;\n}\nvec4 color = vec4(0.0);`),e.heightManifoldEnabled){t.uniforms.add(new D(\"angleCutoff\",e=>E(e)),new C(\"heightPlane\",(e,i)=>U(e.heightManifoldTarget,e.renderCoordsHelper.worldUpAtPosition(e.heightManifoldTarget,G),i.camera.viewMatrix)));const i=e.spherical?j`normalize(globalOrigin - pos)`:j`heightPlane.xyz`;t.main.add(j`\n      vec2 angleCutoffAdjusted = angleCutoff - angleCutoffAdjust;\n      // Fade out laserlines on flat surfaces\n      float heightManifoldAlpha = 1.0 - smoothstep(angleCutoffAdjusted.x, angleCutoffAdjusted.y, abs(dot(normal, ${i})));\n      vec4 heightManifoldColor = laserlineProfile(heightManifoldDistancePixels(heightPlane, pos));\n      color = max(color, heightManifoldColor * heightManifoldAlpha);`)}return e.pointDistanceEnabled&&(t.uniforms.add(new D(\"angleCutoff\",e=>E(e)),new C(\"pointDistanceSphere\",(e,i)=>w(z(e,i)))),t.main.add(j`float pointDistanceSphereDistance = sphereDistancePixels(pointDistanceSphere, pos);\nvec4 pointDistanceSphereColor = laserlineProfile(pointDistanceSphereDistance);\nfloat pointDistanceSphereAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, normalize(pos - pointDistanceSphere.xyz))));\ncolor = max(color, pointDistanceSphereColor * pointDistanceSphereAlpha);`)),e.lineVerticalPlaneEnabled&&(t.uniforms.add(new D(\"angleCutoff\",e=>E(e)),new C(\"lineVerticalPlane\",(e,i)=>I(e,i)),new S(\"lineVerticalStart\",(e,i)=>T(e,i)),new S(\"lineVerticalEnd\",(e,i)=>R(e,i))),t.main.add(j`if (pointIsWithinLine(pos, lineVerticalStart, lineVerticalEnd)) {\nfloat lineVerticalDistance = planeDistancePixels(lineVerticalPlane, pos);\nvec4 lineVerticalColor = laserlineProfile(lineVerticalDistance);\nfloat lineVerticalAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, lineVerticalPlane.xyz)));\ncolor = max(color, lineVerticalColor * lineVerticalAlpha);\n}`)),e.intersectsLineEnabled&&(t.uniforms.add(new D(\"angleCutoff\",e=>E(e)),new S(\"intersectsLineStart\",(e,i)=>n(G,e.lineStartWorld,i.camera.viewMatrix)),new S(\"intersectsLineEnd\",(e,i)=>n(G,e.lineEndWorld,i.camera.viewMatrix)),new S(\"intersectsLineDirection\",(e,i)=>(s(W,e.intersectsLineSegment.vector),W[3]=0,o(G,p(W,W,i.camera.viewMatrix)))),new A(\"intersectsLineRadius\",e=>e.intersectsLineRadius)),t.main.add(j`if (pointIsWithinLine(pos, intersectsLineStart, intersectsLineEnd)) {\nfloat intersectsLineDistance = lineDistancePixels(intersectsLineStart, intersectsLineDirection, intersectsLineRadius, pos);\nvec4 intersectsLineColor = laserlineProfile(intersectsLineDistance);\nfloat intersectsLineAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, 1.0 - abs(dot(normal, intersectsLineDirection)));\ncolor = max(color, intersectsLineColor * intersectsLineAlpha);\n}`)),t.main.add(j`fragColor = laserlineOutput(color * depthDiscontinuityAlpha);`),i}function E(t){return i(F,Math.cos(t.angleCutoff),Math.cos(Math.max(0,t.angleCutoff-e(2))))}function z(e,i){const t=n(k,e.pointDistanceOrigin,i.camera.viewMatrix),a=l(e.pointDistanceOrigin,e.pointDistanceTarget);return x($,t,a)}function I(e,i){const t=h(e.lineVerticalPlaneSegment,.5,G),n=e.renderCoordsHelper.worldUpAtPosition(t,H),a=o(_,e.lineVerticalPlaneSegment.vector),r=c(G,n,a);return o(r,r),U(e.lineVerticalPlaneSegment.origin,r,i.camera.viewMatrix)}function T(e,i){const t=s(G,e.lineVerticalPlaneSegment.origin);return e.renderCoordsHelper.setAltitude(t,0),n(t,t,i.camera.viewMatrix)}function R(e,i){const t=d(G,e.lineVerticalPlaneSegment.origin,e.lineVerticalPlaneSegment.vector);return e.renderCoordsHelper.setAltitude(t,0),n(t,t,i.camera.viewMatrix)}function U(e,i,t){return n(B,e,t),s(W,i),W[3]=0,p(W,W,t),m(B,W,N)}const F=t(),G=f(),W=g(),H=f(),_=f(),B=f(),N=u(),k=f(),$=b(),q=Object.freeze(Object.defineProperty({__proto__:null,build:O,defaultAngleCutoff:y},Symbol.toStringTag,{value:\"Module\"}));export{q as L,O as b,y as d};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{translate as e}from\"../core/libs/gl-matrix-2/math/mat4.js\";import{create as t}from\"../core/libs/gl-matrix-2/factories/mat4f64.js\";import{set as o}from\"../core/libs/gl-matrix-2/math/vec2.js\";import{create as r}from\"../core/libs/gl-matrix-2/factories/vec2f64.js\";import{Laserline as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl.js\";import{Float2BindUniform as i}from\"../views/3d/webgl-engine/core/shaderModules/Float2BindUniform.js\";import{FloatBindUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js\";import{FloatPassUniform as s}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{If as l,glsl as d}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Matrix4BindUniform as c}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4BindUniform.js\";import{Matrix4PassUniform as m}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js\";import{ShaderBuilder as v}from\"../views/webgl/ShaderBuilder.js\";function p(t){const r=new v;r.include(a,t);const{vertex:p,fragment:f}=r;p.uniforms.add(new m(\"modelView\",(t,{camera:o})=>e(g,o.viewMatrix,t.origin)),new c(\"proj\",({camera:e})=>e.projectionMatrix),new s(\"glowWidth\",(e,{camera:t})=>e.glowWidth*t.pixelRatio),new i(\"pixelToNDC\",({camera:e})=>o(w,2/e.fullViewport[2],2/e.fullViewport[3]))),r.attributes.add(\"start\",\"vec3\"),r.attributes.add(\"end\",\"vec3\"),t.spherical&&(r.attributes.add(\"startUp\",\"vec3\"),r.attributes.add(\"endUp\",\"vec3\")),r.attributes.add(\"extrude\",\"vec2\"),r.varyings.add(\"uv\",\"vec2\"),r.varyings.add(\"vViewStart\",\"vec3\"),r.varyings.add(\"vViewEnd\",\"vec3\"),r.varyings.add(\"vViewSegmentNormal\",\"vec3\"),r.varyings.add(\"vViewStartNormal\",\"vec3\"),r.varyings.add(\"vViewEndNormal\",\"vec3\");const u=!t.spherical;return p.main.add(d`\n    vec3 pos = mix(start, end, extrude.x);\n\n    vec4 viewPos = modelView * vec4(pos, 1);\n    vec4 projPos = proj * viewPos;\n    vec2 ndcPos = projPos.xy / projPos.w;\n\n    // in planar we hardcode the up vectors to be Z-up */\n    ${l(u,d`vec3 startUp = vec3(0, 0, 1);`)}\n    ${l(u,d`vec3 endUp = vec3(0, 0, 1);`)}\n\n    // up vector corresponding to the location of the vertex, selecting either startUp or endUp */\n    vec3 up = extrude.y * mix(startUp, endUp, extrude.x);\n    vec3 viewUp = (modelView * vec4(up, 0)).xyz;\n\n    vec4 projPosUp = proj * vec4(viewPos.xyz + viewUp, 1);\n    vec2 projUp = normalize(projPosUp.xy / projPosUp.w - ndcPos);\n\n    // extrude ndcPos along projUp to the edge of the screen\n    vec2 lxy = abs(sign(projUp) - ndcPos);\n    ndcPos += length(lxy) * projUp;\n\n    vViewStart = (modelView * vec4(start, 1)).xyz;\n    vViewEnd = (modelView * vec4(end, 1)).xyz;\n\n    vec3 viewStartEndDir = vViewEnd - vViewStart;\n\n    vec3 viewStartUp = (modelView * vec4(startUp, 0)).xyz;\n\n    // the normal of the plane that aligns with the segment and the up vector\n    vViewSegmentNormal = normalize(cross(viewStartUp, viewStartEndDir));\n\n    // the normal orthogonal to the segment normal and the start up vector\n    vViewStartNormal = -normalize(cross(vViewSegmentNormal, viewStartUp));\n\n    // the normal orthogonal to the segment normal and the end up vector\n    vec3 viewEndUp = (modelView * vec4(endUp, 0)).xyz;\n    vViewEndNormal = normalize(cross(vViewSegmentNormal, viewEndUp));\n\n    // Add enough padding in the X screen space direction for \"glow\"\n    float xPaddingPixels = sign(dot(vViewSegmentNormal, viewPos.xyz)) * (extrude.x * 2.0 - 1.0) * glowWidth;\n    ndcPos.x += xPaddingPixels * pixelToNDC.x;\n\n    // uv is used to read back depth to reconstruct the position at the fragment\n    uv = ndcPos * 0.5 + 0.5;\n\n    gl_Position = vec4(ndcPos, 0, 1);\n  `),f.uniforms.add(new n(\"perScreenPixelRatio\",e=>e.camera.perScreenPixelRatio)),f.code.add(d`float planeDistance(vec3 planeNormal, vec3 planeOrigin, vec3 pos) {\nreturn dot(planeNormal, pos - planeOrigin);\n}\nfloat segmentDistancePixels(vec3 segmentNormal, vec3 startNormal, vec3 endNormal, vec3 pos, vec3 start, vec3 end) {\nfloat distSegmentPlane = planeDistance(segmentNormal, start, pos);\nfloat distStartPlane = planeDistance(startNormal, start, pos);\nfloat distEndPlane = planeDistance(endNormal, end, pos);\nfloat dist = max(max(distStartPlane, distEndPlane), abs(distSegmentPlane));\nfloat width = fwidth(distSegmentPlane);\nfloat maxPixelDistance = length(pos) * perScreenPixelRatio * 2.0;\nfloat pixelDist = dist / min(width, maxPixelDistance);\nreturn abs(pixelDist);\n}`),f.main.add(d`fragColor = vec4(0.0);\nvec3 dEndStart = vViewEnd - vViewStart;\nif (dot(dEndStart, dEndStart) < 1e-5) {\nreturn;\n}\nvec3 pos;\nvec3 normal;\nfloat angleCutoffAdjust;\nfloat depthDiscontinuityAlpha;\nif (!laserlineReconstructFromDepth(pos, normal, angleCutoffAdjust, depthDiscontinuityAlpha)) {\nreturn;\n}\nfloat distance = segmentDistancePixels(\nvViewSegmentNormal,\nvViewStartNormal,\nvViewEndNormal,\npos,\nvViewStart,\nvViewEnd\n);\nvec4 color = laserlineProfile(distance);\nfloat alpha = (1.0 - smoothstep(0.995 - angleCutoffAdjust, 0.999 - angleCutoffAdjust, abs(dot(normal, vViewSegmentNormal))));\nfragColor = laserlineOutput(color * alpha * depthDiscontinuityAlpha);`),r}const w=r(),g=t(),f=Object.freeze(Object.defineProperty({__proto__:null,build:p},Symbol.toStringTag,{value:\"Module\"}));export{f as L,p as b};\n"],"names":["a","constructor","e","this","_renderCoordsHelper","_origin","r","_dirty","_count","vertices","t","s","length","buffers","_buffers","Math","floor","origin","draw","_ensureVAO","bindVAO","drawArrays","n","TRIANGLES","dispose","_vao","_layout","viewingMode","_","d","_this$_vao","_createVAO","_ensureVertexData","_createDataBuffer","f","u","o","_e$buffer","buffer","setData","reduce","l","createBuffer","i","_setUpVectors","bind","h","getAltitude","setAltitude","c","start","setVec","extrude","setValues","end","worldUpAtPosition","startUp","endUp","vec3f","vec2f","super","arguments","innerColor","innerWidth","glowColor","glowWidth","glowFalloff","globalAlpha","globalAlphaContrastBoost","angleCutoff","pointDistanceOrigin","pointDistanceTarget","lineVerticalPlaneSegment","intersectsLineSegment","intersectsLineRadius","heightManifoldTarget","lineStartWorld","lineEndWorld","m","Map","contrastControlEnabled","spherical","prototype","heightManifoldEnabled","pointDistanceEnabled","lineVerticalPlaneEnabled","intersectsLineEnabled","V","isDecoration","produces","LASERLINES","consumes","required","requireGeometryDepth","_configuration","q","_pathTechniqueConfiguration","P","_heightManifoldEnabled","_pointDistanceEnabled","_lineVerticalPlaneEnabled","_intersectsLineEnabled","_intersectsLineInfinite","_pathVerticalPlaneEnabled","_passParameters","b","view","stage","renderView","techniques","precompile","initialize","renderCoordsHelper","state","_techniques","_blit","g","destroy","_pathVerticalPlaneData","requestRender","intersectsLineInfinite","pathVerticalPlaneEnabled","pathVerticalPlaneVertices","pathVerticalPlaneBuffers","setParameters","L","_acquireTechnique","render","find","_ref","name","bindParameters","decorations","renderingContext","_ref2","normals","getTexture","_renderUnified","_renderPath","bindFramebuffer","fbo","colors","fboCache","acquire","width","height","setClearColor","clear","unbindTexture","blend","release","get","E","_updatePassParameters","compiled","bindTechnique","screen","camera","p","vector","D","c0","Number","MAX_VALUE","frustum","test","constructOnly","_angleCutoff","_style","_heightManifoldTarget","_intersectsLine","_lineVerticalPlaneSegment","_pathVerticalPlaneBuffers","_pointDistanceLine","applyProperties","testData","createResources","_ensureRenderer","destroyResources","_disposeRenderer","updateVisibility","_syncRenderer","_syncHeightManifold","_syncIntersectsLine","_syncPathVerticalPlane","_syncLineVerticalPlane","_syncPointDistance","_syncAngleCutoff","style","_syncStyle","intersectsWorldUpAtLocation","intersectsLine","_syncIntersectsLineInfinite","pathVerticalPlane","pointDistanceLine","target","_isDecoration","_renderer","attached","visible","_this$_renderer","forEachMaterial","fragment","include","uniforms","add","pixelRatio","_o$depth","depth","attachment","code","_templateObject","_taggedTemplateLiteral","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_attached","_resourcesCreated","_visible","_handle","ready","_createResources","_destroyResources","remove","onAttachedChange","y","O","v","A","computeScreenPixelSizeAt","j","viewMatrix","C","G","W","M","max","eye","perRenderPixelRatio","perScreenPixelRatio","_templateObject6","main","_templateObject7","U","_templateObject8","_templateObject9","_templateObject0","w","k","x","$","z","_templateObject1","H","I","S","T","R","_templateObject10","_templateObject11","_templateObject12","F","cos","B","N","Object","freeze","defineProperty","__proto__","build","defaultAngleCutoff","Symbol","toStringTag","value","vertex","projectionMatrix","_ref3","_ref4","fullViewport","attributes","varyings"],"sourceRoot":""}