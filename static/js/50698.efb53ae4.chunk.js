"use strict";(self.webpackChunksc_utility=self.webpackChunksc_utility||[]).push([[8775,50698,96141],{7150:(t,e,n)=>{n.d(e,{K:()=>c});var r=n(15941),o=n(68930),s=n(20664),i=n(9392);const a=-1;function c(t,e,n){const r=t.vertices.position,o=t.vertices.componentIndex,i=p.position0,c=p.position1,f=p.faceNormal0,g=p.faceNormal1,{edges:h,normals:I}=u(t),N=h.length/4,A=e.allocate(N);let v=0;const m=N,y=null===n||void 0===n?void 0:n.allocate(m);let E=0,T=0,L=0;d.length=0;for(let a=0;a<N;++a){const t=4*a;r.getVec(h.data[t],i),r.getVec(h.data[t+1],c);const e=d.pushNew();e.index=4*a,e.length=(0,s.j)(i,c)}d.sort((t,e)=>e.length-t.length);const P=new Array,M=new Array;d.forAll(t=>{let{length:u,index:d}=t;const N=h.data[d],m=h.data[d+1],b=h.data[d+2],D=h.data[d+3],R=D===a;if(r.getVec(N,i),r.getVec(m,c),R){const t=3*b;(0,s.i)(f,I.data[t],I.data[t+1],I.data[t+2]),(0,s.c)(g,f),p.componentIndex=o.get(N),p.cosAngle=(0,s.e)(f,g)}else{let t=3*b;if((0,s.i)(f,I.data[t],I.data[t+1],I.data[t+2]),t=3*D,(0,s.i)(g,I.data[t],I.data[t+1],I.data[t+2]),p.componentIndex=o.get(N),p.cosAngle=(0,s.e)(f,g),function(t,e){return t.cosAngle>e}(p,O))return;p.cosAngle<-.9999&&(0,s.c)(g,f)}T+=u,L++,R||function(t,e){return t.cosAngle<e}(p,S)?(e.write(A,v++,p),P.push(u)):l(p,w)&&(y&&n&&n.write(y,E++,p),M.push(u))});const b=new Float32Array(P.reverse()),D=new Float32Array(M.reverse()),R=y&&n?{instancesData:y.slice(0,E),lodInfo:{lengths:D}}:void 0;return{regular:{instancesData:A.slice(0,v),lodInfo:{lengths:b}},silhouette:R,averageEdgeLength:T/L}}function l(t,e){const n=(0,r.XM)(t.cosAngle);return(0,s.E)(N,t.position1,t.position0),n*((0,s.e)((0,s.h)(I,t.faceNormal0,t.faceNormal1),N)>0?-1:1)>e}function u(t){const e=t.faces.length/3,n=t.faces,r=t.neighbors,o=t.vertices.position;g.length=h.length=0;for(let i=0;i<e;i++){const t=3*i,e=r[t],c=r[t+1],l=r[t+2],u=n[t],f=n[t+1],d=n[t+2];o.getVec(u,A),o.getVec(f,v),o.getVec(d,m),(0,s.d)(v,v,A),(0,s.d)(m,m,A),(0,s.h)(A,v,m),(0,s.n)(A,A),h.pushArray(A),(e===a||u<f)&&(g.push(u),g.push(f),g.push(i),g.push(e)),(c===a||f<d)&&(g.push(f),g.push(d),g.push(i),g.push(c)),(l===a||d<u)&&(g.push(d),g.push(u),g.push(i),g.push(l))}return{edges:g,normals:h}}class f{constructor(){this.index=0,this.length=0}}const d=new o.A({allocator:t=>t||new f,deallocator:null}),g=new o.A({deallocator:null}),h=new o.A({deallocator:null}),p=new class{constructor(){this.position0=(0,i.vt)(),this.position1=(0,i.vt)(),this.faceNormal0=(0,i.vt)(),this.faceNormal1=(0,i.vt)(),this.componentIndex=0,this.cosAngle=0}},I=(0,i.vt)(),N=(0,i.vt)(),A=(0,i.vt)(),v=(0,i.vt)(),m=(0,i.vt)(),w=(0,r.kU)(4),O=Math.cos(w),y=(0,r.kU)(35),S=Math.cos(y)},8775:(t,e,n)=>{n.d(e,{o6:()=>u,extractComponentsEdgeLocationsLayout:()=>I,hx:()=>f,Jb:()=>p});var r=n(77176);function o(t,e,n){const r=e/3,o=new Uint32Array(n+1),s=new Uint32Array(n+1),i=(t,e)=>{t<e?o[t+1]++:s[e+1]++};for(let N=0;N<r;N++){const e=t[3*N],n=t[3*N+1],r=t[3*N+2];i(e,n),i(n,r),i(r,e)}let a=0,c=0;for(let N=0;N<n;N++){const t=o[N+1],e=s[N+1];o[N+1]=a,s[N+1]=c,a+=t,c+=e}const l=new Uint32Array(6*r),u=o[n],f=(t,e,n)=>{if(t<e){const r=o[t+1]++;l[2*r]=e,l[2*r+1]=n}else{const r=s[e+1]++;l[2*u+2*r]=t,l[2*u+2*r+1]=n}};for(let N=0;N<r;N++){const e=t[3*N],n=t[3*N+1],r=t[3*N+2];f(e,n,N),f(n,r,N),f(r,e,N)}const d=(t,e)=>{const n=2*t,r=e-t;for(let o=1;o<r;o++){const t=l[n+2*o],e=l[n+2*o+1];let r=o-1;for(;r>=0&&l[n+2*r]>t;r--)l[n+2*r+2]=l[n+2*r],l[n+2*r+3]=l[n+2*r+1];l[n+2*r+2]=t,l[n+2*r+3]=e}};for(let N=0;N<n;N++)d(o[N],o[N+1]),d(u+s[N],u+s[N+1]);const g=new Int32Array(3*r),h=(e,n)=>e===t[3*n]?0:e===t[3*n+1]?1:e===t[3*n+2]?2:-1,p=(t,e)=>{const n=h(t,e);g[3*e+n]=-1},I=(t,e,n,r)=>{const o=h(t,e);g[3*e+o]=r;const s=h(n,r);g[3*r+s]=e};for(let N=0;N<n;N++){let t=o[N];const e=o[N+1];let n=s[N];const r=s[N+1];for(;t<e&&n<r;){const e=l[2*t],r=l[2*u+2*n];e===r?(I(N,l[2*t+1],r,l[2*u+2*n+1]),t++,n++):e<r?(p(N,l[2*t+1]),t++):(p(r,l[2*u+2*n+1]),n++)}for(;t<e;)p(N,l[2*t+1]),t++;for(;n<r;)p(l[2*u+2*n],l[2*u+2*n+1]),n++}return g}var s=n(48549),i=n(66470),a=n(96141),c=n(69413),l=n(7150);function u(t){const e=f(t.data,t.skipDeduplicate,t.indices,t.indicesLength);return g.updateSettings(t.writerSettings),h.updateSettings(t.writerSettings),(0,l.K)(e,g,h)}function f(t,e,n,s){if(e){const e=o(n,s,t.count);return new d(n,s,e,t)}const i=(0,r.b)(t.buffer,t.stride/4,{originalIndices:n}),c=o(i.indices,s,i.uniqueCount);return{faces:i.indices,facesLength:i.indices.length,neighbors:c,vertices:a.EdgeInputBufferLayout.createView(i.buffer)}}class d{constructor(t,e,n,r){this.faces=t,this.facesLength=e,this.neighbors=n,this.vertices=r}}const g=new c.T,h=new c.k,p=(0,s.BP)().vec3f(i.r.POSITION0).vec3f(i.r.POSITION1),I=(0,s.BP)().vec3f(i.r.POSITION0).vec3f(i.r.POSITION1).u16(i.r.COMPONENTINDEX)},12580:(t,e,n)=>{n.d(e,{L:()=>o,s:()=>s});var r=n(48549);function o(t,e){return e.push(t.buffer),{buffer:t.buffer,layout:new r.l5(t.layout)}}function s(t){return new r.q3(t.layout).createView(t.buffer)}},50698:(t,e,n)=>{n.r(e),n.d(e,{default:()=>a});var r=n(12580),o=n(96141),s=n(7150),i=n(8775);class a{async extract(t){const e=c(t),n=(0,i.o6)(e),r=[e.data.buffer];return{result:l(n,r),transferList:r}}async extractComponentsEdgeLocations(t){const e=c(t),n=(0,i.hx)(e.data,e.skipDeduplicate,e.indices,e.indicesLength),o=(0,s.K)(n,f),a=[];return{result:(0,r.L)(o.regular.instancesData,a),transferList:a}}async extractEdgeLocations(t){const e=c(t),n=(0,i.hx)(e.data,e.skipDeduplicate,e.indices,e.indicesLength),o=(0,s.K)(n,u),a=[];return{result:(0,r.L)(o.regular.instancesData,a),transferList:a}}}function c(t){return{data:o.EdgeInputBufferLayout.createView(t.dataBuffer),indices:"Uint32Array"===t.indicesType?new Uint32Array(t.indices):"Uint16Array"===t.indicesType?new Uint16Array(t.indices):t.indices,indicesLength:t.indicesLength,writerSettings:t.writerSettings,skipDeduplicate:t.skipDeduplicate}}function l(t,e){return e.push(t.regular.lodInfo.lengths.buffer),e.push(t.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:(0,r.L)(t.regular.instancesData,e),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:(0,r.L)(t.silhouette.instancesData,e),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}}const u=new class{allocate(t){return i.Jb.createBuffer(t)}trim(t,e){return t.slice(0,e)}write(t,e,n){t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1)}},f=new class{allocate(t){return i.extractComponentsEdgeLocationsLayout.createBuffer(t)}trim(t,e){return t.slice(0,e)}write(t,e,n){t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex)}}},69413:(t,e,n)=>{n.d(e,{T:()=>v,k:()=>m});var r,o,s=n(47249),i=n(20664),a=n(9392),c=n(57481),l=n(25672),u=n(96141);class f{updateSettings(t){this.settings=t,this._edgeHashFunction=t.reducedPrecision?I:p}write(t,e,n){O.seed=this._edgeHashFunction(n);const r=O.getIntRange(0,255),o=O.getIntRange(0,this.settings.variants-1),s=O.getFloat(),i=255*(.5*function(t,e){return Math.abs(t)**e*Math.sign(t)}(-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7),1.2)+.5);t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex),t.variantOffset.set(e,r),t.variantStroke.set(e,o),t.variantExtension.set(e,i)}}const d=new Float32Array(6),g=new Uint32Array(d.buffer),h=new Uint32Array(1);function p(t){return d[0]=t.position0[0],d[1]=t.position0[1],d[2]=t.position0[2],d[3]=t.position1[0],d[4]=t.position1[1],d[5]=t.position1[2],h[0]=31*(31*(31*(31*(31*(166811+g[0])+g[1])+g[2])+g[3])+g[4])+g[5],h[0]}function I(t){const e=d;e[0]=A(t.position0[0]),e[1]=A(t.position0[1]),e[2]=A(t.position0[2]),e[3]=A(t.position1[0]),e[4]=A(t.position1[1]),e[5]=A(t.position1[2]),h[0]=5381;for(let n=0;n<g.length;n++)h[0]=31*h[0]+g[n];return h[0]}const N=1e4;function A(t){return Math.round(t*N)/N}class v{constructor(){this._commonWriter=new f}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return u.gr.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n),(0,i.f)(w,n.faceNormal0,n.faceNormal1),(0,i.n)(w,w);const{typedBuffer:r,typedBufferStride:o}=t.normalCompressed;(0,l.aT)(r,e,w[0],w[1],w[2],o)}}(r=v).Layout=u.gr,r.glLayout=(0,c.U)(u.gr,1);class m{constructor(){this._commonWriter=new f}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return u.In.createBuffer(t)}write(t,e,n){this._commonWriter.write(t,e,n);{const{typedBuffer:r,typedBufferStride:o}=t.normalCompressed;(0,l.aT)(r,e,n.faceNormal0[0],n.faceNormal0[1],n.faceNormal0[2],o)}{const{typedBuffer:r,typedBufferStride:o}=t.normal2Compressed;(0,l.aT)(r,e,n.faceNormal1[0],n.faceNormal1[1],n.faceNormal1[2],o)}}}(o=m).Layout=u.In,o.glLayout=(0,c.U)(u.In,1);const w=(0,a.vt)(),O=new s.A},77176:(t,e,n)=>{n.d(e,{b:()=>s});var r=n(15941),o=n(38496);function s(t,e,n){var s;const u=Array.isArray(t),f=u?t.length/e:t.byteLength/(4*e),d=u?t:new Uint32Array(t,0,f*e),g=null!==(s=null===n||void 0===n?void 0:n.minReduction)&&void 0!==s?s:0,h=(null===n||void 0===n?void 0:n.originalIndices)||null,p=h?h.length:0,I=(null===n||void 0===n?void 0:n.componentOffsets)||null;let N=0;if(I)for(let r=0;r<I.length-1;r++){const t=I[r+1]-I[r];t>N&&(N=t)}else N=f;const A=Math.floor(1.1*N)+1;(null==l||l.length<2*A)&&(l=new Uint32Array((0,r.cU)(2*A)));for(let r=0;r<2*A;r++)l[r]=0;let v=0;const m=!!I&&!!h,w=m?p:f;let O=(0,o.my)(f);const y=new Uint32Array(p),S=1.96;let E=0!==g?Math.ceil(4*S*S/(g*g)*g*(1-g)):w,T=1,L=I?I[1]:w;for(let r=0;r<w;r++){if(r===E){const t=1-v/r;if(t+S*Math.sqrt(t*(1-t)/r)<g)return null;E*=2}if(r===L){for(let t=0;t<2*A;t++)l[t]=0;if(h)for(let t=I[T-1];t<I[T];t++)y[t]=O[h[t]];L=I[++T]}const t=m?h[r]:r,n=t*e,o=c(d,n,e);let s=o%A,a=v;for(;0!==l[2*s+1];){if(l[2*s]===o){const t=l[2*s+1]-1;if(i(d,n,t*e,e)){a=O[t];break}}s++,s>=A&&(s-=A)}a===v&&(l[2*s]=o,l[2*s+1]=t+1,v++),O[t]=a}if(0!==g&&1-v/f<g)return null;if(m){for(let t=I[T-1];t<y.length;t++)y[t]=O[h[t]];O=(0,o.uW)(y)}const P=u?new Array(v):new Uint32Array(v*e);v=0;for(let r=0;r<w;r++)O[r]===v&&(a(d,(m?h[r]:r)*e,P,v*e,e),v++);if(h&&!m){const t=new Uint32Array(p);for(let e=0;e<t.length;e++)t[e]=O[h[e]];O=(0,o.uW)(t)}return{buffer:Array.isArray(P)?P:P.buffer,indices:O,uniqueCount:v}}function i(t,e,n,r){for(let o=0;o<r;o++)if(t[e+o]!==t[n+o])return!1;return!0}function a(t,e,n,r,o){for(let s=0;s<o;s++)n[r+s]=t[e+s]}function c(t,e,n){let r=0;for(let o=0;o<n;o++)r=t[e+o]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let l=null},96141:(t,e,n)=>{n.d(e,{EdgeInputBufferLayout:()=>i,In:()=>u,gr:()=>l,vG:()=>f,vJ:()=>a,wO:()=>c});var r=n(57481),o=n(48549),s=n(66470);const i=(0,o.BP)().vec3f(s.r.POSITION).u16(s.r.COMPONENTINDEX).freeze(),a=(0,o.BP)().vec2u8(s.r.SIDENESS).freeze(),c=(0,r.U)(a),l=(0,o.BP)().vec3f(s.r.POSITION0).vec3f(s.r.POSITION1).vec2i16(s.r.NORMALCOMPRESSED).u16(s.r.COMPONENTINDEX).u8(s.r.VARIANTOFFSET,{glNormalized:!0}).u8(s.r.VARIANTSTROKE).u8(s.r.VARIANTEXTENSION,{glNormalized:!0}).freeze(),u=(0,o.BP)().vec3f(s.r.POSITION0).vec3f(s.r.POSITION1).vec2i16(s.r.NORMALCOMPRESSED).vec2i16(s.r.NORMAL2COMPRESSED).u16(s.r.COMPONENTINDEX).u8(s.r.VARIANTOFFSET,{glNormalized:!0}).u8(s.r.VARIANTSTROKE).u8(s.r.VARIANTEXTENSION,{glNormalized:!0}).freeze(),f=new Map([[s.r.POSITION0,0],[s.r.POSITION1,1],[s.r.COMPONENTINDEX,2],[s.r.VARIANTOFFSET,3],[s.r.VARIANTSTROKE,4],[s.r.VARIANTEXTENSION,5],[s.r.NORMALCOMPRESSED,6],[s.r.NORMAL2COMPRESSED,7],[s.r.SIDENESS,8]])}}]);
//# sourceMappingURL=50698.efb53ae4.chunk.js.map