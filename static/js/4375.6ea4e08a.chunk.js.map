{"version":3,"file":"static/js/4375.6ea4e08a.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceOctree.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LevelSelector.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodComponentData.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodLevel.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{create as t}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{create as e}from\"../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{A as s,c as i,q as r,y as a}from\"../../../../../chunks/sphere.js\";import{maxScale as n}from\"../../../support/mathUtils.js\";import{Octree as o}from\"../Octree.js\";class h extends o{constructor(e,r){super(t=>s(this._instanceData.view.boundingSphere.getVec(t,m)),{maximumDepth:25}),this._instanceData=e,this._boundingSphere=r,this._tmpSphere=i(),this._tmpMat4=t()}addInstance(t){const e=this._instanceData.view.boundingSphere,s=this._instanceData.getCombinedModelTransform(t,this._tmpMat4);r(this._tmpSphere,this._boundingSphere.center,s),this._tmpSphere[3]=this._boundingSphere.radius*n(s),e.setVec(t,a(this._tmpSphere)),this.add([t])}removeInstance(t){this.remove([t])}}const m=e();export{h as InstanceOctree};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nclass e{constructor(e,i){this._worldSpaceRadius=e,this._minScreenSpaceRadii=i}selectLevel(e,i,t){const c=t.computeScreenPixelSizeAt(e),r=this._worldSpaceRadius*i/c;let s=0;for(let a=1;a<this._minScreenSpaceRadii.length;++a)r>=this._minScreenSpaceRadii[a]&&(s=a);return s}}export{e as LevelSelector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{glLayout as e}from\"../../../support/buffer/glUtil.js\";import{GLMaterials as t}from\"../GLMaterials.js\";import{VertexArrayObject as r}from\"../VertexArrayObject.js\";import{VertexBuffer as s}from\"../../../../webgl/VertexBuffer.js\";class o{constructor(o,i){this.geometry=i;const n=o.renderContext.rctx,m=i.renderGeometry,{material:a,layout:u,buffer:l}=m;this._materials=o.materials,a.setParameters({instancedDoublePrecision:!0}),this.glMaterials=new t(a,this._materials),this.vbo=new s(n,e(u),l),this.vao=new r(n,this.vbo)}destroy(){this.glMaterials.dispose(),this.vbo.dispose(),this.vao.dispose()}get material(){return this.geometry.renderGeometry.material}get layout(){return this.geometry.renderGeometry.layout}get boundingInfo(){return this.geometry.boundingInfo}get numTriangles(){return this.numVertices/3}get numVertices(){return this.geometry.renderGeometry.numVertices}get usedMemory(){return 128+this.vbo.usedMemory+this.vao.usedMemory}intersect(e,t,r,s,o,i,n,m){return this.geometry.intersect(e,t,r,s,o,i,n,m)}}export{o as LodComponentData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{isSome as o}from\"../../../../../core/arrayUtils.js\";import{isAborted as n,throwIfAborted as t}from\"../../../../../core/promiseUtils.js\";import{create as e}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{empty as r,expandWithVec3 as i,center as s,diameter as c}from\"../../../../../geometry/support/aaBoundingBox.js\";import{LodComponentData as u}from\"./LodComponentData.js\";class a{static async create(e,r,i){const s=await Promise.allSettled(r.components.map(o=>e.controller.schedule(()=>new u(e,o.geometry),i))),c=s.map(o=>\"fulfilled\"===o.status?o.value:null).filter(o);if(n(i)||c.length!==s.length){c.forEach(o=>o.destroy()),t(i);for(const o of s)if(\"rejected\"===o.status)throw o.reason}return new a(r.minScreenSpaceRadius,c)}constructor(o,n){this.minScreenSpaceRadius=o,this.components=n}destroy(){this.components.forEach(o=>o.destroy())}intersect(o,n,t,e,r,i,s){this.components.forEach(c=>c.intersect(o,n,t,e,r,i,this.boundingSphere,s))}get boundingBox(){if(null==this._boundingBox){const o=r();this.components.forEach(n=>{null!=n.boundingInfo&&(i(o,n.boundingInfo.bbMin),i(o,n.boundingInfo.bbMax))}),this._boundingBox=o}return this._boundingBox}get boundingSphere(){if(null==this._boundingSphere){const o=this.boundingBox,n=e();s(o,n),this._boundingSphere={center:n,radius:.5*c(o)}}return this._boundingSphere}get triangleCount(){return this.components.reduce((o,n)=>o+n.numTriangles,0)}}export{a as LodLevel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{isSome as t}from\"../../../../../core/arrayUtils.js\";import r from\"../../../../../core/Error.js\";import{someMap as s,getOrCreateMapValue as n}from\"../../../../../core/MapUtils.js\";import{destroyMaybe as a}from\"../../../../../core/maybe.js\";import{isAborted as i,throwIfAborted as o}from\"../../../../../core/promiseUtils.js\";import{property as l}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import{subclass as c}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{create as h}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{e as d,f as u,t as m}from\"../../../../../chunks/vec32.js\";import{create as f}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as p,freeze as _}from\"../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{debugFlags as g}from\"../../../support/debugFlags.js\";import{glLayout as y}from\"../../../support/buffer/glUtil.js\";import v from\"../../../webgl/RenderCamera.js\";import{AsyncRenderPlugin as b}from\"../../effects/RenderPlugin.js\";import{DepthRange as I}from\"../DepthRange.js\";import{assert as C}from\"../Util.js\";import{InstanceData as D}from\"./InstanceData.js\";import{InstanceOctree as R}from\"./InstanceOctree.js\";import{LevelSelector as E}from\"./LevelSelector.js\";import{LodLevel as x}from\"./LodLevel.js\";import{getRenderInstanceDataLayout as S,RenderInstanceData as w}from\"./RenderInstanceData.js\";import{colorMixModes as L}from\"../../materials/internal/MaterialUtil.js\";import{encodeDoubleVec3 as j}from\"../../materials/renderers/utils.js\";import{DefaultMaterialDrawParameters as U}from\"../../shaders/DefaultMaterialTechnique.js\";import{defaultHighlightName as T}from\"../../../../support/HighlightDefaults.js\";import{TaskPriority as O,noBudget as A}from\"../../../../support/Scheduler.js\";import{bindVertexBufferLayout as M}from\"../../../../webgl/Util.js\";import{fromLayout as q}from\"../../../../webgl/VertexAttributeLocations.js\";const B=e=>{const t=e.baseBoundingSphere.radius,r=e.levels.map(e=>e.minScreenSpaceRadius);return new E(t,r)};let F=class extends b{constructor(e,t){super(e),this.type=3,this.isGround=!1,this._levels=[],this._defaultRenderInstanceData=new Array,this._highlightRenderInstanceDatas=new Map,this._instanceIndex=0,this._cycleStartIndex=0,this._slicePlane=!1,this._camera=new v,this._updateCyclesWithStaticCamera=-1,this._needFullCycle=!1,this.produces=new Map([[2,e=>this._produces(e)],[4,e=>!!this._hasTransparentLevels()&&this._produces(e)]]),this._instanceData=new D({shaderTransformation:e.shaderTransformation},e.symbol.materialParameters),this.addHandles(t.registerTask(O.LOD_RENDERER,this))}initialize(){this._instanceBufferLayout=S(this.symbol.materialParameters),this._glInstanceBufferLayout=y(this._instanceBufferLayout,1),this.addHandles([this._instanceData.events.on(\"instances-changed\",()=>this._requestUpdateCycle()),this._instanceData.events.on(\"instance-transform-changed\",({index:e})=>{this._requestUpdateCycle(),this.metadata.notifyGraphicGeometryChanged(e)}),this._instanceData.events.on(\"instance-visibility-changed\",({index:e})=>{this._requestUpdateCycle(!0),this.metadata.notifyGraphicVisibilityChanged(e)}),this._instanceData.events.on(\"instance-highlight-changed\",()=>this._requestUpdateCycle(!0))])}get _allRenderInstanceData(){return[this._defaultRenderInstanceData,...this._highlightRenderInstanceDatas.values()]}get _allRenderInstanceDataExceptHighlightShadow(){const e=[this._defaultRenderInstanceData];for(const t of this._highlightRenderInstanceDatas)t[0]!==T&&e.push(t[1]);return e}hasHighlight(e){return this._highlightRenderInstanceDatas.has(e)}get _enableLevelSelection(){return this.symbol.levels.length>1}get levels(){return this._levels}get baseBoundingBox(){return this._levels[this._levels.length-1].boundingBox}get baseBoundingSphere(){return this._levels[this._levels.length-1].boundingSphere}get baseMaterial(){return this._levels[this._levels.length-1].components[0].material}get slicePlaneEnabled(){return this._slicePlane}set slicePlaneEnabled(e){this._slicePlane=e}get layerViewUid(){return this.metadata.layerViewUid}get instanceData(){return this._instanceData}get hasEmitters(){return this._levels.some(e=>e.components.some(e=>e.material.hasEmissions))}get usedMemory(){return this._allRenderInstanceData.reduce((e,t)=>t.reduce((e,t)=>e+t.usedMemory,e),this._levels.reduce((e,t)=>e+t.components.reduce((e,t)=>e+t.usedMemory,0),0))}get renderStats(){const e=this._instanceData.size,t=[];return this._levels.forEach((e,r)=>{const s=this._allRenderInstanceData[0][r].size+this._allRenderInstanceData[1][r].size,n=e.triangleCount;t.push({renderedInstances:s,renderedTriangles:s*n,trianglesPerInstance:n})}),{totalInstances:e,renderedInstances:t.reduce((e,t)=>e+t.renderedInstances,0),renderedTriangles:t.reduce((e,t)=>e+t.renderedTriangles,0),levels:t}}_createRenderInstanceDataArray(){const{rctx:e}=this._context.renderContext;return this.symbol.levels.map(t=>new w(e,this._instanceBufferLayout))}async initializeRenderContext(e,r){this._context=e,this._defaultRenderInstanceData=this._createRenderInstanceDataArray();const s=await Promise.allSettled(this.symbol.levels.map(t=>x.create(e,t,r))),n=s.map(e=>\"fulfilled\"===e.status?e.value:null).filter(t);if(i(r)||n.length!==s.length){n.forEach(e=>e.destroy()),o(r);for(const e of s)if(\"rejected\"===e.status)throw e.reason}this._levels=n,this._levelSelector=B(this)}uninitializeRenderContext(){this._invalidateOctree(),this._levels.forEach(e=>e.destroy()),this._defaultRenderInstanceData.forEach(e=>e.destroy()),this._highlightRenderInstanceDatas.forEach(e=>e.forEach(e=>e.destroy()))}_hasTransparentLevels(){return this._levels.some(e=>e.components.some(e=>{const t=e.material.produces.get(4);return t?.(0)}))}hasHighlights(){return s(this._highlightRenderInstanceDatas,e=>e.some(e=>e.size>0))}_produces(e){return(9!==e||this.hasHighlights())&&(5!==e||this.hasHighlight(T))}prepareRender(e){if(!g.LOD_INSTANCE_RENDERER_DISABLE_UPDATES){if(this._enableLevelSelection){const t=e.bind.contentCamera.equals(this._camera);this._camera.copyFrom(e.bind.contentCamera),t||this._requestUpdateCycle()}this._needFullCycle&&(this.runTask(A),this._needFullCycle=!1)}}acquireTechniques(e){if(!this.baseMaterial.visible||!this.baseMaterial.isVisibleForOutput(e.output))return null;const t=this._getInstanceDatas(e);if(!t)return null;const r=new Array,s=this.levels;return t.forEach(t=>s.forEach(({components:s},n)=>s.forEach(s=>r.push(this._beginComponent(e,t[n],s))))),r}render(e,t){const r=this._getInstanceDatas(e);if(!r||null==t)return;let s=0;const n=this.levels;r.forEach(r=>n.forEach(({components:n},a)=>n.forEach(n=>this._renderComponent(e,t[s++],r[a],n,a)))),e.rctx.unbindBuffer(34962),e.rctx.bindVAO(null)}_getInstanceDatas(e){const{output:t,bind:r}=e,s=9===t,n=5===t,a=6!==t;if(!s&&!n)return a?this._allRenderInstanceData:this._allRenderInstanceDataExceptHighlightShadow;const{_highlightRenderInstanceDatas:i}=this;if(a){if(s){const e=r.highlight?.name;if(!e)return null;const t=i.get(e);return t?[t]:null}const e=i.get(T);return n?e?[e]:null:Array.from(i.values())}return null}intersect(e,t,r,s){if(!this.baseMaterial.visible||null==this._octree)return;const n=f();d(n,s,r);const a=n=>{this._instanceData.getCombinedModelTransform(n,N),e.transform.set(N),m(G,r,e.transform.inverse),m(W,s,e.transform.inverse);const a=this._instanceData.getState(n),i=this._instanceData.getLodLevel(n),o=this._levels.length;4&a&&(C(!!(18&a),\"invalid instance state\"),C(i>=0&&i<o,\"invaid lod level\"),this._levels[i].intersect(e,t,G,W,n,this.metadata,o))};this.baseMaterial.parameters.verticalOffset?this._octree.forEach(a):this._octree.forEachAlongRay(r,n,a)}notifyShaderTransformationChanged(){this._invalidateOctree(),this._requestUpdateCycle()}get _octree(){if(null==this._octreeCached){const e=this._instanceData,t=e.view?.state;if(!t)return null;this._octreeCached=new R(e,this.baseBoundingSphere);for(let r=0;r<e.capacity;++r)18&t.get(r)&&this._octreeCached.addInstance(r)}return this._octreeCached}_invalidateOctree(){this._octreeCached=a(this._octreeCached)}queryDepthRange(e){if(null==this._octree)return new I;const t=e.viewForward,r=this._octree.findClosest(t,1,e.frustum),s=this._octree.findClosest(t,-1,e.frustum);if(null==r||null==s)return new I;const n=e.eye,a=this._instanceData.view;a.boundingSphere.getVec(r,z),d(z,z,n);const i=u(z,t)-z[3];a.boundingSphere.getVec(s,z),d(z,z,n);const o=u(z,t)+z[3];return new I(i,o)}_requestUpdateCycle(e=!1){this._updateCyclesWithStaticCamera=-1,this._cycleStartIndex=this._instanceIndex,e&&(this._needFullCycle=!0,this._context.requestRender())}_startUpdateCycle(){this._updateCyclesWithStaticCamera++,this._allRenderInstanceData.forEach(e=>e.forEach(e=>e.startUpdateCycle()))}get readyToRun(){return this._instanceData.size>0&&this._updateCyclesWithStaticCamera<1}runTask(e){const{_enableLevelSelection:t,_camera:s,_levelSelector:a}=this;this._allRenderInstanceData.forEach(e=>e.forEach(e=>e.beginUpdate()));const i=this._instanceData,o=i.view;let l=i.size;const c=i.capacity;let h=this._instanceIndex;const d=Math.ceil(c/500),{_highlightRenderInstanceDatas:u}=this;for(let m=0;m<l&&!e.done;++m){h===this._cycleStartIndex&&this._startUpdateCycle();const m=o.state.get(h);let f=0;if(!(1&m)){h=h+1===c?0:h+1,l++;continue}const p=o.lodLevel.get(h);if(2&m&&this._defaultRenderInstanceData[p].freeTail(),16&m){const e=i.geHighlightOptionsPrev(h);if(e){const t=u.get(e);if(!t)throw new r(\"internal:lod-renderer\",\"Internal error in lodRenderer\");t[p].freeTail(),t.every(e=>e.isEmpty)&&(t.forEach(e=>e.destroy()),u.delete(e))}}if(32&m)i.freeInstance(h);else if(4&m){let e=0;if(t&&(o.modelOrigin.getVec(h,P),e=a.selectLevel(P,i.getCombinedMedianScaleFactor(h),s)),f=-83&m,e>=0)if(8&m){const t=i.getHighlightName(h);if(t){const s=()=>{const e=this._createRenderInstanceDataArray();return e.forEach(e=>e.beginUpdate()),e},a=n(u,t,s);if(e>=a.length)throw new r(\"internal:lod-renderer\",`LodRenderer internal error - missing lodLevel ${e}`);H(a[e],o,h)}f|=16}else H(this._defaultRenderInstanceData[e],o,h),f|=2;o.state.set(h,f),o.lodLevel.set(h,e)}else f=-83&m,o.state.set(h,f);const _=!!(18&m),g=!!(18&f);null!=this._octreeCached&&(!_&&g?this._octreeCached.addInstance(h):_&&!g?this._octreeCached.removeInstance(h):_&&g&&64&m&&(this._octreeCached.removeInstance(h),this._octreeCached.addInstance(h))),h=h+1===c?0:h+1,h%d===0&&e.madeProgress(),_!==g&&this.metadata.notifyGraphicVisibilityChanged(h),g&&64&m&&this.metadata.notifyGraphicGeometryChanged(h)}this._instanceIndex=h,this._allRenderInstanceData.forEach(e=>e.forEach(e=>e.endUpdate())),this._context.requestRender()}_beginComponent(e,t,r){if(0===t.size)return null;const s=r.glMaterials.load(e.rctx,e.bind.slot,e.output);return s?.beginSlot(e.bind)}_renderComponent(e,t,r,s,n){if(!t)return;const{bind:a,rctx:i}=e;i.runAppleAmdDriverHelper();const o=i.bindTechnique(t,a,s.material.parameters,Y),l=this._glInstanceBufferLayout;o.assertCompatibleVertexAttributeLocations(s.vao,q(l)),i.bindVAO(s.vao),g.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL&&0===e.output&&(o.setUniform4fv(\"externalColor\",k[Math.min(n,k.length-1)]),o.setUniform1i(\"symbolColorMixMode\",L.replace));const c=r.capacity,h=r.headIndex,d=r.tailIndex,u=r.firstIndex,m=(e,n)=>{M(i,o.locations,r.buffer,e),i.drawArraysInstanced(t.primitiveType,0,s.numVertices,n-e)};s.material.transparent&&null!=u?h>d?(C(u>=d&&u<=h,\"invalid firstIndex\"),m(u,h),m(d,u)):h<d&&(u<=h?(C(u>=0&&u<=h,\"invalid firstIndex\"),m(u,h),m(d,c),m(0,u)):(C(u>=d&&u<=c,\"invalid firstIndex\"),m(u,c),m(0,h),m(d,u))):h>d?m(d,h):h<d&&(m(0,h),m(d,c))}};function H(e,t,r){const s=e.allocateHead();V(t,r,e.view,s)}function V(e,t,r,s){j(e.modelOrigin,t,r.modelOriginHi,r.modelOriginLo,s),r.model.copyFrom(s,e.model,t),r.modelNormal.copyFrom(s,e.modelNormal,t),e.color&&r.color&&r.color.copyFrom(s,e.color,t),e.olidColor&&r.olidColor&&r.olidColor.copyFrom(s,e.olidColor,t),e.featureAttribute&&r.featureAttribute&&r.featureAttribute.copyFrom(s,e.featureAttribute,t)}e([l({constructOnly:!0})],F.prototype,\"symbol\",void 0),e([l({constructOnly:!0})],F.prototype,\"metadata\",void 0),e([l({constructOnly:!0})],F.prototype,\"shaderTransformation\",void 0),e([l()],F.prototype,\"_instanceData\",void 0),e([l()],F.prototype,\"_cycleStartIndex\",void 0),e([l({readOnly:!0})],F.prototype,\"_enableLevelSelection\",null),e([l()],F.prototype,\"_updateCyclesWithStaticCamera\",void 0),e([l({readOnly:!0})],F.prototype,\"readyToRun\",null),F=e([c(\"esri.views.3d.webgl-engine.lib.lodRendering.LodRenderer\")],F);const P=f(),z=p(),N=h(),G=f(),W=f(),k=[_(1,0,1,1),_(0,0,1,1),_(0,1,0,1),_(1,1,0,1),_(1,0,0,1)],Y=new U;export{F as LodRenderer};\n"],"names":["h","o","constructor","e","r","super","t","s","this","_instanceData","view","boundingSphere","getVec","m","maximumDepth","_boundingSphere","_tmpSphere","i","_tmpMat4","addInstance","getCombinedModelTransform","center","radius","n","setVec","a","add","removeInstance","remove","_worldSpaceRadius","_minScreenSpaceRadii","selectLevel","c","computeScreenPixelSizeAt","length","geometry","renderContext","rctx","renderGeometry","material","layout","u","buffer","l","_materials","materials","setParameters","instancedDoublePrecision","glMaterials","vbo","vao","destroy","dispose","boundingInfo","numTriangles","numVertices","usedMemory","intersect","create","Promise","allSettled","components","map","controller","schedule","status","value","filter","forEach","reason","minScreenSpaceRadius","boundingBox","_boundingBox","bbMin","bbMax","triangleCount","reduce","F","b","type","isGround","_levels","_defaultRenderInstanceData","Array","_highlightRenderInstanceDatas","Map","_instanceIndex","_cycleStartIndex","_slicePlane","_camera","v","_updateCyclesWithStaticCamera","_needFullCycle","produces","_produces","_hasTransparentLevels","D","shaderTransformation","symbol","materialParameters","addHandles","registerTask","O","LOD_RENDERER","initialize","_instanceBufferLayout","S","_glInstanceBufferLayout","y","events","on","_requestUpdateCycle","_ref","index","metadata","notifyGraphicGeometryChanged","_ref2","notifyGraphicVisibilityChanged","_allRenderInstanceData","values","_allRenderInstanceDataExceptHighlightShadow","T","push","hasHighlight","has","_enableLevelSelection","levels","baseBoundingBox","baseBoundingSphere","baseMaterial","slicePlaneEnabled","layerViewUid","instanceData","hasEmitters","some","hasEmissions","renderStats","size","renderedInstances","renderedTriangles","trianglesPerInstance","totalInstances","_createRenderInstanceDataArray","_context","w","initializeRenderContext","x","_levelSelector","E","B","uninitializeRenderContext","_invalidateOctree","get","hasHighlights","prepareRender","g","LOD_INSTANCE_RENDERER_DISABLE_UPDATES","bind","contentCamera","equals","copyFrom","runTask","A","acquireTechniques","visible","isVisibleForOutput","output","_getInstanceDatas","_ref3","_beginComponent","render","_ref4","_renderComponent","unbindBuffer","bindVAO","_r$highlight","highlight","name","from","_octree","f","d","N","transform","set","G","inverse","W","getState","getLodLevel","C","parameters","verticalOffset","forEachAlongRay","notifyShaderTransformationChanged","_octreeCached","_e$view","state","R","capacity","queryDepthRange","I","viewForward","findClosest","frustum","eye","z","arguments","undefined","requestRender","_startUpdateCycle","startUpdateCycle","readyToRun","beginUpdate","Math","ceil","done","p","lodLevel","freeTail","geHighlightOptionsPrev","every","isEmpty","delete","freeInstance","modelOrigin","P","getCombinedMedianScaleFactor","getHighlightName","concat","H","_","madeProgress","endUpdate","load","slot","beginSlot","runAppleAmdDriverHelper","bindTechnique","Y","assertCompatibleVertexAttributeLocations","q","LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL","setUniform4fv","k","min","setUniform1i","L","replace","headIndex","tailIndex","firstIndex","M","locations","drawArraysInstanced","primitiveType","transparent","allocateHead","j","modelOriginHi","modelOriginLo","model","modelNormal","color","olidColor","featureAttribute","V","constructOnly","prototype","readOnly","U"],"sourceRoot":""}